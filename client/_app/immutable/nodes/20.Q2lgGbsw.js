const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/hO-4xB7X.js","../chunks/Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{f as u,a as s,c as J,t as C}from"../chunks/CtfeAAbw.js";import{p as R,a as H,t as K,f as A,$ as W,n as q,s as D,c as M,g as n,h as z,r as L,b as S,e as P}from"../chunks/B4GrenNm.js";import{h as X}from"../chunks/DxSOTiY2.js";import{a as Z}from"../chunks/bf3FOAR_.js";import{i as tt}from"../chunks/CSsnQ7i2.js";import{h as et}from"../chunks/BeImZ7I_.js";import{p as m,s as rt,a as ot}from"../chunks/DvPjbdiY.js";import{p as N}from"../chunks/CEVJ7K31.js";import{g as at}from"../chunks/BNhMDwfB.js";import{a as it,c as nt,P as j,t as B,g as st}from"../chunks/BRrMSDP5.js";import{b as lt}from"../chunks/CHRSknKA.js";import{C as dt}from"../chunks/zKmJQbFp.js";import{E as I}from"../chunks/BVg5wqNm.js";import{L as ct}from"../chunks/DYQPks66.js";import{_ as mt}from"../chunks/C1FmrZbK.js";import{o as ut}from"../chunks/DlIBaGjY.js";import{M as ft}from"../chunks/D7DxCjf8.js";var pt=u('<div id="editor" class="bg-white dark:bg-black"></div>');function gt(_,a){R(a,!0);let f=m(a,"content",15),w=m(a,"embedOptions",3,!1),p=m(a,"fontOptions",3,!1),r=m(a,"headerDropdown",3,!0),g=m(a,"alignOptions",3,!0);const h=["surface","primary","secondary","tertiary","success","error","warning"].flatMap(t=>["50","200","500","800","950"].map(e=>`var(--color-${t}-${e})`)),y=[r()?[{header:[1,2,3,4,5,6,!1]}]:[{header:1},{header:2}],["bold","italic","underline","strike",{script:"sub"},{script:"super"}],...g()?[[{align:[]},{indent:"-1"},{indent:"+1"}],["link","blockquote","code-block"],[{list:"ordered"},{list:"bullet"}]]:[],w()?["image","video","formula"]:void 0,p()?[{font:[]},{size:["small",!1,"large","huge"]},{color:h},{background:h}]:void 0,["clean"]].filter(t=>t!==void 0);function x(t){let e=t;return Object.entries({"&nbsp;":" ","ql-indent-1":"ml-2","ql-indent-2":"ml-4","ql-indent-3":"ml-6","ql-align-right":"text-right","ql-align-center":"text-center","ql-align-justify":"text-justify","ql-font-serif":"font-serif","ql-font-monospace":"font-mono","ql-size-small":"text-sm","ql-size-large":"text-lg","ql-size-huge":"text-xl"}).forEach(([o,k])=>e=e.replaceAll(o,k)),N.sanitize(e,{ADD_ATTR:["target"]})}ut(async()=>{const{default:t}=await mt(async()=>{const{default:o}=await import("../chunks/hO-4xB7X.js");return{default:o}},__vite__mapDeps([0,1]),import.meta.url);let e=document.getElementById("editor");if(e){e.innerHTML=f();let o=new t(e,{theme:"snow",modules:{toolbar:y}});o.on("text-change",()=>{f(x(o.getSemanticHTML()))})}});var $=pt();s(_,$),H()}var ht=u(`<p>Configurations are READ ONLY for admin users. Please contact your administrator to make
          changes.</p>`),vt=u('<!> <div id="terms-of-service" class="bg-white dark:bg-black border px-2"><!></div>',1),bt=u(`<div>Once published, these terms will be live and every user will be prompted to accept them on
          their next login.</div> <div class="mt-3">Do you wish to continue?</div>`,1),_t=u('<!> <div class="flex justify-end"><!></div>',1);function Bt(_,a){R(a,!0);const[f,w]=rt(),p=()=>ot(it,"$isTopAdmin",f);let r=S(""),g=S(""),h=z(()=>n(r)!==n(g)),y=!1;async function x(){P(r,await st(j.TOS+"/latest"),!0),P(g,n(r),!0)}async function $(){await nt(j.TOS+"/update",n(r),{"Content-Type":"text/html"}).then(()=>{B.success({description:"Terms have been successfully published."}),at("/admin/configuration")}).catch(()=>B.error({description:"An error occured while publishing these terms. Make a backup and try again or contact an administrator."}))}X(t=>{K(()=>W.title=`${lt.applicationName??""} | Edit Terms of Service`)}),dt(_,{title:"Edit Terms of Service",backUrl:"/admin/configuration",backTitle:"Back to Configuration",children:(t,e)=>{var o=J(),k=A(o);Z(k,x,d=>{ct(d,{})},d=>{var v=_t(),O=A(v);{var T=l=>{var i=vt(),c=A(i);I(c,{"data-testid":"admin-warning",title:"Top Administrator Only",color:"warning",children:(F,wt)=>{var G=ht();s(F,G)},$$slots:{default:!0}});var b=D(c,2),Y=M(b);et(Y,()=>N.sanitize(n(r))),L(b),s(l,i)},Q=l=>{gt(l,{fontOptions:!0,get content(){return n(r)},set content(i){P(r,i,!0)}})};tt(O,l=>{p()?l(Q,!1):l(T)})}var E=D(O,2),U=M(E);const V=z(()=>!p()||!n(h));ft(U,{title:"Publish",width:"w-1/3","data-testid":"publish-terms",triggerBase:"btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 mt-3",get open(){return y},get disabled(){return n(V)},withDefault:!0,onconfirm:$,cancelClass:"border preset-tonal-error hover:preset-filled-error-500",trigger:i=>{q();var c=C("Publish");s(i,c)},children:(i,c)=>{var b=bt();q(2),s(i,b)},$$slots:{trigger:!0,default:!0}}),L(E),s(d,v)},d=>{I(d,{title:"API Error",children:(v,O)=>{q();var T=C("An error occured while retrieving current terms of service.");s(v,T)},$$slots:{default:!0}})}),s(t,o)},$$slots:{default:!0}}),H(),w()}export{Bt as component};
