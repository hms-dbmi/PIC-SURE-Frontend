import"../chunks/Bzak7iHL.js";import{p as D,f as b,d as g,s as f,n as C,j as k,t as y,b as i,k as T,u as Y,r as $,c as N,e as de,a as O,$ as ue}from"../chunks/DhSNEPDw.js";import{d as X,s as R,h as me}from"../chunks/DVtHS8ol.js";import{a as K}from"../chunks/Jhkhy7E3.js";import{i as re}from"../chunks/BG76zvuN.js";import{s as Z,a as Q}from"../chunks/CJ66PCUx.js";import{p as B,a as E,s as j}from"../chunks/DpjY2ypC.js";import{g as J}from"../chunks/BPde4ukL.js";import{b as pe,f as ve}from"../chunks/BZHGrlEE.js";import{E as I}from"../chunks/nxdkf_Tf.js";import{C as fe}from"../chunks/DCcVgSs7.js";import{S as V}from"../chunks/D0Q9DqMU.js";import{a as F,t as P}from"../chunks/BNC-bmXQ.js";import{d as ge,l as $e,r as be}from"../chunks/DQg6N8Wr.js";import{M as ee}from"../chunks/B9gq-btx.js";import{d as we,b as _e,l as ye}from"../chunks/owRDBXmR.js";import{d as he,l as xe,c as Ae}from"../chunks/7RAg21gG.js";import{g as Ce,l as Pe}from"../chunks/jke1iLgn.js";import{e as Ee,i as ke}from"../chunks/ByI6iVq5.js";import{p as Te}from"../chunks/wLQzkxGg.js";import{L as W}from"../chunks/bwStxD3u.js";function Re(s,a){s.stopPropagation(),J(`/admin/configuration/role/${a().cell}/edit`)}var De=b('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),Ne=b('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Se(s,a){D(a,!0);const n=()=>E(F,"$isTopAdmin",p),[p,h]=j(),e=B(a,"data",19,()=>({cell:"",row:{name:""}}));async function w(){if(F)try{await ge(e().cell),P.success({title:`Successfully deleted role '${e().row.name}'`})}catch(r){console.error(r),(r==null?void 0:r.status)===409?P.error({title:`Cannot delete role '${e().row.name}' as it is still in use by a user`}):P.error({title:`An unknown error occured while deleting role '${e().row.name}'`})}}var c=Ne(),o=g(c);o.__click=[Re,e];var _=f(o,2);{const r=u=>{var x=De();C(2),i(u,x)};let v=Y(()=>!n());ee(_,{get"data-testid"(){return`role-${e().cell??""}-delete`},title:"Delete Role?",confirmText:"Yes",cancelText:"No",get disabled(){return T(v)},onconfirm:w,triggerBase:"btn-icon-color",withDefault:!0,trigger:r,children:(u,x)=>{C();var A=k();y(()=>R(A,`Are you sure you want to delete role '${e().row.name??""}'?`)),i(u,A)},$$slots:{trigger:!0,default:!0}})}$(c),y(()=>{Z(o,"data-testid",`role-${e().cell}-edit-btn`),o.disabled=!n()}),i(s,c),N(),h()}X(["click"]);function qe(s,a){s.stopPropagation(),J(`/admin/configuration/privilege/${a().cell}/edit`)}var Oe=b('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),Fe=b('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Le(s,a){D(a,!0);const n=()=>E(F,"$isTopAdmin",p),[p,h]=j(),e=B(a,"data",19,()=>({cell:"",row:{name:""}}));async function w(){if(n())try{await we(e().cell),P.success({title:`Successfully deleted privilege '${e().row.name}'`})}catch(r){console.error(r),(r==null?void 0:r.status)===409?P.error({title:`Cannot delete privilege '${e().row.name}' as it is still in use by a role`}):P.error({title:`An unknown error occured while deleting privilege '${e().row.name}'`})}}var c=Fe(),o=g(c);o.__click=[qe,e];var _=f(o,2);{const r=u=>{var x=Oe();C(2),i(u,x)};let v=Y(()=>!n());ee(_,{get"data-testid"(){return`privilege-${e().cell??""}-delete`},title:"Delete Privilege?",confirmText:"Yes",cancelText:"No",get disabled(){return T(v)},onconfirm:w,triggerBase:"btn-icon-color",withDefault:!0,trigger:r,children:(u,x)=>{C();var A=k();y(()=>R(A,`Are you sure you want to delete privilege '${e().row.name??""}'?`)),i(u,A)},$$slots:{trigger:!0,default:!0}})}$(c),y(()=>{Z(o,"data-testid",`privilege-${e().cell}-edit-btn`),o.disabled=!n()}),i(s,c),N(),h()}X(["click"]);function Me(s,a){s.stopPropagation(),J(`/admin/configuration/connection/${a().cell}/edit`)}var He=b('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),Ie=b('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Ye(s,a){D(a,!0);const n=()=>E(F,"$isTopAdmin",p),[p,h]=j(),e=B(a,"data",19,()=>({cell:"",row:{label:""}}));async function w(){if(!n())return;const r=e().row.label;try{await he(e().cell),P.success({title:`Successfully deleted connection '${r}'`})}catch(v){console.error(v),(v==null?void 0:v.status)===409?P.error({title:`Cannot delete connection '${r}' as it is still in use by an application or user`}):P.error({title:`An unknown error occured while deleting connection '${r}'`})}}var c=Ie(),o=g(c);o.__click=[Me,e];var _=f(o,2);{const r=u=>{var x=He();C(2),i(u,x)};let v=Y(()=>!n());ee(_,{get"data-testid"(){return`connection-${e().cell??""}-delete`},title:"Delete Connection?",confirmText:"Yes",cancelText:"No",get disabled(){return T(v)},onconfirm:w,triggerBase:"btn-icon-color",withDefault:!0,trigger:r,children:(u,x)=>{C();var A=k();y(()=>R(A,`Are you sure you want to delete connection '${e().row.label??""}'?`)),i(u,A)},$$slots:{trigger:!0,default:!0}})}$(c),y(()=>{Z(o,"data-testid",`connection-${e().cell}-edit-btn`),o.disabled=!n()}),i(s,c),N(),h()}X(["click"]);function Be(s,a){D(a,!0),C();var n=k();y(p=>R(n,p),[()=>{var p;return a.data.cell?(p=Ce(a.data.cell))==null?void 0:p.name:"none"}]),i(s,n),N()}var je=b('<span class="badge preset-tonal-surface border border-surface-500 font-normal m-1"><span class="font-bold"> </span> </span>');function Je(s,a){D(a,!0);let n=B(a,"data",19,()=>({cell:"[]"})),p=Y(()=>Te(n().cell));var h=de(),e=O(h);Ee(e,17,()=>T(p),ke,(w,c)=>{var o=je(),_=g(o),r=g(_,!0);$(_);var v=f(_);$(o),y(()=>{R(r,T(c).label),R(v,`:${T(c).id??""}`)}),i(w,o)}),i(s,h),N()}var Ue=b(`<p>Configurations are READ ONLY for admin users. Please contact your administrator to make
        changes.</p>`),ze=b('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-role" href="/admin/configuration/role/new">+ Add Role</a></div></div> <!>',1),Ge=b('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-privilege" href="/admin/configuration/privilege/new">+ Add Privilege</a></div></div> <!>',1),Ke=b('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-connection" href="/admin/configuration/connection/new">+ Add Connection</a></div></div> <!>',1),Qe=b('<div id="misc-configs"><a href="/admin/configuration/terms/edit" class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500">Update Terms of Service</a></div>'),Ve=b('<!> <div id="role-table" class="mb-10"><h2>Roles Management</h2> <!></div> <div id="privilege-table" class="mb-10"><h2>Privileges Management</h2> <!></div> <div id="connection-table" class="mb-10"><h2>Connections Management</h2> <!></div> <!>',1);function bt(s,a){D(a,!0);const n=()=>E(F,"$isTopAdmin",w),p=()=>E(be,"$roles",w),h=()=>E(_e,"$privileges",w),e=()=>E(Ae,"$connections",w),[w,c]=j(),o={columns:[{dataElement:"name",label:"Name",sort:!0},{dataElement:"description",label:"Description",sort:!0},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Se}},_={columns:[{dataElement:"name",label:"Name",sort:!0},{dataElement:"description",label:"Description",sort:!0},{dataElement:"application",label:"Application Name",sort:!0},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Le,application:Be}},r={columns:[{dataElement:"label",label:"Label",sort:!0},{dataElement:"id",label:"ID",sort:!0},{dataElement:"subPrefix",label:"Sub prefix",sort:!0},{dataElement:"requiredFields",label:"Required fields"},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Ye,requiredFields:Je}};async function v(){await ye(),await Pe()}const u=L=>M=>{const H=M==null?void 0:M.uuid;J(`/admin/configuration/${L}/${H}/edit`)},x=u("role"),A=u("privilege"),ae=u("connection");me(L=>{y(()=>ue.title=`${pe.applicationName??""} | Configuration`)}),fe(s,{title:"Configuration",children:(L,M)=>{var H=Ve(),te=O(H);{var oe=t=>{I(t,{title:"Top Administrator Only",color:"warning",children:(l,m)=>{var d=Ue();i(l,d)},$$slots:{default:!0}})};re(te,t=>{n()||t(oe)})}var U=f(te,2),ie=f(g(U),2);K(ie,$e,t=>{W(t,{})},t=>{var l=ze(),m=O(l),d=g(m),S=g(d);$(d),$(m);var q=f(m,2);V(q,{tableName:"Roles",get data(){return p()},get columns(){return o.columns},get cellOverides(){return o.overrides},get rowClickHandler(){return x},isClickable:!0}),y(()=>Q(S,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${n()?"":"opacity-50 pointer-events-none"}`)),i(t,l)},t=>{I(t,{title:"API Error",children:(l,m)=>{C();var d=k("Something went wrong when sending your request for roles.");i(l,d)},$$slots:{default:!0}})}),$(U);var z=f(U,2),ne=f(g(z),2);K(ne,v,t=>{W(t,{})},t=>{var l=Ge(),m=O(l),d=g(m),S=g(d);$(d),$(m);var q=f(m,2);V(q,{tableName:"Privileges",get data(){return h()},get columns(){return _.columns},get cellOverides(){return _.overrides},get rowClickHandler(){return A},isClickable:!0}),y(()=>Q(S,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${n()?"":"opacity-50 pointer-events-none"}`)),i(t,l)},t=>{I(t,{title:"API Error",children:(l,m)=>{C();var d=k("Something went wrong when sending your request for priviledges and applications.");i(l,d)},$$slots:{default:!0}})}),$(z);var G=f(z,2),le=f(g(G),2);K(le,xe,t=>{W(t,{})},t=>{var l=Ke(),m=O(l),d=g(m),S=g(d);$(d),$(m);var q=f(m,2);V(q,{tableName:"Connections",get data(){return e()},get columns(){return r.columns},get cellOverides(){return r.overrides},get rowClickHandler(){return ae},isClickable:!0}),y(()=>Q(S,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${n()?"":"opacity-50 pointer-events-none"}`)),i(t,l)},t=>{I(t,{title:"API Error",children:(l,m)=>{C();var d=k("Something went wrong when sending your request for connections.");i(l,d)},$$slots:{default:!0}})}),$(G);var se=f(G,2);{var ce=t=>{var l=Qe();i(t,l)};re(se,t=>{ve.termsOfService&&t(ce)})}i(L,H)},$$slots:{default:!0}}),N(),c()}export{bt as component};
