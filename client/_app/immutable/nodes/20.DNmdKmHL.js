const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/BDBqjK3i.js","../chunks/Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import"../chunks/Bzak7iHL.js";import{p as R,f as p,b as s,c as N,t as G,e as J,a as q,$ as K,n as P,j as D,s as M,d as L,k as n,u as j,r as z,h as S,l as E}from"../chunks/pV5yBOfK.js";import{h as W}from"../chunks/D3FUfhzK.js";import{a as X}from"../chunks/CF-XIK1E.js";import{i as Z}from"../chunks/BAa5cEXk.js";import{h as tt}from"../chunks/xQt8NbMC.js";import{p as f,s as et,a as rt}from"../chunks/C2caA9Pm.js";import{g as ot}from"../chunks/BLfKYx2_.js";import{a as at,c as it,P as B,t as H,g as nt}from"../chunks/tvkVmxlD.js";import{b as st}from"../chunks/i859GThY.js";import{s as Q}from"../chunks/COZ3s8UQ.js";import{C as lt}from"../chunks/pqdQTL-E.js";import{E as I}from"../chunks/C6RsMIt9.js";import{L as dt}from"../chunks/BK-nQ0m1.js";import{_ as ct}from"../chunks/C1FmrZbK.js";import{o as mt}from"../chunks/B9BhT3Ut.js";import{M as ut}from"../chunks/DBMsBZi4.js";var ft=p('<div id="editor" class="bg-white dark:bg-black"></div>');function pt(b,a){R(a,!0);let c=f(a,"content",15),_=f(a,"embedOptions",3,!1),w=f(a,"fontOptions",3,!1),r=f(a,"headerDropdown",3,!0),g=f(a,"alignOptions",3,!0);const h=["surface","primary","secondary","tertiary","success","error","warning"].flatMap(t=>["50","200","500","800","950"].map(e=>`var(--color-${t}-${e})`)),y=[r()?[{header:[1,2,3,4,5,6,!1]}]:[{header:1},{header:2}],["bold","italic","underline","strike",{script:"sub"},{script:"super"}],...g()?[[{align:[]},{indent:"-1"},{indent:"+1"}],["link","blockquote","code-block"],[{list:"ordered"},{list:"bullet"}]]:[],_()?["image","video","formula"]:void 0,w()?[{font:[]},{size:["small",!1,"large","huge"]},{color:h},{background:h}]:void 0,["clean"]].filter(t=>t!==void 0);function $(t){let e=t;return Object.entries({"&nbsp;":" ","ql-indent-1":"ml-2","ql-indent-2":"ml-4","ql-indent-3":"ml-6","ql-align-right":"text-right","ql-align-center":"text-center","ql-align-justify":"text-justify","ql-font-serif":"font-serif","ql-font-monospace":"font-mono","ql-size-small":"text-sm","ql-size-large":"text-lg","ql-size-huge":"text-xl"}).forEach(([o,x])=>e=e.replaceAll(o,x)),Q(e,{ADD_ATTR:["target"]})}mt(async()=>{const{default:t}=await ct(async()=>{const{default:o}=await import("../chunks/BDBqjK3i.js");return{default:o}},__vite__mapDeps([0,1]),import.meta.url);let e=document.getElementById("editor");if(e){e.innerHTML=c();let o=new t(e,{theme:"snow",modules:{toolbar:y}});o.on("text-change",()=>{c($(o.getSemanticHTML()))})}});var k=ft();s(b,k),N()}var gt=p(`<p>Configurations are READ ONLY for admin users. Please contact your administrator to make
          changes.</p>`),ht=p('<!> <div id="terms-of-service" class="bg-white dark:bg-black border px-2"><!></div>',1),vt=p(`<div>Once published, these terms will be live and every user will be prompted to accept them on
          their next login.</div> <div class="mt-3">Do you wish to continue?</div>`,1),bt=p('<!> <div class="flex justify-end"><!></div>',1);function St(b,a){R(a,!0);const c=()=>rt(at,"$isTopAdmin",_),[_,w]=et();let r=S(""),g=S(""),h=j(()=>n(r)!==n(g)),y=!1;async function $(){E(r,await nt(B.TOS+"/latest"),!0),E(g,n(r),!0)}async function k(){await it(B.TOS+"/update",n(r),{"Content-Type":"text/html"}).then(()=>{H.success({description:"Terms have been successfully published."}),ot("/admin/configuration")}).catch(()=>H.error({description:"An error occured while publishing these terms. Make a backup and try again or contact an administrator."}))}W(t=>{G(()=>K.title=`${st.applicationName??""} | Edit Terms of Service`)}),lt(b,{title:"Edit Terms of Service",backUrl:"/admin/configuration",backTitle:"Back to Configuration",children:(t,e)=>{var o=J(),x=q(o);X(x,$,m=>{dt(m,{})},m=>{var v=bt(),T=q(v);{var O=i=>{var l=ht(),d=q(l);I(d,{"data-testid":"admin-warning",title:"Top Administrator Only",color:"warning",children:(Y,_t)=>{var F=gt();s(Y,F)},$$slots:{default:!0}});var u=M(d,2),A=L(u);tt(A,()=>Q(n(r))),z(u),s(i,l)},U=i=>{pt(i,{fontOptions:!0,get content(){return n(r)},set content(l){E(r,l,!0)}})};Z(T,i=>{c()?i(U,!1):i(O)})}var C=M(T,2),V=L(C);{const i=d=>{P();var u=D("Publish");s(d,u)};let l=j(()=>!c()||!n(h));ut(V,{title:"Publish",width:"w-1/3","data-testid":"publish-terms",triggerBase:"btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 mt-3",open:y,get disabled(){return n(l)},withDefault:!0,onconfirm:k,cancelClass:"border preset-tonal-error hover:preset-filled-error-500",trigger:i,children:(d,u)=>{var A=vt();P(2),s(d,A)},$$slots:{trigger:!0,default:!0}})}z(C),s(m,v)},m=>{I(m,{title:"API Error",children:(v,T)=>{P();var O=D("An error occured while retrieving current terms of service.");s(v,O)},$$slots:{default:!0}})}),s(t,o)},$$slots:{default:!0}}),N(),w()}export{St as component};
