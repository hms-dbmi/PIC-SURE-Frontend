import{s as ve,e as E,a as D,t as G,q as O,c as I,b as N,g as H,d as X,f as d,m as _,S as ne,i as $,h as w,O as ke,j as Te,n as g,H as re,I as ie,T as ae,a4 as Se,a5 as Le,P as we,k as Ne,o as ye,X as Ce,l as De,R as Q,V as oe,U as se}from"../chunks/scheduler.bui7uCNy.js";import{h as F,u as Ee}from"../chunks/await_block.B6WJ5gpV.js";import{e as R}from"../chunks/each.VHlBgARd.js";import{S as Ie,i as $e,d as j,e as q,m as z,t as k,a as P,f as U,h as He,g as J,b as K}from"../chunks/index.CNwEczq-.js";import{p as Ve}from"../chunks/stores.BKrgnEYe.js";import{c as Ae}from"../chunks/AuthProviderRegistry.D60XWJk7.js";import{r as Oe}from"../chunks/Search.B0ImN9T8.js";import{g as Be}from"../chunks/stores.SG0YUSz5.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.BKgxDQCH.js";import{f as Me}from"../chunks/index.D4B8xqkz.js";import{P as Pe}from"../chunks/ProgressRadial.CbTPnjvT.js";import{L as Re}from"../chunks/Logo.kd9vxhiu.js";import{b as M}from"../chunks/configuration.LanpiT2M.js";function ce(r){let e,n,t;return{c(){e=E("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ae(e.src,n=r[4])||_(e,"src",n),_(e,"alt",t=r[2].imageAlt),_(e,"class","mr-2 h-8")},m(l,c){$(l,e,c)},p(l,c){c&16&&!ae(e.src,n=l[4])&&_(e,"src",n),c&4&&t!==(t=l[2].imageAlt)&&_(e,"alt",t)},d(l){l&&d(e)}}}function fe(r){let e,n;return{c(){e=E("div"),n=new Se(!1),this.h()},l(t){e=I(t,"DIV",{class:!0});var l=N(e);n=Le(l,!1),l.forEach(d),this.h()},h(){n.a=null,_(e,"class","help-text svelte-12n96ld")},m(t,l){$(t,e,l),n.m(r[3],e)},p(t,l){l&8&&n.p(t[3])},d(t){t&&d(e)}}}function je(r){let e,n,t,l,c,i,o,a,h=r[4]&&ce(r),u=r[3]&&!r[2].alt&&fe(r);return{c(){e=E("button"),h&&h.c(),n=D(),t=G(r[0]),c=D(),u&&u.c(),i=O(),this.h()},l(s){e=I(s,"BUTTON",{type:!0,"data-testid":!0,class:!0});var f=N(e);h&&h.l(f),n=H(f),t=X(f,r[0]),f.forEach(d),c=H(s),u&&u.l(s),i=O(),this.h()},h(){_(e,"type","button"),_(e,"data-testid",r[5]),_(e,"class",l=ne(r[7].class??"btn variant-filled-primary m-1")+" svelte-12n96ld")},m(s,f){$(s,e,f),h&&h.m(e,null),w(e,n),w(e,t),$(s,c,f),u&&u.m(s,f),$(s,i,f),o||(a=ke(e,"click",r[8]),o=!0)},p(s,[f]){s[4]?h?h.p(s,f):(h=ce(s),h.c(),h.m(e,n)):h&&(h.d(1),h=null),f&1&&Te(t,s[0]),f&32&&_(e,"data-testid",s[5]),f&128&&l!==(l=ne(s[7].class??"btn variant-filled-primary m-1")+" svelte-12n96ld")&&_(e,"class",l),s[3]&&!s[2].alt?u?u.p(s,f):(u=fe(s),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},i:g,o:g,d(s){s&&(d(e),d(c),d(i)),h&&h.d(),u&&u.d(s),o=!1,a()}}}function qe(r,e,n){let t,{buttonText:l="Log In"}=e,{redirectTo:c="/"}=e,{provider:i}=e,{helpText:o}=e,a=async(s,f)=>{(await Ae(i)).login(s,f).then(()=>{Oe()})},h;i.imagesrc&&(h="./"+i.imagesrc);const u=()=>a(c,i.type);return r.$$set=s=>{n(7,e=re(re({},e),ie(s))),"buttonText"in s&&n(0,l=s.buttonText),"redirectTo"in s&&n(1,c=s.redirectTo),"provider"in s&&n(2,i=s.provider),"helpText"in s&&n(3,o=s.helpText)},r.$$.update=()=>{var s;r.$$.dirty&4&&n(5,t=`login-button-${(s=i.name)==null?void 0:s.toLowerCase()}`)},e=ie(e),[l,c,i,o,h,t,a,e,u]}class W extends Ie{constructor(e){super(),$e(this,e,qe,je,ve,{buttonText:0,redirectTo:1,provider:2,helpText:3})}}function ue(r,e,n){const t=r.slice();return t[12]=e[n],t}function he(r,e,n){const t=r.slice();return t[12]=e[n],t}function me(r,e,n){const t=r.slice();return t[12]=e[n],t}function ze(r){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Ue(r){var Y,Z,x,ee;let e,n,t,l,c,i,o,a,h,u,s,f,b=((Z=(Y=M)==null?void 0:Y.login)==null?void 0:Z.showSiteName)&&Ge(r),m=((x=r[10])==null?void 0:x.length)===0&&de();const v=[Fe,Xe],p=[];function V(y,T){return y[10].length>3?0:1}o=V(r),a=p[o]=v[o](r);let L=Je(r),S={ctx:r,current:null,token:null,hasCatch:!1,pending:We,then:Qe,catch:Ke,value:11,blocks:[,,,]};return F(s=(ee=r[1].data)==null?void 0:ee.altProviders,S),{c(){e=E("div"),n=E("header"),b&&b.c(),t=D(),l=E("div"),c=E("div"),m&&m.c(),i=D(),a.c(),h=D(),L&&L.c(),u=D(),S.block.c(),this.h()},l(y){e=I(y,"DIV",{id:!0,class:!0});var T=N(e);n=I(T,"HEADER",{class:!0});var A=N(n);b&&b.l(A),A.forEach(d),t=H(T),l=I(T,"DIV",{class:!0});var C=N(l);c=I(C,"DIV",{id:!0,class:!0});var B=N(c);m&&m.l(B),i=H(B),a.l(B),B.forEach(d),h=H(C),L&&L.l(C),u=H(C),S.block.l(C),C.forEach(d),T.forEach(d),this.h()},h(){_(n,"class","flex flex-col items-center"),_(c,"id","main-logins"),_(c,"class","grid grid-cols-1 gap-4 w-full"),_(l,"class","flex flex-col items-center justify-center"),_(e,"id","login-box"),_(e,"class","w-max mt-2")},m(y,T){$(y,e,T),w(e,n),b&&b.m(n,null),w(e,t),w(e,l),w(l,c),m&&m.m(c,null),w(c,i),p[o].m(c,null),w(l,h),L&&L.m(l,null),w(l,u),S.block.m(l,S.anchor=null),S.mount=()=>l,S.anchor=null,f=!0},p(y,T){var C,B,te,le;r=y,(B=(C=M)==null?void 0:C.login)!=null&&B.showSiteName&&b.p(r,T),((te=r[10])==null?void 0:te.length)===0?m||(m=de(),m.c(),m.m(c,i)):m&&(m.d(1),m=null);let A=o;o=V(r),o===A?p[o].p(r,T):(J(),P(p[A],1,1,()=>{p[A]=null}),K(),a=p[o],a?a.p(r,T):(a=p[o]=v[o](r),a.c()),k(a,1),a.m(c,null)),L.p(r,T),S.ctx=r,T&2&&s!==(s=(le=r[1].data)==null?void 0:le.altProviders)&&F(s,S)||Ee(S,r,T)},i(y){f||(k(a),k(S.block),f=!0)},o(y){P(a);for(let T=0;T<3;T+=1){const A=S.blocks[T];P(A)}f=!1},d(y){y&&d(e),b&&b.d(),m&&m.d(),p[o].d(),L&&L.d(),S.block.d(),S.token=null,S=null}}}function Ge(r){let e,n;return{c(){e=E("div"),n=G(r[4])},l(t){e=I(t,"DIV",{});var l=N(e);n=X(l,r[4]),l.forEach(d)},m(t,l){$(t,e,l),w(e,n)},p:g,d(t){t&&d(e)}}}function de(r){let e,n=`<div class="alert-message">No main authentication providers are registered. Please add them to your
                configuration. Click <a class="anchor" href="https://pic-sure.gitbook.io/pic-sure-developer-guide/configuring-pic-sure" target="_blank">Here</a>
                to learn how.</div>`;return{c(){e=E("aside"),e.innerHTML=n,this.h()},l(t){e=I(t,"ASIDE",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-1h3zug2"&&(e.innerHTML=n),this.h()},h(){_(e,"class","auth-warning alert variant-ghost-warning svelte-u0znbd")},m(t,l){$(t,e,l)},d(t){t&&d(e)}}}function Xe(r){let e,n,t=R(r[10]),l=[];for(let i=0;i<t.length;i+=1)l[i]=_e(he(r,t,i));const c=i=>P(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=O()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=O()},m(i,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(i,o);$(i,e,o),n=!0},p(i,o){if(o&10){t=R(i[10]);let a;for(a=0;a<t.length;a+=1){const h=he(i,t,a);l[a]?(l[a].p(h,o),k(l[a],1)):(l[a]=_e(h),l[a].c(),k(l[a],1),l[a].m(e.parentNode,e))}for(J(),a=t.length;a<l.length;a+=1)c(a);K()}},i(i){if(!n){for(let o=0;o<t.length;o+=1)k(l[o]);n=!0}},o(i){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)P(l[o]);n=!1},d(i){i&&d(e),Q(l,i)}}}function Fe(r){let e,n,t,l,c,i,o=R(r[10]),a=[];for(let u=0;u<o.length;u+=1)a[u]=pe(me(r,o,u));let h=r[2]&&ge(r);return{c(){e=E("select");for(let u=0;u<a.length;u+=1)a[u].c();n=D(),h&&h.c(),t=O(),this.h()},l(u){e=I(u,"SELECT",{});var s=N(e);for(let f=0;f<a.length;f+=1)a[f].l(s);s.forEach(d),n=H(u),h&&h.l(u),t=O(),this.h()},h(){r[0]===void 0&&we(()=>r[7].call(e))},m(u,s){$(u,e,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);oe(e,r[0],!0),$(u,n,s),h&&h.m(u,s),$(u,t,s),l=!0,c||(i=ke(e,"change",r[7]),c=!0)},p(u,s){if(s&2){o=R(u[10]);let f;for(f=0;f<o.length;f+=1){const b=me(u,o,f);a[f]?a[f].p(b,s):(a[f]=pe(b),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=o.length}s&3&&oe(e,u[0]),u[2]?h?(h.p(u,s),s&4&&k(h,1)):(h=ge(u),h.c(),k(h,1),h.m(t.parentNode,t)):h&&(J(),P(h,1,1,()=>{h=null}),K())},i(u){l||(k(h),l=!0)},o(u){P(h),l=!1},d(u){u&&(d(e),d(n),d(t)),Q(a,u),h&&h.d(u),c=!1,i()}}}function _e(r){let e,n;return e=new W({props:{buttonText:r[12].description||r[12].name,provider:r[12],redirectTo:r[3],helpText:r[12].helptext,class:"btn variant-outline-primary text-primary-500 w-full"}}),{c(){j(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},p(t,l){const c={};l&2&&(c.buttonText=t[12].description||t[12].name),l&2&&(c.provider=t[12]),l&2&&(c.helpText=t[12].helptext),e.$set(c)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function pe(r){let e,n=(r[12].description||r[12].name)+"",t,l;return{c(){e=E("option"),t=G(n),this.h()},l(c){e=I(c,"OPTION",{class:!0});var i=N(e);t=X(i,n),i.forEach(d),this.h()},h(){_(e,"class","capitalize"),e.__value=l=r[12].name,se(e,e.__value)},m(c,i){$(c,e,i),w(e,t)},p(c,i){i&2&&n!==(n=(c[12].description||c[12].name)+"")&&Te(t,n),i&2&&l!==(l=c[12].name)&&(e.__value=l,se(e,e.__value))},d(c){c&&d(e)}}}function ge(r){let e,n;return e=new W({props:{buttonText:"Log In",provider:r[2],redirectTo:r[3],helpText:r[2].helptext,class:"btn variant-outline-primary m-1 mt-2 w-full"}}),{c(){j(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},p(t,l){const c={};l&4&&(c.provider=t[2]),l&4&&(c.helpText=t[2].helptext),e.$set(c)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Je(r){let e,n;return{c(){e=E("a"),n=G(r[6]),this.h()},l(t){e=I(t,"A",{href:!0,class:!0});var l=N(e);n=X(l,r[6]),l.forEach(d),this.h()},h(){var t,l;_(e,"href",((l=(t=M)==null?void 0:t.login)==null?void 0:l.openPicsureLink)||"/"),_(e,"class","btn variant-outline-primary hover:variant-filled-primary text-primary-500 m-1 mt-2 w-full mb-1")},m(t,l){$(t,e,l),w(e,n)},p:g,d(t){t&&d(e)}}}function Ke(r){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Qe(r){let e,n,t=R(r[11]),l=[];for(let i=0;i<t.length;i+=1)l[i]=be(ue(r,t,i));const c=i=>P(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=O()},l(i){for(let o=0;o<l.length;o+=1)l[o].l(i);e=O()},m(i,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(i,o);$(i,e,o),n=!0},p(i,o){if(o&10){t=R(i[11]);let a;for(a=0;a<t.length;a+=1){const h=ue(i,t,a);l[a]?(l[a].p(h,o),k(l[a],1)):(l[a]=be(h),l[a].c(),k(l[a],1),l[a].m(e.parentNode,e))}for(J(),a=t.length;a<l.length;a+=1)c(a);K()}},i(i){if(!n){for(let o=0;o<t.length;o+=1)k(l[o]);n=!0}},o(i){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)P(l[o]);n=!1},d(i){i&&d(e),Q(l,i)}}}function be(r){let e,n;return e=new W({props:{buttonText:r[12].description||r[12].name,provider:r[12],redirectTo:r[3],helpText:r[12].helptext,class:"btn variant-outline-tertiary hover:variant-filled-tertiary m-1 w-full last:mb-4"}}),{c(){j(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},p(t,l){const c={};l&2&&(c.buttonText=t[12].description||t[12].name),l&2&&(c.provider=t[12]),l&2&&(c.helpText=t[12].helptext),e.$set(c)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function We(r){let e,n;return e=new Pe({props:{width:"w-3",value:void 0}}),{c(){j(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},p:g,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Ye(r){let e,n;return e=new Pe({props:{width:"w-10",value:void 0}}),{c(){j(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},p:g,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Ze(r){var b;let e,n,t,l,c,i,o,a,h,u,s;l=new Re({props:{class:"flex-none",height:4}});let f={ctx:r,current:null,token:null,hasCatch:!1,pending:Ye,then:Ue,catch:ze,value:10,blocks:[,,,]};return F(h=(b=r[1].data)==null?void 0:b.providers,f),{c(){e=E("section"),n=E("div"),t=E("h1"),j(l.$$.fragment),c=D(),i=E("p"),o=G(r[5]),a=D(),f.block.c(),this.h()},l(m){e=I(m,"SECTION",{id:!0,class:!0});var v=N(e);n=I(v,"DIV",{id:!0,class:!0});var p=N(n);t=I(p,"H1",{"data-testid":!0,class:!0});var V=N(t);q(l.$$.fragment,V),V.forEach(d),c=H(p),i=I(p,"P",{"data-testid":!0,class:!0});var L=N(i);o=X(L,r[5]),L.forEach(d),p.forEach(d),a=H(v),f.block.l(v),v.forEach(d),this.h()},h(){_(t,"data-testid","login-title"),_(t,"class","mb-6 w-full flex gap-2 items-center justify-center"),_(i,"data-testid","login-description"),_(i,"class","max-w-16 text-2xl"),_(n,"id","title-box"),_(n,"class","flex flex-col items-center text-center mb-8"),_(e,"id","logins"),_(e,"class","flex flex-col items-center h-screen w-full text-center place-content-center text-lg")},m(m,v){$(m,e,v),w(e,n),w(n,t),z(l,t,null),w(n,c),w(n,i),w(i,o),w(e,a),f.block.m(e,f.anchor=null),f.mount=()=>e,f.anchor=null,s=!0},p(m,[v]){var p;r=m,f.ctx=r,v&2&&h!==(h=(p=r[1].data)==null?void 0:p.providers)&&F(h,f)||Ee(f,r,v)},i(m){s||(k(l.$$.fragment,m),k(f.block),m&&(u||we(()=>{u=He(e,Me,{duration:600,x:"100%"}),u.start()})),s=!0)},o(m){P(l.$$.fragment,m);for(let v=0;v<3;v+=1){const p=f.blocks[v];P(p)}s=!1},d(m){m&&d(e),U(l),f.block.d(),f.token=null,f=null}}}function xe(r,e,n){var b,m,v;let t,l;Ne(r,Ve,p=>n(1,l=p));const c=Be(),i=l.url.searchParams.get("redirectTo")||"/",o=(b=M)==null?void 0:b.applicationName,a=(m=M)==null?void 0:m.login.description,h=(v=M)==null?void 0:v.login.openPicsureLinkText;let u;ye(()=>{u=sessionStorage.getItem("logout-reason"),u&&(c.trigger({message:u,background:"variant-filled-error"}),sessionStorage.removeItem("logout-reason"))});let s;function f(){s=Ce(this),n(0,s)}return r.$$.update=()=>{var p,V;r.$$.dirty&3&&n(2,t=s?(V=(p=l.data)==null?void 0:p.providers)==null?void 0:V.find(L=>L.name===s):void 0)},[s,l,t,i,o,a,h,f]}class mt extends Ie{constructor(e){super(),$e(this,e,xe,Ze,ve,{})}}export{mt as component};
