var Ce=Object.defineProperty;var _e=l=>{throw TypeError(l)};var $e=(l,e,a)=>e in l?Ce(l,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[e]=a;var ue=(l,e,a)=>$e(l,typeof e!="symbol"?e+"":e,a),Fe=(l,e,a)=>e.has(l)||_e("Cannot "+a);var R=(l,e,a)=>(Fe(l,e,"read from private field"),a?a.call(l):e.get(l)),Q=(l,e,a)=>e.has(l)?_e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,a);import{f as S,a as h,t as Se,c as ke}from"../chunks/DKNWTM-D.js";import{o as we}from"../chunks/DpyMT7OB.js";import{p as M,c as x,s as m,r as g,t as z,a as U,g as s,h as K,R as Le,d as B,e as Z,u as Oe,b as F,f as I,n as le,$ as Ae}from"../chunks/KPVYLOSR.js";import{s as X,d as ee,h as ze}from"../chunks/NtGCh5xy.js";import{i as L}from"../chunks/CDCmQmr-.js";import{b as oe,s as H,r as ce,d as Ee,g as Te}from"../chunks/Be_LeCLl.js";import{a as J,s as te,b as de,m as je}from"../chunks/B2Bg6RTa.js";import{b as he,r as Re}from"../chunks/BD7x6Jnt.js";import{g as He}from"../chunks/DNfOBMJV.js";import{p as Ve}from"../chunks/DjiALQWk.js";import{C as De}from"../chunks/a16e0A8-.js";import{p as A}from"../chunks/CfrH0FQi.js";import{g as V,G as ae,h as Be,O as Ie}from"../chunks/oR7KrioB.js";import{C as be}from"../chunks/CQcdv0WS.js";import{g as Me,s as pe,a as Ue,d as We,c as Pe,b as ve,e as ie,v as Je,r as Ke,f as Qe,h as Xe,i as Ye,j as Ne,p as Ze,k as et,l as tt,m as at}from"../chunks/NEMz9L9V.js";import{s as fe}from"../chunks/kg2g7Go4.js";import{b as rt,c as me}from"../chunks/BlQKM0Gb.js";import{b as nt}from"../chunks/3gfQC4Jj.js";import{E as st}from"../chunks/P3bGLiu7.js";import{L as ot}from"../chunks/BW_ShK1N.js";import{b as it}from"../chunks/BwVKHEJU.js";import{e as ne,i as se}from"../chunks/B5lqQSsR.js";import{P as lt}from"../chunks/l7jJndGx.js";import{g as ct}from"../chunks/BpV1Tt4c.js";import{t as dt}from"../chunks/CWjZNTTC.js";import{g as ge,a as vt}from"../chunks/XQ4prG3n.js";import{p as Ge}from"../chunks/5RoAwCU1.js";var ut=S("<div><!> <!> <!></div>");function ft(l,e){M(e,!0);const a=A(e,"active",19,()=>V.None),v=A(e,"class",3,""),c=A(e,"onselect",3,()=>{});var y=ut(),P=x(y);{var n=r=>{const t=K(()=>a()===V.Genomic);be(r,{"data-testid":"gene-variant-option",title:"Variants by gene name",subtitle:"Ex: Rare BRCA1 variants with high severity",size:"other",class:"w-1/4 h-20 min-h-20",get active(){return s(t)},onclick:()=>c()(V.Genomic)})};L(P,r=>{r(n)})}var o=m(P,2);{var i=r=>{const t=K(()=>a()===V.SNP);be(r,{"data-testid":"snp-option",title:"Specific Variants",subtitle:"Ex: chr5,148481541,T,A",size:"other",class:"w-1/4 h-20 min-h-20",get active(){return s(t)},onclick:()=>c()(V.SNP)})};L(o,r=>{r(i)})}var b=m(o,2);L(b,r=>{}),g(y),z(()=>oe(y,1,`flex flex-row justify-center justify-items-center gap-16 ${v()??""??""}`)),h(l,y),U()}var mt=S('<span class="absolute top-0 left-1 p-1 text-error-600-400 text-xs">* Required</span>'),ht=S("<div> </div>"),pt=S('<span class="flex-none ml-1"><!></span>'),_t=S('<span class="flex-none ml-1"><!></span>'),bt=S('<div><div class="relative rounded-t-2xl bg-primary-300-700 p-4 items-center flex"><!> <div class="flex-auto text-center"><div class="font-bold"> </div> <!></div> <!> <!></div> <div class="h-full p-2 border rounded-b-2xl border-surface-300-700"><!></div></div>');function re(l,e){M(e,!0);const a=A(e,"title",3,""),v=A(e,"subtitle",3,""),c=A(e,"required",3,!1),y=A(e,"data-testid",3,""),P=A(e,"class",3,"");var n=bt(),o=x(n),i=x(o);{var b=G=>{var u=mt();h(G,u)};L(i,G=>{c()&&G(b)})}var r=m(i,2),t=x(r),p=x(t,!0);g(t);var d=m(t,2);{var _=G=>{var u=ht(),N=x(u,!0);g(u),z(()=>X(N,v())),h(G,u)};L(d,G=>{v()&&G(_)})}g(r);var w=m(r,2);{var q=G=>{var u=pt(),N=x(u);fe(N,()=>e.action),g(u),h(G,u)};L(w,G=>{e.action&&G(q)})}var k=m(w,2);{var C=G=>{var u=_t(),N=x(u);fe(N,()=>e.help),g(u),h(G,u)};L(k,G=>{e.help&&G(C)})}g(o);var f=m(o,2),O=x(f);fe(O,()=>e.children??Le),g(f),g(n),z(G=>{oe(n,1,`flex flex-col ${P()??""}`),H(n,"data-testid",G),X(p,a())},[()=>y()||a().replaceAll(" ","-").toLowerCase()]),h(l,n),U()}var gt=S('<p class="text-center"></p> <p class="text-center">If you have the rsID of the variant, you can use the <a href="https://www.ncbi.nlm.nih.gov/snp/" target="_blank" rel="noopener noreferrer" class="anchor">dbSNP database</a> to find the genomic coordinates.</p> <p class="text-center font-bold my-6"><em class="font-bold">Example:</em> chr5,148481541,T,A</p> <div class="flex gap-2 mx-auto my-8 w-1/2"><input type="search" class="input" placeholder="chromosome (chr#), position, reference allele, variant allele" data-testid="snp-search-box"/> <button type="button" data-testid="snp-search-btn" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Search <!></button></div> <!>',1);function yt(l,e){var N;M(e,!0);const a=A(e,"search",3,""),v=A(e,"disabled",3,!1),c=A(e,"onvalid",3,()=>{}),y=((N=he.genomic)==null?void 0:N.defaultGenomeBuild)||"GRCh38",P=/^\w+,\d+,(A|T|C|G)+,(A|T|C|G)+$/;let n,o=B(!1),i=B(!1),b=B(Z(a())),r=K(()=>P.test(s(b)));Oe(()=>{if(s(b)&&!s(r)){t();return}else p()});function t(){n.classList.add("required"),n.setCustomValidity("Please check that value matches: chromosome (chr#), position, reference allele, variant allele."),n.reportValidity()}function p(){n.classList.remove("required"),n.setCustomValidity(""),F(o,!1)}async function d(){F(i,!0);let $;try{$=await Me({search:s(b),constraint:""})>0}catch{$=!1}F(i,!1),$?c()({search:s(b),constraint:""}):F(o,!0)}var _=gt(),w=I(_);w.textContent=`Enter the following information into the search bar using genome build ${y}: chromosome,
  position, reference allele, variant allele.`;var q=m(w,6),k=x(q);ce(k),k.__keydown=p,nt(k,$=>n=$,()=>n);var C=m(k,2);C.__click=d;var f=m(x(C));{var O=$=>{ot($,{ring:!0,size:"micro",color:"white"})};L(f,$=>{s(i)&&$(O)})}g(C),g(q);var G=m(q,2);{var u=$=>{st($,{children:(E,D)=>{le();var Y=Se(`We couldn't find any results for your search term. Please check to ensure the information you
    have entered is correct or try a different search.`);h(E,Y)},$$slots:{default:!0}})};L(G,$=>{s(o)&&$(u)})}z(()=>{k.disabled=v(),C.disabled=v()||!s(r)||s(i)}),rt(k,()=>s(b),$=>F(b,$)),h(l,_),U()}ee(["keydown","click"]);var xt=(l,e,a,v)=>e()({search:a.snp.search,constraint:s(v)}),St=S('<span class="mr-4"> </span> <select class="select !w-96" data-testid="snp-constraint" required><option selected disabled>Select Genotype</option><option>Heterozygous</option><option>Homozygous</option><option>Heterozygous or homozygous</option></select> <button type="button" aria-label="Save SNP" data-testid="snp-save-btn" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Save SNP</button>',1);function kt(l,e){M(e,!0);let a=A(e,"onsave",3,()=>{}),v=B(Z(e.snp.constraint));var c=St(),y=I(c),P=x(y,!0);g(y);var n=m(y,2),o=x(n);o.value=o.__value=!0;var i=m(o),b={},r=m(i),t={},p=m(r),d={};g(n);var _=m(n,2);_.__click=[xt,a,e,v],z(()=>{X(P,e.snp.search),b!==(b=ae.Heterozygous)&&(i.value=(i.__value=ae.Heterozygous)??""),t!==(t=ae.Homozygous)&&(r.value=(r.__value=ae.Homozygous)??""),d!==(d=ae.HeterozygousOrHomozygous)&&(p.value=(p.__value=ae.HeterozygousOrHomozygous)??""),_.disabled=s(v)===""}),it(n,()=>s(v),w=>F(v,w)),h(l,c),U()}ee(["click"]);var wt=S("<p>No filters added.</p>"),Pt=S('<div class="font-bold flex items-center justify-center p-6">AND</div>'),Nt=(l,e,a)=>e()(s(a)),Gt=(l,e,a)=>e()(s(a)),qt=S('<!> <div class="border rounded-sm border-surface-300-700 p-3 flex gap-4"><div class="flex-auto"><div class="text-surface-700-300 font-bold"> </div> <div class="text-surface-600-400"> </div></div> <div class="flex-none text-right"><button type="button" title="Edit" aria-label="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square"></i></button> <button type="button" title="Delete" aria-label="Delete" class="btn-icon-color"><i class="fa-solid fa-trash"></i></button></div></div>',1),Ct=S('<div class="flex items-center justify-center"><!> <!></div>');function $t(l,e){M(e,!0);const[a,v]=te(),c=()=>J(pe,"$selectedSNPs",a),y=A(e,"onedit",3,()=>{}),P=A(e,"ondelete",3,()=>{});var n=Ct(),o=x(n);{var i=r=>{var t=wt();h(r,t)};L(o,r=>{c().length===0&&r(i)})}var b=m(o,2);ne(b,1,c,se,(r,t,p)=>{var d=qt(),_=I(d);{var w=E=>{var D=Pt();h(E,D)};L(_,E=>{p!==0&&E(w)})}var q=m(_,2),k=x(q),C=x(k),f=x(C);g(C);var O=m(C,2),G=x(O,!0);g(O),g(k);var u=m(k,2),N=x(u);N.__click=[Nt,y,t];var $=m(N,2);$.__click=[Gt,P,t],g(u),g(q),z(()=>{X(f,`${s(t).search??""}:`),X(G,Be[s(t).constraint]),H(N,"data-testid",`snp-edit-btn-${s(t).search}`),H($,"data-testid",`snp-delete-btn-${s(t).search}`)}),h(r,d)}),g(n),h(l,n),U(),v()}ee(["click"]);var Ft=S('<hr/> <div class="flex gap-2 items-center justify-center my-8"><!></div>',1),Lt=S("<!> <!>",1),Ot=S('<button class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),At=S('<div id="snp-search"><!> <!></div>');function zt(l,e){M(e,!0);const[a,v]=te(),c=()=>J(pe,"$selectedSNPs",a);let y=A(e,"class",3,"");const P={search:"",constraint:""};let n=B(Z(P));function o(_){F(n,_,!0)}function i(_){Ue(_),F(n,P,!0)}function b(_){F(n,_,!0)}function r(_){We(_)}var t=At(),p=x(t);re(p,{title:"Search for Genomic Variants",children:(_,w)=>{var q=Lt(),k=I(q);const C=K(()=>!!s(n).search);yt(k,{get disabled(){return s(C)},get search(){return s(n).search},onvalid:o});var f=m(k,2);{var O=G=>{var u=Ft(),N=m(I(u),2),$=x(N);kt($,{get snp(){return s(n)},onsave:i}),g(N),h(G,u)};L(f,G=>{s(n).search&&G(O)})}h(_,q)},$$slots:{default:!0}});var d=m(p,2);re(d,{title:"Summary of Selected Filters",action:w=>{var q=Ot();q.__click=function(...k){var C;(C=Pe)==null||C.apply(this,k)},z(()=>q.disabled=c().length===0),h(w,q)},children:(w,q)=>{$t(w,{onedit:b,ondelete:r})},$$slots:{action:!0,default:!0}}),g(t),z(()=>oe(t,1,`grid grid-col-1 gap-3 ${(y()||"")??""}`)),h(l,t),U(),v()}ee(["click"]);var Et=S('<i class="fa-solid fa-circle-question text-primary-800-200 hover:text-secondary-800-200"></i>'),Tt=S("<div><!></div>");function ye(l,e){const a=A(e,"text",3,""),v=A(e,"id",3,"");var c=ke(),y=I(c);{var P=n=>{var o=Tt(),i=x(o);lt(i,{get"data-testid"(){return`${v()??""}-content`},trigger:r=>{var t=Et();h(r,t)},children:(r,t)=>{le();var p=Se();z(()=>X(p,a())),h(r,p)},$$slots:{trigger:!0,default:!0}}),g(o),z(()=>H(o,"data-testid",v())),h(n,o)};L(y,n=>{a()&&n(P)})}h(l,c)}var jt=S('<div class="flex gap-4 mb-2"><!></div>');function Rt(l,e){M(e,!0);const[a,v]=te(),c=()=>J(ve,"$selectedGenes",a);let y=B(Z([])),P=K(()=>c().length===0?s(y):s(y).filter(w=>!c().includes(w))),n="",o=20,i=0,b=1,r=B(!1),t=B(!1);async function p(w=""){const q=n!==w;if(!(!q&&(i>=b||s(t)))){F(r,!0);try{const k=await ct(`picsure/search/${Re.hpds}/values/?`+new URLSearchParams({genomicConceptPath:"Gene_with_variant",query:w,page:(q?1:i+1).toString(),size:o.toString()}),{"content-type":"application/json"});if(k!=null&&k.error)throw k.error;const C=k.results;F(y,q?C:[...s(y),...C],!0),b=Math.ceil(k.total/o),i=k.page,n=w,F(t,C.length<o)}catch(k){console.error(k),dt.error({title:"An error occurred while loading genes list."})}finally{F(r,!1)}}}we(async()=>{await p()});var d=jt(),_=x(d);Ie(_,{showSelectAll:!1,showClearAll:!1,get allOptionsLoaded(){return s(t)},onscroll:p,get unselectedOptions(){return s(P)},set unselectedOptions(w){F(P,w,!0)},get selectedOptions(){return je(),c()},set selectedOptions(w){de(ve,w)},get currentlyLoading(){return s(r)},set currentlyLoading(w){F(r,w,!0)}}),g(d),h(l,d),U(),v()}var Ht=S('<label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Rare" type="checkbox"/> Rare</label> <label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Common" type="checkbox"/> Common</label> <label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Novel" type="checkbox"/> Novel</label>',1);function Vt(l){const[e,a]=te(),v=()=>J(ie,"$selectedFrequency",e),c=[];var y=Ht(),P=I(y),n=x(P);ce(n),n.value=n.__value="Rare",le(),g(P);var o=m(P,2),i=x(o);ce(i),i.value=i.__value="Common",le(),g(o);var b=m(o,2),r=x(b);ce(r),r.value=r.__value="Novel",le(),g(b),me(c,[],n,v,t=>de(ie,t)),me(c,[],i,v,t=>de(ie,t)),me(c,[],r,v,t=>de(ie,t)),h(l,y),a()}var Dt=(l,e)=>e.node.toggleOpen(),Bt=S("<i></i>"),It=S('<i class="fa-solid fa-minus"></i>'),Mt=(l,e)=>e.node.toggleSelected(),Ut=S('<details class="tree-item"><summary class="tree-item-summary list-none [&amp;::-webkit-details-marker]:hidden flex items-center cursor-pointer space-x-4 rounded-container p-0 hover:preset-tonal-primary w-full" role="treeitem"><button type="button" class="m-1 ml-2"><!></button> <input class="checkbox tree-item-checkbox mr-1" type="checkbox"/> <label class="w-full"> </label></summary> <div class="tree-item-children ml-4" role="group"><!></div></details>');function qe(l,e){M(e,!0);var a=Ut(),v=x(a),c=x(v);c.__click=[Dt,e];var y=x(c);{var P=d=>{var _=Bt();z(()=>oe(_,1,`fa-solid fa-angle-${e.node.open?"up":"down"}`)),h(d,_)},n=d=>{var _=It();h(d,_)};L(y,d=>{e.node.isLeaf?d(n,!1):d(P)})}g(c);var o=m(c,2);ce(o),o.__click=[Mt,e];var i=m(o,2),b=x(i,!0);g(i),g(v);var r=m(v,2),t=x(r);{var p=d=>{var _=ke(),w=I(_);ne(w,17,()=>e.node.children,se,(q,k)=>{qe(q,{get node(){return s(k)}})}),h(d,_)};L(t,d=>{!e.node.isLeaf&&e.node.open&&d(p)})}g(r),g(a),z(()=>{H(a,"data-testid",`tree-item:${e.node.name??""}-${e.node.value??""}`),H(a,"aria-disabled",e.node.disabled),a.open=e.node.open,H(v,"aria-selected",e.node.allSelected),H(v,"aria-expanded",e.node.open),H(c,"id",`tree-item-btn:${e.node.name??""}-${e.node.value??""}`),H(c,"data-testid",`tree-item-btn:${e.node.name??""}-${e.node.value??""}`),H(c,"title",e.node.isLeaf?void 0:`${e.node.open?"Close":"Open"} node`),H(c,"name",e.node.name),H(c,"tabindex",e.node.isLeaf?-1:0),H(o,"id",`checkbox:${e.node.name??""}-${e.node.value??""}`),H(o,"data-testid",`checkbox:${e.node.name??""}-${e.node.value??""}`),H(o,"name",e.node.name),Ee(o,e.node.value),Te(o,e.node.allSelected),o.indeterminate=e.node.indeterminant,H(i,"for",`${e.node.isLeaf?"checkbox:":"tree-item-btn:"}${e.node.name??""}-${e.node.value??""}`),X(b,e.node.value),H(r,"data-testid",`tree-item-children:${e.node.name??""}`)}),h(l,a),U()}ee(["click"]);var Wt=S("<div></div>");function Jt(l,e){var b,r,t,p,d,_,w,q,k;M(e,!0);let a=A(e,"nodes",19,()=>[]),v=A(e,"onselect",3,()=>{}),c=A(e,"onunselect",3,()=>{}),y=A(e,"fullWidth",3,!1);class P{constructor(f,O,G=[],u=!1,N=!1){ue(this,"name","");ue(this,"value","");Q(this,b,B(!1));Q(this,r,B(!1));Q(this,t,B(!1));Q(this,p,B(Z([])));Q(this,d,K(()=>this.children.length===0));Q(this,_,K(()=>this.isLeaf?this.selected:this.children.some(f=>f.someSelected)));Q(this,w,K(()=>this.isLeaf?this.selected:this.children.every(f=>f.allSelected)));Q(this,q,K(()=>this.isLeaf?!this.selected:!this.someSelected));Q(this,k,K(()=>this.isLeaf?!1:this.someSelected&&!this.allSelected));this.name=f,this.value=O,this.children=G,this.open=u,this.selected=N}get open(){return s(R(this,b))}set open(f){F(R(this,b),f,!0)}get selected(){return s(R(this,r))}set selected(f){F(R(this,r),f,!0)}get disabled(){return s(R(this,t))}set disabled(f){F(R(this,t),f,!0)}get children(){return s(R(this,p))}set children(f){F(R(this,p),f,!0)}get isLeaf(){return s(R(this,d))}set isLeaf(f){F(R(this,d),f)}get someSelected(){return s(R(this,_))}set someSelected(f){F(R(this,_),f)}get allSelected(){return s(R(this,w))}set allSelected(f){F(R(this,w),f)}get noneSelected(){return s(R(this,q))}set noneSelected(f){F(R(this,q),f)}get indeterminant(){return s(R(this,k))}set indeterminant(f){F(R(this,k),f)}select(){this.isLeaf?(this.selected=!0,v()(this.value)):(this.children.forEach(f=>f.select()),this.open=!0)}unselect(){this.isLeaf?(this.selected=!1,c()(this.value)):this.children.forEach(f=>f.unselect())}toggleSelected(){this.allSelected?this.unselect():this.select()}toggleOpen(){this.isLeaf||(this.open=!this.open)}}b=new WeakMap,r=new WeakMap,t=new WeakMap,p=new WeakMap,d=new WeakMap,_=new WeakMap,w=new WeakMap,q=new WeakMap,k=new WeakMap;function n(C){const{name:f,value:O,open:G,selected:u}=C;let N=[],$=G;return C.children.length>0&&(N=C.children.map(n),$=N.some(E=>E.someSelected)),new P(f,O,N,$,u)}let o=Z(a().map(n));var i=Wt();ne(i,21,()=>o,se,(C,f)=>{qe(C,{get node(){return s(f)}})}),g(i),z(()=>oe(i,1,`overflow-auto h-[350.75px] ${y()?"w-full":""}`)),h(l,i),U()}function Kt(l,e){M(e,!0);const[a,v]=te(),c=()=>J(Xe,"$selectedConsequence",a);let y=Z(Je.map(({key:P,children:n})=>({name:"severity",value:P,children:n.map(o=>({name:P,value:o,children:[],open:!1,selected:c().includes(o)})),open:!1,selected:!1})));Jt(l,{get nodes(){return y},onselect:Qe,onunselect:Ke}),U(),v()}var Qt=S('<span class="font-bold mx-1 text-primary-500">OR</span>'),Xt=S("<!> ",1),Yt=S('<span class="italic">None</span>'),Zt=S('<span class="font-bold mx-1 text-primary-500">OR</span>'),ea=S("<!> ",1),ta=S('<span class="italic">None</span>'),aa=S('<span class="font-bold mx-1 text-primary-500">OR</span>'),ra=S("<!> ",1),na=S('<span class="italic">None</span>'),sa=S('<div class="overflow-auto flex"><div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-13v7sph"><span class="font-bold">Geneomic Region:</span> <div id="selected-variant" class="text-center break-words"><!> <!></div></div> <div class="font-bold flex items-center justify-center w-1/15 svelte-13v7sph">AND</div> <div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-13v7sph"><span class="font-bold">Calculated Consequence:</span> <div id="selected-consequence" class="text-center break-words"><!> <!></div></div> <div class="font-bold flex items-center justify-center w-1/15 svelte-13v7sph">AND</div> <div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-13v7sph"><span class="font-bold">Variant Frequency:</span> <div id="selected-frequency" class="text-center break-words"><!> <!></div></div></div>');function oa(l,e){M(e,!0);const[a,v]=te(),c=()=>J(ve,"$selectedGenes",a),y=()=>J(Ye,"$consequences",a),P=()=>J(ie,"$selectedFrequency",a);var n=sa(),o=x(n),i=m(x(o),2),b=x(i);ne(b,1,c,se,(u,N,$)=>{var E=Xt(),D=I(E);{var Y=j=>{var W=Qt();h(j,W)};L(D,j=>{$!==0&&j(Y)})}var T=m(D);z(()=>X(T,` ${s(N)??""}`)),h(u,E)});var r=m(b,2);{var t=u=>{var N=Yt();h(u,N)};L(r,u=>{c().length===0&&u(t)})}g(i),g(o);var p=m(o,4),d=m(x(p),2),_=x(d);ne(_,1,y,se,(u,N,$)=>{var E=ea(),D=I(E);{var Y=j=>{var W=Zt();h(j,W)};L(D,j=>{$!==0&&j(Y)})}var T=m(D);z(()=>X(T,` ${s(N)??""}`)),h(u,E)});var w=m(_,2);{var q=u=>{var N=ta();h(u,N)};L(w,u=>{y().length===0&&u(q)})}g(d),g(p);var k=m(p,4),C=m(x(k),2),f=x(C);ne(f,1,P,se,(u,N,$)=>{var E=ra(),D=I(E);{var Y=j=>{var W=aa();h(j,W)};L(D,j=>{$!==0&&j(Y)})}var T=m(D);z(()=>X(T,` ${s(N)??""}`)),h(u,E)});var O=m(f,2);{var G=u=>{var N=na();h(u,N)};L(O,u=>{P().length===0&&u(G)})}g(C),g(k),g(n),h(l,n),U(),v()}function ia(){ve.set([])}var la=S('<button data-testid="clear-selected-genes-btn" class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),ca=S('<button data-testid="clear-gene-filters-btn" class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),da=S('<div id="gene-search"><!> <!> <!> <!></div>');function va(l,e){var o,i,b;M(e,!0);const a=(b=(i=(o=he)==null?void 0:o.help)==null?void 0:i.popups)==null?void 0:b.genomicFilter;var v=da(),c=x(v);re(c,{title:"Search for Gene with Variant",subtitle:"Use the official gene symbol.",required:!0,action:t=>{var p=la();p.__click=[ia],h(t,p)},children:(t,p)=>{Rt(t,{})},$$slots:{action:!0,default:!0}});var y=m(c,2);re(y,{title:"Select Calculated Consequence",subtitle:"The calculated consequence is based on VEP annotation.",help:t=>{ye(t,{id:"cons-help-popup",get text(){return a.consequence}})},children:(t,p)=>{Kt(t,{})},$$slots:{help:!0,default:!0}});var P=m(y,2);re(P,{title:"Select Variant Frequency",help:t=>{ye(t,{id:"freq-help-popup",get text(){return a.frequency}})},children:(t,p)=>{Vt(t)},$$slots:{help:!0,default:!0}});var n=m(P,2);re(n,{title:"Summary of Selected Filters",class:"col-span-3",action:t=>{var p=ca();p.__click=function(...d){var _;(_=Ne)==null||_.apply(this,d)},h(t,p)},children:(t,p)=>{oa(t,{})},$$slots:{action:!0,default:!0}}),g(v),z(()=>oe(v,1,`grid grid-col-3 gap-3 ${(e.class||"")??""}`)),h(l,v),U()}ee(["click"]);function xe(l,e,a,v){const c=s(e)===V.Genomic?tt():at();vt(c),a(),de(Ge,!0),He("/explorer")}var ua=S('<div class="flex justify-end my-4"><button data-testid="save-filter-btn" type="button" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Save Filter <i class="fa-solid fa-plus ml-3"></i></button></div>'),fa=S('<div class="flex justify-end my-4" data-testid="filter-options-container"><button data-testid="add-filter-btn" type="button" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Add Filter <i class="fa-solid fa-plus ml-3"></i></button></div>'),ma=S("<!> <!>",1),ha=S("<!> <!>",1);function Ia(l,e){M(e,!0);const[a,v]=te(),c=()=>J(Ve,"$page",a),y=()=>J(Ge,"$panelOpen",a),P=()=>J(ve,"$selectedGenes",a),n=()=>J(pe,"$selectedSNPs",a);let o=c().url.searchParams.get("edit")||"",i=B(Z(["snp","genomic"].includes(o)?o:V.None));function b(){Ne(),Pe()}function r(){if(s(i)===V.Genomic){const d=ge("genomic");d.length===1&&Ze(d[0])}else if(s(i)===V.SNP){const d=ge("snp");d.length===1&&et(d[0])}}we(r);function t(d){F(i,d,!0),r()}let p=K(()=>s(i)===V.Genomic&&P().length>0||s(i)===V.SNP&&n().length>0);ze(d=>{z(()=>Ae.title=`${he.applicationName??""} | Gemonic Filter`)}),De(l,{full:!0,title:"Genomic Filtering",backUrl:"/explorer",backAction:b,backTitle:"Back to Explore",transition:!0,children:(d,_)=>{var w=ha(),q=I(w);{var k=O=>{ft(O,{class:"my-4",onselect:t,get active(){return s(i)}})};L(q,O=>{O(k)})}var C=m(q,2);{var f=O=>{var G=ma(),u=I(G);{var N=T=>{va(T,{class:"mb-0 mt-6"})},$=T=>{zt(T,{class:"mt-6"})};L(u,T=>{s(i)===V.Genomic?T(N):T($,!1)})}var E=m(u,2);{var D=T=>{var j=ua(),W=x(j);W.__click=[xe,i,b,y],g(j),z(()=>W.disabled=!s(p)),h(T,j)},Y=T=>{var j=fa(),W=x(j);W.__click=[xe,i,b,y],g(j),z(()=>{H(W,"title",s(p)?"Add Filter":s(i)===V.Genomic?"A gene is required":"A SNP is required"),W.disabled=!s(p)}),h(T,j)};L(E,T=>{o?T(D):T(Y,!1)})}h(O,G)};L(C,O=>{s(i)!==V.None&&O(f)})}h(d,w)},$$slots:{default:!0}}),U(),v()}ee(["click"]);export{Ia as component};
