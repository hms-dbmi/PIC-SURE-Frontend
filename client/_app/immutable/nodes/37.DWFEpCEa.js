var Ge=Object.defineProperty;var _e=c=>{throw TypeError(c)};var qe=(c,e,a)=>e in c?Ge(c,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[e]=a;var ve=(c,e,a)=>qe(c,typeof e!="symbol"?e+"":e,a),Ce=(c,e,a)=>e.has(c)||_e("Cannot "+a);var j=(c,e,a)=>(Ce(c,e,"read from private field"),a?a.call(c):e.get(c)),X=(c,e,a)=>e.has(c)?_e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(c):e.set(c,a);import"../chunks/Bzak7iHL.js";import{o as Se}from"../chunks/xU7jw7XU.js";import{p as M,f as k,d as y,s as h,r as _,t as E,b as g,c as U,k as r,u as K,B as Fe,h as I,i as Y,o as $e,l as $,a as W,n as ue,j as Le,e as Oe,$ as ze}from"../chunks/DhSNEPDw.js";import{s as Q,d as Z,h as Ae}from"../chunks/DVtHS8ol.js";import{i as L}from"../chunks/BG76zvuN.js";import{s as se,b as T,r as ie,f as je,d as Ee,h as Re}from"../chunks/aV0zye_u.js";import{p as A,a as J,s as ee,c as ce,m as Te}from"../chunks/DpjY2ypC.js";import{b as he}from"../chunks/BOAiLg0g.js";import{g as He}from"../chunks/Dkbkn6HV.js";import{p as Ve}from"../chunks/Jem-ehAR.js";import{C as De}from"../chunks/5IRW-zVC.js";import{O as B,G as te,n as Be,o as be,j as Ie}from"../chunks/Bji3XOvx.js";import{C as ge}from"../chunks/Cr1yGYQD.js";import{g as Me,s as pe,a as Ue,d as We,c as ke,b as de,e as le,v as Je,r as Ke,f as Qe,h as Xe,i as Ye,j as Ne,p as Ze,k as et,l as tt,m as at}from"../chunks/Qw6Ii7Tz.js";import{s as fe}from"../chunks/C8tG8t5X.js";import{b as rt,c as me}from"../chunks/DPXw0ygh.js";import{b as nt}from"../chunks/C0kNAPzX.js";import{E as st}from"../chunks/CQQkdEes.js";import{L as ot}from"../chunks/CzbepVLR.js";import{e as re,i as ne}from"../chunks/ByI6iVq5.js";import{H as ye}from"../chunks/Cn1EkP4j.js";import{g as lt,k as it,t as ct,r as dt}from"../chunks/M2p3ZkHt.js";import{O as ut}from"../chunks/CFI1XfO6.js";import{p as we}from"../chunks/B1n7kAsq.js";var vt=k("<div><!> <!> <!></div>");function ft(c,e){M(e,!0);const a=A(e,"active",19,()=>B.None),p=A(e,"class",3,""),d=A(e,"onselect",3,()=>{});var b=vt(),x=y(b);{var o=l=>{{let s=K(()=>a()===B.Genomic);ge(l,{"data-testid":"gene-variant-option",title:"Variants by gene name",subtitle:"Ex: Rare BRCA1 variants with high severity",size:"other",class:"w-1/4 h-20 min-h-20",get active(){return r(s)},onclick:()=>d()(B.Genomic)})}};L(x,l=>{l(o)})}var t=h(x,2);{var v=l=>{{let s=K(()=>a()===B.SNP);ge(l,{"data-testid":"snp-option",title:"Specific Variants",subtitle:"Ex: chr5,148481541,T,A",size:"other",class:"w-1/4 h-20 min-h-20",get active(){return r(s)},onclick:()=>d()(B.SNP)})}};L(t,l=>{l(v)})}var N=h(t,2);L(N,l=>{}),_(b),E(()=>se(b,1,`flex flex-row justify-center justify-items-center gap-16 ${p()??""??""}`)),g(c,b),U()}var mt=k('<span class="absolute top-0 left-1 p-1 text-error-600-400 text-xs">* Required</span>'),ht=k("<div> </div>"),pt=k('<span class="flex-none ml-1"><!></span>'),_t=k('<span class="flex-none ml-1"><!></span>'),bt=k('<div><div class="relative rounded-t-2xl bg-primary-300-700 p-4 items-center flex"><!> <div class="flex-auto text-center"><div class="font-bold"> </div> <!></div> <!> <!></div> <div class="h-full p-2 border rounded-b-2xl border-surface-300-700"><!></div></div>');function ae(c,e){M(e,!0);const a=A(e,"title",3,""),p=A(e,"subtitle",3,""),d=A(e,"required",3,!1),b=A(e,"data-testid",3,""),x=A(e,"class",3,"");var o=bt(),t=y(o),v=y(t);{var N=G=>{var m=mt();g(G,m)};L(v,G=>{d()&&G(N)})}var l=h(v,2),s=y(l),i=y(s,!0);_(s);var f=h(s,2);{var u=G=>{var m=ht(),q=y(m,!0);_(m),E(()=>Q(q,p())),g(G,m)};L(f,G=>{p()&&G(u)})}_(l);var P=h(l,2);{var w=G=>{var m=pt(),q=y(m);fe(q,()=>e.action),_(m),g(G,m)};L(P,G=>{e.action&&G(w)})}var C=h(P,2);{var S=G=>{var m=_t(),q=y(m);fe(q,()=>e.help),_(m),g(G,m)};L(C,G=>{e.help&&G(S)})}_(t);var n=h(t,2),O=y(n);fe(O,()=>e.children??Fe),_(n),_(o),E(G=>{se(o,1,`flex flex-col ${x()??""}`),T(o,"data-testid",G),Q(i,a())},[()=>b()||a().replaceAll(" ","-").toLowerCase()]),g(c,o),U()}async function gt(c,e,a,p,d,b){$(e,!0);const x={search:r(a),constraint:""},{count:o,errors:t}=await Me(x);$(e,!1),t===0&&o>0?p()(x):o>0?($(d,b.SomeResults,!0),p()(x)):$(d,b.NoResults,!0)}var yt=k('<p class="text-center"> </p> <p class="text-center">If you have the rsID of the variant, you can use the <a href="https://www.ncbi.nlm.nih.gov/snp/" target="_blank" rel="noopener noreferrer" class="anchor">dbSNP database</a> to find the genomic coordinates.</p> <p class="text-center font-bold my-6"><em class="font-bold">Example:</em> chr5,148481541,T,A</p> <div class="flex gap-2 mx-auto my-8 w-1/2"><input type="search" class="input" placeholder="chromosome (chr#), position, reference allele, variant allele" data-testid="snp-search-box"/> <button type="button" data-testid="snp-search-btn" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Search <!></button></div> <!>',1);function xt(c,e){var H;M(e,!0);const a=A(e,"search",3,""),p=A(e,"disabled",3,!1),d=A(e,"onvalid",3,()=>{}),b={NoResults:{color:"error",message:"We couldn't find any results for your search term. Please check to ensure the information you have entered is correct or try a different search."},SomeResults:{color:"warning",message:"Some sites did not return patient counts for your search. Click the Add Filter button to apply your filter and click Cohort Details for more information."}},x=((H=he.genomic)==null?void 0:H.defaultGenomeBuild)||"GRCh38",o=/^\w+,\d+,(A|T|C|G)+,(A|T|C|G)+$/;let t,v=I(void 0),N=I(!1),l=I(Y(a())),s=K(()=>o.test(r(l)));$e(()=>{if(r(l)&&!r(s)){i();return}else f()});function i(){t.classList.add("required"),t.setCustomValidity("Please check that value matches: chromosome (chr#), position, reference allele, variant allele."),t.reportValidity()}function f(){t.classList.remove("required"),t.setCustomValidity(""),$(v,void 0)}var u=yt(),P=W(u),w=y(P);_(P);var C=h(P,6),S=y(C);ie(S),S.__keydown=f,nt(S,F=>t=F,()=>t);var n=h(S,2);n.__click=[gt,N,l,d,v,b];var O=h(y(n));{var G=F=>{ot(F,{ring:!0,size:"micro",color:"white"})};L(O,F=>{r(N)&&F(G)})}_(n),_(C);var m=h(C,2);{var q=F=>{st(F,{get color(){return r(v).color},children:(D,z)=>{ue();var V=Le();E(()=>Q(V,r(v).message)),g(D,V)},$$slots:{default:!0}})};L(m,F=>{r(v)&&F(q)})}E(()=>{Q(w,`Enter the following information into the search bar using genome build ${x}: chromosome,
  position, reference allele, variant allele.`),S.disabled=p(),n.disabled=p()||!r(s)||r(N)}),rt(S,()=>r(l),F=>$(l,F)),g(c,u),U()}Z(["keydown","click"]);var St=(c,e,a,p)=>e()({search:a.snp.search,constraint:r(p)}),kt=k('<span class="mr-4"> </span> <select class="!w-96" data-testid="snp-constraint" required><option selected disabled>Select Genotype</option><option>Heterozygous</option><option>Homozygous</option><option>Heterozygous or homozygous</option></select> <button type="button" aria-label="Save SNP" data-testid="snp-save-btn" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Save SNP</button>',1);function Nt(c,e){M(e,!0);let a=A(e,"onsave",3,()=>{}),p=I(Y(e.snp.constraint));var d=kt(),b=W(d),x=y(b,!0);_(b);var o=h(b,2),t=y(o);t.value=t.__value=!0;var v=h(t),N={},l=h(v),s={},i=h(l),f={};_(o);var u=h(o,2);u.__click=[St,a,e,p],E(()=>{Q(x,e.snp.search),N!==(N=te.Heterozygous)&&(v.value=(v.__value=te.Heterozygous)??""),s!==(s=te.Homozygous)&&(l.value=(l.__value=te.Homozygous)??""),f!==(f=te.HeterozygousOrHomozygous)&&(i.value=(i.__value=te.HeterozygousOrHomozygous)??""),u.disabled=r(p)===""}),je(o,()=>r(p),P=>$(p,P)),g(c,d),U()}Z(["click"]);var wt=k("<p>No filters added.</p>"),Pt=k('<div class="font-bold flex items-center justify-center p-6">AND</div>'),Gt=(c,e,a)=>e()(r(a)),qt=(c,e,a)=>e()(r(a)),Ct=k('<!> <div class="border rounded-sm border-surface-300-700 p-3 flex gap-4"><div class="flex-auto"><div class="text-surface-700-300 font-bold"> </div> <div class="text-surface-600-400"> </div></div> <div class="flex-none text-right"><button type="button" title="Edit" aria-label="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square"></i></button> <button type="button" title="Delete" aria-label="Delete" class="btn-icon-color"><i class="fa-solid fa-trash"></i></button></div></div>',1),Ft=k('<div class="flex items-center justify-center"><!> <!></div>');function $t(c,e){M(e,!0);const a=()=>J(pe,"$selectedSNPs",p),[p,d]=ee(),b=A(e,"onedit",3,()=>{}),x=A(e,"ondelete",3,()=>{});var o=Ft(),t=y(o);{var v=l=>{var s=wt();g(l,s)};L(t,l=>{a().length===0&&l(v)})}var N=h(t,2);re(N,1,a,ne,(l,s,i)=>{var f=Ct(),u=W(f);{var P=F=>{var D=Pt();g(F,D)};L(u,F=>{i!==0&&F(P)})}var w=h(u,2),C=y(w),S=y(C),n=y(S);_(S);var O=h(S,2),G=y(O,!0);_(O),_(C);var m=h(C,2),q=y(m);q.__click=[Gt,b,s];var H=h(q,2);H.__click=[qt,x,s],_(m),_(w),E(()=>{Q(n,`${r(s).search??""}:`),Q(G,Be[r(s).constraint]),T(q,"data-testid",`snp-edit-btn-${r(s).search}`),T(H,"data-testid",`snp-delete-btn-${r(s).search}`)}),g(l,f)}),_(o),g(c,o),U(),d()}Z(["click"]);var Lt=k('<hr/> <div class="flex gap-2 items-center justify-center my-8"><!></div>',1),Ot=k("<!> <!>",1),zt=k('<button class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),At=k('<div id="snp-search"><!> <!></div>');function jt(c,e){M(e,!0);const a=()=>J(pe,"$selectedSNPs",p),[p,d]=ee();let b=A(e,"class",3,"");const x={search:"",constraint:""};let o=I(Y(x));function t(u){$(o,u,!0)}function v(u){Ue(u),$(o,x,!0)}function N(u){$(o,u,!0)}function l(u){We(u)}var s=At(),i=y(s);ae(i,{title:"Search for Genomic Variants",children:(u,P)=>{var w=Ot(),C=W(w);{let O=K(()=>!!r(o).search);xt(C,{get disabled(){return r(O)},get search(){return r(o).search},onvalid:t})}var S=h(C,2);{var n=O=>{var G=Lt(),m=h(W(G),2),q=y(m);Nt(q,{get snp(){return r(o)},onsave:v}),_(m),g(O,G)};L(S,O=>{r(o).search&&O(n)})}g(u,w)},$$slots:{default:!0}});var f=h(i,2);ae(f,{title:"Summary of Selected Filters",action:P=>{var w=zt();w.__click=function(...C){var S;(S=ke)==null||S.apply(this,C)},E(()=>w.disabled=a().length===0),g(P,w)},children:(P,w)=>{$t(P,{onedit:N,ondelete:l})},$$slots:{action:!0,default:!0}}),_(s),E(()=>se(s,1,`grid grid-cols-1 gap-3 ${(b()||"")??""}`)),g(c,s),U(),d()}Z(["click"]);var Et=k('<div class="flex gap-4 mb-2"><!></div>');function Rt(c,e){M(e,!0);const a=()=>J(de,"$selectedGenes",d),p=()=>J(dt,"$resources",d),[d,b]=ee();let x=I(Y([])),o=K(()=>a().length===0?r(x):r(x).filter(w=>!a().includes(w))),t="",v=20,N=0,l=1,s=I(!1),i=I(!1);async function f(w=""){const C=t!==w;if(!(!C&&(N>=l||r(i)))){$(s,!0);try{const S=await lt(`${it.Search}/${p().search}/values/?`+new URLSearchParams({genomicConceptPath:"Gene_with_variant",query:w,page:(C?1:N+1).toString(),size:v.toString()}),{"content-type":"application/json"});if(S!=null&&S.error)throw S.error;const n=S.results;$(x,C?n:[...r(x),...n],!0),l=Math.ceil(S.total/v),N=S.page,t=w,$(i,n.length<v)}catch(S){console.error(S),ct.error({title:"An error occurred while loading genes list."})}finally{$(s,!1)}}}Se(async()=>{await f()});var u=Et(),P=y(u);ut(P,{showSelectAll:!1,showClearAll:!1,get allOptionsLoaded(){return r(i)},onscroll:f,get unselectedOptions(){return r(o)},set unselectedOptions(w){$(o,w)},get selectedOptions(){return Te(),a()},set selectedOptions(w){ce(de,w)},get currentlyLoading(){return r(s)},set currentlyLoading(w){$(s,w,!0)}}),_(u),g(c,u),U(),b()}var Tt=k('<label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Rare" type="checkbox"/> Rare</label> <label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Common" type="checkbox"/> Common</label> <label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Novel" type="checkbox"/> Novel</label>',1);function Ht(c){const e=()=>J(le,"$selectedFrequency",a),[a,p]=ee(),d=[];var b=Tt(),x=W(b),o=y(x);ie(o),o.value=o.__value="Rare",ue(),_(x);var t=h(x,2),v=y(t);ie(v),v.value=v.__value="Common",ue(),_(t);var N=h(t,2),l=y(N);ie(l),l.value=l.__value="Novel",ue(),_(N),me(d,[],o,e,s=>ce(le,s)),me(d,[],v,e,s=>ce(le,s)),me(d,[],l,e,s=>ce(le,s)),g(c,b),p()}var Vt=(c,e)=>e.node.toggleOpen(),Dt=k("<i></i>"),Bt=k('<i class="fa-solid fa-minus"></i>'),It=(c,e)=>e.node.toggleSelected(),Mt=k('<details class="tree-item"><summary class="tree-item-summary list-none [&amp;::-webkit-details-marker]:hidden flex items-center cursor-pointer space-x-4 rounded-container p-0 hover:preset-tonal-primary w-full" role="treeitem"><button type="button" class="m-1 ml-2"><!></button> <input class="checkbox tree-item-checkbox mr-1" type="checkbox"/> <label class="w-full"> </label></summary> <div class="tree-item-children ml-4" role="group"><!></div></details>');function Pe(c,e){M(e,!0);var a=Mt(),p=y(a),d=y(p);d.__click=[Vt,e];var b=y(d);{var x=f=>{var u=Dt();E(()=>se(u,1,`fa-solid fa-angle-${e.node.open?"up":"down"}`)),g(f,u)},o=f=>{var u=Bt();g(f,u)};L(b,f=>{e.node.isLeaf?f(o,!1):f(x)})}_(d);var t=h(d,2);ie(t),t.__click=[It,e];var v=h(t,2),N=y(v,!0);_(v),_(p);var l=h(p,2),s=y(l);{var i=f=>{var u=Oe(),P=W(u);re(P,17,()=>e.node.children,ne,(w,C)=>{Pe(w,{get node(){return r(C)}})}),g(f,u)};L(s,f=>{!e.node.isLeaf&&e.node.open&&f(i)})}_(l),_(a),E(()=>{T(a,"data-testid",`tree-item:${e.node.name??""}-${e.node.value??""}`),T(a,"aria-disabled",e.node.disabled),a.open=e.node.open,T(p,"aria-selected",e.node.allSelected),T(p,"aria-expanded",e.node.open),T(d,"id",`tree-item-btn:${e.node.name??""}-${e.node.value??""}`),T(d,"data-testid",`tree-item-btn:${e.node.name??""}-${e.node.value??""}`),T(d,"title",e.node.isLeaf?void 0:`${e.node.open?"Close":"Open"} node`),T(d,"name",e.node.name),T(d,"tabindex",e.node.isLeaf?-1:0),T(t,"id",`checkbox:${e.node.name??""}-${e.node.value??""}`),T(t,"data-testid",`checkbox:${e.node.name??""}-${e.node.value??""}`),T(t,"name",e.node.name),Ee(t,e.node.value),Re(t,e.node.allSelected),t.indeterminate=e.node.indeterminant,T(v,"for",`${e.node.isLeaf?"checkbox:":"tree-item-btn:"}${e.node.name??""}-${e.node.value??""}`),Q(N,e.node.value),T(l,"data-testid",`tree-item-children:${e.node.name??""}`)}),g(c,a),U()}Z(["click"]);var Ut=k("<div></div>");function Wt(c,e){var N,l,s,i,f,u,P,w,C;M(e,!0);let a=A(e,"nodes",19,()=>[]),p=A(e,"onselect",3,()=>{}),d=A(e,"onunselect",3,()=>{}),b=A(e,"fullWidth",3,!1);class x{constructor(n,O,G=[],m=!1,q=!1){ve(this,"name","");ve(this,"value","");X(this,N,I(!1));X(this,l,I(!1));X(this,s,I(!1));X(this,i,I(Y([])));X(this,f,K(()=>this.children.length===0));X(this,u,K(()=>this.isLeaf?this.selected:this.children.some(n=>n.someSelected)));X(this,P,K(()=>this.isLeaf?this.selected:this.children.every(n=>n.allSelected)));X(this,w,K(()=>this.isLeaf?!this.selected:!this.someSelected));X(this,C,K(()=>this.isLeaf?!1:this.someSelected&&!this.allSelected));this.name=n,this.value=O,this.children=G,this.open=m,this.selected=q}get open(){return r(j(this,N))}set open(n){$(j(this,N),n,!0)}get selected(){return r(j(this,l))}set selected(n){$(j(this,l),n,!0)}get disabled(){return r(j(this,s))}set disabled(n){$(j(this,s),n,!0)}get children(){return r(j(this,i))}set children(n){$(j(this,i),n,!0)}get isLeaf(){return r(j(this,f))}set isLeaf(n){$(j(this,f),n)}get someSelected(){return r(j(this,u))}set someSelected(n){$(j(this,u),n)}get allSelected(){return r(j(this,P))}set allSelected(n){$(j(this,P),n)}get noneSelected(){return r(j(this,w))}set noneSelected(n){$(j(this,w),n)}get indeterminant(){return r(j(this,C))}set indeterminant(n){$(j(this,C),n)}select(){this.isLeaf?(this.selected=!0,p()(this.value)):(this.children.forEach(n=>n.select()),this.open=!0)}unselect(){this.isLeaf?(this.selected=!1,d()(this.value)):this.children.forEach(n=>n.unselect())}toggleSelected(){this.allSelected?this.unselect():this.select()}toggleOpen(){this.isLeaf||(this.open=!this.open)}}N=new WeakMap,l=new WeakMap,s=new WeakMap,i=new WeakMap,f=new WeakMap,u=new WeakMap,P=new WeakMap,w=new WeakMap,C=new WeakMap;function o(S){const{name:n,value:O,open:G,selected:m}=S;let q=[],H=G;return S.children.length>0&&(q=S.children.map(o),H=q.some(F=>F.someSelected)),new x(n,O,q,H,m)}let t=Y(a().map(o));var v=Ut();re(v,21,()=>t,ne,(S,n)=>{Pe(S,{get node(){return r(n)}})}),_(v),E(()=>se(v,1,`overflow-auto h-[350.75px] ${b()?"w-full":""}`)),g(c,v),U()}function Jt(c,e){M(e,!0);const a=()=>J(Xe,"$selectedConsequence",p),[p,d]=ee();let b=Y(Je.map(({key:x,children:o})=>({name:"severity",value:x,children:o.map(t=>({name:x,value:t,children:[],open:!1,selected:a().includes(t)})),open:!1,selected:!1})));Wt(c,{get nodes(){return b},get onselect(){return Qe},get onunselect(){return Ke}}),U(),d()}var Kt=k('<span class="font-bold mx-1 text-primary-500">OR</span>'),Qt=k("<!> ",1),Xt=k('<span class="italic">None</span>'),Yt=k('<span class="font-bold mx-1 text-primary-500">OR</span>'),Zt=k("<!> ",1),ea=k('<span class="italic">None</span>'),ta=k('<span class="font-bold mx-1 text-primary-500">OR</span>'),aa=k("<!> ",1),ra=k('<span class="italic">None</span>'),na=k('<div class="overflow-auto flex"><div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-1uozg91"><span class="font-bold">Geneomic Region:</span> <div id="selected-variant" class="text-center break-words"><!> <!></div></div> <div class="font-bold flex items-center justify-center w-1/15 svelte-1uozg91">AND</div> <div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-1uozg91"><span class="font-bold">Calculated Consequence:</span> <div id="selected-consequence" class="text-center break-words"><!> <!></div></div> <div class="font-bold flex items-center justify-center w-1/15 svelte-1uozg91">AND</div> <div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-1uozg91"><span class="font-bold">Variant Frequency:</span> <div id="selected-frequency" class="text-center break-words"><!> <!></div></div></div>');function sa(c,e){M(e,!0);const a=()=>J(de,"$selectedGenes",b),p=()=>J(Ye,"$consequences",b),d=()=>J(le,"$selectedFrequency",b),[b,x]=ee();var o=na(),t=y(o),v=h(y(t),2),N=y(v);re(N,1,a,ne,(m,q,H)=>{var F=Qt(),D=W(F);{var z=R=>{var oe=Kt();g(R,oe)};L(D,R=>{H!==0&&R(z)})}var V=h(D);E(()=>Q(V,` ${r(q)??""}`)),g(m,F)});var l=h(N,2);{var s=m=>{var q=Xt();g(m,q)};L(l,m=>{a().length===0&&m(s)})}_(v),_(t);var i=h(t,4),f=h(y(i),2),u=y(f);re(u,1,p,ne,(m,q,H)=>{var F=Zt(),D=W(F);{var z=R=>{var oe=Yt();g(R,oe)};L(D,R=>{H!==0&&R(z)})}var V=h(D);E(()=>Q(V,` ${r(q)??""}`)),g(m,F)});var P=h(u,2);{var w=m=>{var q=ea();g(m,q)};L(P,m=>{p().length===0&&m(w)})}_(f),_(i);var C=h(i,4),S=h(y(C),2),n=y(S);re(n,1,d,ne,(m,q,H)=>{var F=aa(),D=W(F);{var z=R=>{var oe=ta();g(R,oe)};L(D,R=>{H!==0&&R(z)})}var V=h(D);E(()=>Q(V,` ${r(q)??""}`)),g(m,F)});var O=h(n,2);{var G=m=>{var q=ra();g(m,q)};L(O,m=>{d().length===0&&m(G)})}_(S),_(C),_(o),g(c,o),U(),x()}function oa(){de.set([])}var la=k('<button data-testid="clear-selected-genes-btn" class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),ia=k('<button data-testid="clear-gene-filters-btn" class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),ca=k('<div id="gene-search"><!> <!> <!> <!></div>');function da(c,e){var v,N,l;M(e,!0);let a=A(e,"class",3,"");const p=(l=(N=(v=he)==null?void 0:v.help)==null?void 0:N.popups)==null?void 0:l.genomicFilter;var d=ca(),b=y(d);ae(b,{title:"Search for Gene with Variant",subtitle:"Use the official gene symbol.",required:!0,action:i=>{var f=la();f.__click=[oa],g(i,f)},children:(i,f)=>{Rt(i,{})},$$slots:{action:!0,default:!0}});var x=h(b,2);ae(x,{title:"Select Calculated Consequence",subtitle:"The calculated consequence is based on VEP annotation.",help:i=>{ye(i,{id:"cons-help-popup",get text(){return p.consequence}})},children:(i,f)=>{Jt(i,{})},$$slots:{help:!0,default:!0}});var o=h(x,2);ae(o,{title:"Select Variant Frequency",help:i=>{ye(i,{id:"freq-help-popup",get text(){return p.frequency}})},children:(i,f)=>{Ht(i)},$$slots:{help:!0,default:!0}});var t=h(o,2);ae(t,{title:"Summary of Selected Filters",class:"col-span-3",action:i=>{var f=ia();f.__click=function(...u){var P;(P=Ne)==null||P.apply(this,u)},g(i,f)},children:(i,f)=>{sa(i,{})},$$slots:{action:!0,default:!0}}),_(d),E(()=>se(d,1,`grid grid-cols-3 gap-3 ${(a()||"")??""}`)),g(c,d),U()}Z(["click"]);function xe(c,e,a,p){const d=r(e)===B.Genomic?tt():at();Ie(d),a(),ce(we,!0),He("/explorer")}var ua=k('<div class="flex justify-end my-4"><button data-testid="save-filter-btn" type="button" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Save Filter <i class="fa-solid fa-plus ml-3"></i></button></div>'),va=k('<div class="flex justify-end my-4" data-testid="filter-options-container"><button data-testid="add-filter-btn" type="button" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Add Filter <i class="fa-solid fa-plus ml-3"></i></button></div>'),fa=k("<!> <!>",1),ma=k("<!> <!>",1);function Ha(c,e){M(e,!0);const a=()=>J(we,"$panelOpen",b),p=()=>J(de,"$selectedGenes",b),d=()=>J(pe,"$selectedSNPs",b),[b,x]=ee();let o=Ve.url.searchParams.get("edit")||"",t=I(Y(["snp","genomic"].includes(o)?o:B.None));function v(){Ne(),ke()}function N(){if(r(t)===B.Genomic){const i=be("genomic");i.length===1&&Ze(i[0])}else if(r(t)===B.SNP){const i=be("snp");i.length===1&&et(i[0])}}Se(N);function l(i){$(t,i,!0),N()}let s=K(()=>r(t)===B.Genomic&&p().length>0||r(t)===B.SNP&&d().length>0);Ae(i=>{E(()=>ze.title=`${he.applicationName??""} | Gemonic Filter`)}),De(c,{full:!0,title:"Genomic Filtering",backUrl:"/explorer",backAction:v,backTitle:"Back to Explore",transition:!0,children:(i,f)=>{var u=ma(),P=W(u);{var w=n=>{ft(n,{class:"my-4",onselect:l,get active(){return r(t)}})};L(P,n=>{n(w)})}var C=h(P,2);{var S=n=>{var O=fa(),G=W(O);{var m=z=>{da(z,{class:"mb-0 mt-6"})},q=z=>{jt(z,{class:"mt-6"})};L(G,z=>{r(t)===B.Genomic?z(m):z(q,!1)})}var H=h(G,2);{var F=z=>{var V=ua(),R=y(V);R.__click=[xe,t,v,a],_(V),E(()=>R.disabled=!r(s)),g(z,V)},D=z=>{var V=va(),R=y(V);R.__click=[xe,t,v,a],_(V),E(()=>{T(R,"title",r(s)?"Add Filter":r(t)===B.Genomic?"A gene is required":"A SNP is required"),R.disabled=!r(s)}),g(z,V)};L(H,z=>{o?z(F):z(D,!1)})}g(n,O)};L(C,n=>{r(t)!==B.None&&n(S)})}g(i,u)},$$slots:{default:!0}}),U(),x()}Z(["click"]);export{Ha as component};
