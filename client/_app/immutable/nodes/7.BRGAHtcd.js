import{s as ke,e as E,a as D,t as G,q as A,c as I,b as N,g as H,d as X,f as m,m as _,S as ne,i as $,h as w,O as Te,j as we,n as g,H as ie,I as re,T as ae,a4 as Ne,a5 as Se,P as Ee,k as ye,X as Ce,l as De,R as Q,V as oe,U as se}from"../chunks/scheduler.bui7uCNy.js";import{h as F,u as Ie}from"../chunks/await_block.DenEio6G.js";import{e as j}from"../chunks/each.Ct-HShz-.js";import{S as $e,i as Pe,d as q,e as z,m as M,t as k,a as P,f as R,h as He,g as J,b as K}from"../chunks/index.Divvo4fc.js";import{p as Ve}from"../chunks/stores.CGSu9-ky.js";import{c as Ae}from"../chunks/AuthProviderRegistry.C01toUd8.js";import{r as Oe}from"../chunks/Search.C3zC3RHZ.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B7SkmbeT.js";import{f as Be}from"../chunks/index.D4B8xqkz.js";import{P as Le}from"../chunks/ProgressRadial.CtNAsR5Q.js";import{L as je}from"../chunks/Logo.BzMTzviT.js";import{b as B,f as ce}from"../chunks/configuration.CIpdfyUx.js";function fe(i){let e,n,t;return{c(){e=E("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ae(e.src,n=i[4])||_(e,"src",n),_(e,"alt",t=i[2].imageAlt),_(e,"class","h-8 mr-2")},m(l,c){$(l,e,c)},p(l,c){c&16&&!ae(e.src,n=l[4])&&_(e,"src",n),c&4&&t!==(t=l[2].imageAlt)&&_(e,"alt",t)},d(l){l&&m(e)}}}function ue(i){let e,n;return{c(){e=E("div"),n=new Ne(!1),this.h()},l(t){e=I(t,"DIV",{class:!0});var l=N(e);n=Se(l,!1),l.forEach(m),this.h()},h(){n.a=null,_(e,"class","help-text svelte-12n96ld")},m(t,l){$(t,e,l),n.m(i[3],e)},p(t,l){l&8&&n.p(t[3])},d(t){t&&m(e)}}}function qe(i){let e,n,t,l,c,r,o,a,u=i[4]&&fe(i),h=i[3]&&!i[2].alt&&ue(i);return{c(){e=E("button"),u&&u.c(),n=D(),t=G(i[0]),c=D(),h&&h.c(),r=A(),this.h()},l(s){e=I(s,"BUTTON",{type:!0,"data-testid":!0,class:!0});var f=N(e);u&&u.l(f),n=H(f),t=X(f,i[0]),f.forEach(m),c=H(s),h&&h.l(s),r=A(),this.h()},h(){_(e,"type","button"),_(e,"data-testid",i[5]),_(e,"class",l=ne(i[7].class??"btn variant-filled-primary m-1")+" svelte-12n96ld")},m(s,f){$(s,e,f),u&&u.m(e,null),w(e,n),w(e,t),$(s,c,f),h&&h.m(s,f),$(s,r,f),o||(a=Te(e,"click",i[8]),o=!0)},p(s,[f]){s[4]?u?u.p(s,f):(u=fe(s),u.c(),u.m(e,n)):u&&(u.d(1),u=null),f&1&&we(t,s[0]),f&32&&_(e,"data-testid",s[5]),f&128&&l!==(l=ne(s[7].class??"btn variant-filled-primary m-1")+" svelte-12n96ld")&&_(e,"class",l),s[3]&&!s[2].alt?h?h.p(s,f):(h=ue(s),h.c(),h.m(r.parentNode,r)):h&&(h.d(1),h=null)},i:g,o:g,d(s){s&&(m(e),m(c),m(r)),u&&u.d(),h&&h.d(s),o=!1,a()}}}function ze(i,e,n){let t,{buttonText:l="Log In"}=e,{redirectTo:c="/"}=e,{provider:r}=e,{helpText:o}=e,a=async(s,f)=>{(await Ae(r)).login(s,f).then(()=>{Oe()})},u;r.imagesrc&&(u="./"+r.imagesrc);const h=()=>a(c,r.type);return i.$$set=s=>{n(7,e=ie(ie({},e),re(s))),"buttonText"in s&&n(0,l=s.buttonText),"redirectTo"in s&&n(1,c=s.redirectTo),"provider"in s&&n(2,r=s.provider),"helpText"in s&&n(3,o=s.helpText)},i.$$.update=()=>{var s;i.$$.dirty&4&&n(5,t=`login-button-${(s=r.name)==null?void 0:s.toLowerCase()}`)},e=re(e),[l,c,r,o,u,t,a,e,h]}class W extends $e{constructor(e){super(),Pe(this,e,ze,qe,ke,{buttonText:0,redirectTo:1,provider:2,helpText:3})}}function he(i,e,n){const t=i.slice();return t[10]=e[n],t}function de(i,e,n){const t=i.slice();return t[10]=e[n],t}function me(i,e,n){const t=i.slice();return t[10]=e[n],t}function Me(i){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Re(i){var Y,Z,x,ee;let e,n,t,l,c,r,o,a,u,h,s,f,b=((Z=(Y=B)==null?void 0:Y.login)==null?void 0:Z.showSiteName)&&Ue(i),d=((x=i[8])==null?void 0:x.length)===0&&_e();const v=[Xe,Ge],p=[];function U(y,T){return y[8].length>3?0:1}o=U(i),a=p[o]=v[o](i);let S=ce.login.open&&Fe(i),L={ctx:i,current:null,token:null,hasCatch:!1,pending:Qe,then:Ke,catch:Je,value:9,blocks:[,,,]};return F(s=(ee=i[1].data)==null?void 0:ee.altProviders,L),{c(){e=E("div"),n=E("header"),b&&b.c(),t=D(),l=E("div"),c=E("div"),d&&d.c(),r=D(),a.c(),u=D(),S&&S.c(),h=D(),L.block.c(),this.h()},l(y){e=I(y,"DIV",{id:!0,class:!0});var T=N(e);n=I(T,"HEADER",{class:!0});var V=N(n);b&&b.l(V),V.forEach(m),t=H(T),l=I(T,"DIV",{class:!0});var C=N(l);c=I(C,"DIV",{id:!0,class:!0});var O=N(c);d&&d.l(O),r=H(O),a.l(O),O.forEach(m),u=H(C),S&&S.l(C),h=H(C),L.block.l(C),C.forEach(m),T.forEach(m),this.h()},h(){_(n,"class","flex flex-col items-center"),_(c,"id","main-logins"),_(c,"class","grid grid-cols-1 gap-4 w-full"),_(l,"class","flex flex-col items-center justify-center"),_(e,"id","login-box"),_(e,"class","w-max mt-2")},m(y,T){$(y,e,T),w(e,n),b&&b.m(n,null),w(e,t),w(e,l),w(l,c),d&&d.m(c,null),w(c,r),p[o].m(c,null),w(l,u),S&&S.m(l,null),w(l,h),L.block.m(l,L.anchor=null),L.mount=()=>l,L.anchor=null,f=!0},p(y,T){var C,O,te,le;i=y,(O=(C=B)==null?void 0:C.login)!=null&&O.showSiteName&&b.p(i,T),((te=i[8])==null?void 0:te.length)===0?d||(d=_e(),d.c(),d.m(c,r)):d&&(d.d(1),d=null);let V=o;o=U(i),o===V?p[o].p(i,T):(J(),P(p[V],1,1,()=>{p[V]=null}),K(),a=p[o],a?a.p(i,T):(a=p[o]=v[o](i),a.c()),k(a,1),a.m(c,null)),ce.login.open&&S.p(i,T),L.ctx=i,T&2&&s!==(s=(le=i[1].data)==null?void 0:le.altProviders)&&F(s,L)||Ie(L,i,T)},i(y){f||(k(a),k(L.block),f=!0)},o(y){P(a);for(let T=0;T<3;T+=1){const V=L.blocks[T];P(V)}f=!1},d(y){y&&m(e),b&&b.d(),d&&d.d(),p[o].d(),S&&S.d(),L.block.d(),L.token=null,L=null}}}function Ue(i){let e,n;return{c(){e=E("div"),n=G(i[4])},l(t){e=I(t,"DIV",{});var l=N(e);n=X(l,i[4]),l.forEach(m)},m(t,l){$(t,e,l),w(e,n)},p:g,d(t){t&&m(e)}}}function _e(i){let e,n=`<div class="alert-message">No main authentication providers are registered. Please add them to your
                configuration. Click <a class="anchor" href="https://pic-sure.gitbook.io/pic-sure-developer-guide/configuring-pic-sure" target="_blank">Here</a>
                to learn how.</div>`;return{c(){e=E("aside"),e.innerHTML=n,this.h()},l(t){e=I(t,"ASIDE",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-1h3zug2"&&(e.innerHTML=n),this.h()},h(){_(e,"class","auth-warning alert variant-ghost-warning svelte-u0znbd")},m(t,l){$(t,e,l)},d(t){t&&m(e)}}}function Ge(i){let e,n,t=j(i[8]),l=[];for(let r=0;r<t.length;r+=1)l[r]=pe(de(i,t,r));const c=r=>P(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=A()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=A()},m(r,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(r,o);$(r,e,o),n=!0},p(r,o){if(o&10){t=j(r[8]);let a;for(a=0;a<t.length;a+=1){const u=de(r,t,a);l[a]?(l[a].p(u,o),k(l[a],1)):(l[a]=pe(u),l[a].c(),k(l[a],1),l[a].m(e.parentNode,e))}for(J(),a=t.length;a<l.length;a+=1)c(a);K()}},i(r){if(!n){for(let o=0;o<t.length;o+=1)k(l[o]);n=!0}},o(r){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)P(l[o]);n=!1},d(r){r&&m(e),Q(l,r)}}}function Xe(i){let e,n,t,l,c,r,o=j(i[8]),a=[];for(let h=0;h<o.length;h+=1)a[h]=ge(me(i,o,h));let u=i[2]&&be(i);return{c(){e=E("select");for(let h=0;h<a.length;h+=1)a[h].c();n=D(),u&&u.c(),t=A(),this.h()},l(h){e=I(h,"SELECT",{});var s=N(e);for(let f=0;f<a.length;f+=1)a[f].l(s);s.forEach(m),n=H(h),u&&u.l(h),t=A(),this.h()},h(){i[0]===void 0&&Ee(()=>i[7].call(e))},m(h,s){$(h,e,s);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);oe(e,i[0],!0),$(h,n,s),u&&u.m(h,s),$(h,t,s),l=!0,c||(r=Te(e,"change",i[7]),c=!0)},p(h,s){if(s&2){o=j(h[8]);let f;for(f=0;f<o.length;f+=1){const b=me(h,o,f);a[f]?a[f].p(b,s):(a[f]=ge(b),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=o.length}s&3&&oe(e,h[0]),h[2]?u?(u.p(h,s),s&4&&k(u,1)):(u=be(h),u.c(),k(u,1),u.m(t.parentNode,t)):u&&(J(),P(u,1,1,()=>{u=null}),K())},i(h){l||(k(u),l=!0)},o(h){P(u),l=!1},d(h){h&&(m(e),m(n),m(t)),Q(a,h),u&&u.d(h),c=!1,r()}}}function pe(i){let e,n;return e=new W({props:{buttonText:i[10].description||i[10].name,provider:i[10],redirectTo:i[3],helpText:i[10].helptext,class:"btn variant-outline-primary text-primary-500 w-full"}}),{c(){q(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const c={};l&2&&(c.buttonText=t[10].description||t[10].name),l&2&&(c.provider=t[10]),l&2&&(c.helpText=t[10].helptext),e.$set(c)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ge(i){let e,n=(i[10].description||i[10].name)+"",t,l;return{c(){e=E("option"),t=G(n),this.h()},l(c){e=I(c,"OPTION",{class:!0});var r=N(e);t=X(r,n),r.forEach(m),this.h()},h(){_(e,"class","capitalize"),e.__value=l=i[10].name,se(e,e.__value)},m(c,r){$(c,e,r),w(e,t)},p(c,r){r&2&&n!==(n=(c[10].description||c[10].name)+"")&&we(t,n),r&2&&l!==(l=c[10].name)&&(e.__value=l,se(e,e.__value))},d(c){c&&m(e)}}}function be(i){let e,n;return e=new W({props:{buttonText:"Log In",provider:i[2],redirectTo:i[3],helpText:i[2].helptext,class:"btn variant-outline-primary m-1 mt-2 w-full"}}),{c(){q(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const c={};l&4&&(c.provider=t[2]),l&4&&(c.helpText=t[2].helptext),e.$set(c)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Fe(i){let e,n;return{c(){e=E("a"),n=G(i[6]),this.h()},l(t){e=I(t,"A",{href:!0,class:!0});var l=N(e);n=X(l,i[6]),l.forEach(m),this.h()},h(){var t,l;_(e,"href",((l=(t=B)==null?void 0:t.login)==null?void 0:l.openPicsureLink)||"/"),_(e,"class","btn variant-outline-primary hover:variant-filled-primary text-primary-500 m-1 mt-2 w-full mb-1")},m(t,l){$(t,e,l),w(e,n)},p:g,d(t){t&&m(e)}}}function Je(i){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Ke(i){let e,n,t=j(i[9]),l=[];for(let r=0;r<t.length;r+=1)l[r]=ve(he(i,t,r));const c=r=>P(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=A()},l(r){for(let o=0;o<l.length;o+=1)l[o].l(r);e=A()},m(r,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(r,o);$(r,e,o),n=!0},p(r,o){if(o&10){t=j(r[9]);let a;for(a=0;a<t.length;a+=1){const u=he(r,t,a);l[a]?(l[a].p(u,o),k(l[a],1)):(l[a]=ve(u),l[a].c(),k(l[a],1),l[a].m(e.parentNode,e))}for(J(),a=t.length;a<l.length;a+=1)c(a);K()}},i(r){if(!n){for(let o=0;o<t.length;o+=1)k(l[o]);n=!0}},o(r){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)P(l[o]);n=!1},d(r){r&&m(e),Q(l,r)}}}function ve(i){let e,n;return e=new W({props:{buttonText:i[10].description||i[10].name,provider:i[10],redirectTo:i[3],helpText:i[10].helptext,class:"btn variant-outline-tertiary hover:variant-filled-tertiary m-1 w-full last:mb-4"}}),{c(){q(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const c={};l&2&&(c.buttonText=t[10].description||t[10].name),l&2&&(c.provider=t[10]),l&2&&(c.helpText=t[10].helptext),e.$set(c)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Qe(i){let e,n;return e=new Le({props:{width:"w-3",value:void 0}}),{c(){q(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p:g,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function We(i){let e,n;return e=new Le({props:{width:"w-10",value:void 0}}),{c(){q(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p:g,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Ye(i){var b;let e,n,t,l,c,r,o,a,u,h,s;l=new je({props:{class:"flex-none",height:4}});let f={ctx:i,current:null,token:null,hasCatch:!1,pending:We,then:Re,catch:Me,value:8,blocks:[,,,]};return F(u=(b=i[1].data)==null?void 0:b.providers,f),{c(){e=E("section"),n=E("div"),t=E("h1"),q(l.$$.fragment),c=D(),r=E("p"),o=G(i[5]),a=D(),f.block.c(),this.h()},l(d){e=I(d,"SECTION",{id:!0,class:!0});var v=N(e);n=I(v,"DIV",{id:!0,class:!0});var p=N(n);t=I(p,"H1",{"data-testid":!0,class:!0});var U=N(t);z(l.$$.fragment,U),U.forEach(m),c=H(p),r=I(p,"P",{"data-testid":!0,class:!0});var S=N(r);o=X(S,i[5]),S.forEach(m),p.forEach(m),a=H(v),f.block.l(v),v.forEach(m),this.h()},h(){_(t,"data-testid","login-title"),_(t,"class","mb-6 w-full flex gap-2 items-center justify-center"),_(r,"data-testid","login-description"),_(r,"class","max-w-16 text-2xl"),_(n,"id","title-box"),_(n,"class","flex flex-col items-center text-center mb-8"),_(e,"id","logins"),_(e,"class","flex flex-col items-center h-screen w-full text-center place-content-center text-lg")},m(d,v){$(d,e,v),w(e,n),w(n,t),M(l,t,null),w(n,c),w(n,r),w(r,o),w(e,a),f.block.m(e,f.anchor=null),f.mount=()=>e,f.anchor=null,s=!0},p(d,[v]){var p;i=d,f.ctx=i,v&2&&u!==(u=(p=i[1].data)==null?void 0:p.providers)&&F(u,f)||Ie(f,i,v)},i(d){s||(k(l.$$.fragment,d),k(f.block),d&&(h||Ee(()=>{h=He(e,Be,{duration:600,x:"100%"}),h.start()})),s=!0)},o(d){P(l.$$.fragment,d);for(let v=0;v<3;v+=1){const p=f.blocks[v];P(p)}s=!1},d(d){d&&m(e),R(l),f.block.d(),f.token=null,f=null}}}function Ze(i,e,n){var s,f,b;let t,l;ye(i,Ve,d=>n(1,l=d));const c=l.url.searchParams.get("redirectTo")||"/",r=(s=B)==null?void 0:s.applicationName,o=(f=B)==null?void 0:f.login.description,a=(b=B)==null?void 0:b.login.openPicsureLinkText;let u;function h(){u=Ce(this),n(0,u)}return i.$$.update=()=>{var d,v;i.$$.dirty&3&&n(2,t=u?(v=(d=l.data)==null?void 0:d.providers)==null?void 0:v.find(p=>p.name===u):void 0)},[u,l,t,c,r,o,a,h]}class ut extends $e{constructor(e){super(),Pe(this,e,Ze,Ye,ke,{})}}export{ut as component};
