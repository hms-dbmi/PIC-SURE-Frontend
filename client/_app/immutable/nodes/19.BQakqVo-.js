import{s as X,q as ae,i as S,f as p,e as b,t as A,a as U,c as $,b as T,d as V,g as C,m as h,h as g,j as K,P as ze,J as ce,K as ue,L as fe,M as de,l as N,n as O,O as H,w as Ge,k as F,r as z,p as Ze,o as xe,X as et,U as le,V as Ue,R as tt}from"../chunks/scheduler.bui7uCNy.js";import{S as Y,i as Z,t as q,g as ge,a as L,b as be,p as Ce,d as B,e as Q,m as W,f as j}from"../chunks/index.CNwEczq-.js";import{e as Le}from"../chunks/each.VHlBgARd.js";import{g as Te}from"../chunks/stores.DW-RA2wp.js";import{g as st}from"../chunks/stores.CyMKLvfo.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.BCRmI_eu.js";import{b as at}from"../chunks/configuration.CsqyQUvi.js";import{u as lt}from"../chunks/Validation.CZHOOfu3.js";import{C as nt}from"../chunks/Content._KXHMYbh.js";import{q as Pe,s as Me}from"../chunks/index.BufUHdI9.js";import{b as it}from"../chunks/index.Bt-Xh7oU.js";import{Q as rt}from"../chunks/QuerySummary.4PaKBn4u.js";import{w as J}from"../chunks/entry.Bvh0VnfG.js";import{g as re,p as ot}from"../chunks/User.C-oF0fl0.js";function Re(l){let e,s,a,n,t,i,c,o,f,r,u,d,m,_=l[1]&&Ae(l),v=l[4]&&Ve(l),E=!l[4]&&!l[2]&&Ne(l);return{c(){e=b("div"),s=b("div"),a=b("div"),n=b("span"),t=A(l[0]),c=U(),_&&_.c(),o=U(),v&&v.c(),u=U(),E&&E.c(),this.h()},l(y){e=$(y,"DIV",{class:!0});var w=T(e);s=$(w,"DIV",{"data-testid":!0,class:!0,"aria-current":!0});var I=T(s);a=$(I,"DIV",{class:!0});var k=T(a);n=$(k,"SPAN",{class:!0});var D=T(n);t=V(D,l[0]),D.forEach(p),k.forEach(p),c=C(I),_&&_.l(I),o=C(I),v&&v.l(I),I.forEach(p),u=C(w),E&&E.l(w),w.forEach(p),this.h()},h(){h(n,"class",i=`avatar flex aspect-square justify-center items-center overflow-hidden isolate w-8 rounded-full text-xl ${l[5]?"variant-ghost-primary":"variant-ringed-primary"}`),h(a,"class","flex-none pt-1"),h(s,"data-testid",f=`v-stepper-step-${l[0]}`),h(s,"class","flex gap-2 my-2"),h(s,"aria-current",r=l[5]?"step":!1),h(e,"class","v-stepper mb-3 last:mb-0")},m(y,w){S(y,e,w),g(e,s),g(s,a),g(a,n),g(n,t),g(s,c),_&&_.m(s,null),g(s,o),v&&v.m(s,null),g(e,u),E&&E.m(e,null),m=!0},p(y,w){(!m||w&1)&&K(t,y[0]),(!m||w&32&&i!==(i=`avatar flex aspect-square justify-center items-center overflow-hidden isolate w-8 rounded-full text-xl ${y[5]?"variant-ghost-primary":"variant-ringed-primary"}`))&&h(n,"class",i),y[1]?_?_.p(y,w):(_=Ae(y),_.c(),_.m(s,o)):_&&(_.d(1),_=null),y[4]?v?(v.p(y,w),w&16&&q(v,1)):(v=Ve(y),v.c(),q(v,1),v.m(s,null)):v&&(ge(),L(v,1,1,()=>{v=null}),be()),(!m||w&1&&f!==(f=`v-stepper-step-${y[0]}`))&&h(s,"data-testid",f),(!m||w&32&&r!==(r=y[5]?"step":!1))&&h(s,"aria-current",r),!y[4]&&!y[2]?E?(E.p(y,w),w&20&&q(E,1)):(E=Ne(y),E.c(),q(E,1),E.m(e,null)):E&&(ge(),L(E,1,1,()=>{E=null}),be())},i(y){m||(q(v),q(E),y&&ze(()=>{m&&(d||(d=Ce(e,Me,{duration:300,easing:Pe,axis:"y"},!0)),d.run(1))}),m=!0)},o(y){L(v),L(E),y&&(d||(d=Ce(e,Me,{duration:300,easing:Pe,axis:"y"},!1)),d.run(0)),m=!1},d(y){y&&p(e),_&&_.d(),v&&v.d(),E&&E.d(),y&&d&&d.end()}}}function Ae(l){let e,s,a,n;return{c(){e=b("div"),s=b("h3"),a=A(l[1]),this.h()},l(t){e=$(t,"DIV",{class:!0});var i=T(e);s=$(i,"H3",{});var c=T(s);a=V(c,l[1]),c.forEach(p),i.forEach(p),this.h()},h(){h(e,"class",n=`flex-${l[4]?"none":"auto"}`)},m(t,i){S(t,e,i),g(e,s),g(s,a)},p(t,i){i&2&&K(a,t[1]),i&16&&n!==(n=`flex-${t[4]?"none":"auto"}`)&&h(e,"class",n)},d(t){t&&p(e)}}}function Ve(l){let e,s;const a=l[7].default,n=ce(a,l,l[6],null);return{c(){e=b("div"),n&&n.c(),this.h()},l(t){e=$(t,"DIV",{class:!0});var i=T(e);n&&n.l(i),i.forEach(p),this.h()},h(){h(e,"class","flex-auto")},m(t,i){S(t,e,i),n&&n.m(e,null),s=!0},p(t,i){n&&n.p&&(!s||i&64)&&ue(n,a,t,t[6],s?de(a,t[6],i,null):fe(t[6]),null)},i(t){s||(q(n,t),s=!0)},o(t){L(n,t),s=!1},d(t){t&&p(e),n&&n.d(t)}}}function Ne(l){let e,s;const a=l[7].default,n=ce(a,l,l[6],null);return{c(){e=b("div"),n&&n.c(),this.h()},l(t){e=$(t,"DIV",{class:!0});var i=T(e);n&&n.l(i),i.forEach(p),this.h()},h(){h(e,"class","border rounded-md border-surface-500-400-token ml-4 p-1")},m(t,i){S(t,e,i),n&&n.m(e,null),s=!0},p(t,i){n&&n.p&&(!s||i&64)&&ue(n,a,t,t[6],s?de(a,t[6],i,null):fe(t[6]),null)},i(t){s||(q(n,t),s=!0)},o(t){L(n,t),s=!1},d(t){t&&p(e),n&&n.d(t)}}}function ct(l){let e,s,a=l[3]&&Re(l);return{c(){a&&a.c(),e=ae()},l(n){a&&a.l(n),e=ae()},m(n,t){a&&a.m(n,t),S(n,e,t),s=!0},p(n,[t]){n[3]?a?(a.p(n,t),t&8&&q(a,1)):(a=Re(n),a.c(),q(a,1),a.m(e.parentNode,e)):a&&(ge(),L(a,1,1,()=>{a=null}),be())},i(n){s||(q(a),s=!0)},o(n){L(a),s=!1},d(n){n&&p(e),a&&a.d(n)}}}function ut(l,e,s){let{$$slots:a={},$$scope:n}=e,{step:t}=e,{title:i=""}=e,{collapsed:c=!1}=e,{show:o=!0}=e,{inline:f=!1}=e,{active:r=!1}=e;return l.$$set=u=>{"step"in u&&s(0,t=u.step),"title"in u&&s(1,i=u.title),"collapsed"in u&&s(2,c=u.collapsed),"show"in u&&s(3,o=u.show),"inline"in u&&s(4,f=u.inline),"active"in u&&s(5,r=u.active),"$$scope"in u&&s(6,n=u.$$scope)},[t,i,c,o,f,r,n,a]}class Ee extends Y{constructor(e){super(),Z(this,e,ut,ct,X,{step:0,title:1,collapsed:2,show:3,inline:4,active:5})}}function ft(l){let e,s,a;const n=l[2].default,t=ce(n,l,l[1],null);return{c(){e=b("div"),t&&t.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var c=T(e);t&&t.l(c),c.forEach(p),this.h()},h(){h(e,"class",s=`grid grid-cols-${l[0]} divide-x py-4`)},m(i,c){S(i,e,c),t&&t.m(e,null),a=!0},p(i,[c]){t&&t.p&&(!a||c&2)&&ue(t,n,i,i[1],a?de(n,i[1],c,null):fe(i[1]),null),(!a||c&1&&s!==(s=`grid grid-cols-${i[0]} divide-x py-4`))&&h(e,"class",s)},i(i){a||(q(t,i),a=!0)},o(i){L(t,i),a=!1},d(i){i&&p(e),t&&t.d(i)}}}function dt(l,e,s){let{$$slots:a={},$$scope:n}=e,{columns:t}=e;return l.$$set=i=>{"columns"in i&&s(0,t=i.columns),"$$scope"in i&&s(1,n=i.$$scope)},[t,n,a]}class Fe extends Y{constructor(e){super(),Z(this,e,dt,ft,X,{columns:0})}}const pt=l=>({}),He=l=>({});function ht(l){let e,s,a,n,t,i;const c=l[2].help,o=ce(c,l,l[1],He),f=l[2].default,r=ce(f,l,l[1],null);return{c(){e=b("div"),s=b("div"),a=A(l[0]),n=U(),o&&o.c(),t=U(),r&&r.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var d=T(e);s=$(d,"DIV",{class:!0});var m=T(s);a=V(m,l[0]),n=C(m),o&&o.l(m),m.forEach(p),t=C(d),r&&r.l(d),d.forEach(p),this.h()},h(){h(s,"class","border-b border-primary-500-400-token text-center mb-2"),h(e,"class","text-center border-surface-500-400-token px-4")},m(u,d){S(u,e,d),g(e,s),g(s,a),g(s,n),o&&o.m(s,null),g(e,t),r&&r.m(e,null),i=!0},p(u,[d]){(!i||d&1)&&K(a,u[0]),o&&o.p&&(!i||d&2)&&ue(o,c,u,u[1],i?de(c,u[1],d,pt):fe(u[1]),He),r&&r.p&&(!i||d&2)&&ue(r,f,u,u[1],i?de(f,u[1],d,null):fe(u[1]),null)},i(u){i||(q(o,u),q(r,u),i=!0)},o(u){L(o,u),L(r,u),i=!1},d(u){u&&p(e),o&&o.d(u),r&&r.d(u)}}}function mt(l,e,s){let{$$slots:a={},$$scope:n}=e,{title:t=""}=e;return l.$$set=i=>{"title"in i&&s(0,t=i.title),"$$scope"in i&&s(1,n=i.$$scope)},[t,n,a]}class oe extends Y{constructor(e){super(),Z(this,e,mt,ht,X,{title:0})}}function _t(l){let e,s=`<li><em class="font-bold">Phenotypic Data:</em> Clinical data, electronic health record information.</li> <li><em class="font-bold">Annotated variant data for selected genes:</em> The annotated variant data
    is sourced from the combined, annotated VCF and represents the patient cohort selected by the applied
    genomic and clinical filters. The original sample VCFs have been annotated using the Ensembl Variant
    Effect Predictor (VEP) to provide additional annotations and determine the effects of each variant.
    Modifier variants have been removed. To learn more visit the User Guide.</li>`;return{c(){e=b("ul"),e.innerHTML=s,this.h()},l(a){e=$(a,"UL",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1nszwi1"&&(e.innerHTML=s),this.h()},h(){h(e,"class","list-disc ml-4")},m(a,n){S(a,e,n)},p:O,i:O,o:O,d(a){a&&p(e)}}}class vt extends Y{constructor(e){super(),Z(this,e,null,_t,X,{})}}function gt(l){let e,s="Sending data from PIC-SURE to Service Workbench could take several minutes.",a,n,t=`To update the status of your data upload, click the refresh button
  <i class="fa-solid fa-arrows-rotate fa-sm text-primary-500"></i>
  next to &quot;Status&quot;.`,i,c,o,f,r,u,d,m,_,v="Okay, got it!",E,y;return{c(){e=b("p"),e.textContent=s,a=U(),n=b("p"),n.innerHTML=t,i=U(),c=b("div"),o=b("div"),f=b("label"),r=b("input"),u=A(" I understand, don't show this again"),d=U(),m=b("div"),_=b("button"),_.textContent=v,this.h()},l(w){e=$(w,"P",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1x4kuob"&&(e.textContent=s),a=C(w),n=$(w,"P",{class:!0,"data-svelte-h":!0}),N(n)!=="svelte-ozjwi8"&&(n.innerHTML=t),i=C(w),c=$(w,"DIV",{class:!0});var I=T(c);o=$(I,"DIV",{class:!0});var k=T(o);f=$(k,"LABEL",{});var D=T(f);r=$(D,"INPUT",{"data-testid":!0,type:!0,class:!0}),u=V(D," I understand, don't show this again"),D.forEach(p),k.forEach(p),d=C(I),m=$(I,"DIV",{class:!0});var R=T(m);_=$(R,"BUTTON",{type:!0,"data-testid":!0,class:!0,"data-svelte-h":!0}),N(_)!=="svelte-m8z970"&&(_.textContent=v),R.forEach(p),I.forEach(p),this.h()},h(){h(e,"class","font-bold text-center"),h(n,"class","font-bold text-center"),h(r,"data-testid","send-data-remember-checkbox"),h(r,"type","checkbox"),h(r,"class","checkbox flex-none"),h(o,"class","flex-auto"),h(_,"type","button"),h(_,"data-testid","send-data-modal-confirm-btn"),h(_,"class","btn variant-ringed-primary hover:variant-ghost-primary"),h(m,"class","flex-none test-right"),h(c,"class","flex gap-2")},m(w,I){S(w,e,I),S(w,a,I),S(w,n,I),S(w,i,I),S(w,c,I),g(c,o),g(o,f),g(f,r),r.checked=l[0],g(f,u),g(c,d),g(c,m),g(m,_),E||(y=[H(r,"change",l[3]),H(_,"click",l[2])],E=!0)},p(w,[I]){I&1&&(r.checked=w[0])},i:O,o:O,d(w){w&&(p(e),p(a),p(n),p(i),p(c)),E=!1,Ge(y)}}}function bt(l,e,s){let a;const n=Te();F(l,n,o=>s(4,a=o));let t=!1;async function i(){var o;t&&it&&localStorage.setItem("dataRequest-sendData-displayPrompt","no"),a[0]&&(await((o=a[0])!=null&&o.meta.sendData?a[0].meta.sendData:()=>{console.log("dummy method")})(),n.close())}function c(){t=this.checked,s(0,t)}return[t,n,i,c]}class $t extends Y{constructor(e){super(),Z(this,e,bt,gt,X,{})}}function yt(l){let e,s=`<li>Select the <em class="font-bold">lead PI&#39;s home institution</em> from the drop-down menu.
    <ul class="list-none ml-4"><li><em>The lead PI is indicated on the RedCap form under the &quot;Lead Principal Investigator&#39;s
          Institutional Affiliation&quot;</em></li></ul></li> <li>The &quot;Host Site,&quot; refers to the lead PI&#39;s home institution. The patient-level data will be stored
    in this institutional AWS-linked account.</li> <li>All collaborators listed on the RedCap form approved by the local SDAC will have access to the
    data within SWB.</li>`;return{c(){e=b("ul"),e.innerHTML=s,this.h()},l(a){e=$(a,"UL",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-geabsg"&&(e.innerHTML=s),this.h()},h(){h(e,"class","list-disc ml-4")},m(a,n){S(a,e,n)},p:O,i:O,o:O,d(a){a&&p(e)}}}class wt extends Y{constructor(e){super(),Z(this,e,null,yt,X,{})}}function Oe(l){let e,s;return e=new rt({props:{query:l[0]}}),{c(){B(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,n){W(e,a,n),s=!0},p(a,n){const t={};n&1&&(t.query=a[0]),e.$set(t)},i(a){s||(q(e.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),s=!1},d(a){j(e,a)}}}function kt(l){let e,s,a,n,t="Dataset ID:",i,c,o,f,r,u,d=l[0]&&Oe(l);return{c(){e=b("section"),s=b("table"),a=b("tr"),n=b("td"),n.textContent=t,i=U(),c=b("td"),o=A(l[1]),f=U(),d&&d.c(),r=ae(),this.h()},l(m){e=$(m,"SECTION",{id:!0,class:!0});var _=T(e);s=$(_,"TABLE",{class:!0});var v=T(s);a=$(v,"TR",{});var E=T(a);n=$(E,"TD",{"data-svelte-h":!0}),N(n)!=="svelte-17mss8h"&&(n.textContent=t),i=C(E),c=$(E,"TD",{"data-testid":!0});var y=T(c);o=V(y,l[1]),y.forEach(p),E.forEach(p),v.forEach(p),_.forEach(p),f=C(m),d&&d.l(m),r=ae(),this.h()},h(){h(c,"data-testid","dataset-summary-uuid"),h(s,"class","table bg-transparent"),h(e,"id","detail-summary-container"),h(e,"class","m-3")},m(m,_){S(m,e,_),g(e,s),g(s,a),g(a,n),g(a,i),g(a,c),g(c,o),S(m,f,_),d&&d.m(m,_),S(m,r,_),u=!0},p(m,[_]){(!u||_&2)&&K(o,m[1]),m[0]?d?(d.p(m,_),_&1&&q(d,1)):(d=Oe(m),d.c(),q(d,1),d.m(r.parentNode,r)):d&&(ge(),L(d,1,1,()=>{d=null}),be())},i(m){u||(q(d),u=!0)},o(m){L(d),u=!1},d(m){m&&(p(e),p(f),p(r)),d&&d.d(m)}}}function Et(l,e,s){let a,n,t;const i=Te();return F(l,i,c=>s(3,t=c)),l.$$.update=()=>{var c,o;l.$$.dirty&8&&s(1,a=(c=t[0])==null?void 0:c.meta.queryId),l.$$.dirty&8&&s(0,n=(o=t[0])==null?void 0:o.meta.query)},[n,a,i,t]}class Dt extends Y{constructor(e){super(),Z(this,e,Et,kt,X,{})}}var M=(l=>(l.Uploading="Uploading",l.Querying="Querying",l.Uploaded="Uploaded",l.Error="Error",l.Unsent="Unsent",l.Unknown="Unknown",l.Queued="Queued",l))(M||{});const St="picsure/query",Tt="picsure/proxy/uploader/sites",De="picsure/proxy/uploader/status",It="picsure/proxy/uploader/upload",Je={uuid:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,date:/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/};let pe=[];const ne=J(""),ee=J({genomic:!1,phenotypic:!1}),$e=J(""),he=J(""),me={...$e,set:l=>{Je.uuid.test(l)&&$e.set(l)}},ye={...he,set:l=>{Je.date.test(l)&&he.set(l)}},Ke=J(""),Ie=J(!1),we=J(null),ke=J(null),_e=J(null);function te(l,e=!1){return function(s){e&&Ie.set(!0),console.error(s),Ke.set(l)}}function se(l){return l!=null&&l.error?Promise.reject(l.error):l}function Se(l){_e.set(l);const e=z(ye);l.approved&&e!==l.approved&&he.set(l.approved);const s=z(we);l.site?ne.set(l.site):s!=null&&s.homeSite&&ne.set(s.homeSite),ee.set({genomic:!!l.genomic&&l.genomic!==M.Unsent,phenotypic:!!l.phenotypic&&l.phenotypic!==M.Unsent})}async function qt(){const l=z(me);await re(`${De}/${l}`).then(se).then(Se).catch(te("Error updating data request status."))}async function Be(){const l=z(me),e=z(ke),s=z(ne);if(!l||!e||!s)return;const a=z(ee),n=z(_e),t=i=>ot(`${It}/${s}?`+new URLSearchParams({dataType:i}),{...e.resultMetadata.queryJson.query,picSureId:l}).then(se).then(_e.set).catch(te(`Error sending ${i} data request`));a.phenotypic&&(n==null?void 0:n.phenotypic)===M.Unsent&&await t("Phenotypic"),a.genomic&&(n==null?void 0:n.genomic)===M.Unsent&&await t("Genomic")}async function Ut(){z(we)||await re(Tt).then(se).then(l=>{we.set(l),ne.set(l.homeSite)}).catch(te("Error retrieving site list."))}function Ct(){pe.push($e.subscribe(async l=>{l&&await re(`${De}/${l}`).then(se).then(Se).then(()=>re(`${St}/${l}/metadata`).then(se).then(ke.set).catch(te(`Metadata for ${l} could not be found.`,!0))).catch(te("We couldn't find any matching results. Please check to ensure the value you have entered is correct or try searching for a different Dataset Request ID",!0))})),pe.push(he.subscribe(async l=>{const e=z(ye);if(!l||e)return;const s=z(me);await re(`${De}/${s}/approve?`+new URLSearchParams({date:l})).then(se).then(Se).catch(te(`Status for ${s} was not found.`))}))}function Lt(){pe.forEach(l=>l()),pe=[]}function Xe(){$e.set(""),he.set(""),Ie.set(!1),ee.set({genomic:!1,phenotypic:!1}),ke.set(null),_e.set(null)}function Qe(l,e,s){const a=l.slice();return a[25]=e[s],a}function Pt(l){let e,s,a="Dataset Id:",n,t,i,c,o;return{c(){e=b("label"),s=b("span"),s.textContent=a,n=U(),t=b("input"),this.h()},l(f){e=$(f,"LABEL",{class:!0});var r=T(e);s=$(r,"SPAN",{class:!0,"data-svelte-h":!0}),N(s)!=="svelte-rqdy7g"&&(s.textContent=a),n=C(r),t=$(r,"INPUT",{class:!0,placeholder:!0,pattern:!0}),r.forEach(p),this.h()},h(){h(s,"class","sr-only"),h(t,"class","input w-3/4"),h(t,"placeholder","001234567-89ab-cdef-fedc-98765432100"),h(t,"pattern",lt),t.disabled=i=!l[8].active,h(e,"class","inline label required")},m(f,r){S(f,e,r),g(e,s),g(e,n),g(e,t),le(t,l[3]),c||(o=H(t,"input",l[16]),c=!0)},p(f,r){r&256&&i!==(i=!f[8].active)&&(t.disabled=i),r&8&&t.value!==f[3]&&le(t,f[3])},d(f){f&&p(e),c=!1,o()}}}function Mt(l){let e,s,a='<i class="fa-regular fa-2xl fa-file-pdf"></i> <span>Data Request Summary</span>',n,t;return{c(){e=b("div"),s=b("button"),s.innerHTML=a,this.h()},l(i){e=$(i,"DIV",{});var c=T(e);s=$(c,"BUTTON",{"data-testid":!0,class:!0,"data-svelte-h":!0}),N(s)!=="svelte-1w1dd84"&&(s.innerHTML=a),c.forEach(p),this.h()},h(){h(s,"data-testid","data-request-btn"),h(s,"class","text-primary-700-200-token hover:text-secondary-700-200-token inline-block mt-4")},m(i,c){S(i,e,c),g(e,s),n||(t=H(s,"click",l[11]),n=!0)},p:O,d(i){i&&p(e),n=!1,t()}}}function Rt(l){var d;let e,s,a,n=((d=l[9])==null?void 0:d.homeDisplay)+"",t,i,c,o,f,r,u;return{c(){e=b("label"),s=b("div"),a=A("Date approved by "),t=A(n),i=A(" SDAC"),c=U(),o=b("input"),this.h()},l(m){e=$(m,"LABEL",{});var _=T(e);s=$(_,"DIV",{});var v=T(s);a=V(v,"Date approved by "),t=V(v,n),i=V(v," SDAC"),v.forEach(p),c=C(_),o=$(_,"INPUT",{class:!0,"data-testid":!0,type:!0}),_.forEach(p),this.h()},h(){h(o,"class","input w-48 mt-1"),h(o,"data-testid","data-approved-date"),h(o,"type","date"),o.disabled=f=!l[7].active},m(m,_){S(m,e,_),g(e,s),g(s,a),g(s,t),g(s,i),g(e,c),g(e,o),le(o,l[2]),r||(u=H(o,"input",l[17]),r=!0)},p(m,_){var v;_&512&&n!==(n=((v=m[9])==null?void 0:v.homeDisplay)+"")&&K(t,n),_&128&&f!==(f=!m[7].active)&&(o.disabled=f),_&4&&le(o,m[2])},d(m){m&&p(e),r=!1,u()}}}function At(l){let e,s,a,n;return e=new oe({props:{title:"View Dataset Information",$$slots:{default:[Mt]},$$scope:{ctx:l}}}),a=new oe({props:{title:"Data Request Approval",$$slots:{default:[Rt]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment),s=U(),B(a.$$.fragment)},l(t){Q(e.$$.fragment,t),s=C(t),Q(a.$$.fragment,t)},m(t,i){W(e,t,i),S(t,s,i),W(a,t,i),n=!0},p(t,i){const c={};i&268435456&&(c.$$scope={dirty:i,ctx:t}),e.$set(c);const o={};i&268436100&&(o.$$scope={dirty:i,ctx:t}),a.$set(o)},i(t){n||(q(e.$$.fragment,t),q(a.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),L(a.$$.fragment,t),n=!1},d(t){t&&p(s),j(e,t),j(a,t)}}}function Vt(l){let e,s;return e=new Fe({props:{columns:2,$$slots:{default:[At]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,n){W(e,a,n),s=!0},p(a,n){const t={};n&268436100&&(t.$$scope={dirty:n,ctx:a}),e.$set(t)},i(a){s||(q(e.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),s=!1},d(a){j(e,a)}}}function We(l){let e,s=l[25]+"",a,n;return{c(){e=b("option"),a=A(s),this.h()},l(t){e=$(t,"OPTION",{});var i=T(e);a=V(i,s),i.forEach(p),this.h()},h(){e.__value=n=l[25],le(e,e.__value)},m(t,i){S(t,e,i),g(e,a)},p(t,i){i&512&&s!==(s=t[25]+"")&&K(a,s),i&512&&n!==(n=t[25])&&(e.__value=n,le(e,e.__value))},d(t){t&&p(e)}}}function Nt(l){var c;let e,s,a,n,t=Le(((c=l[9])==null?void 0:c.sites)||[]),i=[];for(let o=0;o<t.length;o+=1)i[o]=We(Qe(l,t,o));return{c(){e=b("select");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=$(o,"SELECT",{"data-testid":!0,class:!0});var f=T(e);for(let r=0;r<i.length;r+=1)i[r].l(f);f.forEach(p),this.h()},h(){var o;h(e,"data-testid","selected-site"),h(e,"class","select"),e.disabled=s=!!((o=l[0])!=null&&o.site),l[10]===void 0&&ze(()=>l[18].call(e))},m(o,f){S(o,e,f);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null);Ue(e,l[10],!0),a||(n=H(e,"change",l[18]),a=!0)},p(o,f){var r,u;if(f&512){t=Le(((r=o[9])==null?void 0:r.sites)||[]);let d;for(d=0;d<t.length;d+=1){const m=Qe(o,t,d);i[d]?i[d].p(m,f):(i[d]=We(m),i[d].c(),i[d].m(e,null))}for(;d<i.length;d+=1)i[d].d(1);i.length=t.length}f&1&&s!==(s=!!((u=o[0])!=null&&u.site))&&(e.disabled=s),f&1536&&Ue(e,o[10])},d(o){o&&p(e),tt(i,o),a=!1,n()}}}function Ht(l){let e,s='<i class="fa-regular fa-circle-question fa-sm text-primary-500"></i>',a,n;return{c(){e=b("button"),e.innerHTML=s,this.h()},l(t){e=$(t,"BUTTON",{"data-testid":!0,"data-svelte-h":!0}),N(e)!=="svelte-1502un6"&&(e.innerHTML=s),this.h()},h(){h(e,"data-testid","data-loc-modal-btn")},m(t,i){S(t,e,i),a||(n=H(e,"click",l[12]),a=!0)},p:O,d(t){t&&p(e),a=!1,n()}}}function Ot(l){let e,s,a,n,t,i="Phenotypic Data",c,o,f,r,u,d,m="Annotated variant data for selected genes",_,v,E,y,w,I;return{c(){e=b("label"),s=b("input"),n=U(),t=b("p"),t.textContent=i,c=U(),o=b("label"),f=b("input"),u=U(),d=b("p"),d.textContent=m,_=U(),v=b("button"),E=A("Send Data"),this.h()},l(k){e=$(k,"LABEL",{class:!0});var D=T(e);s=$(D,"INPUT",{type:!0,"data-testid":!0,class:!0}),n=C(D),t=$(D,"P",{"data-svelte-h":!0}),N(t)!=="svelte-1lskvjr"&&(t.textContent=i),D.forEach(p),c=C(k),o=$(k,"LABEL",{class:!0});var R=T(o);f=$(R,"INPUT",{type:!0,"data-testid":!0,class:!0}),u=C(R),d=$(R,"P",{class:!0,"data-svelte-h":!0}),N(d)!=="svelte-18uhc8"&&(d.textContent=m),R.forEach(p),_=C(k),v=$(k,"BUTTON",{type:!0,"data-testid":!0,class:!0});var G=T(v);E=V(G,"Send Data"),G.forEach(p),this.h()},h(){var k,D;h(s,"type","checkbox"),h(s,"data-testid","data-pheno-checkbox"),h(s,"class","checkbox flex-none"),s.disabled=a=((k=l[0])==null?void 0:k.phenotypic)!==M.Unsent,h(e,"class","flex items-center space-x-2 my-2"),h(f,"type","checkbox"),h(f,"data-testid","data-geno-checkbox"),h(f,"class","checkbox flex-none"),f.disabled=r=((D=l[0])==null?void 0:D.genomic)!==M.Unsent,h(d,"class","text-left flex-auto"),h(o,"class","flex space-x-2 my-2 align-top"),h(v,"type","button"),h(v,"data-testid","send-data-btn"),h(v,"class","btn variant-ringed-success hover:variant-ghost-success"),v.disabled=y=!l[5]},m(k,D){S(k,e,D),g(e,s),s.checked=l[1].phenotypic,g(e,n),g(e,t),S(k,c,D),S(k,o,D),g(o,f),f.checked=l[1].genomic,g(o,u),g(o,d),S(k,_,D),S(k,v,D),g(v,E),w||(I=[H(s,"change",l[19]),H(f,"change",l[20]),H(v,"click",l[14])],w=!0)},p(k,D){var R,G;D&1&&a!==(a=((R=k[0])==null?void 0:R.phenotypic)!==M.Unsent)&&(s.disabled=a),D&2&&(s.checked=k[1].phenotypic),D&1&&r!==(r=((G=k[0])==null?void 0:G.genomic)!==M.Unsent)&&(f.disabled=r),D&2&&(f.checked=k[1].genomic),D&32&&y!==(y=!k[5])&&(v.disabled=y)},d(k){k&&(p(e),p(c),p(o),p(_),p(v)),w=!1,Ge(I)}}}function Bt(l){let e,s='<i class="fa-regular fa-circle-question fa-sm text-primary-500"></i>',a,n;return{c(){e=b("button"),e.innerHTML=s,this.h()},l(t){e=$(t,"BUTTON",{"data-testid":!0,"data-svelte-h":!0}),N(e)!=="svelte-1558hwz"&&(e.innerHTML=s),this.h()},h(){h(e,"data-testid","data-type-modal-btn")},m(t,i){S(t,e,i),a||(n=H(e,"click",l[13]),a=!0)},p:O,d(t){t&&p(e),a=!1,n()}}}function Qt(l){let e,s,a,n,t,i,c,o=l[4].phenotypic.label+"",f,r,u,d,m,_,v,E,y,w=l[4].genomic.label+"",I;return{c(){e=b("div"),s=b("i"),n=U(),t=b("p"),i=A("Phenotypic Data: "),c=b("span"),f=A(o),r=U(),u=b("div"),d=b("i"),_=U(),v=b("p"),E=A("Annotated variant data for selected genes: "),y=b("span"),I=A(w),this.h()},l(k){e=$(k,"DIV",{class:!0});var D=T(e);s=$(D,"I",{class:!0}),T(s).forEach(p),n=C(D),t=$(D,"P",{class:!0});var R=T(t);i=V(R,"Phenotypic Data: "),c=$(R,"SPAN",{"data-testid":!0});var G=T(c);f=V(G,o),G.forEach(p),R.forEach(p),D.forEach(p),r=C(k),u=$(k,"DIV",{class:!0});var x=T(u);d=$(x,"I",{class:!0}),T(d).forEach(p),_=C(x),v=$(x,"P",{class:!0});var ie=T(v);E=V(ie,"Annotated variant data for selected genes: "),y=$(ie,"SPAN",{"data-testid":!0});var ve=T(y);I=V(ve,w),ve.forEach(p),ie.forEach(p),x.forEach(p),this.h()},h(){h(s,"class",a=`${l[4].phenotypic.icon} flex-none`),h(c,"data-testid","status-pheno"),h(t,"class","text-left flex-auto"),h(e,"class","flex space-x-2 my-2 align-top"),h(d,"class",m=`${l[4].genomic.icon} flex-none`),h(y,"data-testid","status-geno"),h(v,"class","text-left flex-auto"),h(u,"class","flex space-x-2 my-2 align-top")},m(k,D){S(k,e,D),g(e,s),g(e,n),g(e,t),g(t,i),g(t,c),g(c,f),S(k,r,D),S(k,u,D),g(u,d),g(u,_),g(u,v),g(v,E),g(v,y),g(y,I)},p(k,D){D&16&&a!==(a=`${k[4].phenotypic.icon} flex-none`)&&h(s,"class",a),D&16&&o!==(o=k[4].phenotypic.label+"")&&K(f,o),D&16&&m!==(m=`${k[4].genomic.icon} flex-none`)&&h(d,"class",m),D&16&&w!==(w=k[4].genomic.label+"")&&K(I,w)},d(k){k&&(p(e),p(r),p(u))}}}function Wt(l){let e,s='<i class="fa-solid fa-arrows-rotate fa-sm"></i> <span class="sr-only">Refresh</span>',a,n;return{c(){e=b("button"),e.innerHTML=s,this.h()},l(t){e=$(t,"BUTTON",{type:!0,"data-testid":!0,title:!0,class:!0,"data-svelte-h":!0}),N(e)!=="svelte-hu49xl"&&(e.innerHTML=s),this.h()},h(){h(e,"type","button"),h(e,"data-testid","status-refresh-btn"),h(e,"title","Refresh"),h(e,"class","text-primary-500 disabled:text-secondary-500")},m(t,i){S(t,e,i),a||(n=H(e,"click",qt),a=!0)},p:O,d(t){t&&p(e),a=!1,n()}}}function jt(l){let e,s,a,n,t,i;return e=new oe({props:{title:"Data Storage Location",$$slots:{help:[Ht],default:[Nt]},$$scope:{ctx:l}}}),a=new oe({props:{title:"Select & Send Data",$$slots:{help:[Bt],default:[Ot]},$$scope:{ctx:l}}}),t=new oe({props:{title:"Status",$$slots:{help:[Wt],default:[Qt]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment),s=U(),B(a.$$.fragment),n=U(),B(t.$$.fragment)},l(c){Q(e.$$.fragment,c),s=C(c),Q(a.$$.fragment,c),n=C(c),Q(t.$$.fragment,c)},m(c,o){W(e,c,o),S(c,s,o),W(a,c,o),S(c,n,o),W(t,c,o),i=!0},p(c,o){const f={};o&268436993&&(f.$$scope={dirty:o,ctx:c}),e.$set(f);const r={};o&268435491&&(r.$$scope={dirty:o,ctx:c}),a.$set(r);const u={};o&268435472&&(u.$$scope={dirty:o,ctx:c}),t.$set(u)},i(c){i||(q(e.$$.fragment,c),q(a.$$.fragment,c),q(t.$$.fragment,c),i=!0)},o(c){L(e.$$.fragment,c),L(a.$$.fragment,c),L(t.$$.fragment,c),i=!1},d(c){c&&(p(s),p(n)),j(e,c),j(a,c),j(t,c)}}}function zt(l){let e,s;return e=new Fe({props:{columns:3,$$slots:{default:[jt]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,n){W(e,a,n),s=!0},p(a,n){const t={};n&268437043&&(t.$$scope={dirty:n,ctx:a}),e.$set(t)},i(a){s||(q(e.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),s=!1},d(a){j(e,a)}}}function je(l){let e,s="Reset",a,n;return{c(){e=b("button"),e.textContent=s,this.h()},l(t){e=$(t,"BUTTON",{type:!0,"data-testid":!0,class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1qa8mow"&&(e.textContent=s),this.h()},h(){h(e,"type","button"),h(e,"data-testid","reset-btn"),h(e,"class","btn variant-ghost-secondary float-right")},m(t,i){S(t,e,i),a||(n=H(e,"click",Xe),a=!0)},d(t){t&&p(e),a=!1,n()}}}function Gt(l){let e,s,a,n,t,i,c,o;e=new Ee({props:{step:1,title:"Search for Dataset Request ID",inline:!0,active:l[8].active,$$slots:{default:[Pt]},$$scope:{ctx:l}}}),a=new Ee({props:{step:2,title:"Review Dataset Request",show:l[7].show,active:l[7].active,$$slots:{default:[Vt]},$$scope:{ctx:l}}}),t=new Ee({props:{step:3,title:"Share Patient-Level Data",show:l[6].show,active:l[6].active,$$slots:{default:[zt]},$$scope:{ctx:l}}});let f=(l[7].show||l[6].show)&&je();return{c(){B(e.$$.fragment),s=U(),B(a.$$.fragment),n=U(),B(t.$$.fragment),i=U(),f&&f.c(),c=ae()},l(r){Q(e.$$.fragment,r),s=C(r),Q(a.$$.fragment,r),n=C(r),Q(t.$$.fragment,r),i=C(r),f&&f.l(r),c=ae()},m(r,u){W(e,r,u),S(r,s,u),W(a,r,u),S(r,n,u),W(t,r,u),S(r,i,u),f&&f.m(r,u),S(r,c,u),o=!0},p(r,u){const d={};u&256&&(d.active=r[8].active),u&268435720&&(d.$$scope={dirty:u,ctx:r}),e.$set(d);const m={};u&128&&(m.show=r[7].show),u&128&&(m.active=r[7].active),u&268436100&&(m.$$scope={dirty:u,ctx:r}),a.$set(m);const _={};u&64&&(_.show=r[6].show),u&64&&(_.active=r[6].active),u&268437043&&(_.$$scope={dirty:u,ctx:r}),t.$set(_),r[7].show||r[6].show?f||(f=je(),f.c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null)},i(r){o||(q(e.$$.fragment,r),q(a.$$.fragment,r),q(t.$$.fragment,r),o=!0)},o(r){L(e.$$.fragment,r),L(a.$$.fragment,r),L(t.$$.fragment,r),o=!1},d(r){r&&(p(s),p(n),p(i),p(c)),j(e,r),j(a,r),j(t,r),f&&f.d(r)}}}function Ft(l){let e,s,a;return document.title=at.applicationName+" | Data Requests",s=new nt({props:{title:"Data Requests",$$slots:{default:[Gt]},$$scope:{ctx:l}}}),{c(){e=U(),B(s.$$.fragment)},l(n){Ze("svelte-1cikpg3",document.head).forEach(p),e=C(n),Q(s.$$.fragment,n)},m(n,t){S(n,e,t),W(s,n,t),a=!0},p(n,[t]){const i={};t&268437503&&(i.$$scope={dirty:t,ctx:n}),s.$set(i)},i(n){a||(q(s.$$.fragment,n),a=!0)},o(n){L(s.$$.fragment,n),a=!1},d(n){n&&p(e),j(s,n)}}}function Jt(l,e,s){let a,n,t,i,c,o,f,r,u,d,m,_,v;F(l,ke,P=>s(21,o=P)),F(l,_e,P=>s(0,f=P)),F(l,ee,P=>s(1,r=P)),F(l,ye,P=>s(2,u=P)),F(l,me,P=>s(3,d=P)),F(l,Ie,P=>s(15,m=P)),F(l,we,P=>s(9,_=P)),F(l,ne,P=>s(10,v=P));const E=Te(),y=st();function w(P){return[{progress:[M.Uploaded],icon:"fa-regular fa-circle-check text-success-500-400-token",label:"Upload Successful"},{progress:[M.Queued,M.Querying,M.Uploading],icon:"fa-regular fa-paper-plane text-tertiary-500-400-token",label:"Uploading..."},{progress:[M.Error,M.Unknown],icon:"fa-solid fa-circle-xmark text-error-500-400-token",label:"Upload Failed"}].find(({progress:qe})=>qe.includes(P))||{icon:"fa-regular fa-circle-xmark text-primary-500-400-token",label:"Unsent"}}function I(){E.trigger({type:"component",title:"Data Request Summary",component:"modalWrapper",meta:{component:Dt,queryId:(o==null?void 0:o.picsureResultId)||"",query:(o==null?void 0:o.resultMetadata.queryJson.query)||{}}})}function k(){E.trigger({type:"component",title:"Data Storage Location",component:"modalWrapper",meta:{component:wt}})}function D(){E.trigger({type:"component",title:"Data Types",component:"modalWrapper",meta:{component:vt}})}async function R(){let P=!0;P=(localStorage.getItem("dataRequest-sendData-displayPrompt")||"yes")!=="no",P?E.trigger({type:"component",title:"",modalClasses:"w-96",component:"modalWrapper",meta:{component:$t,sendData:Be}}):await Be()}xe(()=>(Ct(),pe.push(Ke.subscribe(P=>{P&&y.trigger({message:P,background:"variant-filled-error"})})),Ut(),()=>{Xe(),Lt()}));function G(){d=this.value,me.set(d)}function x(){u=this.value,ye.set(u)}function ie(){v=et(this),ne.set(v)}function ve(){r.phenotypic=this.checked,ee.set(r)}function Ye(){r.genomic=this.checked,ee.set(r)}return l.$$.update=()=>{l.$$.dirty&32780&&s(8,a={show:!0,active:m||!d&&!u}),l.$$.dirty&32780&&s(7,n={show:!m&&!!d,active:!m&&!!d&&!u}),l.$$.dirty&32780&&s(6,t={show:!m&&!!d&&!!u,active:!m&&!!d&&!!u}),l.$$.dirty&3&&s(5,i=r.genomic&&(f==null?void 0:f.genomic)===M.Unsent||r.phenotypic&&(f==null?void 0:f.phenotypic)===M.Unsent),l.$$.dirty&1&&s(4,c={genomic:w((f==null?void 0:f.genomic)||M.Unsent),phenotypic:w((f==null?void 0:f.phenotypic)||M.Unsent)})},[f,r,u,d,c,i,t,n,a,_,v,I,k,D,R,m,G,x,ie,ve,Ye]}class cs extends Y{constructor(e){super(),Z(this,e,Jt,Ft,X,{})}}export{cs as component};
