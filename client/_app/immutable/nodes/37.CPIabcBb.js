var Ge=Object.defineProperty;var _e=l=>{throw TypeError(l)};var qe=(l,e,r)=>e in l?Ge(l,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[e]=r;var ve=(l,e,r)=>qe(l,typeof e!="symbol"?e+"":e,r),Ce=(l,e,r)=>e.has(l)||_e("Cannot "+r);var A=(l,e,r)=>(Ce(l,e,"read from private field"),r?r.call(l):e.get(l)),Q=(l,e,r)=>e.has(l)?_e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,r);import{f as x,a as _,t as Fe,c as $e}from"../chunks/CtfeAAbw.js";import{o as Se}from"../chunks/DlIBaGjY.js";import{p as M,c as y,s as h,r as b,t as E,a as U,g as s,h as K,F as Le,b as I,d as Y,u as Oe,e as $,f as W,n as ue,$ as Ae}from"../chunks/B4GrenNm.js";import{d as Z}from"../chunks/D7VV4X-8.js";import{s as X,h as ze}from"../chunks/DxSOTiY2.js";import{i as L}from"../chunks/CSsnQ7i2.js";import{b as ne,s as T,r as le,d as Ee,g as Re}from"../chunks/BPiAbArq.js";import{p as z,a as J,s as ee,c as ce,m as je}from"../chunks/DvPjbdiY.js";import{b as he}from"../chunks/CHRSknKA.js";import{g as Te}from"../chunks/CsA2x4iF.js";import{p as He}from"../chunks/DRUiW6Zw.js";import{C as Ve}from"../chunks/DpviI_uJ.js";import{g as V,G as te,h as De,O as Be}from"../chunks/DsYDrY7C.js";import{C as be}from"../chunks/C8guQpMT.js";import{g as Ie,s as pe,a as Me,d as Ue,c as ke,b as de,e as ie,v as We,r as Je,f as Ke,h as Qe,i as Xe,j as Ne,p as Ye,k as Ze,l as et,m as tt}from"../chunks/BE_4ww8r.js";import{s as fe}from"../chunks/BWMYve5J.js";import{b as at,c as me}from"../chunks/CJCVGGPV.js";import{b as rt}from"../chunks/DFQ-BVSw.js";import{E as st}from"../chunks/BVg5wqNm.js";import{L as nt}from"../chunks/B7pZD2Tm.js";import{b as ot}from"../chunks/BCz5OXXD.js";import{e as re,i as se}from"../chunks/BdG0KSB2.js";import{H as ge}from"../chunks/Dl0Z0z4d.js";import{g as it,j as lt,t as ct,r as dt}from"../chunks/yAhaO9Md.js";import{g as ye,a as ut}from"../chunks/CwvcP1kx.js";import{p as we}from"../chunks/M_WnVc2Q.js";var vt=x("<div><!> <!> <!></div>");function ft(l,e){M(e,!0);const r=z(e,"active",19,()=>V.None),v=z(e,"class",3,""),c=z(e,"onselect",3,()=>{});var S=vt(),p=y(S);{var i=n=>{const t=K(()=>r()===V.Genomic);be(n,{"data-testid":"gene-variant-option",title:"Variants by gene name",subtitle:"Ex: Rare BRCA1 variants with high severity",size:"other",class:"w-1/4 h-20 min-h-20",get active(){return s(t)},onclick:()=>c()(V.Genomic)})};L(p,n=>{n(i)})}var a=h(p,2);{var f=n=>{const t=K(()=>r()===V.SNP);be(n,{"data-testid":"snp-option",title:"Specific Variants",subtitle:"Ex: chr5,148481541,T,A",size:"other",class:"w-1/4 h-20 min-h-20",get active(){return s(t)},onclick:()=>c()(V.SNP)})};L(a,n=>{n(f)})}var k=h(a,2);L(k,n=>{}),b(S),E(()=>ne(S,1,`flex flex-row justify-center justify-items-center gap-16 ${v()??""??""}`)),_(l,S),U()}var mt=x('<span class="absolute top-0 left-1 p-1 text-error-600-400 text-xs">* Required</span>'),ht=x("<div> </div>"),pt=x('<span class="flex-none ml-1"><!></span>'),_t=x('<span class="flex-none ml-1"><!></span>'),bt=x('<div><div class="relative rounded-t-2xl bg-primary-300-700 p-4 items-center flex"><!> <div class="flex-auto text-center"><div class="font-bold"> </div> <!></div> <!> <!></div> <div class="h-full p-2 border rounded-b-2xl border-surface-300-700"><!></div></div>');function ae(l,e){M(e,!0);const r=z(e,"title",3,""),v=z(e,"subtitle",3,""),c=z(e,"required",3,!1),S=z(e,"data-testid",3,""),p=z(e,"class",3,"");var i=bt(),a=y(i),f=y(a);{var k=q=>{var m=mt();_(q,m)};L(f,q=>{c()&&q(k)})}var n=h(f,2),t=y(n),d=y(t,!0);b(t);var N=h(t,2);{var u=q=>{var m=ht(),P=y(m,!0);b(m),E(()=>X(P,v())),_(q,m)};L(N,q=>{v()&&q(u)})}b(n);var C=h(n,2);{var g=q=>{var m=pt(),P=y(m);fe(P,()=>e.action),b(m),_(q,m)};L(C,q=>{e.action&&q(g)})}var G=h(C,2);{var w=q=>{var m=_t(),P=y(m);fe(P,()=>e.help),b(m),_(q,m)};L(G,q=>{e.help&&q(w)})}b(a);var o=h(a,2),H=y(o);fe(H,()=>e.children??Le),b(o),b(i),E(q=>{ne(i,1,`flex flex-col ${p()??""}`),T(i,"data-testid",q),X(d,r())},[()=>S()||r().replaceAll(" ","-").toLowerCase()]),_(l,i),U()}async function gt(l,e,r,v,c,S){$(e,!0);const p={search:s(r),constraint:""},{count:i,errors:a}=await Ie(p);$(e,!1),a===0&&i>0?v()(p):i>0?($(c,S.SomeResults,!0),v()(p)):$(c,S.NoResults,!0)}var yt=x('<p class="text-center"></p> <p class="text-center">If you have the rsID of the variant, you can use the <a href="https://www.ncbi.nlm.nih.gov/snp/" target="_blank" rel="noopener noreferrer" class="anchor">dbSNP database</a> to find the genomic coordinates.</p> <p class="text-center font-bold my-6"><em class="font-bold">Example:</em> chr5,148481541,T,A</p> <div class="flex gap-2 mx-auto my-8 w-1/2"><input type="search" class="input" placeholder="chromosome (chr#), position, reference allele, variant allele" data-testid="snp-search-box"/> <button type="button" data-testid="snp-search-btn" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Search <!></button></div> <!>',1);function xt(l,e){var P;M(e,!0);const r=z(e,"search",3,""),v=z(e,"disabled",3,!1),c=z(e,"onvalid",3,()=>{}),S={NoResults:{color:"error",message:"We couldn't find any results for your search term. Please check to ensure the information you have entered is correct or try a different search."},SomeResults:{color:"warning",message:"Some sites did not return patient counts for your search. Click the Add Filter button to apply your filter and click Cohort Details for more information."}},p=((P=he.genomic)==null?void 0:P.defaultGenomeBuild)||"GRCh38",i=/^\w+,\d+,(A|T|C|G)+,(A|T|C|G)+$/;let a,f=I(void 0),k=I(!1),n=I(Y(r())),t=K(()=>i.test(s(n)));Oe(()=>{if(s(n)&&!s(t)){d();return}else N()});function d(){a.classList.add("required"),a.setCustomValidity("Please check that value matches: chromosome (chr#), position, reference allele, variant allele."),a.reportValidity()}function N(){a.classList.remove("required"),a.setCustomValidity(""),$(f,void 0)}var u=yt(),C=W(u);C.textContent=`Enter the following information into the search bar using genome build ${p}: chromosome,
  position, reference allele, variant allele.`;var g=h(C,6),G=y(g);le(G),G.__keydown=N,rt(G,F=>a=F,()=>a);var w=h(G,2);w.__click=[gt,k,n,c,f,S];var o=h(y(w));{var H=F=>{nt(F,{ring:!0,size:"micro",color:"white"})};L(o,F=>{s(k)&&F(H)})}b(w),b(g);var q=h(g,2);{var m=F=>{st(F,{get color(){return s(f).color},children:(R,D)=>{ue();var O=Fe();E(()=>X(O,s(f).message)),_(R,O)},$$slots:{default:!0}})};L(q,F=>{s(f)&&F(m)})}E(()=>{G.disabled=v(),w.disabled=v()||!s(t)||s(k)}),at(G,()=>s(n),F=>$(n,F)),_(l,u),U()}Z(["keydown","click"]);var St=(l,e,r,v)=>e()({search:r.snp.search,constraint:s(v)}),kt=x('<span class="mr-4"> </span> <select class="!w-96" data-testid="snp-constraint" required><option selected disabled>Select Genotype</option><option>Heterozygous</option><option>Homozygous</option><option>Heterozygous or homozygous</option></select> <button type="button" aria-label="Save SNP" data-testid="snp-save-btn" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Save SNP</button>',1);function Nt(l,e){M(e,!0);let r=z(e,"onsave",3,()=>{}),v=I(Y(e.snp.constraint));var c=kt(),S=W(c),p=y(S,!0);b(S);var i=h(S,2),a=y(i);a.value=a.__value=!0;var f=h(a),k={},n=h(f),t={},d=h(n),N={};b(i);var u=h(i,2);u.__click=[St,r,e,v],E(()=>{X(p,e.snp.search),k!==(k=te.Heterozygous)&&(f.value=(f.__value=te.Heterozygous)??""),t!==(t=te.Homozygous)&&(n.value=(n.__value=te.Homozygous)??""),N!==(N=te.HeterozygousOrHomozygous)&&(d.value=(d.__value=te.HeterozygousOrHomozygous)??""),u.disabled=s(v)===""}),ot(i,()=>s(v),C=>$(v,C)),_(l,c),U()}Z(["click"]);var wt=x("<p>No filters added.</p>"),Pt=x('<div class="font-bold flex items-center justify-center p-6">AND</div>'),Gt=(l,e,r)=>e()(s(r)),qt=(l,e,r)=>e()(s(r)),Ct=x('<!> <div class="border rounded-sm border-surface-300-700 p-3 flex gap-4"><div class="flex-auto"><div class="text-surface-700-300 font-bold"> </div> <div class="text-surface-600-400"> </div></div> <div class="flex-none text-right"><button type="button" title="Edit" aria-label="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square"></i></button> <button type="button" title="Delete" aria-label="Delete" class="btn-icon-color"><i class="fa-solid fa-trash"></i></button></div></div>',1),Ft=x('<div class="flex items-center justify-center"><!> <!></div>');function $t(l,e){M(e,!0);const[r,v]=ee(),c=()=>J(pe,"$selectedSNPs",r),S=z(e,"onedit",3,()=>{}),p=z(e,"ondelete",3,()=>{});var i=Ft(),a=y(i);{var f=n=>{var t=wt();_(n,t)};L(a,n=>{c().length===0&&n(f)})}var k=h(a,2);re(k,1,c,se,(n,t,d)=>{var N=Ct(),u=W(N);{var C=R=>{var D=Pt();_(R,D)};L(u,R=>{d!==0&&R(C)})}var g=h(u,2),G=y(g),w=y(G),o=y(w);b(w);var H=h(w,2),q=y(H,!0);b(H),b(G);var m=h(G,2),P=y(m);P.__click=[Gt,S,t];var F=h(P,2);F.__click=[qt,p,t],b(m),b(g),E(()=>{X(o,`${s(t).search??""}:`),X(q,De[s(t).constraint]),T(P,"data-testid",`snp-edit-btn-${s(t).search}`),T(F,"data-testid",`snp-delete-btn-${s(t).search}`)}),_(n,N)}),b(i),_(l,i),U(),v()}Z(["click"]);var Lt=x('<hr/> <div class="flex gap-2 items-center justify-center my-8"><!></div>',1),Ot=x("<!> <!>",1),At=x('<button class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),zt=x('<div id="snp-search"><!> <!></div>');function Et(l,e){M(e,!0);const[r,v]=ee(),c=()=>J(pe,"$selectedSNPs",r);let S=z(e,"class",3,"");const p={search:"",constraint:""};let i=I(Y(p));function a(u){$(i,u,!0)}function f(u){Me(u),$(i,p,!0)}function k(u){$(i,u,!0)}function n(u){Ue(u)}var t=zt(),d=y(t);ae(d,{title:"Search for Genomic Variants",children:(u,C)=>{var g=Ot(),G=W(g);const w=K(()=>!!s(i).search);xt(G,{get disabled(){return s(w)},get search(){return s(i).search},onvalid:a});var o=h(G,2);{var H=q=>{var m=Lt(),P=h(W(m),2),F=y(P);Nt(F,{get snp(){return s(i)},onsave:f}),b(P),_(q,m)};L(o,q=>{s(i).search&&q(H)})}_(u,g)},$$slots:{default:!0}});var N=h(d,2);ae(N,{title:"Summary of Selected Filters",action:C=>{var g=At();g.__click=function(...G){var w;(w=ke)==null||w.apply(this,G)},E(()=>g.disabled=c().length===0),_(C,g)},children:(C,g)=>{$t(C,{onedit:k,ondelete:n})},$$slots:{action:!0,default:!0}}),b(t),E(()=>ne(t,1,`grid grid-cols-1 gap-3 ${(S()||"")??""}`)),_(l,t),U(),v()}Z(["click"]);var Rt=x('<div class="flex gap-4 mb-2"><!></div>');function jt(l,e){M(e,!0);const[r,v]=ee(),c=()=>J(de,"$selectedGenes",r),S=()=>J(dt,"$resources",r);let p=I(Y([])),i=K(()=>c().length===0?s(p):s(p).filter(g=>!c().includes(g))),a="",f=20,k=0,n=1,t=I(!1),d=I(!1);async function N(g=""){const G=a!==g;if(!(!G&&(k>=n||s(d)))){$(t,!0);try{const w=await it(`${lt.Search}/${S().search}/values/?`+new URLSearchParams({genomicConceptPath:"Gene_with_variant",query:g,page:(G?1:k+1).toString(),size:f.toString()}),{"content-type":"application/json"});if(w!=null&&w.error)throw w.error;const o=w.results;$(p,G?o:[...s(p),...o],!0),n=Math.ceil(w.total/f),k=w.page,a=g,$(d,o.length<f)}catch(w){console.error(w),ct.error({title:"An error occurred while loading genes list."})}finally{$(t,!1)}}}Se(async()=>{await N()});var u=Rt(),C=y(u);Be(C,{showSelectAll:!1,showClearAll:!1,get allOptionsLoaded(){return s(d)},onscroll:N,get unselectedOptions(){return s(i)},set unselectedOptions(g){$(i,g,!0)},get selectedOptions(){return je(),c()},set selectedOptions(g){ce(de,g)},get currentlyLoading(){return s(t)},set currentlyLoading(g){$(t,g,!0)}}),b(u),_(l,u),U(),v()}var Tt=x('<label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Rare" type="checkbox"/> Rare</label> <label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Common" type="checkbox"/> Common</label> <label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Novel" type="checkbox"/> Novel</label>',1);function Ht(l){const[e,r]=ee(),v=()=>J(ie,"$selectedFrequency",e),c=[];var S=Tt(),p=W(S),i=y(p);le(i),i.value=i.__value="Rare",ue(),b(p);var a=h(p,2),f=y(a);le(f),f.value=f.__value="Common",ue(),b(a);var k=h(a,2),n=y(k);le(n),n.value=n.__value="Novel",ue(),b(k),me(c,[],i,v,t=>ce(ie,t)),me(c,[],f,v,t=>ce(ie,t)),me(c,[],n,v,t=>ce(ie,t)),_(l,S),r()}var Vt=(l,e)=>e.node.toggleOpen(),Dt=x("<i></i>"),Bt=x('<i class="fa-solid fa-minus"></i>'),It=(l,e)=>e.node.toggleSelected(),Mt=x('<details class="tree-item"><summary class="tree-item-summary list-none [&amp;::-webkit-details-marker]:hidden flex items-center cursor-pointer space-x-4 rounded-container p-0 hover:preset-tonal-primary w-full" role="treeitem"><button type="button" class="m-1 ml-2"><!></button> <input class="checkbox tree-item-checkbox mr-1" type="checkbox"/> <label class="w-full"> </label></summary> <div class="tree-item-children ml-4" role="group"><!></div></details>');function Pe(l,e){M(e,!0);var r=Mt(),v=y(r),c=y(v);c.__click=[Vt,e];var S=y(c);{var p=N=>{var u=Dt();E(()=>ne(u,1,`fa-solid fa-angle-${e.node.open?"up":"down"}`)),_(N,u)},i=N=>{var u=Bt();_(N,u)};L(S,N=>{e.node.isLeaf?N(i,!1):N(p)})}b(c);var a=h(c,2);le(a),a.__click=[It,e];var f=h(a,2),k=y(f,!0);b(f),b(v);var n=h(v,2),t=y(n);{var d=N=>{var u=$e(),C=W(u);re(C,17,()=>e.node.children,se,(g,G)=>{Pe(g,{get node(){return s(G)}})}),_(N,u)};L(t,N=>{!e.node.isLeaf&&e.node.open&&N(d)})}b(n),b(r),E(()=>{T(r,"data-testid",`tree-item:${e.node.name??""}-${e.node.value??""}`),T(r,"aria-disabled",e.node.disabled),r.open=e.node.open,T(v,"aria-selected",e.node.allSelected),T(v,"aria-expanded",e.node.open),T(c,"id",`tree-item-btn:${e.node.name??""}-${e.node.value??""}`),T(c,"data-testid",`tree-item-btn:${e.node.name??""}-${e.node.value??""}`),T(c,"title",e.node.isLeaf?void 0:`${e.node.open?"Close":"Open"} node`),T(c,"name",e.node.name),T(c,"tabindex",e.node.isLeaf?-1:0),T(a,"id",`checkbox:${e.node.name??""}-${e.node.value??""}`),T(a,"data-testid",`checkbox:${e.node.name??""}-${e.node.value??""}`),T(a,"name",e.node.name),Ee(a,e.node.value),Re(a,e.node.allSelected),a.indeterminate=e.node.indeterminant,T(f,"for",`${e.node.isLeaf?"checkbox:":"tree-item-btn:"}${e.node.name??""}-${e.node.value??""}`),X(k,e.node.value),T(n,"data-testid",`tree-item-children:${e.node.name??""}`)}),_(l,r),U()}Z(["click"]);var Ut=x("<div></div>");function Wt(l,e){var k,n,t,d,N,u,C,g,G;M(e,!0);let r=z(e,"nodes",19,()=>[]),v=z(e,"onselect",3,()=>{}),c=z(e,"onunselect",3,()=>{}),S=z(e,"fullWidth",3,!1);class p{constructor(o,H,q=[],m=!1,P=!1){ve(this,"name","");ve(this,"value","");Q(this,k,I(!1));Q(this,n,I(!1));Q(this,t,I(!1));Q(this,d,I(Y([])));Q(this,N,K(()=>this.children.length===0));Q(this,u,K(()=>this.isLeaf?this.selected:this.children.some(o=>o.someSelected)));Q(this,C,K(()=>this.isLeaf?this.selected:this.children.every(o=>o.allSelected)));Q(this,g,K(()=>this.isLeaf?!this.selected:!this.someSelected));Q(this,G,K(()=>this.isLeaf?!1:this.someSelected&&!this.allSelected));this.name=o,this.value=H,this.children=q,this.open=m,this.selected=P}get open(){return s(A(this,k))}set open(o){$(A(this,k),o,!0)}get selected(){return s(A(this,n))}set selected(o){$(A(this,n),o,!0)}get disabled(){return s(A(this,t))}set disabled(o){$(A(this,t),o,!0)}get children(){return s(A(this,d))}set children(o){$(A(this,d),o,!0)}get isLeaf(){return s(A(this,N))}set isLeaf(o){$(A(this,N),o)}get someSelected(){return s(A(this,u))}set someSelected(o){$(A(this,u),o)}get allSelected(){return s(A(this,C))}set allSelected(o){$(A(this,C),o)}get noneSelected(){return s(A(this,g))}set noneSelected(o){$(A(this,g),o)}get indeterminant(){return s(A(this,G))}set indeterminant(o){$(A(this,G),o)}select(){this.isLeaf?(this.selected=!0,v()(this.value)):(this.children.forEach(o=>o.select()),this.open=!0)}unselect(){this.isLeaf?(this.selected=!1,c()(this.value)):this.children.forEach(o=>o.unselect())}toggleSelected(){this.allSelected?this.unselect():this.select()}toggleOpen(){this.isLeaf||(this.open=!this.open)}}k=new WeakMap,n=new WeakMap,t=new WeakMap,d=new WeakMap,N=new WeakMap,u=new WeakMap,C=new WeakMap,g=new WeakMap,G=new WeakMap;function i(w){const{name:o,value:H,open:q,selected:m}=w;let P=[],F=q;return w.children.length>0&&(P=w.children.map(i),F=P.some(R=>R.someSelected)),new p(o,H,P,F,m)}let a=Y(r().map(i));var f=Ut();re(f,21,()=>a,se,(w,o)=>{Pe(w,{get node(){return s(o)}})}),b(f),E(()=>ne(f,1,`overflow-auto h-[350.75px] ${S()?"w-full":""}`)),_(l,f),U()}function Jt(l,e){M(e,!0);const[r,v]=ee(),c=()=>J(Qe,"$selectedConsequence",r);let S=Y(We.map(({key:p,children:i})=>({name:"severity",value:p,children:i.map(a=>({name:p,value:a,children:[],open:!1,selected:c().includes(a)})),open:!1,selected:!1})));Wt(l,{get nodes(){return S},onselect:Ke,onunselect:Je}),U(),v()}var Kt=x('<span class="font-bold mx-1 text-primary-500">OR</span>'),Qt=x("<!> ",1),Xt=x('<span class="italic">None</span>'),Yt=x('<span class="font-bold mx-1 text-primary-500">OR</span>'),Zt=x("<!> ",1),ea=x('<span class="italic">None</span>'),ta=x('<span class="font-bold mx-1 text-primary-500">OR</span>'),aa=x("<!> ",1),ra=x('<span class="italic">None</span>'),sa=x('<div class="overflow-auto flex"><div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-13v7sph"><span class="font-bold">Geneomic Region:</span> <div id="selected-variant" class="text-center break-words"><!> <!></div></div> <div class="font-bold flex items-center justify-center w-1/15 svelte-13v7sph">AND</div> <div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-13v7sph"><span class="font-bold">Calculated Consequence:</span> <div id="selected-consequence" class="text-center break-words"><!> <!></div></div> <div class="font-bold flex items-center justify-center w-1/15 svelte-13v7sph">AND</div> <div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-13v7sph"><span class="font-bold">Variant Frequency:</span> <div id="selected-frequency" class="text-center break-words"><!> <!></div></div></div>');function na(l,e){M(e,!0);const[r,v]=ee(),c=()=>J(de,"$selectedGenes",r),S=()=>J(Xe,"$consequences",r),p=()=>J(ie,"$selectedFrequency",r);var i=sa(),a=y(i),f=h(y(a),2),k=y(f);re(k,1,c,se,(m,P,F)=>{var R=Qt(),D=W(R);{var O=j=>{var oe=Kt();_(j,oe)};L(D,j=>{F!==0&&j(O)})}var B=h(D);E(()=>X(B,` ${s(P)??""}`)),_(m,R)});var n=h(k,2);{var t=m=>{var P=Xt();_(m,P)};L(n,m=>{c().length===0&&m(t)})}b(f),b(a);var d=h(a,4),N=h(y(d),2),u=y(N);re(u,1,S,se,(m,P,F)=>{var R=Zt(),D=W(R);{var O=j=>{var oe=Yt();_(j,oe)};L(D,j=>{F!==0&&j(O)})}var B=h(D);E(()=>X(B,` ${s(P)??""}`)),_(m,R)});var C=h(u,2);{var g=m=>{var P=ea();_(m,P)};L(C,m=>{S().length===0&&m(g)})}b(N),b(d);var G=h(d,4),w=h(y(G),2),o=y(w);re(o,1,p,se,(m,P,F)=>{var R=aa(),D=W(R);{var O=j=>{var oe=ta();_(j,oe)};L(D,j=>{F!==0&&j(O)})}var B=h(D);E(()=>X(B,` ${s(P)??""}`)),_(m,R)});var H=h(o,2);{var q=m=>{var P=ra();_(m,P)};L(H,m=>{p().length===0&&m(q)})}b(w),b(G),b(i),_(l,i),U(),v()}function oa(){de.set([])}var ia=x('<button data-testid="clear-selected-genes-btn" class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),la=x('<button data-testid="clear-gene-filters-btn" class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),ca=x('<div id="gene-search"><!> <!> <!> <!></div>');function da(l,e){var a,f,k;M(e,!0);const r=(k=(f=(a=he)==null?void 0:a.help)==null?void 0:f.popups)==null?void 0:k.genomicFilter;var v=ca(),c=y(v);ae(c,{title:"Search for Gene with Variant",subtitle:"Use the official gene symbol.",required:!0,action:t=>{var d=ia();d.__click=[oa],_(t,d)},children:(t,d)=>{jt(t,{})},$$slots:{action:!0,default:!0}});var S=h(c,2);ae(S,{title:"Select Calculated Consequence",subtitle:"The calculated consequence is based on VEP annotation.",help:t=>{ge(t,{id:"cons-help-popup",get text(){return r.consequence}})},children:(t,d)=>{Jt(t,{})},$$slots:{help:!0,default:!0}});var p=h(S,2);ae(p,{title:"Select Variant Frequency",help:t=>{ge(t,{id:"freq-help-popup",get text(){return r.frequency}})},children:(t,d)=>{Ht(t)},$$slots:{help:!0,default:!0}});var i=h(p,2);ae(i,{title:"Summary of Selected Filters",class:"col-span-3",action:t=>{var d=la();d.__click=function(...N){var u;(u=Ne)==null||u.apply(this,N)},_(t,d)},children:(t,d)=>{na(t,{})},$$slots:{action:!0,default:!0}}),b(v),E(()=>ne(v,1,`grid grid-cols-3 gap-3 ${(e.class||"")??""}`)),_(l,v),U()}Z(["click"]);function xe(l,e,r,v){const c=s(e)===V.Genomic?et():tt();ut(c),r(),ce(we,!0),Te("/explorer")}var ua=x('<div class="flex justify-end my-4"><button data-testid="save-filter-btn" type="button" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Save Filter <i class="fa-solid fa-plus ml-3"></i></button></div>'),va=x('<div class="flex justify-end my-4" data-testid="filter-options-container"><button data-testid="add-filter-btn" type="button" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Add Filter <i class="fa-solid fa-plus ml-3"></i></button></div>'),fa=x("<!> <!>",1),ma=x("<!> <!>",1);function Da(l,e){M(e,!0);const[r,v]=ee(),c=()=>J(we,"$panelOpen",r),S=()=>J(de,"$selectedGenes",r),p=()=>J(pe,"$selectedSNPs",r);let i=He.url.searchParams.get("edit")||"",a=I(Y(["snp","genomic"].includes(i)?i:V.None));function f(){Ne(),ke()}function k(){if(s(a)===V.Genomic){const d=ye("genomic");d.length===1&&Ye(d[0])}else if(s(a)===V.SNP){const d=ye("snp");d.length===1&&Ze(d[0])}}Se(k);function n(d){$(a,d,!0),k()}let t=K(()=>s(a)===V.Genomic&&S().length>0||s(a)===V.SNP&&p().length>0);ze(d=>{E(()=>Ae.title=`${he.applicationName??""} | Gemonic Filter`)}),Ve(l,{full:!0,title:"Genomic Filtering",backUrl:"/explorer",backAction:f,backTitle:"Back to Explore",transition:!0,children:(d,N)=>{var u=ma(),C=W(u);{var g=o=>{ft(o,{class:"my-4",onselect:n,get active(){return s(a)}})};L(C,o=>{o(g)})}var G=h(C,2);{var w=o=>{var H=fa(),q=W(H);{var m=O=>{da(O,{class:"mb-0 mt-6"})},P=O=>{Et(O,{class:"mt-6"})};L(q,O=>{s(a)===V.Genomic?O(m):O(P,!1)})}var F=h(q,2);{var R=O=>{var B=ua(),j=y(B);j.__click=[xe,a,f,c],b(B),E(()=>j.disabled=!s(t)),_(O,B)},D=O=>{var B=va(),j=y(B);j.__click=[xe,a,f,c],b(B),E(()=>{T(j,"title",s(t)?"Add Filter":s(a)===V.Genomic?"A gene is required":"A SNP is required"),j.disabled=!s(t)}),_(O,B)};L(F,O=>{i?O(R):O(D,!1)})}_(o,H)};L(G,o=>{s(a)!==V.None&&o(w)})}_(d,u)},$$slots:{default:!0}}),U(),v()}Z(["click"]);export{Da as component};
