import{s as ee,e as E,a as D,a4 as le,c as I,b as S,l as te,g as C,f as b,a5 as se,m as k,i as P,h as p,t as M,d as O,n as L,Y as ne,p as oe,Z as ie,R as ce}from"../chunks/scheduler.bui7uCNy.js";import{S as re,i as ae,g as ue,b as fe,t as R,a as A,d as U,e as z,m as B,f as G,j as he}from"../chunks/index.CNwEczq-.js";import{e as H,u as de,o as me}from"../chunks/each.VHlBgARd.js";import{b as j,a as W}from"../chunks/configuration.CsqyQUvi.js";import{g as Y}from"../chunks/entry.DxzR7bMM.js";import{S as _e}from"../chunks/Searchbox.DKysX8X0.js";import{h as pe,u as ge}from"../chunks/await_block.B6WJ5gpV.js";import{g as ve}from"../chunks/globals.D0QH3NT1.js";import{p as be}from"../chunks/User.C8JF3DW-.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.CGDEO2C7.js";import{P as ke}from"../chunks/ProgressRadial.CbTPnjvT.js";import{a as xe}from"../chunks/QueryBuilder.DvtNy6Ht.js";import{a as ye,b as $e}from"../chunks/dictionary.C4Dp8wEd.js";const{Map:we}=ve;function Z(n,e,t){const r=n.slice();return r[7]=e[t][0],r[8]=e[t][1],r}function Ee(n){let e;return{c(){e=E("i"),this.h()},l(t){e=I(t,"I",{class:!0}),S(e).forEach(b),this.h()},h(){k(e,"class","fa-solid fa-circle-exclamation p-1 mb-4 mt-1")},m(t,r){P(t,e,r)},p:L,i:L,o:L,d(t){t&&b(e)}}}function Ie(n){let e,t=n[11]+"",r;return{c(){e=E("strong"),r=M(t),this.h()},l(l){e=I(l,"STRONG",{class:!0});var f=S(e);r=O(f,t),f.forEach(b),this.h()},h(){k(e,"class","p-1 mb-3")},m(l,f){P(l,e,f),p(e,r)},p:L,i:L,o:L,d(l){l&&b(e)}}}function Se(n){let e,t;return e=new ke({props:{width:"w-10",meter:"stroke-surface-50 dark:stroke-surface-900",track:"stroke-secondary-500/30",value:void 0}}),{c(){U(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,l){B(e,r,l),t=!0},p:L,i(r){t||(R(e.$$.fragment,r),t=!0)},o(r){A(e.$$.fragment,r),t=!1},d(r){G(e,r)}}}function F(n,e){let t,r,l,f,i=e[7]+"",m,g,_,s={ctx:e,current:null,token:null,hasCatch:!0,pending:Se,then:Ie,catch:Ee,value:11,blocks:[,,,]};return pe(e[8],s),{key:n,first:null,c(){t=E("div"),r=E("div"),s.block.c(),l=D(),f=E("p"),m=M(i),g=D(),this.h()},l($){t=I($,"DIV",{class:!0});var c=S(t);r=I(c,"DIV",{"data-testid":!0,class:!0});var x=S(r);s.block.l(x),x.forEach(b),l=C(c),f=I(c,"P",{});var o=S(f);m=O(o,i),o.forEach(b),g=C(c),c.forEach(b),this.h()},h(){k(r,"data-testid","value-"+e[7]),k(r,"class","flex flex-col justify-center items-center text-2xl"),k(t,"class","flex flex-col w-1/"+e[2]+" p-4 [&:not(:last-child)]:border-r border-surface-400-500-token svelte-1crd580"),this.first=t},m($,c){P($,t,c),p(t,r),s.block.m(r,s.anchor=null),s.mount=()=>r,s.anchor=null,p(t,l),p(t,f),p(f,m),p(t,g),_=!0},p($,c){e=$,ge(s,e,c)},i($){_||(R(s.block),_=!0)},o($){for(let c=0;c<3;c+=1){const x=s.blocks[c];A(x)}_=!1},d($){$&&b(t),s.block.d(),s.token=null,s=null}}}function J(n){let e,t='<div><i class="fa-solid fa-circle-exclamation text-4xl"></i></div> <div class="alert-message"><p>We&#39;re having trouble fetching some data points right now. Please try again later.</p></div>';return{c(){e=E("div"),e.innerHTML=t,this.h()},l(r){e=I(r,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),te(e)!=="svelte-5wd9ib"&&(e.innerHTML=t),this.h()},h(){k(e,"id","landing-errors"),k(e,"class","alert variant-filled-error text-error-50-900-token 200-700-token w-3/4 px-4 mb-6 mt-2")},m(r,l){P(r,e,l)},d(r){r&&b(e)}}}function Te(n){var a,T,w,y;let e,t,r="Data Summary",l,f,i=[],m=new we,g,_,s,$=(n[1]()?(T=(a=j)==null?void 0:a.landing)==null?void 0:T.authExplanation:(y=(w=j)==null?void 0:w.landing)==null?void 0:y.explanation)+"",c,x,o=H(Array.from(n[3]));const v=d=>d[7];for(let d=0;d<o.length;d+=1){let u=Z(n,o,d),V=v(u);m.set(V,i[d]=F(V,u))}let h=n[0]&&J();return{c(){e=E("section"),t=E("h2"),t.textContent=r,l=D(),f=E("div");for(let d=0;d<i.length;d+=1)i[d].c();g=D(),_=E("div"),s=new le(!1),c=D(),h&&h.c(),this.h()},l(d){e=I(d,"SECTION",{class:!0});var u=S(e);t=I(u,"H2",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-c8j8ir"&&(t.textContent=r),l=C(u),f=I(u,"DIV",{class:!0});var V=S(f);for(let N=0;N<i.length;N+=1)i[N].l(V);V.forEach(b),g=C(u),_=I(u,"DIV",{class:!0});var Q=S(_);s=se(Q,!1),Q.forEach(b),c=C(u),h&&h.l(u),u.forEach(b),this.h()},h(){k(t,"class","m-4"),k(f,"class","flex flex-wrap justify-evenlyp-4 my-4 gap-y-9 w-1/2"),s.a=null,k(_,"class","w-2/4 p-8"),k(e,"class","stats flex flex-col items-center w-full mt-auto p-4 svelte-1crd580")},m(d,u){P(d,e,u),p(e,t),p(e,l),p(e,f);for(let V=0;V<i.length;V+=1)i[V]&&i[V].m(f,null);p(e,g),p(e,_),s.m($,_),p(e,c),h&&h.m(e,null),x=!0},p(d,[u]){u&12&&(o=H(Array.from(d[3])),ue(),i=de(i,u,v,1,d,o,m,f,me,F,null,Z),fe()),d[0]?h||(h=J(),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i(d){if(!x){for(let u=0;u<o.length;u+=1)R(i[u]);x=!0}},o(d){for(let u=0;u<i.length;u+=1)A(i[u]);x=!1},d(d){d&&b(e);for(let u=0;u<i.length;u+=1)i[u].d();h&&h.d()}}}const q="-";function De(n,e,t){var s,$,c,x,o;const r=()=>!!localStorage.getItem("token"),l={"Data Sources":()=>ye(!r()).then(v=>v?v.toLocaleString():(t(0,m=!0),q)),Participants:()=>be("picsure/query/sync",xe(r(),r()?W.hpds:W.openHPDS)).then(v=>v?v.toLocaleString():(t(0,m=!0),q)),Variables:()=>$e(!r()).then(v=>v?v.toLocaleString():(t(0,m=!0),q))};async function f(v){return l[v]()}let i=($=(s=j)==null?void 0:s.landing)==null?void 0:$.stats.length,m=!1,g=new Map;(o=(x=(c=j)==null?void 0:c.landing)==null?void 0:x.stats)==null||o.forEach(v=>{g.set(v,f(v))});let _=g.values();return Promise.allSettled(Array.from(_)).then(v=>{v.forEach(h=>{h.status==="rejected"&&t(0,m=!0)})}),[m,r,i,g]}class Ce extends re{constructor(e){super(),ae(this,e,De,Te,ee,{})}}function K(n,e,t){const r=n.slice();return r[5]=e[t].title,r[6]=e[t].description,r[7]=e[t].icon,r[8]=e[t].url,r[9]=e[t].btnText,r}function X(n){let e,t,r=n[5]+"",l,f,i,m,g,_=n[6]+"",s,$,c,x=n[9]+"",o,v;return{c(){e=E("div"),t=E("div"),l=M(r),f=D(),i=E("i"),m=D(),g=E("div"),s=M(_),$=D(),c=E("a"),o=M(x),v=D(),this.h()},l(h){e=I(h,"DIV",{class:!0});var a=S(e);t=I(a,"DIV",{class:!0});var T=S(t);l=O(T,r),T.forEach(b),f=C(a),i=I(a,"I",{class:!0}),S(i).forEach(b),m=C(a),g=I(a,"DIV",{class:!0});var w=S(g);s=O(w,_),w.forEach(b),$=C(a),c=I(a,"A",{"data-testid":!0,href:!0,class:!0});var y=S(c);o=O(y,x),y.forEach(b),v=C(a),a.forEach(b),this.h()},h(){var h;k(t,"class","text-3xl my-1"),k(i,"class","text-[5rem] my-3 text-secondary-500-400-token "+n[7]),k(g,"class","subtitle my-3"),k(c,"data-testid","landing-action-"+n[5]+"-btn"),k(c,"href",n[8]),k(c,"class","btn variant-filled-primary"),k(e,"class","flex flex-col items-center w-1/"+(((h=n[2])==null?void 0:h.length)||3))},m(h,a){P(h,e,a),p(e,t),p(t,l),p(e,f),p(e,i),p(e,m),p(e,g),p(g,s),p(e,$),p(e,c),p(c,o),p(e,v)},p:L,d(h){h&&b(e)}}}function Ve(n){var v,h;let e,t,r,l,f,i,m,g,_,s;document.title=j.applicationName;function $(a){n[3](a)}let c={placeholder:(h=(v=j)==null?void 0:v.landing)==null?void 0:h.searchPlaceholder,search:n[1]};n[0]!==void 0&&(c.searchTerm=n[0]),l=new _e({props:c}),ne.push(()=>he(l,"searchTerm",$));let x=H(n[2]),o=[];for(let a=0;a<x.length;a+=1)o[a]=X(K(n,x,a));return _=new Ce({}),{c(){e=D(),t=E("div"),r=E("section"),U(l.$$.fragment),i=D(),m=E("section");for(let a=0;a<o.length;a+=1)o[a].c();g=D(),U(_.$$.fragment),this.h()},l(a){oe("svelte-1uz9aip",document.head).forEach(b),e=C(a),t=I(a,"DIV",{id:!0,class:!0});var w=S(t);r=I(w,"SECTION",{id:!0,class:!0});var y=S(r);z(l.$$.fragment,y),y.forEach(b),i=C(w),m=I(w,"SECTION",{id:!0,class:!0});var d=S(m);for(let u=0;u<o.length;u+=1)o[u].l(d);d.forEach(b),g=C(w),z(_.$$.fragment,w),w.forEach(b),this.h()},h(){k(r,"id","search-section"),k(r,"class","flex flex-col text-center items-center my-4 mt-auto w-2/3"),k(m,"id","actions-section"),k(m,"class","flex flex-row justify-evenly items-center w-2/3 mt-auto mb-8"),k(t,"id","landing"),k(t,"class","flex flex-wrap flex-col justify-evenly text-center items-center w-full h-full mt-8")},m(a,T){P(a,e,T),P(a,t,T),p(t,r),B(l,r,null),p(t,i),p(t,m);for(let w=0;w<o.length;w+=1)o[w]&&o[w].m(m,null);p(t,g),B(_,t,null),s=!0},p(a,[T]){const w={};if(!f&&T&1&&(f=!0,w.searchTerm=a[0],ie(()=>f=!1)),l.$set(w),T&4){x=H(a[2]);let y;for(y=0;y<x.length;y+=1){const d=K(a,x,y);o[y]?o[y].p(d,T):(o[y]=X(d),o[y].c(),o[y].m(m,null))}for(;y<o.length;y+=1)o[y].d(1);o.length=x.length}},i(a){s||(R(l.$$.fragment,a),R(_.$$.fragment,a),s=!0)},o(a){A(l.$$.fragment,a),A(_.$$.fragment,a),s=!1},d(a){a&&(b(e),b(t)),G(l),ce(o,a),G(_)}}}function Le(n,e,t){var g,_;let r="";const l=()=>!!localStorage.getItem("token");function f(){l()?Y(`/explorer?search=${r}`):Y(`/discover?search=${r}`)}const i=(_=(g=j)==null?void 0:g.landing)==null?void 0:_.actions.filter(s=>l()?s.showIfLoggedIn:s.isOpen||!s.showIfLoggedIn);function m(s){r=s,t(0,r)}return[r,f,i,m]}class Qe extends re{constructor(e){super(),ae(this,e,Le,Ve,ee,{})}}export{Qe as component};
