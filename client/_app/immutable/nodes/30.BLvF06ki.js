import"../chunks/Bzak7iHL.js";import{p as k,f as g,d as y,r as D,s as x,t as u,b as i,c as C,e as O,a as w,h as T,k as n,l as A,$ as F,n as G,j as J}from"../chunks/DhSNEPDw.js";import{s as B,d as L,h as K}from"../chunks/DVtHS8ol.js";import{a as Q}from"../chunks/Jhkhy7E3.js";import{i as R}from"../chunks/BG76zvuN.js";import{p as j,s as U,a as I}from"../chunks/DpjY2ypC.js";import{b as V}from"../chunks/BOAiLg0g.js";import{t as W,l as X,a as Y,b as Z}from"../chunks/HOQb_8TW.js";import{E as tt}from"../chunks/CQQkdEes.js";import{C as et}from"../chunks/5IRW-zVC.js";import{S as N}from"../chunks/DoUav4w7.js";import{C as at}from"../chunks/DGPivDrk.js";import{b as P}from"../chunks/aV0zye_u.js";import{b as S}from"../chunks/C0kNAPzX.js";import{t as rt}from"../chunks/M2p3ZkHt.js";import{L as st}from"../chunks/CzbepVLR.js";var ot=g('<div class="flex items-center"><span class="monospace"> </span> <!></div>');function lt(l,t){k(t,!0);let e=j(t,"data",19,()=>({cell:"",row:{}}));var a=ot(),o=y(a),d=y(o,!0);D(o);var c=x(o,2);at(c,{get"data-testid"(){return`${e().cell??""}-copy`},useIcon:!0,get itemToCopy(){return e().cell}}),D(a),u(()=>B(d,e().cell)),i(l,a),C()}async function q(l,t,e){l.stopPropagation();try{n(t).disabled=!0,W(e().cell),n(t).disabled=!1}catch{rt.error({title:"An error occured when updating dataset."})}}var it=g('<button type="button" title="Restore" aria-label="Restore" class="btn-icon-color"><i class="fa-solid fa-trash-arrow-up fa-xl"></i></button>'),nt=g('<button type="button" title="Delete" aria-label="Delete" class="btn-icon-color"><i class="fa-solid fa-trash fa-xl"></i></button>');function ct(l,t){k(t,!0);const e=j(t,"data",19,()=>({cell:"",row:{archived:!1}}));let a=T(void 0);var o=O(),d=w(o);{var c=s=>{var r=it();r.__click=[q,a,e],S(r,v=>A(a,v),()=>n(a)),u(()=>P(r,"data-testid",`dataset-action-restore-${e().cell}`)),i(s,r)},p=s=>{var r=nt();r.__click=[q,a,e],S(r,v=>A(a,v),()=>n(a)),u(()=>P(r,"data-testid",`dataset-action-archive-${e().cell}`)),i(s,r)};R(d,s=>{e().row.archived?s(c):s(p,!1)})}i(l,o),C()}L(["click"]);var dt=(l,t)=>A(t,!n(t)),mt=g('<!> <!> <button data-testid="dataset-toggle-archive" type="button" class="btn bg-secondary-500 text-secondary-contrast-500"> </button>',1);function Et(l,t){k(t,!0);const e=()=>I(Y,"$active",o),a=()=>I(Z,"$archived",o),[o,d]=U(),c=[{dataElement:"name",label:"Dataset ID Name"},{dataElement:"startTime",label:"Created"},{dataElement:"queryId",label:"Dataset ID"},{dataElement:"uuid",label:"Actions",class:"text-center"}],p={queryId:lt,uuid:ct};let s=T(!1);K(r=>{u(()=>F.title=`${V.applicationName??""} | Datasets`)}),et(l,{title:"Manage Datasets",children:(r,v)=>{var E=O(),H=w(E);Q(H,X,m=>{st(m,{})},m=>{var f=mt(),h=w(f);N(h,{tableName:"ActiveDatasets",title:"Active Datasets",get data(){return e()},get columns(){return c},get cellOverides(){return p}});var b=x(h,2);{var M=$=>{N($,{tableName:"ArchivedDatasets",title:"Deleted Datasets",get data(){return a()},get columns(){return c},get cellOverides(){return p}})};R(b,$=>{n(s)&&$(M)})}var _=x(b,2);_.__click=[dt,s];var z=y(_);D(_),u(()=>B(z,`${n(s)?"Hide":"Show"} deleted datasets`)),i(m,f)},m=>{tt(m,{title:"API Error",children:(f,h)=>{G();var b=J("Something went wrong when sending your request.");i(f,b)},$$slots:{default:!0}})}),i(r,E)},$$slots:{default:!0}}),C(),d()}L(["click"]);export{Et as component};
