import{f as b,t as k,a as o,c as de}from"../chunks/CtfeAAbw.js";import{p as D,c as g,s as f,n as A,t as _,g as T,h as Y,r as $,a as N,f as O,$ as ue}from"../chunks/B4GrenNm.js";import{s as R,h as me}from"../chunks/DxSOTiY2.js";import{a as K}from"../chunks/bf3FOAR_.js";import{i as re}from"../chunks/CSsnQ7i2.js";import{s as X,b as Q}from"../chunks/BPiAbArq.js";import{p as B,a as E,s as J}from"../chunks/DvPjbdiY.js";import{g as U}from"../chunks/BNhMDwfB.js";import{b as pe}from"../chunks/CHRSknKA.js";import{E as I}from"../chunks/BVg5wqNm.js";import{C as ve}from"../chunks/zKmJQbFp.js";import{S as V}from"../chunks/DoWV-49m.js";import{d as Z}from"../chunks/D7VV4X-8.js";import{a as F,t as P}from"../chunks/BRrMSDP5.js";import{d as fe,l as ge,r as $e}from"../chunks/DrQstrIY.js";import{M as ee}from"../chunks/D7DxCjf8.js";import{d as be,b as we,l as _e}from"../chunks/DS4yCP_l.js";import{d as ye,l as he,c as xe}from"../chunks/oNeBSBJe.js";import{g as Ae,l as Ce}from"../chunks/CUmMHgF8.js";import{e as Pe,i as Ee}from"../chunks/BdG0KSB2.js";import{p as ke}from"../chunks/wLQzkxGg.js";import{L as W}from"../chunks/DYQPks66.js";function Te(c,r){c.stopPropagation(),U(`/admin/configuration/role/${r().cell}/edit`)}var Re=b('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),De=b('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Ne(c,r){D(r,!0);const[m,v]=J(),s=()=>E(F,"$isTopAdmin",m),e=B(r,"data",19,()=>({cell:"",row:{name:""}}));async function C(){if(F)try{await fe(e().cell),P.success({title:`Successfully deleted role '${e().row.name}'`})}catch(i){console.error(i),(i==null?void 0:i.status)===409?P.error({title:`Cannot delete role '${e().row.name}' as it is still in use by a user`}):P.error({title:`An unknown error occured while deleting role '${e().row.name}'`})}}var d=De(),a=g(d);a.__click=[Te,e];var w=f(a,2);const y=Y(()=>!s());ee(w,{get"data-testid"(){return`role-${e().cell??""}-delete`},title:"Delete Role?",confirmText:"Yes",cancelText:"No",get disabled(){return T(y)},onconfirm:C,triggerBase:"btn-icon-color",withDefault:!0,trigger:n=>{var h=Re();A(2),o(n,h)},children:(n,h)=>{A();var x=k();_(()=>R(x,`Are you sure you want to delete role '${e().row.name??""}'?`)),o(n,x)},$$slots:{trigger:!0,default:!0}}),$(d),_(()=>{X(a,"data-testid",`role-${e().cell}-edit-btn`),a.disabled=!s()}),o(c,d),N(),v()}Z(["click"]);function Se(c,r){c.stopPropagation(),U(`/admin/configuration/privilege/${r().cell}/edit`)}var qe=b('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),Oe=b('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Fe(c,r){D(r,!0);const[m,v]=J(),s=()=>E(F,"$isTopAdmin",m),e=B(r,"data",19,()=>({cell:"",row:{name:""}}));async function C(){if(s())try{await be(e().cell),P.success({title:`Successfully deleted privilege '${e().row.name}'`})}catch(i){console.error(i),(i==null?void 0:i.status)===409?P.error({title:`Cannot delete privilege '${e().row.name}' as it is still in use by a role`}):P.error({title:`An unknown error occured while deleting privilege '${e().row.name}'`})}}var d=Oe(),a=g(d);a.__click=[Se,e];var w=f(a,2);const y=Y(()=>!s());ee(w,{get"data-testid"(){return`privilege-${e().cell??""}-delete`},title:"Delete Privilege?",confirmText:"Yes",cancelText:"No",get disabled(){return T(y)},onconfirm:C,triggerBase:"btn-icon-color",withDefault:!0,trigger:n=>{var h=qe();A(2),o(n,h)},children:(n,h)=>{A();var x=k();_(()=>R(x,`Are you sure you want to delete privilege '${e().row.name??""}'?`)),o(n,x)},$$slots:{trigger:!0,default:!0}}),$(d),_(()=>{X(a,"data-testid",`privilege-${e().cell}-edit-btn`),a.disabled=!s()}),o(c,d),N(),v()}Z(["click"]);function Le(c,r){c.stopPropagation(),U(`/admin/configuration/connection/${r().cell}/edit`)}var Me=b('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),He=b('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Ie(c,r){D(r,!0);const[m,v]=J(),s=()=>E(F,"$isTopAdmin",m),e=B(r,"data",19,()=>({cell:"",row:{label:""}}));async function C(){if(!s())return;const i=e().row.label;try{await ye(e().cell),P.success({title:`Successfully deleted connection '${i}'`})}catch(n){console.error(n),(n==null?void 0:n.status)===409?P.error({title:`Cannot delete connection '${i}' as it is still in use by an application or user`}):P.error({title:`An unknown error occured while deleting connection '${i}'`})}}var d=He(),a=g(d);a.__click=[Le,e];var w=f(a,2);const y=Y(()=>!s());ee(w,{get"data-testid"(){return`connection-${e().cell??""}-delete`},title:"Delete Connection?",confirmText:"Yes",cancelText:"No",get disabled(){return T(y)},onconfirm:C,triggerBase:"btn-icon-color",withDefault:!0,trigger:n=>{var h=Me();A(2),o(n,h)},children:(n,h)=>{A();var x=k();_(()=>R(x,`Are you sure you want to delete connection '${e().row.label??""}'?`)),o(n,x)},$$slots:{trigger:!0,default:!0}}),$(d),_(()=>{X(a,"data-testid",`connection-${e().cell}-edit-btn`),a.disabled=!s()}),o(c,d),N(),v()}Z(["click"]);function Ye(c,r){D(r,!0),A();var m=k();_(v=>R(m,v),[()=>{var v;return r.data.cell?(v=Ae(r.data.cell))==null?void 0:v.name:"none"}]),o(c,m),N()}var Be=b('<span class="badge preset-tonal-surface border border-surface-500 font-normal m-1"><span class="font-bold"> </span> </span>');function Je(c,r){D(r,!0);let m=B(r,"data",19,()=>({cell:"[]"})),v=Y(()=>ke(m().cell));var s=de(),e=O(s);Pe(e,17,()=>T(v),Ee,(C,d)=>{var a=Be(),w=g(a),y=g(w,!0);$(w);var i=f(w);$(a),_(()=>{R(y,T(d).label),R(i,`:${T(d).id??""}`)}),o(C,a)}),o(c,s),N()}var Ue=b(`<p>Configurations are READ ONLY for admin users. Please contact your administrator to make
        changes.</p>`),je=b('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-role" href="/admin/configuration/role/new">+ Add Role</a></div></div> <!>',1),ze=b('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-privilege" href="/admin/configuration/privilege/new">+ Add Privilege</a></div></div> <!>',1),Ge=b('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-connection" href="/admin/configuration/connection/new">+ Add Connection</a></div></div> <!>',1),Ke=b('<div id="misc-configs"><a href="/admin/configuration/terms/edit" class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500">Update Terms of Service</a></div>'),Qe=b('<!> <div id="role-table" class="mb-10"><h2>Roles Management</h2> <!></div> <div id="privilege-table" class="mb-10"><h2>Privileges Management</h2> <!></div> <div id="connection-table" class="mb-10"><h2>Connections Management</h2> <!></div> <!>',1);function bt(c,r){D(r,!0);const[m,v]=J(),s=()=>E(F,"$isTopAdmin",m),e=()=>E($e,"$roles",m),C=()=>E(we,"$privileges",m),d=()=>E(xe,"$connections",m),a={columns:[{dataElement:"name",label:"Name",sort:!0},{dataElement:"description",label:"Description",sort:!0},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Ne}},w={columns:[{dataElement:"name",label:"Name",sort:!0},{dataElement:"description",label:"Description",sort:!0},{dataElement:"application",label:"Application Name",sort:!0},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Fe,application:Ye}},y={columns:[{dataElement:"label",label:"Label",sort:!0},{dataElement:"id",label:"ID",sort:!0},{dataElement:"subPrefix",label:"Sub prefix",sort:!0},{dataElement:"requiredFields",label:"Required fields"},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Ie,requiredFields:Je}};async function i(){await _e(),await Ce()}const n=L=>M=>{const H=M==null?void 0:M.uuid;U(`/admin/configuration/${L}/${H}/edit`)},h=n("role"),x=n("privilege"),ae=n("connection");me(L=>{_(()=>ue.title=`${pe.applicationName??""} | Configuration`)}),ve(c,{title:"Configuration",children:(L,M)=>{var H=Qe(),te=O(H);{var oe=t=>{I(t,{title:"Top Administrator Only",color:"warning",children:(l,p)=>{var u=Ue();o(l,u)},$$slots:{default:!0}})};re(te,t=>{s()||t(oe)})}var j=f(te,2),ie=f(g(j),2);K(ie,ge,t=>{W(t,{})},t=>{var l=je(),p=O(l),u=g(p),S=g(u);$(u),$(p);var q=f(p,2);V(q,{tableName:"Roles",get data(){return e()},get columns(){return a.columns},get cellOverides(){return a.overrides},rowClickHandler:h,isClickable:!0}),_(()=>Q(S,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${s()?"":"opacity-50 pointer-events-none"}`)),o(t,l)},t=>{I(t,{title:"API Error",children:(l,p)=>{A();var u=k("Something went wrong when sending your request for roles.");o(l,u)},$$slots:{default:!0}})}),$(j);var z=f(j,2),ne=f(g(z),2);K(ne,i,t=>{W(t,{})},t=>{var l=ze(),p=O(l),u=g(p),S=g(u);$(u),$(p);var q=f(p,2);V(q,{tableName:"Privileges",get data(){return C()},get columns(){return w.columns},get cellOverides(){return w.overrides},rowClickHandler:x,isClickable:!0}),_(()=>Q(S,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${s()?"":"opacity-50 pointer-events-none"}`)),o(t,l)},t=>{I(t,{title:"API Error",children:(l,p)=>{A();var u=k("Something went wrong when sending your request for priviledges and applications.");o(l,u)},$$slots:{default:!0}})}),$(z);var G=f(z,2),se=f(g(G),2);K(se,he,t=>{W(t,{})},t=>{var l=Ge(),p=O(l),u=g(p),S=g(u);$(u),$(p);var q=f(p,2);V(q,{tableName:"Connections",get data(){return d()},get columns(){return y.columns},get cellOverides(){return y.overrides},rowClickHandler:ae,isClickable:!0}),_(()=>Q(S,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${s()?"":"opacity-50 pointer-events-none"}`)),o(t,l)},t=>{I(t,{title:"API Error",children:(l,p)=>{A();var u=k("Something went wrong when sending your request for connections.");o(l,u)},$$slots:{default:!0}})}),$(G);var le=f(G,2);{var ce=t=>{var l=Ke();o(t,l)};re(le,t=>{t(ce)})}o(L,H)},$$slots:{default:!0}}),N(),v()}export{bt as component};
