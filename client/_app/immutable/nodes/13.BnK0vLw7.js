import"../chunks/Bzak7iHL.js";import{p as D,f as b,d as g,s as f,n as C,j as k,t as y,b as i,k as T,u as Y,r as $,c as N,e as de,a as O,$ as ue}from"../chunks/DhSNEPDw.js";import{d as X,s as R,h as me}from"../chunks/DVtHS8ol.js";import{a as K}from"../chunks/Jhkhy7E3.js";import{i as re}from"../chunks/BG76zvuN.js";import{b as Z,s as Q}from"../chunks/aV0zye_u.js";import{p as B,a as E,s as j}from"../chunks/DpjY2ypC.js";import{g as J}from"../chunks/Dkbkn6HV.js";import{b as pe}from"../chunks/BOAiLg0g.js";import{E as I}from"../chunks/CQQkdEes.js";import{C as ve}from"../chunks/5IRW-zVC.js";import{S as V}from"../chunks/DoUav4w7.js";import{a as F,t as P}from"../chunks/M2p3ZkHt.js";import{d as fe,l as ge,r as $e}from"../chunks/z6JXWtIA.js";import{M as ee}from"../chunks/BinYu0ZY.js";import{d as be,b as we,l as _e}from"../chunks/DB-Id7Bq.js";import{d as ye,l as he,c as xe}from"../chunks/CjgU9VCR.js";import{g as Ae,l as Ce}from"../chunks/DD9mvoh3.js";import{e as Pe,i as Ee}from"../chunks/ByI6iVq5.js";import{p as ke}from"../chunks/wLQzkxGg.js";import{L as W}from"../chunks/CzbepVLR.js";function Te(s,a){s.stopPropagation(),J(`/admin/configuration/role/${a().cell}/edit`)}var Re=b('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),De=b('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Ne(s,a){D(a,!0);const n=()=>E(F,"$isTopAdmin",p),[p,h]=j(),e=B(a,"data",19,()=>({cell:"",row:{name:""}}));async function w(){if(F)try{await fe(e().cell),P.success({title:`Successfully deleted role '${e().row.name}'`})}catch(r){console.error(r),(r==null?void 0:r.status)===409?P.error({title:`Cannot delete role '${e().row.name}' as it is still in use by a user`}):P.error({title:`An unknown error occured while deleting role '${e().row.name}'`})}}var c=De(),o=g(c);o.__click=[Te,e];var _=f(o,2);{const r=u=>{var x=Re();C(2),i(u,x)};let v=Y(()=>!n());ee(_,{get"data-testid"(){return`role-${e().cell??""}-delete`},title:"Delete Role?",confirmText:"Yes",cancelText:"No",get disabled(){return T(v)},onconfirm:w,triggerBase:"btn-icon-color",withDefault:!0,trigger:r,children:(u,x)=>{C();var A=k();y(()=>R(A,`Are you sure you want to delete role '${e().row.name??""}'?`)),i(u,A)},$$slots:{trigger:!0,default:!0}})}$(c),y(()=>{Z(o,"data-testid",`role-${e().cell}-edit-btn`),o.disabled=!n()}),i(s,c),N(),h()}X(["click"]);function Se(s,a){s.stopPropagation(),J(`/admin/configuration/privilege/${a().cell}/edit`)}var qe=b('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),Oe=b('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Fe(s,a){D(a,!0);const n=()=>E(F,"$isTopAdmin",p),[p,h]=j(),e=B(a,"data",19,()=>({cell:"",row:{name:""}}));async function w(){if(n())try{await be(e().cell),P.success({title:`Successfully deleted privilege '${e().row.name}'`})}catch(r){console.error(r),(r==null?void 0:r.status)===409?P.error({title:`Cannot delete privilege '${e().row.name}' as it is still in use by a role`}):P.error({title:`An unknown error occured while deleting privilege '${e().row.name}'`})}}var c=Oe(),o=g(c);o.__click=[Se,e];var _=f(o,2);{const r=u=>{var x=qe();C(2),i(u,x)};let v=Y(()=>!n());ee(_,{get"data-testid"(){return`privilege-${e().cell??""}-delete`},title:"Delete Privilege?",confirmText:"Yes",cancelText:"No",get disabled(){return T(v)},onconfirm:w,triggerBase:"btn-icon-color",withDefault:!0,trigger:r,children:(u,x)=>{C();var A=k();y(()=>R(A,`Are you sure you want to delete privilege '${e().row.name??""}'?`)),i(u,A)},$$slots:{trigger:!0,default:!0}})}$(c),y(()=>{Z(o,"data-testid",`privilege-${e().cell}-edit-btn`),o.disabled=!n()}),i(s,c),N(),h()}X(["click"]);function Le(s,a){s.stopPropagation(),J(`/admin/configuration/connection/${a().cell}/edit`)}var Me=b('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),He=b('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Ie(s,a){D(a,!0);const n=()=>E(F,"$isTopAdmin",p),[p,h]=j(),e=B(a,"data",19,()=>({cell:"",row:{label:""}}));async function w(){if(!n())return;const r=e().row.label;try{await ye(e().cell),P.success({title:`Successfully deleted connection '${r}'`})}catch(v){console.error(v),(v==null?void 0:v.status)===409?P.error({title:`Cannot delete connection '${r}' as it is still in use by an application or user`}):P.error({title:`An unknown error occured while deleting connection '${r}'`})}}var c=He(),o=g(c);o.__click=[Le,e];var _=f(o,2);{const r=u=>{var x=Me();C(2),i(u,x)};let v=Y(()=>!n());ee(_,{get"data-testid"(){return`connection-${e().cell??""}-delete`},title:"Delete Connection?",confirmText:"Yes",cancelText:"No",get disabled(){return T(v)},onconfirm:w,triggerBase:"btn-icon-color",withDefault:!0,trigger:r,children:(u,x)=>{C();var A=k();y(()=>R(A,`Are you sure you want to delete connection '${e().row.label??""}'?`)),i(u,A)},$$slots:{trigger:!0,default:!0}})}$(c),y(()=>{Z(o,"data-testid",`connection-${e().cell}-edit-btn`),o.disabled=!n()}),i(s,c),N(),h()}X(["click"]);function Ye(s,a){D(a,!0),C();var n=k();y(p=>R(n,p),[()=>{var p;return a.data.cell?(p=Ae(a.data.cell))==null?void 0:p.name:"none"}]),i(s,n),N()}var Be=b('<span class="badge preset-tonal-surface border border-surface-500 font-normal m-1"><span class="font-bold"> </span> </span>');function je(s,a){D(a,!0);let n=B(a,"data",19,()=>({cell:"[]"})),p=Y(()=>ke(n().cell));var h=de(),e=O(h);Pe(e,17,()=>T(p),Ee,(w,c)=>{var o=Be(),_=g(o),r=g(_,!0);$(_);var v=f(_);$(o),y(()=>{R(r,T(c).label),R(v,`:${T(c).id??""}`)}),i(w,o)}),i(s,h),N()}var Je=b(`<p>Configurations are READ ONLY for admin users. Please contact your administrator to make
        changes.</p>`),Ue=b('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-role" href="/admin/configuration/role/new">+ Add Role</a></div></div> <!>',1),ze=b('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-privilege" href="/admin/configuration/privilege/new">+ Add Privilege</a></div></div> <!>',1),Ge=b('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-connection" href="/admin/configuration/connection/new">+ Add Connection</a></div></div> <!>',1),Ke=b('<div id="misc-configs"><a href="/admin/configuration/terms/edit" class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500">Update Terms of Service</a></div>'),Qe=b('<!> <div id="role-table" class="mb-10"><h2>Roles Management</h2> <!></div> <div id="privilege-table" class="mb-10"><h2>Privileges Management</h2> <!></div> <div id="connection-table" class="mb-10"><h2>Connections Management</h2> <!></div> <!>',1);function $t(s,a){D(a,!0);const n=()=>E(F,"$isTopAdmin",w),p=()=>E($e,"$roles",w),h=()=>E(we,"$privileges",w),e=()=>E(xe,"$connections",w),[w,c]=j(),o={columns:[{dataElement:"name",label:"Name",sort:!0},{dataElement:"description",label:"Description",sort:!0},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Ne}},_={columns:[{dataElement:"name",label:"Name",sort:!0},{dataElement:"description",label:"Description",sort:!0},{dataElement:"application",label:"Application Name",sort:!0},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Fe,application:Ye}},r={columns:[{dataElement:"label",label:"Label",sort:!0},{dataElement:"id",label:"ID",sort:!0},{dataElement:"subPrefix",label:"Sub prefix",sort:!0},{dataElement:"requiredFields",label:"Required fields"},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Ie,requiredFields:je}};async function v(){await _e(),await Ce()}const u=L=>M=>{const H=M==null?void 0:M.uuid;J(`/admin/configuration/${L}/${H}/edit`)},x=u("role"),A=u("privilege"),ae=u("connection");me(L=>{y(()=>ue.title=`${pe.applicationName??""} | Configuration`)}),ve(s,{title:"Configuration",children:(L,M)=>{var H=Qe(),te=O(H);{var oe=t=>{I(t,{title:"Top Administrator Only",color:"warning",children:(l,m)=>{var d=Je();i(l,d)},$$slots:{default:!0}})};re(te,t=>{n()||t(oe)})}var U=f(te,2),ie=f(g(U),2);K(ie,ge,t=>{W(t,{})},t=>{var l=Ue(),m=O(l),d=g(m),S=g(d);$(d),$(m);var q=f(m,2);V(q,{tableName:"Roles",get data(){return p()},get columns(){return o.columns},get cellOverides(){return o.overrides},get rowClickHandler(){return x},isClickable:!0}),y(()=>Q(S,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${n()?"":"opacity-50 pointer-events-none"}`)),i(t,l)},t=>{I(t,{title:"API Error",children:(l,m)=>{C();var d=k("Something went wrong when sending your request for roles.");i(l,d)},$$slots:{default:!0}})}),$(U);var z=f(U,2),ne=f(g(z),2);K(ne,v,t=>{W(t,{})},t=>{var l=ze(),m=O(l),d=g(m),S=g(d);$(d),$(m);var q=f(m,2);V(q,{tableName:"Privileges",get data(){return h()},get columns(){return _.columns},get cellOverides(){return _.overrides},get rowClickHandler(){return A},isClickable:!0}),y(()=>Q(S,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${n()?"":"opacity-50 pointer-events-none"}`)),i(t,l)},t=>{I(t,{title:"API Error",children:(l,m)=>{C();var d=k("Something went wrong when sending your request for priviledges and applications.");i(l,d)},$$slots:{default:!0}})}),$(z);var G=f(z,2),le=f(g(G),2);K(le,he,t=>{W(t,{})},t=>{var l=Ge(),m=O(l),d=g(m),S=g(d);$(d),$(m);var q=f(m,2);V(q,{tableName:"Connections",get data(){return e()},get columns(){return r.columns},get cellOverides(){return r.overrides},get rowClickHandler(){return ae},isClickable:!0}),y(()=>Q(S,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${n()?"":"opacity-50 pointer-events-none"}`)),i(t,l)},t=>{I(t,{title:"API Error",children:(l,m)=>{C();var d=k("Something went wrong when sending your request for connections.");i(l,d)},$$slots:{default:!0}})}),$(G);var se=f(G,2);{var ce=t=>{var l=Ke();i(t,l)};re(se,t=>{t(ce)})}i(L,H)},$$slots:{default:!0}}),N(),c()}export{$t as component};
