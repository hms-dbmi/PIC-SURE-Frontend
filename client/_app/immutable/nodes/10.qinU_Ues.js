import{f as I,a as S}from"../chunks/DKNWTM-D.js";import{o as b}from"../chunks/DpyMT7OB.js";import{p as w,a as x,b as n,d as L,g as l,c as T,r as _}from"../chunks/KPVYLOSR.js";import{i as J}from"../chunks/CDCmQmr-.js";import{p as r}from"../chunks/Dp9N5k12.js";import{g}from"../chunks/DNfOBMJV.js";import{c as O}from"../chunks/CmhHF9t-.js";import{f as P}from"../chunks/XQ4prG3n.js";import{p as j}from"../chunks/5RoAwCU1.js";import{L as k}from"../chunks/BW_ShK1N.js";var z=I('<section class="w-full h-full flex flex-col justify-center items-center"><!></section>');function G(u,d){w(d,!0);let t=L(!1);b(async()=>{var m,c;j.set(!1);let e="/",o;e=sessionStorage.getItem("redirect")||"/",o=sessionStorage.getItem("type"),o||n(t,!0),e=e||"/";const a=(m=r.data)==null?void 0:m.providers.find(i=>i.type===o);a||n(t,!0),(!a||l(t))&&(console.error("Provider not found"),g("/login/error"));const y=await O(a);let f=((c=r.url.hash)==null?void 0:c.split("&"))||[];r.url.search.startsWith("?")&&(f=r.url.search.substring(1).split("&")||[]),n(t,await y.authenticate(f),!0);let p=sessionStorage.getItem("filters");if(p){let i=JSON.parse(p||"[]");P.set(i),setTimeout(()=>sessionStorage.setItem("filters","[]"),500)}g(l(t)?"/login/error":e)});var s=z(),h=T(s);{var v=e=>{k(e,{ring:!0,size:"large",label:"Logging you in"})};J(h,e=>{l(t)||e(v)})}_(s),S(u,s),x()}export{G as component};
