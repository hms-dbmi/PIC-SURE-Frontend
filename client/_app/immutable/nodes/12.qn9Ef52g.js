import{f as _,t as k,a as n,c as le}from"../chunks/DKNWTM-D.js";import{p as D,c as f,s as $,n as A,t as w,g as T,h as Y,r as g,a as N,f as O,$ as se}from"../chunks/KPVYLOSR.js";import{d as W,s as R,h as ce}from"../chunks/NtGCh5xy.js";import{a as K}from"../chunks/DXJ436YI.js";import{i as de}from"../chunks/CDCmQmr-.js";import{s as X,b as Q}from"../chunks/Be_LeCLl.js";import{a as E,s as B}from"../chunks/B2Bg6RTa.js";import{g as J}from"../chunks/DNfOBMJV.js";import{b as ue}from"../chunks/BD7x6Jnt.js";import{E as I}from"../chunks/P3bGLiu7.js";import{C as me}from"../chunks/a16e0A8-.js";import{S as U}from"../chunks/C92RFBuR.js";import{p as j}from"../chunks/CfrH0FQi.js";import{a as F}from"../chunks/BpV1Tt4c.js";import{t as P}from"../chunks/CWjZNTTC.js";import{d as pe,l as ve,r as fe}from"../chunks/Cw9Ij2jy.js";import{M as Z}from"../chunks/D3jF9FdZ.js";import{d as ge,b as $e,l as be}from"../chunks/DfbyNPg_.js";import{d as we,l as _e,c as he}from"../chunks/BLh7o4M2.js";import{g as ye,l as xe}from"../chunks/06UxHPvz.js";import{e as Ae,i as Ce}from"../chunks/B5lqQSsR.js";import{p as Pe}from"../chunks/wLQzkxGg.js";import{L as V}from"../chunks/BW_ShK1N.js";function Ee(s,t){s.stopPropagation(),J(`/admin/configuration/role/${t().cell}/edit`)}var ke=_('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),Te=_('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Re(s,t){D(t,!0);const[m,v]=B(),l=()=>E(F,"$isTopAdmin",m),e=j(t,"data",19,()=>({cell:"",row:{name:""}}));async function C(){if(F)try{await pe(e().cell),P.success({title:`Successfully deleted role '${e().row.name}'`})}catch(a){console.error(a),(a==null?void 0:a.status)===409?P.error({title:`Cannot delete role '${e().row.name}' as it is still in use by a user`}):P.error({title:`An unknown error occured while deleting role '${e().row.name}'`})}}var c=Te(),r=f(c);r.__click=[Ee,e];var b=$(r,2);const h=Y(()=>!l());Z(b,{get"data-testid"(){return`role-${e().cell??""}-delete`},title:"Delete Role?",confirmText:"Yes",cancelText:"No",get disabled(){return T(h)},onconfirm:C,triggerBase:"btn-icon-color",withDefault:!0,trigger:i=>{var y=ke();A(2),n(i,y)},children:(i,y)=>{A();var x=k();w(()=>R(x,`Are you sure you want to delete role '${e().row.name??""}'?`)),n(i,x)},$$slots:{trigger:!0,default:!0}}),g(c),w(()=>{X(r,"data-testid",`role-${e().cell}-edit-btn`),r.disabled=!l()}),n(s,c),N(),v()}W(["click"]);function De(s,t){s.stopPropagation(),J(`/admin/configuration/privilege/${t().cell}/edit`)}var Ne=_('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),qe=_('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Se(s,t){D(t,!0);const[m,v]=B(),l=()=>E(F,"$isTopAdmin",m),e=j(t,"data",19,()=>({cell:"",row:{name:""}}));async function C(){if(l())try{await ge(e().cell),P.success({title:`Successfully deleted privilege '${e().row.name}'`})}catch(a){console.error(a),(a==null?void 0:a.status)===409?P.error({title:`Cannot delete privilege '${e().row.name}' as it is still in use by a role`}):P.error({title:`An unknown error occured while deleting privilege '${e().row.name}'`})}}var c=qe(),r=f(c);r.__click=[De,e];var b=$(r,2);const h=Y(()=>!l());Z(b,{get"data-testid"(){return`privilege-${e().cell??""}-delete`},title:"Delete Privilege?",confirmText:"Yes",cancelText:"No",get disabled(){return T(h)},onconfirm:C,triggerBase:"btn-icon-color",withDefault:!0,trigger:i=>{var y=Ne();A(2),n(i,y)},children:(i,y)=>{A();var x=k();w(()=>R(x,`Are you sure you want to delete privilege '${e().row.name??""}'?`)),n(i,x)},$$slots:{trigger:!0,default:!0}}),g(c),w(()=>{X(r,"data-testid",`privilege-${e().cell}-edit-btn`),r.disabled=!l()}),n(s,c),N(),v()}W(["click"]);function Oe(s,t){s.stopPropagation(),J(`/admin/configuration/connection/${t().cell}/edit`)}var Fe=_('<i class="fa-solid fa-trash fa-xl"></i> <span class="sr-only">Delete</span>',1),Le=_('<div class="w-20 min-w-20"><button type="button" title="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square fa-xl"></i> <span class="sr-only">Edit</span></button> <!></div>');function Me(s,t){D(t,!0);const[m,v]=B(),l=()=>E(F,"$isTopAdmin",m),e=j(t,"data",19,()=>({cell:"",row:{label:""}}));async function C(){if(!l())return;const a=e().row.label;try{await we(e().cell),P.success({title:`Successfully deleted connection '${a}'`})}catch(i){console.error(i),(i==null?void 0:i.status)===409?P.error({title:`Cannot delete connection '${a}' as it is still in use by an application or user`}):P.error({title:`An unknown error occured while deleting connection '${a}'`})}}var c=Le(),r=f(c);r.__click=[Oe,e];var b=$(r,2);const h=Y(()=>!l());Z(b,{get"data-testid"(){return`connection-${e().cell??""}-delete`},title:"Delete Connection?",confirmText:"Yes",cancelText:"No",get disabled(){return T(h)},onconfirm:C,triggerBase:"btn-icon-color",withDefault:!0,trigger:i=>{var y=Fe();A(2),n(i,y)},children:(i,y)=>{A();var x=k();w(()=>R(x,`Are you sure you want to delete connection '${e().row.label??""}'?`)),n(i,x)},$$slots:{trigger:!0,default:!0}}),g(c),w(()=>{X(r,"data-testid",`connection-${e().cell}-edit-btn`),r.disabled=!l()}),n(s,c),N(),v()}W(["click"]);function He(s,t){D(t,!0),A();var m=k();w(v=>R(m,v),[()=>{var v;return t.data.cell?(v=ye(t.data.cell))==null?void 0:v.name:"none"}]),n(s,m),N()}var Ie=_('<span class="badge preset-tonal-surface border border-surface-500 font-normal m-1"><span class="font-bold"> </span> </span>');function Ye(s,t){D(t,!0);let m=j(t,"data",19,()=>({cell:"[]"})),v=Y(()=>Pe(m().cell));var l=le(),e=O(l);Ae(e,17,()=>T(v),Ce,(C,c)=>{var r=Ie(),b=f(r),h=f(b,!0);g(b);var a=$(b);g(r),w(()=>{R(h,T(c).label),R(a,`:${T(c).id??""}`)}),n(C,r)}),n(s,l),N()}var Be=_(`<p>Configurations are READ ONLY for admin users. Please contact your administrator to make
        changes.</p>`),Je=_('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-role" href="/admin/configuration/role/new">+ Add Role</a></div></div> <!>',1),je=_('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-privilege" href="/admin/configuration/privilege/new">+ Add Privilege</a></div></div> <!>',1),ze=_('<div class="flex gap-4 my-6"><div class="flex-auto"><a data-testid="add-connection" href="/admin/configuration/connection/new">+ Add Connection</a></div></div> <!>',1),Ge=_('<!> <div id="role-table" class="mb-10"><h2>Roles Management</h2> <!></div> <div id="privilege-table" class="mb-10"><h2>Privileges Management</h2> <!></div> <div id="connection-table" class="mb-10"><h2>Connections Management</h2> <!></div>',1);function gt(s,t){D(t,!0);const[m,v]=B(),l=()=>E(F,"$isTopAdmin",m),e=()=>E(fe,"$roles",m),C=()=>E($e,"$privileges",m),c=()=>E(he,"$connections",m),r={columns:[{dataElement:"name",label:"Name",sort:!0},{dataElement:"description",label:"Description",sort:!0},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Re}},b={columns:[{dataElement:"name",label:"Name",sort:!0},{dataElement:"description",label:"Description",sort:!0},{dataElement:"application",label:"Application Name",sort:!0},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Se,application:He}},h={columns:[{dataElement:"label",label:"Label",sort:!0},{dataElement:"id",label:"ID",sort:!0},{dataElement:"subPrefix",label:"Sub prefix",sort:!0},{dataElement:"requiredFields",label:"Required fields"},{dataElement:"uuid",label:"Actions",class:"text-center"}],overrides:{uuid:Me,requiredFields:Ye}};async function a(){await be(),await xe()}const i=L=>M=>{const H=M==null?void 0:M.uuid;J(`/admin/configuration/${L}/${H}/edit`)},y=i("role"),x=i("privilege"),re=i("connection");ce(L=>{w(()=>se.title=`${ue.applicationName??""} | Configuration`)}),me(s,{title:"Configuration",children:(L,M)=>{var H=Ge(),ee=O(H);{var oe=o=>{I(o,{title:"Top Administrator Only",color:"warning",children:(d,p)=>{var u=Be();n(d,u)},$$slots:{default:!0}})};de(ee,o=>{l()||o(oe)})}var z=$(ee,2),ae=$(f(z),2);K(ae,ve,o=>{V(o,{})},o=>{var d=Je(),p=O(d),u=f(p),q=f(u);g(u),g(p);var S=$(p,2);U(S,{tableName:"Roles",get data(){return e()},get columns(){return r.columns},get cellOverides(){return r.overrides},rowClickHandler:y,isClickable:!0}),w(()=>Q(q,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${l()?"":"opacity-50 pointer-events-none"}`)),n(o,d)},o=>{I(o,{title:"API Error",children:(d,p)=>{A();var u=k("Something went wrong when sending your request for roles.");n(d,u)},$$slots:{default:!0}})}),g(z);var G=$(z,2),ie=$(f(G),2);K(ie,a,o=>{V(o,{})},o=>{var d=je(),p=O(d),u=f(p),q=f(u);g(u),g(p);var S=$(p,2);U(S,{tableName:"Privileges",get data(){return C()},get columns(){return b.columns},get cellOverides(){return b.overrides},rowClickHandler:x,isClickable:!0}),w(()=>Q(q,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${l()?"":"opacity-50 pointer-events-none"}`)),n(o,d)},o=>{I(o,{title:"API Error",children:(d,p)=>{A();var u=k("Something went wrong when sending your request for priviledges and applications.");n(d,u)},$$slots:{default:!0}})}),g(G);var te=$(G,2),ne=$(f(te),2);K(ne,_e,o=>{V(o,{})},o=>{var d=ze(),p=O(d),u=f(p),q=f(u);g(u),g(p);var S=$(p,2);U(S,{tableName:"Connections",get data(){return c()},get columns(){return h.columns},get cellOverides(){return h.overrides},rowClickHandler:re,isClickable:!0}),w(()=>Q(q,1,`btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 ${l()?"":"opacity-50 pointer-events-none"}`)),n(o,d)},o=>{I(o,{title:"API Error",children:(d,p)=>{A();var u=k("Something went wrong when sending your request for connections.");n(d,u)},$$slots:{default:!0}})}),g(te),n(L,H)},$$slots:{default:!0}}),N(),v()}export{gt as component};
