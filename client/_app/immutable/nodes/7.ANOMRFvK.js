import{s as be,e as $,a as C,t as G,q as M,c as N,b as P,g as D,d as W,f as m,m as _,U as le,i as S,h as E,u as ve,j as ke,n as k,M as ne,N as re,V as ie,Y as Ne,Z as Se,T as Te,k as Pe,o as Le,X as Ce,l as De,y as Z,W as oe,r as ae}from"../chunks/DfqJWsAP.js";import{h as U,u as we}from"../chunks/Cn0d3STq.js";import{e as B}from"../chunks/CnUKkpeB.js";import{S as Ee,i as Ie,d as O,e as j,m as q,t as T,a as I,f as z,h as ye,g as X,b as Y}from"../chunks/B9sU1H0B.js";import{p as He}from"../chunks/C4m20sN0.js";import{c as Ve}from"../chunks/CbBVQZqd.js";import{r as Me}from"../chunks/ByE-VvVj.js";import{g as Ae}from"../chunks/D4yaORjf.js";import"../chunks/8fc_wYz-.js";import{f as Be}from"../chunks/BuTMWYot.js";import{P as $e}from"../chunks/hZi8C6Ly.js";import{L as Oe}from"../chunks/KMJqctWi.js";import{b as R}from"../chunks/DXXfEZPn.js";function se(r){let e,n,t;return{c(){e=$("img"),this.h()},l(l){e=N(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ie(e.src,n=r[4])||_(e,"src",n),_(e,"alt",t=r[2].imageAlt),_(e,"class","mr-2 h-8")},m(l,c){S(l,e,c)},p(l,c){c&16&&!ie(e.src,n=l[4])&&_(e,"src",n),c&4&&t!==(t=l[2].imageAlt)&&_(e,"alt",t)},d(l){l&&m(e)}}}function ce(r){let e,n;return{c(){e=$("div"),n=new Ne(!1),this.h()},l(t){e=N(t,"DIV",{class:!0});var l=P(e);n=Se(l,!1),l.forEach(m),this.h()},h(){n.a=null,_(e,"class","help-text svelte-12n96ld")},m(t,l){S(t,e,l),n.m(r[3],e)},p(t,l){l&8&&n.p(t[3])},d(t){t&&m(e)}}}function je(r){let e,n,t,l,c,i,a,o,h=r[4]&&se(r),u=r[3]&&!r[2].alt&&ce(r);return{c(){e=$("button"),h&&h.c(),n=C(),t=G(r[0]),c=C(),u&&u.c(),i=M(),this.h()},l(s){e=N(s,"BUTTON",{type:!0,"data-testid":!0,class:!0});var f=P(e);h&&h.l(f),n=D(f),t=W(f,r[0]),f.forEach(m),c=D(s),u&&u.l(s),i=M(),this.h()},h(){_(e,"type","button"),_(e,"data-testid",r[5]),_(e,"class",l=le(r[7].class??"btn variant-filled-primary m-1")+" svelte-12n96ld")},m(s,f){S(s,e,f),h&&h.m(e,null),E(e,n),E(e,t),S(s,c,f),u&&u.m(s,f),S(s,i,f),a||(o=ve(e,"click",r[8]),a=!0)},p(s,[f]){s[4]?h?h.p(s,f):(h=se(s),h.c(),h.m(e,n)):h&&(h.d(1),h=null),f&1&&ke(t,s[0]),f&32&&_(e,"data-testid",s[5]),f&128&&l!==(l=le(s[7].class??"btn variant-filled-primary m-1")+" svelte-12n96ld")&&_(e,"class",l),s[3]&&!s[2].alt?u?u.p(s,f):(u=ce(s),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},i:k,o:k,d(s){s&&(m(e),m(c),m(i)),h&&h.d(),u&&u.d(s),a=!1,o()}}}function qe(r,e,n){let t,{buttonText:l="Log In"}=e,{redirectTo:c="/"}=e,{provider:i}=e,{helpText:a}=e,o=async(s,f)=>{(await Ve(i)).login(s,f).then(()=>{Me()})},h;i.imagesrc&&(h="./"+i.imagesrc);const u=()=>o(c,i.type);return r.$$set=s=>{n(7,e=ne(ne({},e),re(s))),"buttonText"in s&&n(0,l=s.buttonText),"redirectTo"in s&&n(1,c=s.redirectTo),"provider"in s&&n(2,i=s.provider),"helpText"in s&&n(3,a=s.helpText)},r.$$.update=()=>{var s;r.$$.dirty&4&&n(5,t=`login-button-${(s=i.name)==null?void 0:s.toLowerCase()}`)},e=re(e),[l,c,i,a,h,t,o,e,u]}class F extends Ee{constructor(e){super(),Ie(this,e,qe,je,be,{buttonText:0,redirectTo:1,provider:2,helpText:3})}}function fe(r,e,n){const t=r.slice();return t[12]=e[n],t}function ue(r,e,n){const t=r.slice();return t[12]=e[n],t}function he(r,e,n){const t=r.slice();return t[12]=e[n],t}function ze(r){return{c:k,l:k,m:k,p:k,i:k,o:k,d:k}}function Re(r){var J,K,Q,x;let e,n,t,l,c,i,a,o,h,u,s,f,b=((K=(J=R)==null?void 0:J.login)==null?void 0:K.showSiteName)&&Ue(r),d=((Q=r[10])==null?void 0:Q.length)===0&&de();const v=[We,Ge],p=[];function y(L,w){return L[10].length>3?0:1}a=y(r),o=p[a]=v[a](r);let g={ctx:r,current:null,token:null,hasCatch:!1,pending:Ze,then:Ye,catch:Xe,value:11,blocks:[,,,]};return U(s=(x=r[1].data)==null?void 0:x.altProviders,g),{c(){e=$("div"),n=$("header"),b&&b.c(),t=C(),l=$("div"),c=$("div"),d&&d.c(),i=C(),o.c(),h=C(),u=C(),g.block.c(),this.h()},l(L){e=N(L,"DIV",{id:!0,class:!0});var w=P(e);n=N(w,"HEADER",{class:!0});var H=P(n);b&&b.l(H),H.forEach(m),t=D(w),l=N(w,"DIV",{class:!0});var V=P(l);c=N(V,"DIV",{id:!0,class:!0});var A=P(c);d&&d.l(A),i=D(A),o.l(A),A.forEach(m),h=D(V),u=D(V),g.block.l(V),V.forEach(m),w.forEach(m),this.h()},h(){_(n,"class","flex flex-col items-center"),_(c,"id","main-logins"),_(c,"class","grid grid-cols-1 gap-4 w-full"),_(l,"class","flex flex-col items-center justify-center"),_(e,"id","login-box"),_(e,"class","w-max mt-2")},m(L,w){S(L,e,w),E(e,n),b&&b.m(n,null),E(e,t),E(e,l),E(l,c),d&&d.m(c,null),E(c,i),p[a].m(c,null),E(l,h),E(l,u),g.block.m(l,g.anchor=null),g.mount=()=>l,g.anchor=null,f=!0},p(L,w){var V,A,ee,te;r=L,(A=(V=R)==null?void 0:V.login)!=null&&A.showSiteName&&b.p(r,w),((ee=r[10])==null?void 0:ee.length)===0?d||(d=de(),d.c(),d.m(c,i)):d&&(d.d(1),d=null);let H=a;a=y(r),a===H?p[a].p(r,w):(X(),I(p[H],1,1,()=>{p[H]=null}),Y(),o=p[a],o?o.p(r,w):(o=p[a]=v[a](r),o.c()),T(o,1),o.m(c,null)),g.ctx=r,w&2&&s!==(s=(te=r[1].data)==null?void 0:te.altProviders)&&U(s,g)||we(g,r,w)},i(L){f||(T(o),T(g.block),f=!0)},o(L){I(o);for(let w=0;w<3;w+=1){const H=g.blocks[w];I(H)}f=!1},d(L){L&&m(e),b&&b.d(),d&&d.d(),p[a].d(),g.block.d(),g.token=null,g=null}}}function Ue(r){let e,n;return{c(){e=$("div"),n=G(r[4])},l(t){e=N(t,"DIV",{});var l=P(e);n=W(l,r[4]),l.forEach(m)},m(t,l){S(t,e,l),E(e,n)},p:k,d(t){t&&m(e)}}}function de(r){let e,n=`<div class="alert-message">No main authentication providers are registered. Please add them to your
                configuration. Click <a class="anchor" href="https://pic-sure.gitbook.io/pic-sure-developer-guide/configuring-pic-sure" target="_blank">Here</a>
                to learn how.</div>`;return{c(){e=$("aside"),e.innerHTML=n,this.h()},l(t){e=N(t,"ASIDE",{class:!0,"data-svelte-h":!0}),De(e)!=="svelte-1h3zug2"&&(e.innerHTML=n),this.h()},h(){_(e,"class","auth-warning alert variant-ghost-warning svelte-u0znbd")},m(t,l){S(t,e,l)},d(t){t&&m(e)}}}function Ge(r){let e,n,t=B(r[10]),l=[];for(let i=0;i<t.length;i+=1)l[i]=me(ue(r,t,i));const c=i=>I(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=M()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);e=M()},m(i,a){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,a);S(i,e,a),n=!0},p(i,a){if(a&10){t=B(i[10]);let o;for(o=0;o<t.length;o+=1){const h=ue(i,t,o);l[o]?(l[o].p(h,a),T(l[o],1)):(l[o]=me(h),l[o].c(),T(l[o],1),l[o].m(e.parentNode,e))}for(X(),o=t.length;o<l.length;o+=1)c(o);Y()}},i(i){if(!n){for(let a=0;a<t.length;a+=1)T(l[a]);n=!0}},o(i){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)I(l[a]);n=!1},d(i){i&&m(e),Z(l,i)}}}function We(r){let e,n,t,l,c,i,a=B(r[10]),o=[];for(let u=0;u<a.length;u+=1)o[u]=_e(he(r,a,u));let h=r[2]&&pe(r);return{c(){e=$("select");for(let u=0;u<o.length;u+=1)o[u].c();n=C(),h&&h.c(),t=M(),this.h()},l(u){e=N(u,"SELECT",{});var s=P(e);for(let f=0;f<o.length;f+=1)o[f].l(s);s.forEach(m),n=D(u),h&&h.l(u),t=M(),this.h()},h(){r[0]===void 0&&Te(()=>r[7].call(e))},m(u,s){S(u,e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);oe(e,r[0],!0),S(u,n,s),h&&h.m(u,s),S(u,t,s),l=!0,c||(i=ve(e,"change",r[7]),c=!0)},p(u,s){if(s&2){a=B(u[10]);let f;for(f=0;f<a.length;f+=1){const b=he(u,a,f);o[f]?o[f].p(b,s):(o[f]=_e(b),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=a.length}s&3&&oe(e,u[0]),u[2]?h?(h.p(u,s),s&4&&T(h,1)):(h=pe(u),h.c(),T(h,1),h.m(t.parentNode,t)):h&&(X(),I(h,1,1,()=>{h=null}),Y())},i(u){l||(T(h),l=!0)},o(u){I(h),l=!1},d(u){u&&(m(e),m(n),m(t)),Z(o,u),h&&h.d(u),c=!1,i()}}}function me(r){let e,n;return e=new F({props:{buttonText:r[12].description||r[12].name,provider:r[12],redirectTo:r[3],helpText:r[12].helptext,class:"btn variant-outline-primary text-primary-500 w-full"}}),{c(){O(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const c={};l&2&&(c.buttonText=t[12].description||t[12].name),l&2&&(c.provider=t[12]),l&2&&(c.helpText=t[12].helptext),e.$set(c)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function _e(r){let e,n=(r[12].description||r[12].name)+"",t,l;return{c(){e=$("option"),t=G(n),this.h()},l(c){e=N(c,"OPTION",{class:!0});var i=P(e);t=W(i,n),i.forEach(m),this.h()},h(){_(e,"class","capitalize"),e.__value=l=r[12].name,ae(e,e.__value)},m(c,i){S(c,e,i),E(e,t)},p(c,i){i&2&&n!==(n=(c[12].description||c[12].name)+"")&&ke(t,n),i&2&&l!==(l=c[12].name)&&(e.__value=l,ae(e,e.__value))},d(c){c&&m(e)}}}function pe(r){let e,n;return e=new F({props:{buttonText:"Log In",provider:r[2],redirectTo:r[3],helpText:r[2].helptext,class:"btn variant-outline-primary m-1 mt-2 w-full"}}),{c(){O(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const c={};l&4&&(c.provider=t[2]),l&4&&(c.helpText=t[2].helptext),e.$set(c)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Xe(r){return{c:k,l:k,m:k,p:k,i:k,o:k,d:k}}function Ye(r){let e,n,t=B(r[11]),l=[];for(let i=0;i<t.length;i+=1)l[i]=ge(fe(r,t,i));const c=i=>I(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=M()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);e=M()},m(i,a){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,a);S(i,e,a),n=!0},p(i,a){if(a&10){t=B(i[11]);let o;for(o=0;o<t.length;o+=1){const h=fe(i,t,o);l[o]?(l[o].p(h,a),T(l[o],1)):(l[o]=ge(h),l[o].c(),T(l[o],1),l[o].m(e.parentNode,e))}for(X(),o=t.length;o<l.length;o+=1)c(o);Y()}},i(i){if(!n){for(let a=0;a<t.length;a+=1)T(l[a]);n=!0}},o(i){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)I(l[a]);n=!1},d(i){i&&m(e),Z(l,i)}}}function ge(r){let e,n;return e=new F({props:{buttonText:r[12].description||r[12].name,provider:r[12],redirectTo:r[3],helpText:r[12].helptext,class:"btn variant-outline-tertiary hover:variant-filled-tertiary m-1 w-full last:mb-4"}}),{c(){O(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,l){const c={};l&2&&(c.buttonText=t[12].description||t[12].name),l&2&&(c.provider=t[12]),l&2&&(c.helpText=t[12].helptext),e.$set(c)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Ze(r){let e,n;return e=new $e({props:{width:"w-3",value:void 0}}),{c(){O(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p:k,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Fe(r){let e,n;return e=new $e({props:{width:"w-10",value:void 0}}),{c(){O(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p:k,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Je(r){var b;let e,n,t,l,c,i,a,o,h,u,s;l=new Oe({props:{class:"flex-none",height:4}});let f={ctx:r,current:null,token:null,hasCatch:!1,pending:Fe,then:Re,catch:ze,value:10,blocks:[,,,]};return U(h=(b=r[1].data)==null?void 0:b.providers,f),{c(){e=$("section"),n=$("div"),t=$("h1"),O(l.$$.fragment),c=C(),i=$("p"),a=G(r[5]),o=C(),f.block.c(),this.h()},l(d){e=N(d,"SECTION",{id:!0,class:!0});var v=P(e);n=N(v,"DIV",{id:!0,class:!0});var p=P(n);t=N(p,"H1",{"data-testid":!0,class:!0});var y=P(t);j(l.$$.fragment,y),y.forEach(m),c=D(p),i=N(p,"P",{"data-testid":!0,class:!0});var g=P(i);a=W(g,r[5]),g.forEach(m),p.forEach(m),o=D(v),f.block.l(v),v.forEach(m),this.h()},h(){_(t,"data-testid","login-title"),_(t,"class","mb-6 w-full flex gap-2 items-center justify-center"),_(i,"data-testid","login-description"),_(i,"class","max-w-16 text-2xl"),_(n,"id","title-box"),_(n,"class","flex flex-col items-center text-center mb-8"),_(e,"id","logins"),_(e,"class","flex flex-col items-center h-screen w-full text-center place-content-center text-lg")},m(d,v){S(d,e,v),E(e,n),E(n,t),q(l,t,null),E(n,c),E(n,i),E(i,a),E(e,o),f.block.m(e,f.anchor=null),f.mount=()=>e,f.anchor=null,s=!0},p(d,[v]){var p;r=d,f.ctx=r,v&2&&h!==(h=(p=r[1].data)==null?void 0:p.providers)&&U(h,f)||we(f,r,v)},i(d){s||(T(l.$$.fragment,d),T(f.block),d&&(u||Te(()=>{u=ye(e,Be,{duration:600,x:"100%"}),u.start()})),s=!0)},o(d){I(l.$$.fragment,d);for(let v=0;v<3;v+=1){const p=f.blocks[v];I(p)}s=!1},d(d){d&&m(e),z(l),f.block.d(),f.token=null,f=null}}}function Ke(r,e,n){var b,d,v;let t,l;Pe(r,He,p=>n(1,l=p));const c=Ae(),i=l.url.searchParams.get("redirectTo")||"/",a=(b=R)==null?void 0:b.applicationName,o=(d=R)==null?void 0:d.login.description,h=(v=R)==null?void 0:v.login.openPicsureLinkText;let u;Le(()=>{u=sessionStorage.getItem("logout-reason"),u&&(c.trigger({message:u,background:"variant-filled-error"}),sessionStorage.removeItem("logout-reason"))});let s;function f(){s=Ce(this),n(0,s)}return r.$$.update=()=>{var p,y;r.$$.dirty&3&&n(2,t=s?(y=(p=l.data)==null?void 0:p.providers)==null?void 0:y.find(g=>g.name===s):void 0)},[s,l,t,i,a,o,h,f]}class ut extends Ee{constructor(e){super(),Ie(this,e,Ke,Je,be,{})}}export{ut as component};
