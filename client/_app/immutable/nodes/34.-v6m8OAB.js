import"../chunks/Bzak7iHL.js";import{o as at,a as st}from"../chunks/xU7jw7XU.js";import{p as ot,h as lt,i as it,c as nt,t as h,f as p,a as Z,s as P,b as n,l as ct,$ as ut,d as u,r as s,k as r,u as F,j as pt}from"../chunks/DhSNEPDw.js";import{h as mt,s as S}from"../chunks/DVtHS8ol.js";import{a as M}from"../chunks/Jhkhy7E3.js";import{e as O,i as j}from"../chunks/ByI6iVq5.js";import{s as Q,c as ft}from"../chunks/aV0zye_u.js";import{s as dt,a as U,c as q}from"../chunks/DpjY2ypC.js";import{b as G}from"../chunks/BOAiLg0g.js";import{S as y,c as z,a as vt}from"../chunks/DXULH1lJ.js";import{r as ht}from"../chunks/Cnvmmg-i.js";import{p as H}from"../chunks/B1n7kAsq.js";import{j as _t,f as xt}from"../chunks/M2p3ZkHt.js";import{C as bt}from"../chunks/5IRW-zVC.js";import{L as I}from"../chunks/CzbepVLR.js";var $t=p("<th> </th>"),yt=p('<i class="fa-solid fa-circle-xmark text-error-500 w-full text-center"></i>'),gt=p("<td><!></td>"),kt=p("<tr></tr>"),Ct=p('<ul id="cohort-key" class="w-full flex text-center py-3"><li class="flex-auto">"0" = Site returned zero results</li> <li class="flex-auto">"-" = No data for that site</li> <li class="flex-auto"><i class="fa-solid fa-circle-xmark text-error-500"></i> = Site did not return results</li></ul> <div class="table-wrap"><table class="table caption-bottom"><thead><tr></tr></thead><tbody></tbody></table></div>',1),Dt=p('<p class="text-center"> </p> <!>',1);function Mt(J,K){ot(K,!0);const V=()=>U(ht,"$resultCounts",B),A=()=>U(xt,"$resourcesPromise",B),[B,W]=dt(),E="-",m={center:"!text-center",left:"!text-left",stat:"font-bold",field:""};let _=lt(it([])),L=F(()=>[{style:m.left,value:"Details"},{style:m.center,value:"Total"},...r(_).map(o=>({style:m.center,value:o}))]),X=F(()=>r(_).length>0?Y(V(),r(_)):[]);function Y(o,g){let c=[];return o.forEach(a=>{const k=Promise.allSettled(y.list(a).map(({promise:e})=>e)).then(e=>z(e.map(y.valueOrZero))),C=g.map(e=>a.result[e].then(i=>z([i])));c.push({style:m.stat,values:[a.label,k,...C]}),vt(a.key).forEach(e=>{const i=t=>{const f=typeof t=="object"?t[e.conceptPath]||E:t;return`${f}`=="-1"?E:f},x=Promise.allSettled(y.list(a).map(({promise:t})=>t)).then(t=>z(t.map(y.valueOrZero).map(i))),b=g.map(t=>a.result[t].then(i));c.push({style:m.field,values:[e.label,x,...b]})})}),c}at(async()=>{await A(),ct(_,_t().map(({name:o})=>o),!0),q(H,!1)}),st(()=>{q(H,!0)}),mt(o=>{h(()=>ut.title=`${G.applicationName??""} | Cohort Details`)}),bt(J,{full:!0,backUrl:"/explorer",backTitle:"Back to Cohort Builder",title:"Cohort Details",children:(o,g)=>{var c=Dt(),a=Z(c),k=u(a,!0);s(a);var C=P(a,2);M(C,A,e=>{I(e,{ring:!0,size:"large"})},e=>{var i=Ct(),x=P(Z(i),2),b=u(x),t=u(b),f=u(t);O(f,21,()=>r(L),j,(D,d)=>{var l=$t(),T=u(l,!0);s(l),h(()=>{Q(l,1,ft(r(d).style)),S(T,r(d).value)}),n(D,l)}),s(f),s(t);var N=P(t);O(N,21,()=>r(X),j,(D,d)=>{var l=kt();O(l,21,()=>r(d).values,j,(T,tt,et)=>{var $=gt(),rt=u($);M(rt,()=>r(tt),v=>{I(v,{ring:!0,size:"micro"})},(v,w)=>{var R=pt();h(()=>S(R,r(w))),n(v,R)},v=>{var w=yt();n(v,w)}),s($),h(()=>Q($,1,`${r(L)[et].style??""} ${r(d).style??""}`)),n(T,$)}),s(l),n(D,l)}),s(N),s(b),s(x),n(e,i)}),h(()=>S(k,G.results.cohortDescription||"Distribution of total patient counts across networked institutions.")),n(o,c)},$$slots:{default:!0}}),nt(),W()}export{Mt as component};
