var na=Object.defineProperty;var Hr=r=>{throw TypeError(r)};var aa=(r,e,n)=>e in r?na(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var oe=(r,e,n)=>aa(r,typeof e!="symbol"?e+"":e,n),qr=(r,e,n)=>e.has(r)||Hr("Cannot "+n);var Kt=(r,e,n)=>(qr(r,e,"read from private field"),n?n.call(r):e.get(r)),hr=(r,e,n)=>e.has(r)?Hr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,n),br=(r,e,n,a)=>(qr(r,e,"write to private field"),a?a.call(r,n):e.set(r,n),n);import"../chunks/Bzak7iHL.js";import{o as sr,g as ia,a as vn}from"../chunks/xU7jw7XU.js";import{bd as oa,k as t,a3 as sa,R as la,S as ct,be as Kr,T as ca,v as Zr,w as da,q as ua,bf as fa,L as va,A as ga,M as ha,N as ba,D as ma,U as pa,P as ya,f as F,d as E,s as z,r as _,t as ee,b as p,aH as xa,p as me,u as s,c as pe,e as ne,a as Q,j as Bt,B as Qe,l as A,h as ae,o as $,i as gt,b0 as wa,aO as _a,aP as lr,au as Vt,m as ht,bc as Pe,at as vt,n as tt}from"../chunks/DhSNEPDw.js";import{i as G}from"../chunks/BG76zvuN.js";import{s as Ne}from"../chunks/C8tG8t5X.js";import{p as W,r as gn,a as ce,s as nt,b as Ra,c as jt,e as Sa}from"../chunks/DpjY2ypC.js";import{p as Fe}from"../chunks/CftmxiRQ.js";import{g as Ct,b as Da}from"../chunks/BPde4ukL.js";import{A as Ca,aA as ka,aB as Ea,I as Ta,K as Ia,aC as Aa,O as Oa,u as Na,R as Fa,t as Pa}from"../chunks/BNC-bmXQ.js";import{T as La,F as Ma}from"../chunks/EinAA01x.js";import{r as za,O as Qr,s as hn,t as bn,u as xt,v as Ba,f as kt,g as mn,a as ut,p as lt,c as mr,q as ja,w as Wa,h as pn,x as Ga,y as Pt,z as Ya,B as Xa,C as Va,D as Ua,E as Ha}from"../chunks/DA3-ipRP.js";import{f as Ke,b as Qt}from"../chunks/BZHGrlEE.js";import{s as ge,r as qa,d as dt,o as Jr,m as Ka,u as Za}from"../chunks/DVtHS8ol.js";import{e as it,i as bt}from"../chunks/ByI6iVq5.js";import{a as Ze,g as _t,s as Ce,b as Nr,c as Qa,i as Ja,j as $a}from"../chunks/CJ66PCUx.js";import{c as ei,u as ti,n as ri,L as yn}from"../chunks/bwStxD3u.js";import{c as ni}from"../chunks/LUVO2xEE.js";import{L as ai}from"../chunks/CzRDLKSN.js";import{P as xn}from"../chunks/8Jv8q4WI.js";import{e as wn,E as Sr,c as ii}from"../chunks/eUoM9-xI.js";import{t as Rt,b as _n,a as Rn,s as Sn}from"../chunks/BbooiKwf.js";import{e as Dn}from"../chunks/BqrDejZS.js";import{S as oi}from"../chunks/BXyjodwM.js";import{r as si,l as Ot,c as li,h as ci}from"../chunks/BFRM3hjf.js";import{b as Wt}from"../chunks/C0kNAPzX.js";import{p as di,k as ui}from"../chunks/Dsw-2KeE.js";import{a as fi,M as Lt,b as Cn}from"../chunks/B9gq-btx.js";import{a as vi,A as gi}from"../chunks/bSQqM1I_.js";import{e as hi}from"../chunks/BmWUWu0n.js";import{C as Nt}from"../chunks/DaAl-QrF.js";import{a as kn}from"../chunks/Jhkhy7E3.js";import{h as bi}from"../chunks/DgX2KM8m.js";import{S as wt,c as mi}from"../chunks/CUGspmVO.js";import{E as Fr}from"../chunks/nxdkf_Tf.js";import{H as pi}from"../chunks/DAS9fB1J.js";import{s as yi}from"../chunks/COZ3s8UQ.js";import{p as Jt}from"../chunks/B1n7kAsq.js";import{o as $r,a as xi}from"../chunks/DFFa9wO9.js";import{v as wi}from"../chunks/CD4Ar3Xi.js";function _i(r){let e=0,n=sa(0),a;return()=>{oa()&&(t(n),la(()=>(e===0&&(a=ct(()=>r(()=>Kr(n)))),e+=1,()=>{ca(()=>{e-=1,e===0&&(a==null||a(),a=void 0,Kr(n))})})))}}function cr(r,e,n){Zr&&da();var a=r,o=pa,i,l,c=null,f=fa;function v(){i&&ya(i),c!==null&&(c.lastChild.remove(),a.before(c),c=null),i=l}ua(()=>{if(f(o,o=e())){var h=a,g=ba();g&&(c=document.createDocumentFragment(),c.append(h=va())),l=ga(()=>n(h)),g?ha.add_callback(v):v()}}),Zr&&(a=ma)}var Ri=F("<div><!></div>"),Si=F("<div><!></div>"),Di=F("<div><!></div>"),Ci=F('<section data-testid="app-bar-headline"><!></section>'),ki=F('<header data-testid="app-bar"><section data-testid="app-bar-toolbar"><!> <!> <!></section> <!></header>');function Ei(r,e){const n=W(e,"base",3,"w-full flex flex-col"),a=W(e,"background",3,"bg-surface-100-900"),o=W(e,"spaceY",3,"space-y-4"),i=W(e,"border",3,""),l=W(e,"padding",3,"p-4"),c=W(e,"shadow",3,""),f=W(e,"classes",3,""),v=W(e,"toolbarBase",3,"flex justify-between"),h=W(e,"toolbarGridCols",3,"grid-cols-[auto_1fr_auto]"),g=W(e,"toolbarGap",3,"gap-4"),u=W(e,"toolbarClasses",3,""),d=W(e,"leadBase",3,"flex"),b=W(e,"leadSpaceX",3,"space-x-4 rtl:space-x-reverse"),m=W(e,"leadPadding",3,""),x=W(e,"leadClasses",3,""),y=W(e,"centerBase",3,"grow"),R=W(e,"centerAlign",3,"text-center"),I=W(e,"centerPadding",3,""),B=W(e,"centerClasses",3,""),M=W(e,"trailBase",3,"flex"),S=W(e,"trailSpaceX",3,"space-x-4 rtl:space-x-reverse"),L=W(e,"trailPadding",3,""),k=W(e,"trailClasses",3,""),O=W(e,"headlineBase",3,"w-full"),D=W(e,"headlineClasses",3,"");var N=ki(),T=E(N),Y=E(T);{var j=C=>{var X=Ri(),te=E(X);Ne(te,()=>e.lead),_(X),ee(()=>Ze(X,1,`${d()??""} ${b()??""} ${m()??""} ${x()??""}`)),p(C,X)};G(Y,C=>{e.lead&&C(j)})}var K=z(Y,2);{var w=C=>{var X=Si(),te=E(X);Ne(te,()=>e.children),_(X),ee(()=>Ze(X,1,`${y()??""} ${R()??""} ${I()??""} ${B()??""}`)),p(C,X)};G(K,C=>{e.children&&C(w)})}var U=z(K,2);{var q=C=>{var X=Di(),te=E(X);Ne(te,()=>e.trail),_(X),ee(()=>Ze(X,1,`${M()??""} ${S()??""} ${L()??""} ${k()??""}`)),p(C,X)};G(U,C=>{e.trail&&C(q)})}_(T);var re=z(T,2);{var P=C=>{var X=Ci(),te=E(X);Ne(te,()=>e.headline),_(X),ee(()=>Ze(X,1,`${O()??""} ${D()??""}`)),p(C,X)};G(re,C=>{e.headline&&C(P)})}_(N),ee(()=>{Ze(N,1,`${n()??""} ${a()??""} ${o()??""} ${i()??""} ${l()??""} ${c()??""} ${f()??""}`),Ze(T,1,`${v()??""} ${h()??""} ${g()??""} ${u()??""}`)}),p(r,N)}var Ti=Ta("avatar").parts("root","image","fallback"),pr=Ti.build(),En=r=>{var e;return((e=r.ids)==null?void 0:e.root)??`avatar:${r.id}`},Tn=r=>{var e;return((e=r.ids)==null?void 0:e.image)??`avatar:${r.id}:image`},Ii=r=>{var e;return((e=r.ids)==null?void 0:e.fallback)??`avatar:${r.id}:fallback`},Ai=r=>r.getById(En(r)),Dr=r=>r.getById(Tn(r));function Oi(r,e){const{state:n,send:a,prop:o,scope:i}=r,l=n.matches("loaded");return{loaded:l,setSrc(c){const f=Dr(i);f==null||f.setAttribute("src",c)},setLoaded(){a({type:"img.loaded",src:"api"})},setError(){a({type:"img.error",src:"api"})},getRootProps(){return e.element({...pr.root.attrs,dir:o("dir"),id:En(i)})},getImageProps(){return e.img({...pr.image.attrs,hidden:!l,dir:o("dir"),id:Tn(i),"data-state":l?"visible":"hidden",onLoad(){a({type:"img.loaded",src:"element"})},onError(){a({type:"img.error",src:"element"})}})},getFallbackProps(){return e.element({...pr.fallback.attrs,dir:o("dir"),id:Ii(i),hidden:l,"data-state":l?"hidden":"visible"})}}}var Ni=Ca({initialState(){return"loading"},effects:["trackImageRemoval","trackSrcChange"],on:{"src.change":{target:"loading"},"img.unmount":{target:"error"}},states:{loading:{entry:["checkImageStatus"],on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]},"img.error":{target:"error",actions:["invokeOnError"]}}},error:{on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{on:{"img.error":{target:"error",actions:["invokeOnError"]}}}},implementations:{actions:{invokeOnLoad({prop:r}){var e;(e=r("onStatusChange"))==null||e({status:"loaded"})},invokeOnError({prop:r}){var e;(e=r("onStatusChange"))==null||e({status:"error"})},checkImageStatus({send:r,scope:e}){const n=Dr(e);if(!(n!=null&&n.complete))return;const a=Fi(n)?"img.loaded":"img.error";r({type:a,src:"ssr"})}},effects:{trackImageRemoval({send:r,scope:e}){const n=Ai(e);return Ea(n,{callback(a){Array.from(a[0].removedNodes).find(l=>l.nodeType===Node.ELEMENT_NODE&&l.matches("[data-scope=avatar][data-part=image]"))&&r({type:"img.unmount"})}})},trackSrcChange({send:r,scope:e}){const n=Dr(e);return ka(n,{attributes:["src","srcset"],callback(){r({type:"src.change"})}})}}}});function Fi(r){return r.complete&&r.naturalWidth!==0&&r.naturalHeight!==0}ei()(["dir","id","ids","onStatusChange","getRootNode"]);var Pi=F("<img/>"),Li=F("<figure><span><!></span> <!></figure>");function Mi(r,e){const n=xa();me(e,!0);const a=W(e,"initials",19,()=>[0,-1]),o=W(e,"base",3,"overflow-hidden isolate"),i=W(e,"background",3,"bg-surface-400-600"),l=W(e,"size",3,"size-16"),c=W(e,"font",3,""),f=W(e,"border",3,""),v=W(e,"rounded",3,"rounded-full"),h=W(e,"shadow",3,""),g=W(e,"classes",3,""),u=W(e,"imageBase",3,"w-full object-cover"),d=W(e,"imageClasses",3,""),b=W(e,"style",3,""),m=W(e,"fallbackBase",3,"w-full h-full flex justify-center items-center"),x=W(e,"fallbackClasses",3,""),y=gn(e,["$$slots","$$events","$$legacy","src","srcset","name","initials","base","background","size","font","border","rounded","shadow","classes","imageBase","imageClasses","style","fallbackBase","fallbackClasses","children"]),R=ti(Ni,()=>({id:n,...y})),I=s(()=>Oi(R,ri));function B(){return a().map(Y=>{var j;return(j=e.name.split(" ").at(Y))==null?void 0:j.charAt(0).toUpperCase()}).join("")}var M=Li();_t(M,T=>({...T,class:`${o()??""} ${i()??""} ${l()??""} ${c()??""} ${f()??""} ${v()??""} ${h()??""} ${g()??""}`,style:b(),"data-testid":"avatar"}),[()=>t(I).getRootProps()]);var S=E(M);_t(S,T=>({...T,class:`${m()??""} ${x()??""}`,"data-testid":"avatar-fallback"}),[()=>t(I).getFallbackProps()]);var L=E(S);{var k=T=>{var Y=ne(),j=Q(Y);Ne(j,()=>e.children),p(T,Y)},O=T=>{var Y=Bt();ee(j=>ge(Y,j),[B]),p(T,Y)};G(L,T=>{e.children?T(k):T(O,!1)})}_(S);var D=z(S,2);{var N=T=>{var Y=Pi();_t(Y,j=>({...j,src:e.src,srcset:e.srcset,alt:e.name,class:`${u()??""} ${d()??""}`,"data-testid":"avatar-image"}),[()=>t(I).getImageProps()]),qa(Y),p(T,Y)};G(D,T=>{(e.src||e.srcset)&&T(N)})}_(M),p(r,M),pe()}var zi=F('<div style="display: contents"><main class="w-full h-full"><div id="appShell" class="w-full h-full flex flex-col overflow-hidden" data-testid="app-shell"><!> <div class="flex-auto w-full h-full flex overflow-hidden"><div id="page" class="flex-1 overflow-x-hidden flex flex-col"><main id="page-content" class="flex-auto"><!></main> <footer id="page-footer" class="flex-none"><!></footer></div> <!></div></div></main></div>');function Bi(r,e){me(e,!0);let n=s(()=>Ke.login.open||!Ke.login.open&&Ia());var a=ne(),o=Q(a);{var i=l=>{var c=zi(),f=E(c),v=E(f),h=E(v);Ne(h,()=>e.header??Qe);var g=z(h,2),u=E(g),d=E(u),b=E(d);Ne(b,()=>e.children??Qe),_(d);var m=z(d,2),x=E(m);Ne(x,()=>e.pageFooter??Qe),_(m),_(u);var y=z(u,2);Ne(y,()=>e.sidebarRight??Qe),_(g),_(v),_(f),_(c),p(l,c)};G(o,l=>{t(n)&&l(i)})}p(r,a),pe()}function ji(r){r.stopImmediatePropagation(),Ct(`/login?redirectTo=${Fe.url.pathname}`)}var Wi=F('<a href="/" aria-current="page" data-testid="logo-home-link" class="content-center"><!></a>'),Gi=(r,e)=>Oa(t(e),!1),Yi=F('<div class="flex flex-col items-center"><p class="pb-6"> </p> <button id="user-logout-btn" class="btn preset-filled-primary-500 w-fit" title="Logout">Logout</button></div>'),Xi=F('<button id="user-login-btn" title="Login" class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500">Login</button>'),Vi=F('<div id="user-session-avatar" class="content-center"><!></div>'),Ui=F('<li><a class="nav-link"> </a></li>'),Hi=F('<nav id="page-navigation"><ul></ul></nav>');function qi(r,e){me(e,!0);const n=()=>ce(Aa,"$userRoutes",i),a=()=>ce(Na,"$user",i),o=()=>ce(Fa,"$isLoggedIn",i),[i,l]=nt();let c,f=ae(void 0);function v({path:g,id:u}){return"nav-link"+(u?"-"+u:g.replaceAll("/","-"))}let h=s(()=>g=>{if(g.children){for(const u of g.children)if(Fe.url.pathname.includes(u.path))return"page";return}return Fe.url.pathname.includes(g.path)?"page":void 0});sr(async()=>{var g;if(Fe){const u=sessionStorage.getItem("type");u&&(c=(g=Fe.data)==null?void 0:g.providers.find(d=>d.type===u),A(f,await ni(c),!0))}}),Ei(r,{padding:"py-0 pl-2 pr-5",background:"bg-surface-50-950",toolbarClasses:"flex-none z-10",lead:d=>{var b=Wi(),m=E(b);ai(m,{height:4,class:"mx-1"}),_(b),p(d,b)},trail:d=>{var b=Vi(),m=E(b);{var x=R=>{xn(R,{trigger:B=>{{let M=s(()=>(a().email||"").toUpperCase());Mi(B,{get name(){return t(M)},background:"preset-tonal-primary hover:preset-tonal-secondary",border:"border hover:border-primary-400",font:"text-2xl",size:"size-12",classes:"m-3"})}},children:(B,M)=>{var S=Yi(),L=E(S),k=E(L,!0);_(L);var O=z(L,2);O.__click=[Gi,f],_(S),ee(()=>ge(k,a().email)),p(B,S)},$$slots:{trigger:!0,default:!0}})},y=R=>{var I=Xi();I.__click=[ji],p(R,I)};G(m,R=>{a()&&a().privileges&&a().email&&o()?R(x):R(y,!1)})}_(b),p(d,b)},children:(d,b)=>{var m=Hi(),x=E(m);it(x,5,n,bt,(y,R)=>{var I=Ui(),B=E(I),M=E(B,!0);_(B),_(I),ee((S,L)=>{Ce(B,"id",S),Ce(B,"href",t(R).path),Ce(B,"aria-current",L),ge(M,t(R).text)},[()=>v(t(R)),()=>t(h)(t(R))]),p(y,I)}),_(x),_(m),p(d,m)},$$slots:{lead:!0,trail:!0,default:!0}}),pe(),l()}dt(["click"]);var Ki=F("<div> </div>"),Zi=F('<div data-testid="any-record-of-filter-modal"><header><h1 class="text-lg font-normal"> </h1></header> <!></div>');function Qi(r,e){me(e,!0);var n=Zi(),a=E(n),o=E(a),i=E(o,!0);_(o),_(a);var l=z(a,2);{var c=v=>{var h=ne(),g=Q(h);it(g,17,()=>e.filter.concepts,bt,(u,d)=>{var b=Ki(),m=E(b,!0);_(b),ee(()=>ge(m,t(d))),p(u,b)}),p(v,h)},f=v=>{var h=Bt("No filter provided");p(v,h)};G(l,v=>{e.filter.filterType==="AnyRecordOf"?v(c):v(f,!1)})}_(n),ee(()=>{var v,h,g,u;return ge(i,`${(h=(v=e.filter)==null?void 0:v.concepts)==null?void 0:h.length} variable(s) in ${((g=e.filter.searchResult)==null?void 0:g.display)||((u=e.filter.searchResult)==null?void 0:u.name)||e.filter.variableName} category`)}),p(r,n),pe()}var Ji=F('<div style="display: none;"> </div>');function $i(r,e){var n=Ji(),a=E(n,!0);_(n),ee(()=>{Ce(n,"id",e.id),ge(a,e.value)}),p(r,n)}function eo(...r){return e=>{r.forEach(n=>n(e))}}function to(){let r=null;return[(a,o)=>{r=setInterval(a,o)},()=>{r!==null&&(clearInterval(r),r=null)}]}function Ut(r){let e=ae(void 0);return $(()=>{A(e,r(ct(()=>t(e))),!0)}),{get current(){return t(e)}}}function ro(r){return typeof r=="function"}function no(r){return r!==null&&typeof r=="object"}const Gt=Symbol("box"),Pr=Symbol("is-writable");function ao(r){return no(r)&&Gt in r}function io(r){return J.isBox(r)&&Pr in r}function J(r){let e=ae(gt(r));return{[Gt]:!0,[Pr]:!0,get current(){return t(e)},set current(n){A(e,n,!0)}}}function oo(r,e){const n=s(r);return e?{[Gt]:!0,[Pr]:!0,get current(){return t(n)},set current(a){e(a)}}:{[Gt]:!0,get current(){return r()}}}function so(r){return J.isBox(r)?r:ro(r)?J.with(r):J(r)}function lo(r){return Object.entries(r).reduce((e,[n,a])=>J.isBox(a)?(J.isWritableBox(a)?Object.defineProperty(e,n,{get(){return a.current},set(o){a.current=o}}):Object.defineProperty(e,n,{get(){return a.current}}),e):Object.assign(e,{[n]:a}),{})}function co(r){return J.isWritableBox(r)?{[Gt]:!0,get current(){return r.current}}:r}J.from=so;J.with=oo;J.flatten=lo;J.readonly=co;J.isBox=ao;J.isWritableBox=io;function uo(r,e){const n=RegExp(r,"g");return a=>{if(typeof a!="string")throw new TypeError(`expected an argument of type string, but got ${typeof a}`);return a.match(n)?a.replace(n,e):a}}const fo=uo(/[A-Z]/,r=>`-${r.toLowerCase()}`);function vo(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError(`expected an argument of type object, but got ${typeof r}`);return Object.keys(r).map(e=>`${fo(e)}: ${r[e]};`).join(`
`)}function go(r={}){return vo(r).replace(`
`," ")}const ho={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};go(ho);const bo=typeof window<"u"?window:void 0;function mo(r){let e=r.activeElement;for(;e!=null&&e.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}var Dt,Xt;class po{constructor(e={}){hr(this,Dt);hr(this,Xt);const{window:n=bo,document:a=n==null?void 0:n.document}=e;n!==void 0&&(br(this,Dt,a),br(this,Xt,_i(o=>{const i=Jr(n,"focusin",o),l=Jr(n,"focusout",o);return()=>{i(),l()}})))}get current(){var e;return(e=Kt(this,Xt))==null||e.call(this),Kt(this,Dt)?mo(Kt(this,Dt)):null}}Dt=new WeakMap,Xt=new WeakMap;new po;function yo(r,e){switch(r){case"post":$(e);break;case"pre":wa(e);break}}function In(r,e,n,a={}){const{lazy:o=!1}=a;let i=!o,l=Array.isArray(r)?[]:void 0;yo(e,()=>{const c=Array.isArray(r)?r.map(v=>v()):r();if(!i){i=!0,l=c;return}const f=ct(()=>n(c,l));return l=c,f})}function mt(r,e,n){In(r,"post",e,n)}function xo(r,e,n){In(r,"pre",e,n)}mt.pre=xo;function tr(r){let e=ae(null);const n=a=>{a!==t(e)&&(r==null||r(a,t(e))),A(e,a,!0)};return[J.with(()=>t(e),n),n]}const yr={};function Ht(r,e){if(e)return e;const n=yr[r]==null?0:yr[r]+1;return yr[r]=n,`${r}-${n}`}function An(r){return(e,...n)=>n.reduce((a,o)=>{const i=Object.entries(o);for(const[l,c]of i){const f=a[l];f!=null&&(a[l]=f+r*c)}return a},{...e})}const St=An(1),rr=An(-1);function wo(r){return"clientX"in r&&"clientY"in r}const dr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Et(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function Lr(r){return"nodeType"in r}function ze(r){var e;return r?Et(r)?r:Lr(r)?((e=r.ownerDocument)==null?void 0:e.defaultView)??window:window:window}function Mr(r){const{Document:e}=ze(r);return r instanceof e}function qt(r){return Et(r)?!1:r instanceof ze(r).HTMLElement}function On(r){return r instanceof ze(r).SVGElement}function Tt(r){return r?Et(r)?r.document:Lr(r)?Mr(r)?r:qt(r)||On(r)?r.ownerDocument:document:document:document}function ur(r){if(!r)return!1;const{KeyboardEvent:e}=ze(r.target);return e&&r instanceof e}function _o(r){if(!r)return!1;const{TouchEvent:e}=ze(r.target);return e&&r instanceof e}function nr(r){if(_o(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:n}=r.touches[0];return{x:e,y:n}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:n}=r.changedTouches[0];return{x:e,y:n}}}return wo(r)?{x:r.clientX,y:r.clientY}:null}const ot=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:n}=r;return`translate3d(${e?Math.round(e):0}px, ${n?Math.round(n):0}px, 0)`}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:n}=r;return`scaleX(${e}) scaleY(${n})`}},Transform:{toString(r){if(r)return[ot.Translate.toString(r),ot.Scale.toString(r)].join(" ")}},Transition:{toString({property:r,duration:e,easing:n}){return`${r} ${e}ms ${n}`}}});function fr(r){return Object.entries(r).filter(([,e])=>e!==void 0).map(([e,n])=>{const o=typeof n=="number"&&!["opacity","zIndex","fontWeight","lineHeight","order","flexGrow","flexShrink"].includes(e)?`${n}px`:n;return`${e.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`)}:${o}`}).join(";")}const en="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ro(r){return r.matches(en)?r:r.querySelector(en)}function So(r){return typeof r=="function"?r():r}function zr(r){return Object.fromEntries(Object.entries(r).map(([e,n])=>[e,So(n)]))}var Do=F('<div role="status" aria-atomic="true"> </div>');function Co(r,e){me(e,!0);let n=W(e,"ariaLiveType",3,"assertive");const a=fr({position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"});var o=Do(),i=E(o,!0);_(o),ee(()=>{Ce(o,"id",e.id),Nr(o,a),Ce(o,"aria-live",n()),ge(i,e.announcement)}),p(r,o),pe()}function ko(r,e){var n=ne(),a=Q(n);cr(a,()=>e.children,o=>{var i=ne(),l=Q(i);Ne(l,()=>e.children??Qe),p(o,i)}),p(r,n)}function Eo(r,e){me(e,!0);let n=W(e,"to",3,"body");const a=_a();let o=s(i);function i(){if(!dr||e.disabled)return null;let g=null;return typeof n()=="string"?g=document.querySelector(n()):(n()instanceof HTMLElement||n()instanceof DocumentFragment)&&(g=n()),g}let l;function c(){l&&(Za(l),l=null)}mt([()=>t(o),()=>e.disabled],([g,u])=>{if(!g||u){c();return}return l=Ka(ko,{target:g,props:{children:e.children},context:a}),()=>{c()}});var f=ne(),v=Q(f);{var h=g=>{var u=ne(),d=Q(u);Ne(d,()=>e.children??Qe),p(g,u)};G(v,g=>{e.disabled&&g(h)})}p(r,f),pe()}function To(){let r=ae("");return{announce:n=>{n!=null&&A(r,n,!0)},announcement:{get current(){return t(r)}}}}function Io(){const r=new Set;return[({type:a,event:o})=>{r.forEach(i=>{var l;return(l=i[a])==null?void 0:l.call(i,o)})},a=>(r.add(a),()=>r.delete(a))]}const Cr=Symbol("DndMonitorContext");function Ao(){return lr(Cr)?Vt(Cr):null}function Oo(r){const e=Ao();$(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)})}const No={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fo={onDragStart({active:r}){return`Picked up draggable item ${r.id}.`},onDragOver({active:r,over:e}){return e?`Draggable item ${r.id} was moved over droppable area ${e.id}.`:`Draggable item ${r.id} is no longer over a droppable area.`},onDragEnd({active:r,over:e}){return e?`Draggable item ${r.id} was dropped over droppable area ${e.id}`:`Draggable item ${r.id} was dropped.`},onDragCancel({active:r}){return`Dragging was cancelled. Draggable item ${r.id} was dropped.`}};var Po=F("<!> <!>",1);function Lo(r,e){me(e,!0);const n=u=>{var d=Po(),b=Q(d);$i(b,{get id(){return e.hiddenTextDescribedById},get value(){return o().draggable}});var m=z(b,2);Co(m,{get id(){return c},get announcement(){return l.current}}),p(u,d)};let a=W(e,"announcements",3,Fo),o=W(e,"screenReaderInstructions",3,No);const{announce:i,announcement:l}=To(),c=Ht("DndLiveRegion");let f=ae(!1);$(()=>{A(f,!0)}),Oo({onDragStart({active:u}){i(a().onDragStart({active:u}))},onDragMove({active:u,over:d}){a().onDragMove&&i(a().onDragMove({active:u,over:d}))},onDragOver({active:u,over:d}){i(a().onDragOver({active:u,over:d}))},onDragEnd({active:u,over:d}){i(a().onDragEnd({active:u,over:d}))},onDragCancel({active:u,over:d}){i(a().onDragCancel({active:u,over:d}))}});var v=ne(),h=Q(v);{var g=u=>{var d=ne(),b=Q(d);{var m=y=>{Eo(y,{get to(){return e.container},children:(R,I)=>{n(R)},$$slots:{default:!0}})},x=y=>{n(y)};G(b,y=>{e.container?y(m):y(x,!1)})}p(u,d)};G(h,u=>{t(f)&&u(g)})}p(r,v),pe()}function xr(r,e){return{sensor:r,options:e??{}}}function Mo(...r){return r.filter(e=>e!=null)}const rt=Object.freeze({x:0,y:0});function zo(r,e){const n=nr(r);if(!n)return"0 0";const a={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return`${a.x}% ${a.y}%`}function Bo({data:{value:r}},{data:{value:e}}){return e-r}function jo(r,e){if(!r||r.length===0)return null;const[n]=r;return e?n[e]:n}function Wo(r,e){const n=Math.max(e.top,r.top),a=Math.max(e.left,r.left),o=Math.min(e.left+e.width,r.left+r.width),i=Math.min(e.top+e.height,r.top+r.height),l=o-a,c=i-n;if(a<o&&n<i){const f=e.width*e.height,v=r.width*r.height,h=l*c,g=h/(f+v-h);return Number(g.toFixed(4))}return 0}const Go=({collisionRect:r,droppableRects:e,droppableContainers:n})=>{const a=[];for(const o of n){const{id:i}=o,l=e.get(i);if(l){const c=Wo(l,r);c>0&&a.push({id:i,data:{droppableContainer:o,value:c}})}}return a.sort(Bo)};function Yo(r,e,n){return{...r,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Nn(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:rt}function Xo(r){return function(n,...a){return a.reduce((o,i)=>({...o,top:o.top+r*i.y,bottom:o.bottom+r*i.y,left:o.left+r*i.x,right:o.right+r*i.x}),{...n})}}const Vo=Xo(1);function Fn(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Uo(r,e,n){const a=Fn(e);if(!a)return r;const{scaleX:o,scaleY:i,x:l,y:c}=a,f=r.left-l-(1-o)*parseFloat(n),v=r.top-c-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=o?r.width/o:r.width,g=i?r.height/i:r.height;return{width:h,height:g,top:v,right:f+h,bottom:v+g,left:f}}const Ho={ignoreTransform:!1};function It(r,e=Ho){let n=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:v,transformOrigin:h}=ze(r).getComputedStyle(r);v&&(n=Uo(n,v,h))}const{top:a,left:o,width:i,height:l,bottom:c,right:f}=n;return{top:a,left:o,width:i,height:l,bottom:c,right:f}}function tn(r){return It(r,{ignoreTransform:!0})}function qo(r){const e=r.innerWidth,n=r.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Ko(r,e=ze(r).getComputedStyle(r)){return e.position==="fixed"}function Zo(r,e=ze(r).getComputedStyle(r)){const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=e[o];return typeof i=="string"?n.test(i):!1})}function Br(r,e){const n=[];function a(o){if(e!=null&&n.length>=e||!o)return n;if(Mr(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!qt(o)||On(o)||n.includes(o))return n;const i=ze(r).getComputedStyle(o);return o!==r&&Zo(o,i)&&n.push(o),Ko(o,i)?n:a(o.parentNode)}return r?a(r):n}function Pn(r){const[e]=Br(r,1);return e??null}function wr(r){return!dr||!r?null:Et(r)?r:Lr(r)?Mr(r)||r===Tt(r).scrollingElement?window:qt(r)?r:null:null}function Ln(r){return Et(r)?r.scrollX:r.scrollLeft}function Mn(r){return Et(r)?r.scrollY:r.scrollTop}function kr(r){return{x:Ln(r),y:Mn(r)}}var Oe;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Oe||(Oe={}));function zn(r){return!dr||!r?!1:r===document.scrollingElement}function Bn(r){const e={x:0,y:0},n=zn(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},a={x:r.scrollWidth-n.width,y:r.scrollHeight-n.height},o=r.scrollTop<=e.y,i=r.scrollLeft<=e.x,l=r.scrollTop>=a.y,c=r.scrollLeft>=a.x;return{isTop:o,isLeft:i,isBottom:l,isRight:c,maxScroll:a,minScroll:e}}const Qo={x:.2,y:.2};function Jo(r,e,{top:n,left:a,right:o,bottom:i},l=10,c=Qo){const{isTop:f,isBottom:v,isLeft:h,isRight:g}=Bn(r),u={x:0,y:0},d={x:0,y:0},b={height:e.height*c.y,width:e.width*c.x};return!f&&n<=e.top+b.height?(u.y=Oe.Backward,d.y=l*Math.abs((e.top+b.height-n)/b.height)):!v&&i>=e.bottom-b.height&&(u.y=Oe.Forward,d.y=l*Math.abs((e.bottom-b.height-i)/b.height)),!g&&o>=e.right-b.width?(u.x=Oe.Forward,d.x=l*Math.abs((e.right-b.width-o)/b.width)):!h&&a<=e.left+b.width&&(u.x=Oe.Backward,d.x=l*Math.abs((e.left+b.width-a)/b.width)),{direction:u,speed:d}}function $o(r){if(r===document.scrollingElement){const{innerWidth:i,innerHeight:l}=window;return{top:0,left:0,right:i,bottom:l,width:i,height:l}}const{top:e,left:n,right:a,bottom:o}=r.getBoundingClientRect();return{top:e,left:n,right:a,bottom:o,width:r.clientWidth,height:r.clientHeight}}function jn(r){return r.reduce((e,n)=>St(e,kr(n)),rt)}function es(r){return r.reduce((e,n)=>e+Ln(n),0)}function ts(r){return r.reduce((e,n)=>e+Mn(n),0)}function Wn(r,e=It){if(!r)return;const{top:n,left:a,bottom:o,right:i}=e(r);Pn(r)&&(o<=0||i<=0||n>=window.innerHeight||a>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const rs=[["x",["left","right"],es],["y",["top","bottom"],ts]];class jr{constructor(e,n){oe(this,"rect");oe(this,"width");oe(this,"height");oe(this,"top");oe(this,"bottom");oe(this,"right");oe(this,"left");const a=Br(n),o=jn(a);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,l,c]of rs)for(const f of l)Object.defineProperty(this,f,{get:()=>{const v=c(a),h=o[i]-v;return this.rect[f]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}function ar(...r){}class Mt{constructor(e){oe(this,"target");oe(this,"listeners",[]);oe(this,"removeAll",()=>{this.listeners.forEach(e=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...e)})});this.target=e}add(e,n,a){var o;(o=this.target)==null||o.addEventListener(e,n,a),this.listeners.push([e,n,a])}}function ns(r){const{EventTarget:e}=ze(r);return r instanceof e?r:Tt(r)}function _r(r,e){const n=Math.abs(r.x),a=Math.abs(r.y);return typeof e=="number"?Math.sqrt(n**2+a**2)>e:"x"in e&&"y"in e?n>e.x&&a>e.y:"x"in e?n>e.x:"y"in e?a>e.y:!1}var Ve;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Ve||(Ve={}));function rn(r){r.preventDefault()}function as(r){r.stopPropagation()}var le;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(le||(le={}));const nn={start:[le.Space,le.Enter],cancel:[le.Esc],end:[le.Space,le.Enter,le.Tab]},is=(r,{currentCoordinates:e})=>{switch(r.code){case le.Right:return{...e,x:e.x+25};case le.Left:return{...e,x:e.x-25};case le.Down:return{...e,y:e.y+25};case le.Up:return{...e,y:e.y-25}}};class Wr{constructor(e){oe(this,"props");oe(this,"autoScrollEnabled",!1);oe(this,"referenceCoordinates");oe(this,"listeners");oe(this,"windowListeners");this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Mt(Tt(n)),this.windowListeners=new Mt(ze(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ve.Resize,this.handleCancel),this.windowListeners.add(Ve.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ve.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,a=e.node;a&&Wn(a),n(rt)}handleKeyDown(e){if(ur(e)){const{active:n,context:a,options:o}=this.props,{keyboardCodes:i=nn,coordinateGetter:l=is,scrollBehavior:c="smooth"}=o,{code:f}=e;if(i.end.includes(f)){this.handleEnd(e);return}if(i.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:v}=a,h=v?{x:v.left,y:v.top}:rt;this.referenceCoordinates||(this.referenceCoordinates=h);const g=l(e,{active:n,context:a,currentCoordinates:h});if(g){const u=rr(g,h),d={x:0,y:0},{scrollableAncestors:b}=a;for(const m of b){const x=e.code,{isTop:y,isRight:R,isLeft:I,isBottom:B,maxScroll:M,minScroll:S}=Bn(m),L=$o(m),k={x:Math.min(x===le.Right?L.right-L.width/2:L.right,Math.max(x===le.Right?L.left:L.left+L.width/2,g.x)),y:Math.min(x===le.Down?L.bottom-L.height/2:L.bottom,Math.max(x===le.Down?L.top:L.top+L.height/2,g.y))},O=x===le.Right&&!R||x===le.Left&&!I,D=x===le.Down&&!B||x===le.Up&&!y;if(O&&k.x!==g.x){const N=m.scrollLeft+u.x,T=x===le.Right&&N<=M.x||x===le.Left&&N>=S.x;if(T&&!u.y){m.scrollTo({left:N,behavior:c});return}T?d.x=m.scrollLeft-N:d.x=x===le.Right?m.scrollLeft-M.x:m.scrollLeft-S.x,d.x&&m.scrollBy({left:-d.x,behavior:c});break}else if(D&&k.y!==g.y){const N=m.scrollTop+u.y,T=x===le.Down&&N<=M.y||x===le.Up&&N>=S.y;if(T&&!u.x){m.scrollTo({top:N,behavior:c});return}T?d.y=m.scrollTop-N:d.y=x===le.Down?m.scrollTop-M.y:m.scrollTop-S.y,d.y&&m.scrollBy({top:-d.y,behavior:c});break}}this.handleMove(e,St(rr(g,this.referenceCoordinates),d))}}}handleMove(e,n){const{onMove:a}=this.props;e.preventDefault(),a(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}oe(Wr,"activators",[{eventName:"onkeydown",handler:(e,{keyboardCodes:n=nn,onActivation:a},{active:o})=>{const{code:i}=e;if(n.start.includes(i)){const l=o.activatorNode;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e}),!0)}return!1}}]);function an(r){return!!(r&&"distance"in r)}function on(r){return!!(r&&"delay"in r)}class Gr{constructor(e,n,a=ns(e.event.target)){oe(this,"props");oe(this,"events");oe(this,"autoScrollEnabled",!0);oe(this,"document");oe(this,"activated",!1);oe(this,"initialCoordinates");oe(this,"timeoutId",null);oe(this,"listeners");oe(this,"documentListeners");oe(this,"windowListeners");this.props=e,this.events=n;const{event:o}=e,{target:i}=o;this.props=e,this.events=n,this.document=Tt(i),this.documentListeners=new Mt(this.document),this.listeners=new Mt(a),this.windowListeners=new Mt(ze(i)),this.initialCoordinates=nr(o)??rt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:a}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ve.Resize,this.handleCancel),this.windowListeners.add(Ve.DragStart,rn),this.windowListeners.add(Ve.VisibilityChange,this.handleCancel),this.windowListeners.add(Ve.ContextMenu,rn),this.documentListeners.add(Ve.Keydown,this.handleKeydown),n){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(on(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(an(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:a,onPending:o}=this.props;o(a,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ve.Click,as,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ve.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){const{activated:n,initialCoordinates:a,props:o}=this,{onMove:i,options:{activationConstraint:l}}=o;if(!a)return;const c=nr(e)??rt,f=rr(a,c);if(!n&&l){if(an(l)){if(l.tolerance!=null&&_r(f,l.tolerance))return this.handleCancel();if(_r(f,l.distance))return this.handleStart()}if(on(l)&&_r(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}e.cancelable&&e.preventDefault(),i(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===le.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const os={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Gn extends Gr{constructor(e){const{event:n}=e,a=Tt(n.target);super(e,os,a)}}oe(Gn,"activators",[{eventName:"onpointerdown",handler:(e,{onActivation:n})=>!e.isPrimary||e.button!==0?!1:(n==null||n({event:e}),!0)}]);const ss={move:{name:"mousemove"},end:{name:"mouseup"}};var Er;(function(r){r[r.RightClick=2]="RightClick"})(Er||(Er={}));class Yn extends Gr{constructor(e){super(e,ss,Tt(e.event.target))}}oe(Yn,"activators",[{eventName:"onmousedown",handler:(e,{onActivation:n})=>e.button===Er.RightClick?!1:(n==null||n({event:e}),!0)}]);const Rr={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Xn extends Gr{constructor(e){super(e,Rr)}static setup(){return window.addEventListener(Rr.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Rr.move.name,e)};function e(){}}}oe(Xn,"activators",[{eventName:"ontouchstart",handler:(e,{onActivation:n})=>{const{touches:a}=e;return a.length>1?!1:(n==null||n({event:e}),!0)}}]);var Yt;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Yt||(Yt={}));var Tr;(function(r){r.Optimized="optimized"})(Tr||(Tr={}));const sn=new Map;function ls(r){const e=s(r),n=s(()=>t(e).containers),a=s(()=>t(e).dragging),o=s(()=>t(e).dependencies),i=s(()=>t(e).config.measure),l=s(()=>t(e).config.strategy),c=s(()=>t(e).config.frequency);let f=ae(null),v=t(n);const h=s(b),g=(m=[])=>{t(h)||A(f,t(f)===null?m:t(f).concat(m.filter(x=>!t(f).includes(x))),!0)};let u=null;const d=Ut(m=>{if(t(h)&&!t(a))return sn;if(!m||m===sn||v!==t(n)||t(f)!=null){const x=new Map;for(const y of t(n)){if(!y)continue;if(t(f)&&t(f).length>0&&!t(f).includes(y.id)&&y.rect){x.set(y.id,y.rect);continue}const R=y.node,I=R?new jr(t(i)(R),R):null;y.rect=I,I&&x.set(y.id,I)}return x}return m});return $(()=>{v=t(n)}),$(()=>{t(a),!t(h)&&ct(g)}),$(()=>{t(f)&&t(f).length>0&&A(f,null)}),$(()=>{t(o)(),!(t(h)||typeof t(c)!="number"||u!==null)&&(u=setTimeout(()=>{g(),u=null},t(c)))}),{droppableRects:J.with(()=>d.current),measureDroppableContainers:g,measuringScheduled:J.with(()=>t(f)!==null)};function b(){switch(t(l)){case Yt.Always:return!1;case Yt.BeforeDragging:return t(a);default:return!t(a)}}}function cs(r){const e=s(r),n=s(()=>ht(t(e),2)),a=s(()=>t(n)[0]),o=s(()=>t(n)[1]),i=s(()=>t(o)!=null?t(a).get(t(o)):void 0),l=s(()=>t(i)?t(i).node:null);return Ut(c=>t(o)==null?null:t(l)??c??null)}function Yr(r,e){return Ut(n=>{const a=r(),o=e==null?void 0:e();return a?n||(typeof o=="function"?o(a):a):null})}function ds(r,e){return Yr(r,e)}function us(r){return new jr(It(r),r)}function ln(r){let e=ae(null);const n=s(r),a=s(()=>ht(t(n),3)),o=s(()=>t(a)[0]),i=s(()=>Pe(t(a)[1],us)),l=s(()=>t(a)[2]);function c(){if(!t(o)){A(e,null);return}if(t(o).isConnected===!1){A(e,t(e)??t(l)??null,!0);return}const h=t(i)(t(o));JSON.stringify(t(e))!==JSON.stringify(h)&&A(e,h,!0)}const f=fs(()=>({callback(h){if(t(o))for(const g of h){const{type:u,target:d}=g;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t(o))){c();break}}}})),v=vr(()=>({callback:c}));return $(()=>{var h,g,u,d;c(),t(o)?((h=v.current)==null||h.observe(t(o)),(g=f.current)==null||g.observe(document.body,{childList:!0,subtree:!0})):((u=v.current)==null||u.disconnect(),(d=f.current)==null||d.disconnect())}),{get current(){return t(e)}}}function fs(r){const e=s(r),n=s(()=>t(e).callback),a=s(()=>t(e).disabled),o=s(()=>{if(t(a)||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(t(n))});return $(()=>()=>{var i;return(i=t(o))==null?void 0:i.disconnect()}),{get current(){return t(o)}}}function vr(r){const e=s(r),n=s(()=>t(e).callback),a=s(()=>t(e).disabled),o=s(()=>{if(t(a)||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(t(n))});return $(()=>()=>{var i;return(i=t(o))==null?void 0:i.disconnect()}),{get current(){return t(o)}}}function Vn(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return qt(e)?e:r}function vs({measureFn:r}){const e=s(r);let n=ae(null);const a=f=>{for(const{target:v}of f)if(qt(v)){const h=t(e)(v);A(n,t(n)?{...t(n),width:h.width,height:h.height}:h,!0);break}},o=vr(()=>({callback:a})),i=f=>{var h,g;const v=Vn(f);(h=o==null?void 0:o.current)==null||h.disconnect(),v&&((g=o==null?void 0:o.current)==null||g.observe(v)),A(n,v?t(e)(v):null,!0)},[l,c]=tr(i);return{get nodeRef(){return l.current},get rect(){return t(n)},setRef:c}}function gs(r){const e=Yr(r);return{get current(){return Nn(r(),e.current)}}}function Un(r){const e=s(r);return{get current(){return t(e)?qo(t(e)):null}}}const cn=[];function hs(r,e){return r.length===e.length&&r.every((n,a)=>n===e[a])}function bs(r){const e=s(r);let n=t(e);const a=Ut(o=>t(e)?o&&Array.isArray(o)&&!hs(o,cn)&&t(e)&&n&&t(e).parentNode===n.parentNode?o:Br(t(e)):cn);return $(()=>{n=t(e)}),a}const dn=[];function ms(r){const e=s(r),n=s(()=>ht(t(e),2)),a=s(()=>Pe(t(n)[0],()=>[],!0)),o=s(()=>Pe(t(n)[1],It)),i=s(()=>ht(t(a),1)),l=s(()=>t(i)[0]),c=Un(()=>t(l)?ze(t(l)):null);let f=ae(gt(dn));function v(){if(!t(a).length){A(f,dn,!0);return}A(f,t(a).map(g=>zn(g)?c.current:new jr(t(o)(g),g)),!0)}const h=vr(()=>({callback:v}));return $(()=>{var g;(g=h.current)==null||g.disconnect(),v(),t(a).forEach(u=>{var d;return(d=h.current)==null?void 0:d.observe(u)})}),{get current(){return t(f)}}}function ps(r){const e=s(()=>r()??[]);let n=ae(null),a=t(e);const o=l=>{const c=wr(l.target);if(c){if(!t(n)){A(n,null);return}t(n).set(c,kr(c)),A(n,new Map(t(n)),!0)}};$(()=>{const l=a;if(t(e)!==l){c(l);const f=t(e).map(v=>{const h=wr(v);return h?(h.addEventListener("scroll",o,{passive:!0}),[h,kr(h)]):null}).filter(v=>v!=null);A(n,f.length?new Map(f):null,!0),a=t(e)}function c(f){f==null||f.forEach(v=>{const h=wr(v);h==null||h.removeEventListener("scroll",o)})}return()=>{c(t(e)),c(l)}});const i=s(()=>t(e).length?t(n)?Array.from(t(n).values()).reduce((l,c)=>St(l,c),rt):jn(t(e)):rt);return{get current(){return t(i)}}}function un(r){const e=s(r),n=s(()=>ht(t(e),2)),a=s(()=>t(n)[0]),o=s(()=>t(n)[1]);let i=ae(null);return $(()=>{t(o),A(i,null)}),$(()=>{const l=t(a)!==rt;l&&!ct(()=>t(i))&&A(i,t(a),!0),!l&&ct(()=>t(i))&&A(i,null)}),{get current(){return t(i)?rr(t(a),t(i)):rt}}}function ys(r){return J.with(()=>{const[e,n]=r();return e.reduce((a,{eventName:o,handler:i})=>(a[o]=l=>{i(l,n)},a),{})})}function xs(r){return J.with(()=>{const[e,n]=r();return e.reduce((a,o)=>{const{sensor:i}=o,l=i.activators.map(c=>({eventName:c.eventName,handler:n(c.handler,o)}));return[...a,...l]},[])})}function ws(r){$(()=>{if(!dr)return;const n=r().map(({sensor:a})=>{var o;return(o=a.setup)==null?void 0:o.call(a)});return()=>{for(const a of n)a==null||a()}})}var zt;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(zt||(zt={}));var ir;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(ir||(ir={}));function _s(r){const e=s(r),n=s(()=>t(e).acceleration),a=s(()=>Pe(t(e).activator,()=>zt.Pointer,!0)),o=s(()=>t(e).canScroll),i=s(()=>t(e).draggingRect),l=s(()=>t(e).enabled),c=s(()=>Pe(t(e).interval,5)),f=s(()=>Pe(t(e).order,()=>ir.TreeOrder,!0)),v=s(()=>t(e).pointerCoordinates),h=s(()=>Pe(t(e).scrollableAncestors,()=>[],!0)),g=s(()=>Pe(t(e).scrollableAncestorRects,()=>[],!0)),u=s(()=>t(e).delta),d=s(()=>t(e).threshold),b=Ss(()=>[t(u),!t(l)]),[m,x]=to();let y={x:0,y:0},R={x:0,y:0};const I=s(()=>{switch(t(a)){case zt.Pointer:return t(v)?{top:t(v).y,bottom:t(v).y,left:t(v).x,right:t(v).x}:null;case zt.DraggableRect:return t(i)}});let B=null;const M=()=>{const L=B;if(!L)return;const k=y.x*R.x,O=y.y*R.y;L.scrollBy(k,O)},S=s(()=>t(f)===ir.TreeOrder?[...t(h)].reverse():t(h));$(()=>{var L;if(!t(l)||!t(h).length||!t(I)){x();return}for(const k of t(S)){if(((L=t(o))==null?void 0:L(k))===!1)continue;const O=t(h).indexOf(k),D=t(g)[O];if(!D)continue;const{direction:N,speed:T}=Jo(k,D,t(I),t(n),t(d));for(const Y of["x","y"])b.current[Y][N[Y]]||(T[Y]=0,N[Y]=0);if(T.x>0||T.y>0){x(),B=k,m(M,t(c)),y=T,R=N;return}}y={x:0,y:0},R={x:0,y:0},x()})}const Rs={x:{[Oe.Backward]:!1,[Oe.Forward]:!1},y:{[Oe.Backward]:!1,[Oe.Forward]:!1}};function Ss(r){const e=s(r),n=s(()=>ht(t(e),2)),a=s(()=>t(n)[0]),o=s(()=>t(n)[1]);let i=vi(t(a));const l=Ut(c=>{if(t(o)||!i||!c)return Rs;const f={x:Math.sign(t(a).x-i.x),y:Math.sign(t(a).y-i.y)};return{x:{[Oe.Backward]:c.x[Oe.Backward]||f.x===-1,[Oe.Forward]:c.x[Oe.Forward]||f.x===1},y:{[Oe.Backward]:c.y[Oe.Backward]||f.y===-1,[Oe.Forward]:c.y[Oe.Forward]||f.y===1}}});return $(()=>{i=t(a)}),l}const Ds=[{sensor:Gn,options:{}},{sensor:Wr,options:{}}],Cs={current:{}},$t={draggable:{measure:tn},droppable:{measure:tn,strategy:Yt.WhileDragging,frequency:Tr.Optimized},dragOverlay:{measure:It}};class Ft extends Map{get(e){return e!=null?super.get(e)??void 0:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(({disabled:e})=>!e)}getNodeFor(e){var n;return((n=this.get(e))==null?void 0:n.node)??void 0}}const ks={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ft,over:null,dragOverlay:{nodeRef:null,rect:null,setRef:ar},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:$t,measureDroppableContainers:ar,windowRect:null,measuringScheduled:!1},Hn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ar,draggableNodes:new Map,over:null,measureDroppableContainers:ar},or=Symbol("InternalContext"),Ir=Symbol("PublicContext");function Xr(){return lr(or)?Vt(or)():Hn}function Es(r,e){var f;me(e,!0);const n=s(Xr),a=s(()=>t(n).active),o=s(()=>t(n).activatorEvent),i=s(()=>t(n).draggableNodes);let l=t(o),c=(f=t(a))==null?void 0:f.id;$(()=>{if(!e.disabled&&!t(o)&&l&&c!=null){if(!ur(l)||document.activeElement===l.target)return;const v=t(i).get(c);if(!v)return;const{activatorNode:h,node:g}=v;if(!h&&!g)return;requestAnimationFrame(()=>{for(const u of[h,g]){if(!u)continue;const d=Ro(u);if(d){d.focus();break}}})}}),$(()=>{var v;l=t(o),c=(v=t(a))==null?void 0:v.id}),pe()}var De;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(De||(De={}));function Ts(){const r=gt({draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ft}});function e(n){switch(n.type){case De.DragStart:r.draggable.initialCoordinates=n.initialCoordinates,r.draggable.active=n.active;break;case De.DragMove:if(r.draggable.active==null)return;r.draggable.translate={x:n.coordinates.x-r.draggable.initialCoordinates.x,y:n.coordinates.y-r.draggable.initialCoordinates.y};break;case De.DragEnd:case De.DragCancel:r.draggable.active=null,r.draggable.initialCoordinates={x:0,y:0},r.draggable.translate={x:0,y:0};break;case De.RegisterDroppable:{const{element:a}=n,{id:o}=a,i=new Ft(r.droppable.containers);i.set(o,a),r.droppable.containers=i;break}case De.SetDroppableDisabled:{const{id:a,key:o,disabled:i}=n,l=r.droppable.containers.get(a);if(!l||o!==l.key)return;const c=new Ft(r.droppable.containers);c.set(a,{...l,disabled:i}),r.droppable.containers=c;break}case De.UnregisterDroppable:{const{id:a,key:o}=n,i=r.droppable.containers.get(a);if(!i||o!==i.key)return;const l=new Ft(r.droppable.containers);l.delete(a),r.droppable.containers=l;break}}}return[r,e]}function qn(r,{transform:e,...n}){return r!=null&&r.length?r.reduce((a,o)=>o({transform:a,...n}),e):e}function Is(r){return{draggable:{...$t.draggable,...r==null?void 0:r.draggable},droppable:{...$t.droppable,...r==null?void 0:r.droppable},dragOverlay:{...$t.dragOverlay,...r==null?void 0:r.dragOverlay}}}function As(r){let e=!1;const n=s(r),a=s(()=>t(n).activeNode),o=s(()=>t(n).measure),i=s(()=>t(n).initialRect),l=s(()=>Pe(t(n).config,!0)),c=s(()=>typeof t(l)=="boolean"?{x:t(l),y:t(l)}:t(l)),f=s(()=>t(c).x),v=s(()=>t(c).y);$(()=>{var b;if(!t(f)&&!t(v)||!t(a)){e=!1;return}if(e||!t(i))return;const g=(b=t(a))==null?void 0:b.node;if(!g||g.isConnected===!1)return;const u=t(o)(g),d=Nn(u,t(i));if(t(f)||(d.x=0),t(v)||(d.y=0),e=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const m=Pn(g);m&&m.scrollBy({top:d.y,left:d.x})}})}const Vr=Symbol("ActiveDraggableContext");function Kn(){return Vt(Vr)()}var ft=(r=>(r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized",r))(ft||{}),Os=F("<!> <!> <!>",1);function Ns(r,e){me(e,!0);let n=W(e,"autoScroll",3,!0),a=W(e,"sensors",3,Ds),o=W(e,"collisionDetection",3,Go),i=gn(e,["$$slots","$$events","$$legacy","id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const[l,c]=Ts(),[f,v]=Io();let h=ae(gt(ft.Uninitialized));const g=s(()=>t(h)===ft.Initialized),u=s(()=>l.draggable.active),d=s(()=>l.draggable.nodes),b=s(()=>l.draggable.translate),m=s(()=>l.droppable.containers),x=s(()=>t(u)!=null?t(d).get(t(u)):null),y=gt({initial:null,translated:null}),R=s(()=>{var ve;return t(u)!=null?{id:t(u),data:((ve=t(x))==null?void 0:ve.data)??Cs,rect:y}:null});let I=null,B=ae(null),M=ae(null);const S=s(()=>Ht("DndDescribedBy",e.id)),L=s(()=>t(m).getEnabled()),k=s(()=>Is(e.measuring)),{droppableRects:O,measureDroppableContainers:D,measuringScheduled:N}=ls(()=>({containers:t(L),dragging:t(g),dependencies:()=>[t(b).x,t(b).y],config:t(k).droppable})),T=cs(()=>[t(d),t(u)]),Y=s(()=>t(M)?nr(t(M)):null),j=s(Te),K=ds(()=>T.current,()=>t(k).draggable.measure);As(()=>({activeNode:t(u)!=null?t(d).get(t(u)):null,config:t(j).layoutShiftCompensation,initialRect:K.current,measure:t(k).draggable.measure}));const w=ln(()=>[T.current,t(k).draggable.measure,K.current]),U=ln(()=>[T.current?T.current.parentElement:null]),q=gt({activatorEvent:null,active:null,activeNode:T.current,collisionRect:null,collisions:null,droppableRects:O.current,draggableNodes:t(d),draggingNode:null,draggingNodeRect:null,droppableContainers:t(m),over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),re=s(()=>{var ve;return t(m).getNodeFor((ve=q.over)==null?void 0:ve.id)}),P=vs({measureFn:()=>t(k).dragOverlay.measure}),C=s(()=>P.nodeRef?P.nodeRef:T.current),X=s(()=>t(g)?P.rect??w.current:null),te=s(()=>!!(P.nodeRef&&P.rect)),se=gs(()=>t(te)?null:w.current),he=Un(()=>t(C)?ze(t(C)):null),ue=bs(()=>t(g)?t(re)??T.current:null),be=ms(()=>[ue.current]),we=s(()=>qn(e.modifiers,{transform:{x:t(b).x-se.current.x,y:t(b).y-se.current.y,scaleX:1,scaleY:1},activatorEvent:t(M),active:t(R),activeNodeRect:w.current,containerNodeRect:U.current,draggingNodeRect:t(X),over:q.over,overlayNodeRect:P.rect,scrollableAncestors:ue.current,scrollableAncestorRects:be.current,windowRect:he.current})),ie=s(()=>t(Y)?St(t(Y),t(b)):null),Se=ps(()=>ue.current),ke=un(()=>[Se.current]),de=un(()=>[Se.current,[w.current]]),Be=s(()=>St(t(we),ke.current)),Ge=s(()=>t(X)?Vo(t(X),t(we)):null),Je=s(()=>t(R)&&t(Ge)?o()({active:t(R),collisionRect:t(Ge),droppableRects:O.current,droppableContainers:t(L),pointerCoordinates:t(ie)}):null),at=s(()=>jo(t(Je),"id"));let H=ae(null);const fe=s(()=>t(te)?t(we):St(t(we),de.current)),xe=s(()=>{var ve;return Yo(t(fe),((ve=t(H))==null?void 0:ve.rect)??null,w.current)});let V=null;const Z=(ve,{sensor:Ie,options:Re})=>{if(I==null)return;const We=t(d).get(I);if(!We)return;const Me=ve;V=new Ie({active:I,activeNode:We,event:Me,options:Re,context:q,onAbort(Ae){if(!t(d).get(Ae))return;const{onDragAbort:qe}=i,et={id:Ae};qe==null||qe(et),f({type:"onDragAbort",event:et})},onPending(Ae,He,qe,et){if(!t(d).get(Ae))return;const{onDragPending:pt}=i,st={id:Ae,constraint:He,initialCoordinates:qe,offset:et};pt==null||pt(st),f({type:"onDragPending",event:st})},onStart(Ae){const He=I;if(He==null)return;const qe=t(d).get(He);if(!qe)return;const{onDragStart:et}=i,At={activatorEvent:Me,active:{id:He,data:qe.data,rect:y}};et==null||et(At),A(h,ft.Initializing,!0),c({type:De.DragStart,initialCoordinates:Ae,active:He}),f({type:"onDragStart",event:At}),A(B,V,!0),A(M,Me,!0)},onMove(Ae){c({type:De.DragMove,coordinates:Ae})},onEnd:Ue(De.DragEnd),onCancel:Ue(De.DragCancel)});function Ue(Ae){return async function(){const{active:qe,collisions:et,over:At,scrollAdjustedTranslate:pt}=q;let st=null;if(qe&&pt){const{cancelDrop:yt}=i;st={activatorEvent:Me,active:qe,collisions:et,delta:pt,over:At},Ae===De.DragEnd&&typeof yt=="function"&&await Promise.resolve(yt(st))&&(Ae=De.DragCancel)}I=null,c({type:Ae}),A(h,ft.Uninitialized,!0),A(H,null),A(B,null),A(M,null),V=null;const Ur=Ae===De.DragEnd?"onDragEnd":"onDragCancel";if(st){const yt=i[Ur];yt==null||yt(st),f({type:Ur,event:st})}}}},_e=(ve,Ie)=>(Re,We)=>{const Me=Re,$e=t(d).get(We);if(I!==null||!$e||Me.dndKit||Me.defaultPrevented)return;const Ue={active:$e};ve(Re,Ie.options,Ue)===!0&&(Me.dndKit={capturedBy:Ie.sensor},I=We,Z(Re,Ie))},Le=xs(()=>[a(),_e]);ws(()=>a()),$(()=>{w.current&&t(h)===ft.Initializing&&A(h,ft.Initialized,!0)}),mt(()=>t(Be),()=>{const{onDragMove:ve}=i,{active:Ie,activatorEvent:Re,collisions:We,over:Me}=q;if(!Ie||!Re)return;const $e={active:Ie,activatorEvent:Re,collisions:We,delta:{x:t(Be).x,y:t(Be).y},over:Me};ve==null||ve($e),f({type:"onDragMove",event:$e})}),mt(()=>t(at),()=>{const{active:ve,activatorEvent:Ie,collisions:Re,droppableContainers:We,scrollAdjustedTranslate:Me}=q;if(!ve||I==null||!Ie||!Me)return;const{onDragOver:$e}=i,Ue=We.get(t(at)),Ae=Ue&&Ue.rect?{id:Ue.id,rect:Ue.rect,data:Ue.data,disabled:Ue.disabled}:null,He={active:ve,activatorEvent:Ie,collisions:Re,delta:{x:Me.x,y:Me.y},over:Ae};A(H,Ae,!0),$e==null||$e(He),f({type:"onDragOver",event:He})}),$(()=>{Object.assign(q,{activatorEvent:t(M),active:t(R),activeNode:T.current,collisionRect:t(Ge),collisions:t(Je),droppableRects:O.current,draggableNodes:t(d),draggingNode:t(C),draggingNodeRect:t(X),droppableContainers:t(m),over:t(H),scrollableAncestors:ue.current,scrollAdjustedTranslate:t(Be)}),Object.assign(y,{initial:t(X),translated:t(Ge)})}),_s(()=>({...t(j),delta:t(b),draggingRect:t(Ge),pointerCoordinates:t(ie),scrollableAncestors:ue.current,scrollableAncestorRects:be.current}));const Ee=s(()=>({active:t(R),activeNode:T.current,activeNodeRect:w.current,activatorEvent:t(M),collisions:t(Je),containerNodeRect:U.current,dragOverlay:P,draggableNodes:t(d),droppableContainers:t(m),droppableRects:O.current,over:t(H),measureDroppableContainers:D,scrollableAncestors:ue.current,scrollableAncestorRects:be.current,measuringConfiguration:t(k),measuringScheduled:N.current,windowRect:he.current})),je=s(()=>({activatorEvent:t(M),activators:Le.current,active:t(R),activeNodeRect:w.current,ariaDescribedById:{draggable:t(S)},dispatch:c,draggableNodes:t(d),over:t(H),measureDroppableContainers:D}));function Te(){var We;const ve=((We=t(B))==null?void 0:We.autoScrollEnabled)===!1,Ie=typeof n()=="object"?n().enabled===!1:n()===!1,Re=t(g)&&!ve&&!Ie;return typeof n()=="object"?{...n(),enabled:Re}:{enabled:Re}}vt(Cr,v),vt(or,()=>t(je)),vt(Ir,()=>t(Ee)),vt(Vr,()=>t(xe));var Ye=Os(),ye=Q(Ye);Ne(ye,()=>e.children??Qe);var Xe=z(ye,2);{let ve=s(()=>{var Ie;return((Ie=e.accessibility)==null?void 0:Ie.restoreFocus)===!1});Es(Xe,{get disabled(){return t(ve)}})}var gr=z(Xe,2);Lo(gr,Ra(()=>e.accessibility,{get hiddenTextDescribedById(){return t(S)}})),p(r,Ye),pe()}function Fs(r,e){me(e,!0);const n={x:0,y:0,scaleX:1,scaleY:1};vt(or,()=>Hn),vt(Vr,()=>n);var a=ne(),o=Q(a);Ne(o,()=>e.children),p(r,a),pe()}const Ps={position:"fixed",touchAction:"none"};function Ls(r){return ur(r)?"transform 250ms ease":void 0}function Ms(r,e){me(e,!0);let n=W(e,"transition",3,Ls),a=W(e,"ref",15),o=s(()=>e.adjustScale?e.transform:{...e.transform,scaleX:1,scaleY:1}),i=s(()=>e.rect?{...Ps,width:e.rect.width,height:e.rect.height,top:e.rect.top,left:e.rect.left,transform:ot.Transform.toString(t(o)),transformOrigin:e.adjustScale&&e.activatorEvent?zo(e.activatorEvent,e.rect):void 0,transition:typeof n()=="function"?n()(e.activatorEvent):n(),...e.style}:{});const l=s(()=>fr(t(i)));$(()=>{e.onStylesUpdated(t(l))});var c=ne(),f=Q(c);{var v=h=>{var g=ne(),u=Q(g);hi(u,()=>e.as,!1,(d,b)=>{Wt(d,y=>a(y),()=>a()),fi(d,y=>{var R;return(R=e.handleExit)==null?void 0:R.call(e,y)}),_t(d,()=>({class:e.className,style:t(l)}));var m=ne(),x=Q(m);Ne(x,()=>e.children??Qe),p(b,m)}),p(h,g)};G(f,h=>{e.rect&&h(v)})}p(r,c),pe()}const fn="button",zs="Draggable";function Bs(r){const e=Ht(zs),n=s(()=>zr(r)),a=s(()=>t(n).id),o=s(()=>Pe(t(n).disabled,!1)),i=s(()=>t(n).data),l=s(()=>t(n).attributes),c=s(Xr),f=s(()=>t(c).activators),v=s(()=>t(c).activatorEvent),h=s(()=>t(c).active),g=s(()=>t(c).activeNodeRect),u=s(()=>t(c).ariaDescribedById),d=s(()=>t(c).draggableNodes),b=s(()=>t(c).over),m=s(()=>t(l)??{}),x=s(()=>Pe(t(m).role,fn)),y=s(()=>Pe(t(m).roleDescription,"draggable")),R=s(()=>Pe(t(m).tabIndex,0)),I=s(()=>{var N;return((N=t(h))==null?void 0:N.id)===t(a)}),B=s(()=>t(I)?Kn():null),[M,S]=tr(),[L,k]=tr(),O=ys(()=>[t(f),t(a)]);mt(()=>t(a),N=>(t(d).set(N,{id:N,key:e,node:M.current,activatorNode:L.current,data:t(i)}),()=>{const T=t(d).get(N);T&&T.key===e&&t(d).delete(N)}));const D=s(()=>({role:t(x),tabIndex:t(R),"aria-disabled":t(o),"aria-pressed":t(I)&&t(x)===fn?!0:void 0,"aria-roledescription":t(y),"aria-describedby":t(u).draggable}));return{active:J.with(()=>t(h)),activatorEvent:J.with(()=>t(v)),activeNodeRect:J.with(()=>t(g)),attributes:J.with(()=>t(D)),isDragging:J.with(()=>t(I)),listeners:J.with(()=>t(o)?void 0:O.current),node:M,over:J.with(()=>t(b)),setNodeRef:S,setActivatorNodeRef:k,transform:J.with(()=>t(B))}}function Zn(){return lr(Ir)?Vt(Ir)():ks}const js="Droppable",Ws={timeout:25};function Gs(r){const e=Ht(js),n=s(()=>zr(r)),a=s(()=>t(n).id),o=s(()=>Pe(t(n).disabled,!1)),i=s(()=>t(n).data),l=s(()=>t(n).resizeObserverConfig),c=s(Xr),f=s(()=>t(c).active),v=s(()=>t(c).dispatch),h=s(()=>t(c).over),g=s(()=>t(c).measureDroppableContainers),u={disabled:t(o)};let d=!1;const b=null;let m=null;const x=s(()=>({...Ws,...t(l)})),y=s(()=>t(x).disabled),R=s(()=>t(x).updateMeasurementsFor),I=s(()=>t(x).timeout),B=s(()=>t(R)??t(a)),M=()=>{if(!d){d=!0;return}m!=null&&clearTimeout(m),m=setTimeout(()=>{t(g)(Array.isArray(t(B))?t(B):[t(B)]),m=null},t(I))},S=vr(()=>({callback:M,disabled:t(y)||!t(f)})),L=(D,N)=>{S.current&&(N&&(S.current.unobserve(N),d=!1),D&&S.current.observe(D))},[k,O]=tr(L);return $(()=>{!S.current||!k.current||(S.current.disconnect(),d=!1,S.current.observe(k.current))}),mt(()=>t(a),()=>(t(v)({type:De.RegisterDroppable,element:{id:t(a),key:e,disabled:t(o),node:k.current,rect:b,data:t(i)}}),()=>{t(v)({type:De.UnregisterDroppable,key:e,id:t(a)})})),$(()=>{t(o)!==u.disabled&&(t(v)({type:De.SetDroppableDisabled,id:t(a),key:e,disabled:t(o)}),u.disabled=t(o))}),{active:J.with(()=>t(f)),rect:J.with(()=>b),isOver:J.with(()=>{var D;return((D=t(h))==null?void 0:D.id)===t(a)}),node:k,over:J.with(()=>t(h)),setNodeRef:O}}const Ys=r=>({active:e,dragOverlay:n})=>{const a={},{styles:o,className:i}=r;if(o!=null&&o.active)for(const[l,c]of Object.entries(o.active))c!==void 0&&(a[l]=e.node.style.getPropertyValue(l),e.node.style.setProperty(l,c));if(o!=null&&o.dragOverlay)for(const[l,c]of Object.entries(o.dragOverlay))c!==void 0&&n.node.style.setProperty(l,c);return i!=null&&i.active&&e.node.classList.add(i.active),i!=null&&i.dragOverlay&&n.node.classList.add(i.dragOverlay),function(){for(const[c,f]of Object.entries(a))e.node.style.setProperty(c,f);i!=null&&i.active&&e.node.classList.remove(i.active)}},Xs=({transform:{initial:r,final:e}})=>[{transform:ot.Transform.toString(r)},{transform:ot.Transform.toString(e)}],Vs={duration:250,easing:"ease",keyframes:Xs,sideEffects:Ys({styles:{active:{opacity:"0"}}})};function Us({config:r,draggableNodes:e,droppableContainers:n,measuringConfiguration:a}){return(o,i)=>{if(r===null)return;const l=e.get(o);if(!l)return;const c=l.node;if(!c)return;const f=Vn(i);if(!f)return;const{transform:v}=ze(i).getComputedStyle(i),h=Fn(v);if(!h)return;const g=typeof r=="function"?r:Hs(r);return Wn(c,a.draggable.measure),g({active:{id:o,data:l.data,node:c,rect:a.draggable.measure(c)},draggableNodes:e,dragOverlay:{node:i,rect:a.dragOverlay.measure(f)},droppableContainers:n,measuringConfiguration:a,transform:h})}}function Hs(r){const{duration:e,easing:n,sideEffects:a,keyframes:o}={...Vs,...r};return({active:i,dragOverlay:l,transform:c,...f})=>{if(!e)return;const v={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},h={scaleX:c.scaleX!==1?i.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?i.rect.height*c.scaleY/l.rect.height:1},g={x:c.x-v.x,y:c.y-v.y,...h},u=o({...f,active:i,dragOverlay:l,transform:{initial:c,final:g}}),[d]=u,b=u[u.length-1];if(JSON.stringify(d)===JSON.stringify(b))return;const m=a==null?void 0:a({active:i,dragOverlay:l,...f}),x=l.node.animate(u,{duration:e,easing:n,fill:"forwards"});return new Promise(y=>{x.onfinish=()=>{m==null||m(),y()}})}}function qs(r,e){me(e,!0);let n=W(e,"adjustScale",3,!1),a=W(e,"wrapperElement",3,"div"),o=W(e,"zIndex",3,999);const i=s(Zn),l=s(()=>t(i).activatorEvent),c=s(()=>t(i).active),f=s(()=>t(i).activeNodeRect),v=s(()=>t(i).containerNodeRect),h=s(()=>t(i).draggableNodes),g=s(()=>t(i).droppableContainers),u=s(()=>t(i).dragOverlay),d=s(()=>t(i).over),b=s(()=>t(i).measuringConfiguration),m=s(()=>t(i).scrollableAncestors),x=s(()=>t(i).scrollableAncestorRects),y=s(()=>t(i).windowRect),R=s(Kn),I=s(()=>qn(e.modifiers,{activatorEvent:t(l),active:t(c),activeNodeRect:t(f),containerNodeRect:t(v),draggingNodeRect:t(u).rect,over:t(d),overlayNodeRect:t(u).rect,scrollableAncestors:t(m),scrollableAncestorRects:t(x),transform:t(R),windowRect:t(y)})),B=Yr(()=>t(f)),M=s(()=>Us({config:e.dropAnimation,draggableNodes:t(h),droppableContainers:t(g),measuringConfiguration:t(b)}));let S,L,k=ae(()=>{});function O(){S==null||S.remove(),S=void 0,L=void 0,A(k,()=>{})}function D(N){$(()=>{var T;return S=N.cloneNode(!0),L=(T=t(c))==null?void 0:T.id,A(k,Y=>{S.style.cssText=Y}),()=>{if(!S||!L)return O();document.body.appendChild(S),Promise.resolve(t(M)(L,S)).then(O)}})}Fs(r,{children:(N,T)=>{var Y=ne(),j=Q(Y);{var K=w=>{var U=ne(),q=Q(U);cr(q,()=>t(c).id,re=>{var P=()=>null,C=X=>{B.current&&t(u).setRef(X)};{let X=s(()=>({zIndex:o(),...e.style}));Ms(re,{get id(){return t(c).id},get ref(){return P()},set ref(te){C(te)},get as(){return a()},get activatorEvent(){return t(l)},get adjustScale(){return n()},get className(){return e.className},get transition(){return e.transition},get rect(){return B.current},get style(){return t(X)},get transform(){return t(I)},handleExit:D,get onStylesUpdated(){return t(k)},children:(te,se)=>{var he=ne(),ue=Q(he);Ne(ue,()=>e.children??Qe),p(te,he)},$$slots:{default:!0}})}}),p(w,U)};G(j,w=>{t(c)&&w(K)})}p(N,Y)},$$slots:{default:!0}}),pe()}function Qn(r,e,n){const a=r.slice();return a.splice(n<0?a.length+n:n,0,a.splice(e,1)[0]),a}function Ks(r,e){return r.reduce((n,a,o)=>{if(!e)return n;const i=e.get(a);return i&&(n[o]=i),n},Array(r.length))}function Zt(r){return r!==null&&r>=0}function Zs(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!==e[n])return!1;return!0}function Qs(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const Jn=({rects:r,activeIndex:e,overIndex:n,index:a})=>{const o=Qn(r,n,e),i=r[a],l=o[a];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},$n="Sortable",Ar=Symbol("SortableContext"),Js={activeIndex:-1,containerId:$n,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Jn,disabled:{draggable:!1,droppable:!1}};function $s(){return lr(Ar)?Vt(Ar)():Js}function ea(r,e){me(e,!0);let n=W(e,"items",19,()=>[]),a=W(e,"strategy",3,Jn),o=W(e,"disabled",3,!1);const i=s(Zn),l=s(()=>t(i).active),c=s(()=>t(i).dragOverlay),f=s(()=>t(i).droppableRects),v=s(()=>t(i).over),h=s(()=>t(i).measureDroppableContainers),g=s(()=>Ht($n,e.id)),u=s(()=>t(c).rect!==null),d=s(()=>n().map(k=>typeof k=="object"&&"id"in k?k.id:k)),b=s(()=>t(l)!=null),m=s(()=>t(l)?t(d).indexOf(t(l).id):-1),x=s(()=>t(v)?t(d).indexOf(t(v).id):-1);let y=ae(gt(t(d)));const R=s(()=>!Zs(t(d),t(y))),I=s(()=>t(x)!==-1&&t(m)===-1||t(R)),B=Qs(o());mt(()=>[t(R),t(d),t(b)],([k,O,D])=>{k&&D&&t(h)(O)}),$(()=>{A(y,t(d),!0)});const M=s(()=>({activeIndex:t(m),containerId:t(g),disabled:B,disableTransforms:t(I),items:t(d),overIndex:t(x),useDragOverlay:t(u),sortedRects:Ks(t(d),t(f)),strategy:a()}));vt(Ar,()=>t(M));var S=ne(),L=Q(S);Ne(L,()=>e.children),p(r,S),pe()}const el=({id:r,items:e,activeIndex:n,overIndex:a})=>Qn(e,n,a).indexOf(r),tl=({containerId:r,isSorting:e,wasDragging:n,index:a,items:o,newIndex:i,previousItems:l,previousContainerId:c,transition:f})=>!f||!n||l!==o&&a===i?!1:e?!0:i!==a&&r===c,rl={duration:200,easing:"ease"},ta="transform",nl=ot.Transition.toString({property:ta,duration:0,easing:"linear"}),al={roleDescription:"sortable"};function il(r){const e=s(r),n=s(()=>t(e).rect),a=s(()=>t(e).disabled),o=s(()=>t(e).index),i=s(()=>t(e).node);let l=ae(null),c=t(o);return $(()=>{if(!t(a)&&t(o)!==c&&t(i)){const f=t(n);if(f){const v=It(t(i),{ignoreTransform:!0}),h={x:f.left-v.left,y:f.top-v.top,scaleX:f.width/v.width,scaleY:f.height/v.height};(h.x||h.y)&&A(l,h,!0)}}t(o)!==c&&(c=t(o))}),$(()=>{t(l)&&A(l,null)}),{get current(){return t(l)}}}function ra(r){const e=s(()=>zr(r)),n=s(()=>Pe(t(e).animateLayoutChanges,tl)),a=s(()=>t(e).attributes),o=s(()=>t(e).disabled),i=s(()=>t(e).data),l=s(()=>Pe(t(e).getNewIndex,el)),c=s(()=>t(e).id),f=s(()=>t(e).strategy),v=s(()=>t(e).resizeObserverConfig),h=s(()=>Pe(t(e).transition,rl)),g=s($s),u=s(()=>t(g).items),d=s(()=>t(g).containerId),b=s(()=>t(g).activeIndex),m=s(()=>t(g).disabled),x=s(()=>t(g).disableTransforms),y=s(()=>t(g).sortedRects),R=s(()=>t(g).overIndex),I=s(()=>t(g).useDragOverlay),B=s(()=>t(g).strategy),M=s(()=>ol(t(o),t(m))),S=s(()=>t(u).indexOf(t(c))),L=s(()=>({sortable:{containerId:t(d),index:t(S),items:t(u)},...t(i)})),k=s(()=>t(u).slice(t(u).indexOf(t(c)))),{rect:O,node:D,isOver:N,setNodeRef:T}=Gs({id:()=>t(c),data:()=>t(L),disabled:()=>t(M).droppable,resizeObserverConfig:()=>({updateMeasurementsFor:t(k),...t(v)})}),{active:Y,activatorEvent:j,activeNodeRect:K,attributes:w,setNodeRef:U,listeners:q,isDragging:re,over:P,setActivatorNodeRef:C,transform:X}=Bs({id:()=>t(c),data:()=>t(L),attributes:()=>({...al,...t(a)}),disabled:()=>t(M).draggable}),te=s(()=>eo(T,U)),se=s(()=>!!Y.current),he=s(()=>t(se)&&!t(x)&&Zt(t(b))&&Zt(t(R))),ue=s(()=>!t(I)&&re.current),be=s(()=>t(ue)&&t(he)?X.current:null),we=s(()=>t(f)??t(B)),ie=s(()=>t(he)?t(be)??t(we)({rects:t(y),activeNodeRect:K.current,activeIndex:t(b),overIndex:t(R),index:t(S)}):null),Se=s(()=>Zt(t(b))&&Zt(t(R))?t(l)({id:t(c),items:t(u),activeIndex:t(b),overIndex:t(R)}):t(S)),ke=s(()=>{var H;return(H=Y.current)==null?void 0:H.id}),de={activeId:t(ke),items:t(u),newIndex:t(Se),containerId:t(d)},Be=s(()=>t(u)!==de.items),Ge=s(()=>t(n)({active:Y.current,containerId:t(d),isDragging:re.current,isSorting:t(se),id:t(c),index:t(S),items:t(u),newIndex:de.newIndex,previousItems:de.items,previousContainerId:de.containerId,transition:t(h),wasDragging:de.activeId!=null})),Je=il(()=>({disabled:!t(Ge),index:t(S),node:D.current,rect:O.current}));return $(()=>{t(se)&&de.newIndex!==t(Se)&&(de.newIndex=t(Se)),t(d)!==de.containerId&&(de.containerId=t(d)),t(u)!==de.items&&(de.items=t(u))}),$(()=>{if(t(ke)===de.activeId)return;if(t(ke)!=null&&de.activeId==null){de.activeId=t(ke);return}const H=setTimeout(()=>{de.activeId=t(ke)},50);return()=>clearTimeout(H)}),{active:Y,activeIndex:J.with(()=>t(b)),attributes:w,data:J.with(()=>t(L)),rect:O,index:J.with(()=>t(S)),newIndex:J.with(()=>t(Se)),items:J.with(()=>t(u)),isOver:N,isSorting:J.with(()=>t(se)),isDragging:re,listeners:q,node:J.with(()=>D.current,t(te)),activatorNode:J.with(()=>null,C),overIndex:J.with(()=>t(R)),over:P,setNodeRef:t(te),setActivatorNodeRef:C,setDroppableNodeRef:T,setDraggableNodeRef:U,transform:J.with(()=>Je.current??t(ie)),transition:J.with(at)};function at(){if(Je.current||t(Be)&&de.newIndex===t(S))return nl;if(!(t(ue)&&!ur(j.current)||!t(h))&&(t(se)||t(Ge)))return ot.Transition.toString({...t(h),property:ta})}}function ol(r,e){return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(r==null?void 0:r.draggable)??e.draggable,droppable:(r==null?void 0:r.droppable)??e.droppable}}function sl(r,e,n,a){e.filter.filterType==="genomic"?(di(e.filter),Ct("/explorer/genome-filter?edit="+Qr.Genomic)):e.filter.filterType==="snp"?(ui(e.filter),Ct("/explorer/genome-filter?edit="+Qr.SNP)):(jt(hn,e.filter),jt(bn,e.filter.searchResult))}const ll=function(r,e){return za(e.filter.uuid)};var cl=F('<div class="absolute -top-2 left-0 right-0 h-1 bg-primary-500 rounded-full z-10 shadow-lg"></div> <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-primary-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">Reorder before filter</div>',1),dl=F('<div><div class="cursor-grab active:cursor-grabbing text-primary-500"><i class="fa-solid fa-grip-vertical" style="color: var(--color-surface-900);"></i></div></div>'),ul=(r,e)=>(r.key==="Enter"||r.key===" ")&&e(r),fl=F('<div class="flex-auto variable svelte-1ukmkhn" tabindex="0" role="button"> </div>'),vl=F('<div class="text-left"> </div>'),gl=F('<button type="button" title="Edit Filter" class="bg-initial text-black-500 hover:text-primary-600"><i class="fa-solid fa-pen-to-square"></i> <span class="sr-only">Edit Filter</span></button>'),hl=F('<i class="fa-solid fa-pen-to-square"></i> <span class="sr-only">Edit Filter</span>',1),bl=F('<button type="button" title="See details" class="bg-initial text-black-500 hover:text-primary-600"><i></i> <span class="sr-only">See details</span></button>'),ml=F("<div> </div>"),pl=F('<section class="p-1 whitespace-pre-wrap"> <!></section>'),yl=F('<div class="absolute inset-0 flex flex-col card pointer-events-none"><header class="card-header p-1 flex"><div class="flex-auto flex items-center justify-center"><div class="text-surface-500 text-sm opacity-50 mt-0.5"> </div></div></header></div>'),xl=F('<div class="absolute -bottom-2 left-0 right-0 h-1 bg-primary-500 rounded-full z-10 shadow-lg"></div> <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-primary-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">Reorder after filter</div>',1),wl=F('<div class="relative"><!> <div class="flex flex-col card bg-surface-100 p-1 m-1"><header><!> <!> <div class="actions svelte-1ukmkhn"><!> <button type="button" title="Remove Filter" class="bg-initial text-black-500 hover:text-primary-600"><i class="fa-solid fa-times-circle"></i> <span class="sr-only">Remove Filter</span></button> <!></div></header> <!></div> <!> <!></div>');function er(r,e){me(e,!0);const n=()=>ce(hn,"$activeFilter",o),a=()=>ce(bn,"$activeSearch",o),[o,i]=nt();let l=W(e,"draggable",3,!1),c=W(e,"hoverZone",3,null),f=W(e,"hoverGroupId",3,null),v=ae(!1),h=ae("fa-caret-up");const g=s(()=>["genomic","snp"].includes(e.filter.filterType)),u=s(()=>e.filter.filterType==="AnyRecordOf");let d=ae(!1),b=ae(!1);const m=s(()=>f()===e.filter.uuid),x=s(()=>t(m)&&c()==="top"),y=s(()=>t(m)&&c()==="bottom"),{attributes:R,listeners:I,node:B,activatorNode:M,transform:S,transition:L,isDragging:k,isSorting:O}=ra({id:e.filter.uuid,data:{type:"item"}}),D=s(()=>{const w=S.current;return w&&(w.scaleY=1),fr({transform:ot.Transform.toString(w),transition:O.current?L.current:void 0,zIndex:k.current?1:void 0})}),N=function(w){if(w.filterType==="Categorical")if(w.displayType==="restrict"){let U=w.categoryValues.length===1?"value":"values";return`Restricting to ${w.categoryValues.length} ${U}.`}else return w.displayType==="any"||w.displayType==="anyRecordOf"?"Restricting to any value.":w.description;else{if(w.filterType==="AnyRecordOf")return"Restricting to children of the selected value.";if(w.filterType==="numeric")switch(w.displayType){case"any":return"Restricting to any value.";case"between":return`Restricting to between ${w.min} and ${w.max}.`;case"greaterThan":return`Restricting to greater than ${w.min}.`;case"lessThan":return`Restricting to less than ${w.max}.`;default:return w.description||"N/A"}else if(w.filterType==="genomic"||w.filterType==="snp")return w.description}},T=function(w){var U,q,re,P;return(U=w.searchResult)!=null&&U.studyAcronym&&((q=w.searchResult)!=null&&q.dataset)?`${w.searchResult.studyAcronym} (${w.searchResult.dataset})`:((re=w.searchResult)==null?void 0:re.studyAcronym)||((P=w.searchResult)==null?void 0:P.dataset)||""},Y=function(w){w.stopPropagation(),w.preventDefault(),A(v,!t(v)),A(h,t(v)?"fa-caret-down":"fa-caret-up",!0)};var j=ne(),K=Q(j);cr(K,()=>e.filter.uuid,w=>{var U=wl(),q=E(U);{var re=V=>{var Z=cl();tt(2),p(V,Z)};G(q,V=>{t(x)&&V(re)})}var P=z(q,2),C=E(P),X=E(C);{var te=V=>{var Z=dl();_t(Z,()=>({class:"flex items-center justify-center bg-surface-100 rounded-l-md p-1 w-7 flex-shrink-0 self-stretch min-h-full",...R.current,...I.current}),void 0,void 0,"svelte-1ukmkhn"),Wt(Z,_e=>M.current=_e,()=>M==null?void 0:M.current),p(V,Z)};G(X,V=>{l()&&!k.current&&V(te)})}var se=z(X,2);{var he=V=>{var Z=fl();Z.__click=Y,Z.__keydown=[ul,Y];var _e=E(Z,!0);_(Z),ee(()=>ge(_e,e.filter.variableName)),p(V,Z)},ue=V=>{{const Z=Le=>{var Ee=vl(),je=E(Ee);_(Ee),ee(()=>{var Te,Ye,ye,Xe;return ge(je,`${((Ye=(Te=e.filter)==null?void 0:Te.concepts)==null?void 0:Ye.length)??""} variable(s) in ${(((ye=e.filter.searchResult)==null?void 0:ye.display)||((Xe=e.filter.searchResult)==null?void 0:Xe.name)||e.filter.variableName)??""}
                category`)}),p(Le,Ee)};let _e=s(()=>`any-record-of-filter-modal-${e.filter.id}`);Lt(V,{title:"View Variables in Filter",get"data-testid"(){return t(_e)},withDefault:!1,get open(){return t(b)},set open(Le){A(b,Le,!0)},trigger:Z,children:(Le,Ee)=>{Qi(Le,{get filter(){return e.filter}})},$$slots:{trigger:!0,default:!0}})}};G(se,V=>{t(u)?V(ue,!1):V(he)})}var be=z(se,2),we=E(be);{var ie=V=>{var Z=gl();Z.__click=[sl,e,n,a],p(V,Z)},Se=V=>{var Z=ne(),_e=Q(Z);{var Le=Ee=>{Lt(Ee,{title:"Edit Filter",triggerBase:"bg-initial text-black-500 hover:text-primary-600",withDefault:!1,get open(){return t(d)},set open(Te){A(d,Te,!0)},trigger:Te=>{var Ye=hl();tt(2),p(Te,Ye)},children:(Te,Ye)=>{gi(Te,{get data(){return e.filter.searchResult},get existingFilter(){return e.filter},onclose:()=>A(d,!1)})},$$slots:{trigger:!0,default:!0}})};G(_e,Ee=>{t(u)||Ee(Le)},!0)}p(V,Z)};G(we,V=>{t(g)?V(ie):V(Se,!1)})}var ke=z(we,2);ke.__click=[ll,e];var de=z(ke,2);{var Be=V=>{var Z=bl();Z.__click=Y;var _e=E(Z);tt(2),_(Z),ee(()=>Ze(_e,1,`fa-solid ${t(h)??""}`,"svelte-1ukmkhn")),p(V,Z)};G(de,V=>{t(u)||V(Be)})}_(be),_(C);var Ge=z(C,2);{var Je=V=>{var Z=pl(),_e=E(Z),Le=z(_e);{var Ee=je=>{var Te=ml(),Ye=E(Te);_(Te),ee(ye=>ge(Ye,`Values: ${ye??""}`),[()=>e.filter.categoryValues.join(", ")]),p(je,Te)};G(Le,je=>{e.filter.filterType==="Categorical"&&e.filter.displayType!=="any"&&e.filter.displayType!=="anyRecordOf"&&je(Ee)})}_(Z),ee((je,Te)=>ge(_e,`${je??""}
          ${Te??""} `),[()=>N(e.filter),()=>T(e.filter)]),Rt(3,Z,()=>Sn,()=>({axis:"y"})),p(V,Z)};G(Ge,V=>{t(v)&&V(Je)})}_(P),Wt(P,V=>B.current=V,()=>B==null?void 0:B.current);var at=z(P,2);{var H=V=>{var Z=yl(),_e=E(Z),Le=E(_e),Ee=E(Le),je=E(Ee);_(Ee),_(Le),_(_e),_(Z),ee(()=>ge(je,`Moving filter: ${e.filter.variableName??""}`)),p(V,Z)};G(at,V=>{k.current&&V(H)})}var fe=z(at,2);{var xe=V=>{var Z=xl();tt(2),p(V,Z)};G(fe,V=>{t(y)&&V(xe)})}_(U),ee(()=>{Ce(P,"id",e.filter.uuid),Ce(P,"data-testid",`added-filter-${e.filter.id??""}`),Ce(P,"data-sortable-id",e.filter.uuid),Nr(P,t(D)),Ze(C,1,Qa(["card-header p-1 flex",{invisible:k.current}]),"svelte-1ukmkhn")}),Rt(1,P,()=>_n,()=>({easing:Dn})),Rt(2,P,()=>Rn,()=>({duration:300})),p(w,U)}),p(r,j),pe(),i()}dt(["click","keydown"]);function _l(r,e){Ba(e.siblingA,e.siblingB)}var Rl=F('<select class="select operator-select"><option> </option><option> </option></select>');function Sl(r,e){me(e,!0);let n=s(()=>e.siblingA.uuid.split("-")[0]+"-"+e.siblingB.uuid.split("-")[0]);var a=Rl();a.__change=[_l,e];var o=E(a),i=E(o,!0);_(o);var l={},c=z(o),f=E(c,!0);_(c);var v={};_(a);var h;Ja(a),ee(()=>{Ce(a,"data-testid",`operator-dropdown-${t(n)}`),ge(i,xt.AND),l!==(l=xt.AND)&&(o.value=(o.__value=xt.AND)??""),ge(f,xt.OR),v!==(v=xt.OR)&&(c.value=(c.__value=xt.OR)??""),h!==(h=e.operator)&&(a.value=(a.__value=e.operator)??"",$a(a,e.operator))}),p(r,a),pe()}dt(["change"]);var Dl=F('<div class="absolute -top-2 left-0 right-0 h-1 bg-primary-500 rounded-full z-10 shadow-lg"></div> <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-primary-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">Reorder before group</div>',1),Cl=F('<div><div class="cursor-grab active:cursor-grabbing text-primary-500"><i class="fa-solid fa-grip-vertical" style="color: var(--color-surface-900);"></i></div></div>'),kl=F("<!> <!>",1),El=F('<div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-primary-500 text-white text-xs px-3 py-1.5 rounded-md whitespace-nowrap z-10 shadow-lg font-medium">Add to group</div>'),Tl=F('<div class="absolute -bottom-2 left-0 right-0 h-1 bg-primary-500 rounded-full z-10 shadow-lg"></div> <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-primary-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">Reorder after group</div>',1),Il=F('<div class="flex items-center justify-center bg-surface-200/50 rounded-l-md p-1.5 w-7 flex-shrink-0 self-stretch min-h-full border-2 border-dashed border-surface-400"></div>'),Al=F('<div class="absolute inset-0 flex flex-row items-center gap-0 pointer-events-none"><!> <div class="flex-1 h-full bg-surface-200/30 border-2 border-dashed border-surface-400 rounded-r-md flex items-center justify-center"><div class="text-surface-500 text-sm opacity-50"> </div></div></div>'),Ol=F('<div class="relative"><!> <div class="flex flex-row items-center gap-0 w-full transition-all"><!> <div></div></div> <!> <!> <!></div>');function Or(r,e){me(e,!0);let n=W(e,"hoverZone",3,null),a=W(e,"hoverGroupId",3,null),o=s(()=>e.group.uuid.split("-")[0]);const i=s(()=>e.group.children.length>1&&(!e.group.parent||e.group.parent.children.length>1)),l=s(()=>e.group.parent===void 0||e.group.parent===null),c=s(()=>a()===e.group.uuid),f=s(()=>t(c)&&n()==="middle"&&!t(l)),v=s(()=>t(c)&&n()==="top"&&!t(l)),h=s(()=>t(c)&&n()==="bottom"&&!t(l)),{attributes:g,listeners:u,node:d,activatorNode:b,transform:m,transition:x,isDragging:y,isSorting:R}=ra({id:e.group.uuid,data:{type:e.group.parent===void 0||e.group.parent===null?"root":"group",accepts:["item"]}}),I=s(()=>{const S=m.current;return S&&(S.scaleY=1),fr({transform:ot.Transform.toString(S),transition:R.current?x.current:void 0,zIndex:y.current?1:void 0})});var B=ne(),M=Q(B);cr(M,()=>e.group.uuid,S=>{var L=Ol(),k=E(L);{var O=P=>{var C=Dl();tt(2),p(P,C)};G(k,P=>{t(v)&&P(O)})}var D=z(k,2),N=E(D);{var T=P=>{var C=Cl();_t(C,()=>({class:"flex items-center justify-center bg-surface-100 rounded-l-md p-1.5 w-7 flex-shrink-0 self-stretch min-h-full",...g.current,...u.current})),Wt(C,X=>b.current=X,()=>b==null?void 0:b.current),p(P,C)};G(N,P=>{t(i)&&!t(l)&&P(T)})}var Y=z(N,2);it(Y,23,()=>e.group.children,P=>P.uuid,(P,C,X)=>{var te=kl(),se=Q(te);{var he=ie=>{Sl(ie,{get siblingA(){return e.group.children[t(X)-1]},get siblingB(){return e.group.children[t(X)]},get operator(){return e.group.operator}})};G(se,ie=>{t(X)>0&&ie(he)})}var ue=z(se,2);{var be=ie=>{{let Se=s(()=>t(C).children.map(ke=>ke.uuid));ea(ie,{get items(){return t(Se)},children:(ke,de)=>{Or(ke,{get group(){return t(C)},get hoverZone(){return n()},get hoverGroupId(){return a()}})},$$slots:{default:!0}})}},we=ie=>{er(ie,{get filter(){return t(C)},get draggable(){return t(i)},get hoverZone(){return n()},get hoverGroupId(){return a()}})};G(ue,ie=>{t(C)&&"children"in t(C)?ie(be):ie(we,!1)})}p(P,te)}),_(Y),_(D),Wt(D,P=>d.current=P,()=>d==null?void 0:d.current);var j=z(D,2);{var K=P=>{var C=El();p(P,C)};G(j,P=>{t(f)&&P(K)})}var w=z(j,2);{var U=P=>{var C=Tl();tt(2),p(P,C)};G(w,P=>{t(h)&&P(U)})}var q=z(w,2);{var re=P=>{var C=Al(),X=E(C);{var te=be=>{var we=Il();p(be,we)};G(X,be=>{t(i)&&!t(l)&&be(te)})}var se=z(X,2),he=E(se),ue=E(he);_(he),_(se),_(C),ee(be=>ge(ue,`Moving group: ${be??""}`),[()=>e.group.operator.toLowerCase()]),p(P,C)};G(q,P=>{y.current&&P(re)})}_(L),ee(P=>{Ce(D,"id",`filter-group-${t(o)}`),Ce(D,"data-testid",`filter-group-${t(o)}`),Ce(D,"data-sortable-id",e.group.uuid),Nr(D,t(I)),Ze(Y,1,P),Ce(Y,"data-testid",`filter-group-${t(o)}`)},[()=>`filter-group-${e.group.operator.toLowerCase()} w-full`]),p(S,L)}),p(r,B),pe()}var Nl=F('<p class="text-center">No filters added</p>'),Fl=F('<header class="text-left ml-1">Filters</header>'),Pl=F("<!> <!>",1),Ll=F('<div class="px-4 mb-1 w-80"><!> <section class="py-1"><!> <!></section></div>');function Ml(r,e){me(e,!0);const n=()=>ce(mr,"$filterTree",c),a=()=>ce(kt,"$filters",c),o=()=>ce(mn,"$genomicFilters",c),i=()=>ce(wn,"$exports",c),l=()=>ce(ut,"$advancedFilteringEnabled",c),[c,f]=nt();let v=s(()=>Fe.url.pathname.includes("/discover")),h=Mo(xr(Xn),xr(Wr),xr(Yn)),g=ae(void 0),u=ae(null),d=ae(null),b=0;function m(k){const O=n().find(D=>"uuid"in D&&D.uuid===k);return O&&n().isGroup(O)?O:O==null?void 0:O.parent}function x(k){const O=document.querySelectorAll("[data-sortable-id]");let D;if(O.forEach(K=>{K.getAttribute("data-sortable-id")===String(k)&&(D=K)}),!D)return console.warn("Element not found, returning middle as fallback"),"middle";const N=D.getBoundingClientRect(),T=b-N.top,Y=N.height,j=T/Y;return j<.2?"top":j>.8?"bottom":"middle"}function y({active:k}){const O=n().find(D=>"uuid"in D&&D.uuid===k.id);n().isGroup(O)?A(g,O??null,!0):A(g,O??null,!0)}function R(k){var U,q,re,P;const{active:O,over:D}=k;if(!D||!O){A(u,null),A(d,null);return}const N=(U=O.data)==null?void 0:U.type,T=(q=D==null?void 0:D.data)==null?void 0:q.type,Y=((P=(re=D==null?void 0:D.data)==null?void 0:re.accepts)==null?void 0:P.includes("item"))??!1;if(N==="item"&&T==="group"){const C=x(D.id);if(A(u,C,!0),A(d,String(D.id),!0),C!=="middle")return}else if(N==="group"&&(T==="group"||T==="item"||T==="root")){if(T==="root"){A(u,null),A(d,null);return}if(T==="group"){const C=x(D.id);A(u,C==="middle"?"bottom":C,!0),A(d,String(D.id),!0)}else{const C=x(D.id);A(u,C==="middle"?"bottom":C,!0),A(d,String(D.id),!0)}return}else A(u,null),A(d,null);if(N!=="item"||!T&&!Y)return;const j=m(O.id),K=m(D.id);if(!j||!K||j===K)return;const w=j.children.find(C=>"uuid"in C&&C.uuid===O.id);w&&(j.children=j.children.filter(C=>"uuid"in C&&C.uuid!==O.id),K.children.push(w),w.parent=K)}function I({active:k,over:O}){var T,Y;if(!O){A(g,void 0),A(u,null),A(d,null);return}const D=(T=k.data)==null?void 0:T.type,N=(Y=O==null?void 0:O.data)==null?void 0:Y.type;if(D==="group"&&(N==="group"||N==="item")){const j=n().find(w=>"uuid"in w&&w.uuid===k.id),K=n().find(w=>"uuid"in w&&w.uuid===O.id);j&&K&&n().reorderNodes(j,K)}if(D==="item"&&N==="group"&&(t(u)==="top"||t(u)==="bottom")){const j=n().find(w=>"uuid"in w&&w.uuid===k.id),K=n().find(w=>"uuid"in w&&w.uuid===O.id);if(j&&K&&K.parent){const w=K.parent,U=j.parent;U&&(U.children=U.children.filter(re=>re!==j),U.uuid=lt());const q=w.children.indexOf(K);t(u)==="bottom"?w.children.splice(q+1,0,j):w.children.splice(q,0,j),j.parent=w,w.uuid=lt()}}if(D==="item"&&N==="item"){const j=m(k.id),K=m(O.id);if(!j||!K){A(g,void 0),A(u,null),A(d,null);return}if(j===K){const w=n().find(q=>"uuid"in q&&q.uuid===k.id),U=n().find(q=>"uuid"in q&&q.uuid===O.id);w&&U&&(n().reorderNodes(w,U),j.uuid=lt())}else j&&(j.uuid=lt()),K&&(K.uuid=lt())}if(D==="item"&&N==="group"&&t(u)==="middle"){const j=n().find(w=>"uuid"in w&&w.uuid===k.id),K=n().find(w=>"uuid"in w&&w.uuid===O.id);j!=null&&j.parent&&K&&n().isGroup(K)&&(j.parent.uuid=lt(),K.uuid=lt())}A(g,void 0),A(u,null),A(d,null),n().pruneTree(),Sa(mr,ct(n).root.uuid=lt(),ct(n)),mr.set(n())}var B=ne(),M=Q(B);{var S=k=>{var O=Nl();p(k,O)},L=k=>{var O=Ll(),D=E(O);{var N=U=>{var q=Fl();p(U,q)};G(D,U=>{a().length+o().length>0&&U(N)})}var T=z(D,2),Y=E(T);{var j=U=>{Ns(U,{get sensors(){return h},onDragStart:y,onDragEnd:I,onDragOver:R,children:(q,re)=>{var P=Pl(),C=Q(P);{let te=s(()=>n().root.children.map(se=>se.uuid));ea(C,{get items(){return t(te)},children:(se,he)=>{Or(se,{get group(){return n().root},get hoverZone(){return t(u)},get hoverGroupId(){return t(d)}})},$$slots:{default:!0}})}var X=z(C,2);qs(X,{children:(te,se)=>{var he=ne(),ue=Q(he);{var be=ie=>{Or(ie,{get group(){return t(g)}})},we=ie=>{var Se=ne(),ke=Q(Se);{var de=Be=>{er(Be,{get filter(){return t(g)}})};G(ke,Be=>{t(g)&&Be(de)},!0)}p(ie,Se)};G(ue,ie=>{t(g)&&n().isGroup(t(g))?ie(be):ie(we,!1)})}p(te,he)},$$slots:{default:!0}}),p(q,P)},$$slots:{default:!0}})},K=U=>{var q=ne(),re=Q(q);it(re,1,a,bt,(P,C)=>{er(P,{get filter(){return t(C)}})}),p(U,q)};G(Y,U=>{l()&&Ke.explorer.enableOrQueries&&t(v)?U(j):U(K,!1)})}var w=z(Y,2);it(w,1,o,bt,(U,q)=>{er(U,{get filter(){return t(q)}})}),_(T),_(O),p(k,O)};G(M,k=>{a().length+o().length+i().length===0?k(S):k(L,!1)})}p(r,B),pe(),f()}const zl=function(r,e,n){e(n.variable.id)};var Bl=F('<div class="flex flex-col card bg-surface-100 p-1 m-1"><header class="card-header p-1 flex"><div class="flex-auto"> </div> <button type="button" title="Remove Export" class="btn-icon-color" aria-label="Remove Export"><i class="fa-solid fa-times-circle"></i></button></header></div>');function jl(r,e){me(e,!0);const{removeExport:n}=Sr;var a=Bl(),o=E(a),i=E(o),l=E(i,!0);_(i);var c=z(i,2);c.__click=[zl,n,e],_(o),_(a),ee(()=>{var f,v;Ce(a,"id",e.variable.studyId?`${e.variable.studyId}-${e.variable.conceptPath}`:e.variable.conceptPath),Ce(a,"data-testid",`added-export-${e.variable.conceptPath??""}`),ge(l,e.variable.display||((f=e.variable.searchResult)==null?void 0:f.display)||((v=e.variable.searchResult)==null?void 0:v.name))}),Rt(3,a,()=>Rn,()=>({duration:300})),p(r,a),pe()}dt(["click"]);var Wl=F('<span class="text-4xl font-bold"></span>'),Gl=F('<div class="flex flex-row h-full"><span id="result-count-number" class="text-4xl"> </span> <!></div>'),Yl=F('<span id="result-count"><!></span>'),Xl=F('<div class="flex flex-col items-center mt-2"><!> <h4 class="text-center"> </h4></div>'),Vl=F('Some sites did not return patient counts for your query. See <a href="/explorer/cohort" class="anchor font-bold">Cohort Details</a> for more information.',1),Ul=F('<p class="text-[0.6rem] !m-0"><!></p>'),Hl=F("<!> <!>",1);function ql(r,e){me(e,!0);const n=()=>ce(si,"$resultCounts",a),[a,o]=nt();let i=ae(!1);function l(u){return mi(u.filter(wt.fullfiled).map(({value:d})=>d))}function c(u){return u.filter(wt.fullfiled).length===0||u.some(wt.rejected)}$(()=>{A(i,!1),n().forEach(u=>{Promise.allSettled(wt.list(u).map(({promise:d})=>d)).then(d=>{c(d)&&A(i,!0)})})});var f=Hl(),v=Q(f);it(v,1,n,bt,(u,d)=>{var b=Xl(),m=E(b);kn(m,()=>Promise.allSettled(wt.list(t(d)).map(({promise:R})=>R)),R=>{yn(R,{ring:!0,size:"mini"})},(R,I)=>{const B=s(()=>l(t(I))),M=s(()=>c(t(I)));var S=Yl(),L=E(S);{var k=D=>{var N=Wl();N.textContent="N/A",p(D,N)},O=D=>{var N=Gl(),T=E(N),Y=E(T,!0);_(T);var j=z(T,2);{var K=w=>{{let U=s(()=>{var q,re,P,C;return ia(kt).length!==0?(re=(q=Qt)==null?void 0:q.explorePage)==null?void 0:re.filterErrorText:(C=(P=Qt)==null?void 0:P.explorePage)==null?void 0:C.queryErrorText});pi(w,{type:"exclamation",color:"warning",id:"result-count-error",get text(){return t(U)}})}};G(j,w=>{t(M)&&w(K)})}_(N),ee(()=>ge(Y,t(B))),p(D,N)};G(L,D=>{t(I).filter(wt.fullfiled).length===0?D(k):D(O,!1)})}_(S),p(R,S)});var x=z(m,2),y=E(x,!0);_(x),_(b),ee(()=>ge(y,t(d).label)),p(u,b)});var h=z(v,2);{var g=u=>{Fr(u,{color:"warning",iconSize:"2xl",children:(d,b)=>{var m=Ul(),x=E(m);{var y=I=>{var B=Vl();tt(2),p(I,B)},R=I=>{var B=ne(),M=Q(B);bi(M,()=>{var S,L;return yi((L=(S=Qt)==null?void 0:S.explorePage)==null?void 0:L.queryErrorText)}),p(I,B)};G(x,I=>{Ke.federated?I(y):I(R,!1)})}_(m),p(d,m)},$$slots:{default:!0}})};G(h,u=>{t(i)&&u(g)})}p(r,f),pe(),o()}var Kl=(r,e)=>{r.stopPropagation(),e()},Zl=F(`<p>With Advanced Filtering, you can build more complex queries by combining filters using "and" and
    "or" with the dropdown menu. As this feature is under active development, some other features
    may not be available with this enabled.</p> <p>What do you think about Advanced Filtering? <a target="_blank" rel="noopener noreferrer" class="anchor">Let us know</a>!</p>`,1),Ql=F(`<p>This will remove any "or" filters and filter groups you have added. The filters you have added
    will now be combined using "and".</p>`),Jl=()=>Ct("/explorer/export"),$l=F('<div class="h-11 mt-4"><button id="export-data-button" type="button" class="btn preset-filled-primary-500">Prepare for Analysis</button></div>'),ec=(r,e)=>A(e,!0),tc=F('<button data-testid="clear-all-results-btn" class="anchor text-sm flex-none">Reset</button>'),rc=F('<div class="flex items-center justify-between w-full px-4 mt-2 mb-2"><div class="flex items-center gap-2"><span class="text-sm">Advanced Filtering</span> <span class="chip preset-tonal-primary text-xs px-2 py-0.5 rounded" data-testid="advanced-filtering-beta-chip">Beta</span></div> <!></div>'),nc=F('<div class="px-4 mb-1 w-80"><header class="text-left ml-1" data-testid="export-header">Added Variables</header> <section class="py-1"></section></div>'),ac=F('<div class="flex flex-col items-center mt-7"><hr class="svelte-qyz27f"/> <h5 class="text-center text-xl mt-7">Tool Suite</h5> <div class="flex flex-row flex-wrap justify-items-center gap-4 w-80 justify-center"><!> <!> <!> <!></div></div>'),ic=F('<!> <!> <!> <section id="results-panel" class="flex flex-col items-center pt-8 pr-10 w-64"><!> <!> <div id="export-filters" class="flex flex-col items-center mt-7 w-80"><hr class="svelte-qyz27f"/> <div class="flex content-center mt-7"><h5 class="text-xl flex-auto mr-2 mb-2">Filtered Data Summary</h5> <!></div> <!> <!> <!></div> <!></section>',1);function oc(r,e){me(e,!0);const n=()=>ce(kt,"$filters",v),a=()=>ce(wn,"$exports",v),o=()=>ce(li,"$countsLoading",v),i=()=>ce(ci,"$hasNonZeroResult",v),l=()=>ce(pn,"$hasGenomicFilter",v),c=()=>ce(Ga,"$hasOrGroup",v),f=()=>ce(ut,"$advancedFilteringEnabled",v),[v,h]=nt();let g=null,u=null,d=Fe.url.pathname,b=s(()=>Fe.url.pathname.includes("/discover")),m=s(()=>Fe.url.pathname.includes("/explorer")),x=ae(!1),y=ae(!1),R=ae(!1),I=s(()=>n().length!==0||Ke.explorer.exportsEnableExport&&a().length!==0),B=s(()=>Ke.explorer.allowExport&&!t(b)&&t(I)&&(o()||i())),M=s(()=>n().length!==0&&!n().every(H=>H.filterType==="genomic"||H.filterType==="snp"||H.filterType==="AnyRecordOf")),S=s(()=>t(m)&&Ke.explorer.distributionExplorer&&t(M)),L=s(()=>t(b)&&Ke.discoverFeautures.distributionExplorer&&t(M)),k=s(()=>t(m)&&Ke.explorer.variantExplorer&&l()),O=s(()=>t(m)&&Ke.explorer.enableCohortDetails),D=s(()=>t(O)||(n().length!==0||a().length!==0)&&(t(S)||t(L)||t(k)));function N(){g||(g=kt.subscribe(()=>Ot(t(b)))),u||(u=mn.subscribe(()=>Ot(t(b))))}function T(){g&&(g(),g=null),u&&(u(),u=null)}$(()=>{Fe.url.pathname.startsWith(d)||(d=Fe.url.pathname,T(),N())}),sr(N),vn(T);function Y(H){H.checked?A(y,!0):c()?(ut.set(!1),A(R,!0)):(ut.set(!1),Ot(t(b)))}function j(){ut.set(!0),A(y,!1),Ot(t(b))}function K(){Wa(),ut.set(!1),A(R,!1),Ot(t(b))}function w(){ut.set(!0),A(R,!1)}function U(){window.open("https://hms-dbmi.atlassian.net/servicedesk/customer/portal/5/group/6/create/362","_blank")}var q=ic(),re=Q(q);Lt(re,{title:"Clear All Filters",withDefault:!0,confirmText:"Yes",cancelText:"No",onconfirm:()=>{ja(),ii()},get open(){return t(x)},set open(H){A(x,H,!0)},children:(H,fe)=>{tt();var xe=Bt("Are you sure you want to clear all filters?");p(H,xe)},$$slots:{default:!0}});var P=z(re,2);Lt(P,{title:"Advanced Filtering is now enabled",withDefault:!0,confirmText:"Proceed",cancelText:"",width:"w-1/3",footerButtons:!0,onconfirm:j,get open(){return t(y)},set open(H){A(y,H,!0)},children:(H,fe)=>{var xe=Zl(),V=z(Q(xe),2),Z=z(E(V));Z.__click=[Kl,U],tt(),_(V),ee(()=>Ce(Z,"href",Qt.login.contactLink)),p(H,xe)},$$slots:{default:!0}});var C=z(P,2);Lt(C,{title:"Advanced Filtering will be removed",withDefault:!0,confirmText:"Proceed",cancelText:"Cancel",confirmClass:"preset-filled-primary-500",cancelClass:"preset-tonal-primary border hover:preset-filled-primary-500",footerButtons:!0,width:"w-1/3",onconfirm:K,onclose:w,get open(){return t(R)},set open(H){A(R,H,!0)},children:(H,fe)=>{var xe=Ql();p(H,xe)},$$slots:{default:!0}});var X=z(C,2),te=E(X);ql(te,{});var se=z(te,2);{var he=H=>{var fe=$l(),xe=E(fe);xe.__click=[Jl],_(fe),ee(()=>xe.disabled=o()),Rt(3,xe,()=>_n,()=>({easing:Dn})),p(H,fe)};G(se,H=>{t(B)&&H(he)})}var ue=z(se,2),be=z(E(ue),2),we=z(E(be),2);{var ie=H=>{var fe=tc();fe.__click=[ec,x],p(H,fe)};G(we,H=>{t(I)&&H(ie)})}_(be);var Se=z(be,2);{var ke=H=>{var fe=rc(),xe=z(E(fe),2);oi(xe,{name:"advanced-filtering-toggle",controlActive:"bg-primary-500",get checked(){return f()},onCheckedChange:Y}),_(fe),p(H,fe)};G(Se,H=>{n().length>0&&Ke.explorer.enableOrQueries&&t(b)&&H(ke)})}var de=z(Se,2);Ml(de,{});var Be=z(de,2);{var Ge=H=>{var fe=nc(),xe=z(E(fe),2);it(xe,5,a,V=>V.id,(V,Z)=>{jl(V,{get variable(){return t(Z)}})}),_(xe),_(fe),p(H,fe)};G(Be,H=>{a().length>0&&H(Ge)})}_(ue);var Je=z(ue,2);{var at=H=>{var fe=ac(),xe=z(E(fe),4),V=E(xe);{var Z=ye=>{{let Xe=s(()=>Fe.url.pathname.includes("explorer/cohort"));Nt(ye,{href:"/explorer/cohort","data-testid":"cohort-details-btn",title:"Cohort Details",icon:"fa-solid fa-users",size:"md",get active(){return t(Xe)}})}};G(V,ye=>{t(O)&&ye(Z)})}var _e=z(V,2);{var Le=ye=>{Nt(ye,{href:"/explorer/distributions","data-testid":"distributions-btn",title:"Variable Distributions",icon:"fa-solid fa-chart-pie",size:"md"})};G(_e,ye=>{t(S)&&ye(Le)})}var Ee=z(_e,2);{var je=ye=>{var Xe=ne(),gr=Q(Xe);{var ve=Re=>{xn(Re,{triggerTypes:["hover","focus"],placement:"left",message:"Variable distributions currently not available with 'OR' queries.",trigger:Me=>{Nt(Me,{href:"/discover/distributions","data-testid":"distributions-btn",title:"Variable Distributions",icon:"fa-solid fa-chart-pie",size:"md",disabled:!0})},$$slots:{trigger:!0}})},Ie=Re=>{Nt(Re,{href:"/discover/distributions","data-testid":"distributions-btn",title:"Variable Distributions",icon:"fa-solid fa-chart-pie",size:"md"})};G(gr,Re=>{c()?Re(ve):Re(Ie,!1)})}p(ye,Xe)};G(Ee,ye=>{t(L)&&ye(je)})}var Te=z(Ee,2);{var Ye=ye=>{{let Xe=s(()=>Fe.url.pathname.includes("explorer/variant"));Nt(ye,{href:"/explorer/variant","data-testid":"variant-explorer-btn",title:"Variant Explorer",icon:"fa-solid fa-dna",size:"md",get active(){return t(Xe)}})}};G(Te,ye=>{t(k)&&ye(Ye)})}_(xe),_(fe),p(H,fe)};G(Je,H=>{t(D)&&H(at)})}_(X),Rt(3,X,()=>Sn,()=>({axis:"x"})),p(r,q),pe(),h()}dt(["click"]);var sc=F('<div id="side-panel"><div id="side-panel-bar" class="svelte-19rrhxy"><button type="button" id="results-panel-toggle" class="btn-icon btn-icon-sm preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 svelte-19rrhxy" aria-label="Toggle Results Panel"><i></i></button></div> <!></div>');function lc(r,e){me(e,!0);const n=()=>ce(kt,"$filters",i),a=()=>ce(c,"$exports",i),o=()=>ce(Jt,"$panelOpen",i),[i,l]=nt();let{exports:c}=Sr,f,v;function h(){Jt.set(!0)}sr(()=>{f=kt.subscribe(()=>{var y;((y=n())==null?void 0:y.length)!==0&&h()}),v=Sr.subscribe(()=>{var y;((y=a())==null?void 0:y.length)!==0&&h()})}),vn(()=>{f&&f(),v&&v()});var g=sc(),u=E(g),d=E(u);d.__click=()=>{Jt.update(y=>!y)};var b=E(d);_(d),_(u);var m=z(u,2);{var x=y=>{oc(y,{})};G(m,y=>{o()&&y(x)})}_(g),ee(()=>{Ze(g,1,`flex ${o()?"open":"closed"}-panel`),Ce(d,"title",`${o()?"Hide":"Show"} Results`),Ze(b,1,`fa-solid ${o()?"fa-arrow-right":"fa-arrow-left"}`)}),p(r,g),pe(),l()}dt(["click"]);function cc(r,e){const n=()=>ce($r,"$drawerState",a),[a,o]=nt();let i=W(e,"position",3,"right"),l=W(e,"width",3,"w-[480px]");const c=i()==="left"?"justify-start":"justify-end";Cn(r,{get open(){return n()},onOpenChange:v=>jt($r,v.open),triggerBase:"btn preset-tonal",get contentBase(){return`bg-surface-50-950 p-4 space-y-4 shadow-xl ${l()??""} h-screen overflow-auto`},get positionerJustify(){return c},positionerAlign:"",positionerPadding:"",transitionsPositionerIn:{x:-480,duration:200},transitionsPositionerOut:{x:-480,duration:200},ids:{content:"drawer"},get trigger(){return e.trigger},content:v=>{var h=ne(),g=Q(h);Ne(g,()=>e.children??Qe),p(v,h)},$$slots:{content:!0}}),o()}var dc=F('<h2 data-testid="drawer-title" class="text-2xl font-bold ml-4"> </h2>'),uc=F('<li class="ml-8"> </li>'),fc=F('<ul class="list-disc"></ul>'),vc=F('<li class="m-2"><strong class="capitalize"> </strong>: <!></li>'),gc=r=>r.stopPropagation(),hc=F('<div class="flex justify-center items-center mb-4"><a class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500" target="_blank">More Info</a></div>'),bc=F('<ul data-testid="drawer-details" class="m-4 p-4"></ul> <!>',1),mc=F("<!> <hr/> <!>",1);function pc(r,e){var d,b,m;me(e,!0);const n=()=>ce(xi,"$activeRow",a),[a,o]=nt(),i=((d=n())==null?void 0:d.dataset_id)||"",l=((b=n())==null?void 0:b.name)||"",c=((m=n())==null?void 0:m.additional_info_link)||"";async function f(){const x=await wi(i);if(!x||Object.keys(x).length===0)throw new Error("No details found");return x.datasetId&&delete x.datasetId,x.studyFullname&&delete x.studyFullname,x}var v=mc(),h=Q(v);{var g=x=>{var y=dc(),R=E(y,!0);_(y),ee(()=>ge(R,l)),p(x,y)};G(h,x=>{l&&x(g)})}var u=z(h,4);kn(u,f,x=>{yn(x,{ring:!0,size:"medium"})},(x,y)=>{var R=bc(),I=Q(R);it(I,21,()=>Object.entries(t(y)),bt,(S,L)=>{var k=s(()=>ht(t(L),2));let O=()=>t(k)[0],D=()=>t(k)[1];var N=ne(),T=Q(N);{var Y=j=>{var K=vc(),w=E(K),U=E(w,!0);_(w);var q=z(w,2);{var re=C=>{var X=fc();it(X,21,D,bt,(te,se)=>{var he=ne(),ue=Q(he);{var be=we=>{var ie=uc(),Se=E(ie,!0);_(ie),ee(()=>ge(Se,t(se))),p(we,ie)};G(ue,we=>{t(se)&&we(be)})}p(te,he)}),_(X),p(C,X)},P=C=>{var X=Bt();ee(()=>ge(X,D())),p(C,X)};G(q,C=>{Array.isArray(D())?C(re):C(P,!1)})}_(K),ee(C=>ge(U,C),[()=>O().replace(/([A-Z])/g," $1").toLowerCase().trim()]),p(j,K)};G(T,j=>{D()&&j(Y)})}p(S,N)}),_(I);var B=z(I,2);{var M=S=>{var L=hc(),k=E(L);k.__click=[gc],_(L),ee(()=>Ce(k,"href",c||"#")),p(S,L)};G(B,S=>{c&&S(M)})}p(x,R)},x=>{Fr(x,{title:"An Error Occured",children:(y,R)=>{tt();var I=Bt("We're having trouble fetching the dataset details right now. Please try again later.");p(y,I)},$$slots:{default:!0}})}),p(r,v),pe(),o()}dt(["click"]);var yc=F('<p> </p> <p> </p> <div><button class="btn preset-outlined-warning-500 hover:preset-filled-warning-500">Remove Invalid Filters</button> <button class="btn preset-outlined-warning-500 hover:preset-filled-warning-500"> </button></div>',1);function xc(r,e){me(e,!0);const n=()=>ce(Pt,"$filterWarning",a),[a,o]=nt();let i=W(e,"open",15,!1);const l={stigmatizing:{message:"Your selected filters contain stigmatizing variables and/or genomic filters, which are not supported with Discover",backTo:"Explore",path:"/discover",back:"/explorer",resetQuery:()=>{Xa(),Va()}},notAuthorized:{message:"You are not authorized to access the data in Explore based on your selected filters.",backTo:"Discover",path:"/explorer",back:"/discover",resetQuery:()=>Ya()},undefined:{message:"",backTo:"",path:"/",back:"/",resetQuery:()=>{}}},c=s(()=>l[n()||"undefined"]);function f(){const h=t(c).back;Pt.set(void 0),i(!1),Ct(h,{keepFocus:!1})}function v(){const h=t(c).path;t(c).resetQuery(),Jt.set(!1),Pt.set(void 0),i(!1),Ct(h,{keepFocus:!1})}Cn(r,{get open(){return i()},onOpenChange:g=>i(g.open),contentBase:"overflow-auto max-w-screen w-1/2 max-h-screen",backdropClasses:"backdrop-blur-sm",ids:{content:"modal-component"},content:g=>{Fr(g,{"data-testid":"sendfilter-warning",color:"warning",children:(u,d)=>{var b=yc(),m=Q(b),x=E(m,!0);_(m);var y=z(m,2),R=E(y);_(y);var I=z(y,2),B=E(I);B.__click=v;var M=z(B,2);M.__click=f;var S=E(M);_(M),_(I),ee(()=>{ge(x,t(c).message),ge(R,`Would you like to remove the invalid filters or go back to ${t(c).backTo??""}?`),ge(S,`Back to ${t(c).backTo??""}`)}),p(u,b)},$$slots:{default:!0}})},$$slots:{content:!0}}),pe(),o()}dt(["click"]);var wc=F('<div id="sidebar-right" class="flex overflow-auto"><!></div>'),_c=F("<!> <!> <!> <!>",1);function dd(r,e){me(e,!0);const n=()=>ce(Ua,"$hasInvalidFilter",i),a=()=>ce(pn,"$hasGenomicFilter",i),o=()=>ce(Ha,"$hasUnallowedFilter",i),[i,l]=nt();let c=ae(!1);sr(()=>{document.body.classList.add("started")});let f=s(()=>(Fe.url.pathname.includes("/explorer")||Fe.url.pathname.includes("/discover"))&&!Fe.url.pathname.includes("/export")&&!Fe.url.pathname.includes("/distributions"));Da(({to:b,cancel:m})=>{const x=(b==null?void 0:b.url.pathname.includes("/explorer"))&&n(),y=(b==null?void 0:b.url.pathname.includes("/discover"))&&(a()||o());(y||x)&&(y?jt(Pt,"stigmatizing"):x&&jt(Pt,"notAuthorized"),m(),A(c,!0))});var v=_c(),h=Q(v);La(h,{get toaster(){return Pa}});var g=z(h,2);xc(g,{get open(){return t(c)},set open(b){A(c,b,!0)}});var u=z(g,2);cc(u,{position:"right",width:"w-1/2",children:(b,m)=>{pc(b,{})},$$slots:{default:!0}});var d=z(u,2);Bi(d,{header:y=>{qi(y,{})},sidebarRight:y=>{var R=ne(),I=Q(R);{var B=M=>{var S=wc(),L=E(S);lc(L,{}),_(S),p(M,S)};G(I,M=>{t(f)&&M(B)})}p(y,R)},pageFooter:y=>{Ma(y,{})},children:(y,R)=>{var I=ne(),B=Q(I);Ne(B,()=>e.children??Qe),p(y,I)},$$slots:{header:!0,sidebarRight:!0,pageFooter:!0,default:!0}}),p(r,v),pe(),l()}export{dd as component};
