import{s as K,e as m,a as x,c as p,b as P,f as v,g as A,l as z,m as r,i as D,h as u,O,a0 as B,n as M,w as et,t as st,d as it,j as ct,p as dt,k as X,q as Z}from"../chunks/scheduler.bui7uCNy.js";import{h as ut,u as ft}from"../chunks/await_block.B6WJ5gpV.js";import{S as Q,i as W,d as Y,e as j,m as F,t as L,a as U,f as G}from"../chunks/index.CNwEczq-.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DAEU1KBT.js";import{P as mt}from"../chunks/ProgressBar.BdFdKLzc.js";import{g as J}from"../chunks/entry.BzyMyMCS.js";import{b as pt}from"../chunks/configuration.D7nHe1C4.js";import{E as vt}from"../chunks/ErrorAlert.VXgRa8sz.js";import{C as ht}from"../chunks/Content.CNl9l_Gf.js";import{T as tt}from"../chunks/Table.6dwzo0We.js";import{g as at}from"../chunks/stores.CGVgmJb2.js";import{g as lt}from"../chunks/stores.EYwnRdwT.js";import{R as nt}from"../chunks/Roles.BLvxXVOx.js";import{P as rt}from"../chunks/Privileges.uzdif1Ra.js";import{A as ot}from"../chunks/Application.DnVPeQuA.js";function bt(o){let t,a,e,l,n,s="View Role",b,$,c,i,C,g,N="Edit",w,S,d,_,T,f,y="Delete",k,I,q;return{c(){t=m("div"),a=m("button"),e=m("i"),l=x(),n=m("span"),n.textContent=s,$=x(),c=m("button"),i=m("i"),C=x(),g=m("span"),g.textContent=N,S=x(),d=m("button"),_=m("i"),T=x(),f=m("span"),f.textContent=y,this.h()},l(E){t=p(E,"DIV",{class:!0});var h=P(t);a=p(h,"BUTTON",{"data-testid":!0,type:!0,title:!0,class:!0});var R=P(a);e=p(R,"I",{class:!0}),P(e).forEach(v),l=A(R),n=p(R,"SPAN",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-14wft3a"&&(n.textContent=s),R.forEach(v),$=A(h),c=p(h,"BUTTON",{"data-testid":!0,type:!0,title:!0,class:!0});var H=P(c);i=p(H,"I",{class:!0}),P(i).forEach(v),C=A(H),g=p(H,"SPAN",{class:!0,"data-svelte-h":!0}),z(g)!=="svelte-1evs4en"&&(g.textContent=N),H.forEach(v),S=A(h),d=p(h,"BUTTON",{"data-testid":!0,type:!0,title:!0,class:!0});var V=P(d);_=p(V,"I",{class:!0}),P(_).forEach(v),T=A(V),f=p(V,"SPAN",{class:!0,"data-svelte-h":!0}),z(f)!=="svelte-18sehy8"&&(f.textContent=y),V.forEach(v),h.forEach(v),this.h()},h(){r(e,"class","fa-solid fa-circle-info fa-xl"),r(n,"class","sr-only"),r(a,"data-testid",b=`role-view-btn-${o[0].cell}`),r(a,"type","button"),r(a,"title","View"),r(a,"class","btn-icon-color"),r(i,"class","fa-solid fa-pen-to-square fa-xl"),r(g,"class","sr-only"),r(c,"data-testid",w=`role-edit-btn-${o[0].cell}`),r(c,"type","button"),r(c,"title","Edit"),r(c,"class","btn-icon-color"),r(_,"class","fa-solid fa-trash fa-xl"),r(f,"class","sr-only"),r(d,"data-testid",k=`role-delete-btn-${o[0].cell}`),r(d,"type","button"),r(d,"title","Delete"),r(d,"class","btn-icon-color"),r(t,"class","w-20 min-w-20")},m(E,h){D(E,t,h),u(t,a),u(a,e),u(a,l),u(a,n),u(t,$),u(t,c),u(c,i),u(c,C),u(c,g),u(t,S),u(t,d),u(d,_),u(d,T),u(d,f),I||(q=[O(a,"click",B(o[2])),O(c,"click",B(o[3])),O(d,"click",B(o[1]))],I=!0)},p(E,[h]){h&1&&b!==(b=`role-view-btn-${E[0].cell}`)&&r(a,"data-testid",b),h&1&&w!==(w=`role-edit-btn-${E[0].cell}`)&&r(c,"data-testid",w),h&1&&k!==(k=`role-delete-btn-${E[0].cell}`)&&r(d,"data-testid",k)},i:M,o:M,d(E){E&&v(t),I=!1,et(q)}}}function gt(o,t,a){const e=at(),l=lt(),{deleteRole:n}=nt;let{data:s={cell:"",row:{name:""}}}=t;function b(){const i=s.row.name;e.trigger({type:"confirm",title:"Delete Role?",body:`Are you sure you want to delete role '${i}'?`,buttonTextConfirm:"Yes",buttonTextCancel:"No",response:async C=>{if(C)try{await n(s.cell),l.trigger({message:`Successfully deleted role '${i}'`,background:"variant-filled-success"})}catch(g){console.error(g),l.trigger({message:`An error occured while deleting role '${i}'`,background:"variant-filled-error"})}}})}const $=()=>J(`/admin/authorization/role/${s.cell}`),c=()=>J(`/admin/authorization/role/${s.cell}/edit`);return o.$$set=i=>{"data"in i&&a(0,s=i.data)},[s,b,$,c]}class _t extends Q{constructor(t){super(),W(this,t,gt,bt,K,{data:0})}}function $t(o){let t,a,e,l,n,s="View Privilege",b,$,c,i,C,g,N="Edit",w,S,d,_,T,f,y="Delete",k,I,q;return{c(){t=m("div"),a=m("button"),e=m("i"),l=x(),n=m("span"),n.textContent=s,$=x(),c=m("button"),i=m("i"),C=x(),g=m("span"),g.textContent=N,S=x(),d=m("button"),_=m("i"),T=x(),f=m("span"),f.textContent=y,this.h()},l(E){t=p(E,"DIV",{class:!0});var h=P(t);a=p(h,"BUTTON",{"data-testid":!0,type:!0,title:!0,class:!0});var R=P(a);e=p(R,"I",{class:!0}),P(e).forEach(v),l=A(R),n=p(R,"SPAN",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1gf6b6d"&&(n.textContent=s),R.forEach(v),$=A(h),c=p(h,"BUTTON",{"data-testid":!0,type:!0,title:!0,class:!0});var H=P(c);i=p(H,"I",{class:!0}),P(i).forEach(v),C=A(H),g=p(H,"SPAN",{class:!0,"data-svelte-h":!0}),z(g)!=="svelte-1evs4en"&&(g.textContent=N),H.forEach(v),S=A(h),d=p(h,"BUTTON",{"data-testid":!0,type:!0,title:!0,class:!0});var V=P(d);_=p(V,"I",{class:!0}),P(_).forEach(v),T=A(V),f=p(V,"SPAN",{class:!0,"data-svelte-h":!0}),z(f)!=="svelte-18sehy8"&&(f.textContent=y),V.forEach(v),h.forEach(v),this.h()},h(){r(e,"class","fa-solid fa-circle-info fa-xl"),r(n,"class","sr-only"),r(a,"data-testid",b=`privilege-view-btn-${o[0].cell}`),r(a,"type","button"),r(a,"title","View"),r(a,"class","btn-icon-color"),r(i,"class","fa-solid fa-pen-to-square fa-xl"),r(g,"class","sr-only"),r(c,"data-testid",w=`privilege-edit-btn-${o[0].cell}`),r(c,"type","button"),r(c,"title","Edit"),r(c,"class","btn-icon-color"),r(_,"class","fa-solid fa-trash fa-xl"),r(f,"class","sr-only"),r(d,"data-testid",k=`privilege-delete-btn-${o[0].cell}`),r(d,"type","button"),r(d,"title","Delete"),r(d,"class","btn-icon-color"),r(t,"class","w-20 min-w-20")},m(E,h){D(E,t,h),u(t,a),u(a,e),u(a,l),u(a,n),u(t,$),u(t,c),u(c,i),u(c,C),u(c,g),u(t,S),u(t,d),u(d,_),u(d,T),u(d,f),I||(q=[O(a,"click",B(o[2])),O(c,"click",B(o[3])),O(d,"click",B(o[1]))],I=!0)},p(E,[h]){h&1&&b!==(b=`privilege-view-btn-${E[0].cell}`)&&r(a,"data-testid",b),h&1&&w!==(w=`privilege-edit-btn-${E[0].cell}`)&&r(c,"data-testid",w),h&1&&k!==(k=`privilege-delete-btn-${E[0].cell}`)&&r(d,"data-testid",k)},i:M,o:M,d(E){E&&v(t),I=!1,et(q)}}}function Ct(o,t,a){const e=at(),l=lt(),{deletePrivilege:n}=rt;let{data:s={cell:"",row:{name:""}}}=t;function b(){const i=s.row.name;e.trigger({type:"confirm",title:"Delete Privilege?",body:`Are you sure you want to delete privilege '${i}'?`,buttonTextConfirm:"Yes",buttonTextCancel:"No",response:async C=>{if(C)try{await n(s.cell),l.trigger({message:`Successfully deleted privilege '${i}'`,background:"variant-filled-success"})}catch(g){console.error(g),l.trigger({message:`An error occured while deleting privilege '${i}'`,background:"variant-filled-error"})}}})}const $=()=>J(`/admin/authorization/privilege/${s.cell}`),c=()=>J(`/admin/authorization/privilege/${s.cell}/edit`);return o.$$set=i=>{"data"in i&&a(0,s=i.data)},[s,b,$,c]}class wt extends Q{constructor(t){super(),W(this,t,Ct,$t,K,{data:0})}}function yt(o){let t=(o[0].cell?o[1](o[0].cell).name:"none")+"",a;return{c(){a=st(t)},l(e){a=it(e,t)},m(e,l){D(e,a,l)},p(e,[l]){l&1&&t!==(t=(e[0].cell?e[1](e[0].cell).name:"none")+"")&&ct(a,t)},i:M,o:M,d(e){e&&v(a)}}}function kt(o,t,a){const{getApplication:e}=ot;let{data:l}=t;return o.$$set=n=>{"data"in n&&a(0,l=n.data)},[l,e]}class Et extends Q{constructor(t){super(),W(this,t,kt,yt,K,{data:0})}}function xt(o){let t,a;return t=new vt({props:{title:"API Error",$$slots:{default:[At]},$$scope:{ctx:o}}}),{c(){Y(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,l){F(t,e,l),a=!0},p(e,l){const n={};l&8192&&(n.$$scope={dirty:l,ctx:e}),t.$set(n)},i(e){a||(L(t.$$.fragment,e),a=!0)},o(e){U(t.$$.fragment,e),a=!1},d(e){G(t,e)}}}function At(o){let t,a="Something went wrong when sending your request.";return{c(){t=m("p"),t.textContent=a},l(e){t=p(e,"P",{"data-svelte-h":!0}),z(t)!=="svelte-n1xg7v"&&(t.textContent=a)},m(e,l){D(e,t,l)},p:M,d(e){e&&v(t)}}}function Pt(o){let t,a,e="Roles Management",l,n,s='<div class="flex-auto"><a data-testid="add-role" class="btn variant-ghost-primary hover:variant-filled-primary" href="/admin/authorization/role/new">+ Add Role</a></div>',b,$,c,i,C,g="Privileges Management",N,w,S='<div class="flex-auto"><a data-testid="add-privilege" class="btn variant-ghost-primary hover:variant-filled-primary" href="/admin/authorization/privilege/new">+ Add Privilege</a></div>',d,_,T;return $=new tt({props:{tableName:"Roles",data:o[0],columns:o[4].columns,cellOverides:o[4].overrides,defaultRowsPerPage:10,rowClickHandler:o[7]}}),_=new tt({props:{tableName:"Privileges",data:o[1],columns:o[5].columns,cellOverides:o[5].overrides,defaultRowsPerPage:10,rowClickHandler:o[8]}}),{c(){t=m("div"),a=m("h2"),a.textContent=e,l=x(),n=m("div"),n.innerHTML=s,b=x(),Y($.$$.fragment),c=x(),i=m("div"),C=m("h2"),C.textContent=g,N=x(),w=m("div"),w.innerHTML=S,d=x(),Y(_.$$.fragment),this.h()},l(f){t=p(f,"DIV",{id:!0,class:!0});var y=P(t);a=p(y,"H2",{"data-svelte-h":!0}),z(a)!=="svelte-iva7uy"&&(a.textContent=e),l=A(y),n=p(y,"DIV",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1ktr2it"&&(n.innerHTML=s),b=A(y),j($.$$.fragment,y),y.forEach(v),c=A(f),i=p(f,"DIV",{id:!0,class:!0});var k=P(i);C=p(k,"H2",{"data-svelte-h":!0}),z(C)!=="svelte-1u9r2oz"&&(C.textContent=g),N=A(k),w=p(k,"DIV",{class:!0,"data-svelte-h":!0}),z(w)!=="svelte-1nztzi8"&&(w.innerHTML=S),d=A(k),j(_.$$.fragment,k),k.forEach(v),this.h()},h(){r(n,"class","flex gap-4 my-6"),r(t,"id","authorization-role-table"),r(t,"class","mb-10"),r(w,"class","flex gap-4 my-6"),r(i,"id","authorization-privilege-table"),r(i,"class","mb-10")},m(f,y){D(f,t,y),u(t,a),u(t,l),u(t,n),u(t,b),F($,t,null),D(f,c,y),D(f,i,y),u(i,C),u(i,N),u(i,w),u(i,d),F(_,i,null),T=!0},p(f,y){const k={};y&1&&(k.data=f[0]),$.$set(k);const I={};y&2&&(I.data=f[1]),_.$set(I)},i(f){T||(L($.$$.fragment,f),L(_.$$.fragment,f),T=!0)},o(f){U($.$$.fragment,f),U(_.$$.fragment,f),T=!1},d(f){f&&(v(t),v(c),v(i)),G($),G(_)}}}function Tt(o){let t,a="Loading",e,l,n;return l=new mt({props:{animIndeterminate:"anim-progress-bar"}}),{c(){t=m("h3"),t.textContent=a,e=x(),Y(l.$$.fragment),this.h()},l(s){t=p(s,"H3",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-16fo5h6"&&(t.textContent=a),e=A(s),j(l.$$.fragment,s),this.h()},h(){r(t,"class","text-left")},m(s,b){D(s,t,b),D(s,e,b),F(l,s,b),n=!0},p:M,i(s){n||(L(l.$$.fragment,s),n=!0)},o(s){U(l.$$.fragment,s),n=!1},d(s){s&&(v(t),v(e)),G(l,s)}}}function Nt(o){let t,a,e={ctx:o,current:null,token:null,hasCatch:!0,pending:Tt,then:Pt,catch:xt,blocks:[,,,]};return ut(o[6](),e),{c(){t=Z(),e.block.c()},l(l){t=Z(),e.block.l(l)},m(l,n){D(l,t,n),e.block.m(l,e.anchor=n),e.mount=()=>t.parentNode,e.anchor=t,a=!0},p(l,n){o=l,ft(e,o,n)},i(l){a||(L(e.block),a=!0)},o(l){for(let n=0;n<3;n+=1){const s=e.blocks[n];U(s)}a=!1},d(l){l&&v(t),e.block.d(l),e.token=null,e=null}}}function St(o){let t,a,e;return document.title=pt.applicationName+" | Authorization",a=new ht({props:{title:"Authorization",$$slots:{default:[Nt]},$$scope:{ctx:o}}}),{c(){t=x(),Y(a.$$.fragment)},l(l){dt("svelte-1m7g26a",document.head).forEach(v),t=A(l),j(a.$$.fragment,l)},m(l,n){D(l,t,n),F(a,l,n),e=!0},p(l,[n]){const s={};n&8195&&(s.$$scope={dirty:n,ctx:l}),a.$set(s)},i(l){e||(L(a.$$.fragment,l),e=!0)},o(l){U(a.$$.fragment,l),e=!1},d(l){l&&v(t),G(a,l)}}}function zt(o,t,a){let e,l;const{roles:n,loadRoles:s}=nt;X(o,n,d=>a(0,e=d));const{privileges:b,loadPrivileges:$}=rt;X(o,b,d=>a(1,l=d));const{loadApplications:c}=ot,i={columns:[{dataElement:"name",label:"Name",sort:!0},{dataElement:"description",label:"Description",sort:!0},{dataElement:"uuid",label:"Actions"}],overrides:{uuid:_t}},C={columns:[{dataElement:"name",label:"Name",sort:!0},{dataElement:"description",label:"Description",sort:!0},{dataElement:"application",label:"Application Name",sort:!0},{dataElement:"uuid",label:"Actions"}],overrides:{uuid:wt,application:Et}};async function g(){await s(),await $(),await c()}const N=d=>_=>{const T=_==null?void 0:_.uuid;J(`/admin/authorization/${d}/${T}`)},w=N("role"),S=N("privilege");return[e,l,n,b,i,C,g,w,S]}class Jt extends Q{constructor(t){super(),W(this,t,zt,St,K,{})}}export{Jt as component};
