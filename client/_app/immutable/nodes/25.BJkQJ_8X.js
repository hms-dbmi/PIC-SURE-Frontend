import{s as H,e as g,t as S,a as A,c as k,b as y,d as B,f as d,g as N,m as f,i as h,h as v,j as L,q as T,n as I,_ as R,u as O,a0 as M,p as J,k as j,l as V}from"../chunks/DfqJWsAP.js";import{h as K,u as Q}from"../chunks/Cn0d3STq.js";import{S as P,i as q,d as w,e as C,m as D,t as b,a as $,f as E,g as W,b as X}from"../chunks/B9sU1H0B.js";import"../chunks/8fc_wYz-.js";import{P as Y}from"../chunks/CTXdiFMz.js";import{D as z}from"../chunks/C6S6wHQS.js";import{E as Z}from"../chunks/P0CHC8Ln.js";import{C as x}from"../chunks/SXpdNYfp.js";import{T as G}from"../chunks/BOL4pBGU.js";import{C as tt}from"../chunks/UvObm0y6.js";import{b as et}from"../chunks/DXXfEZPn.js";function at(s){let t,l,a=s[0].cell+"",e,n,r,o;return r=new tt({props:{"data-testid":s[0].cell+"-copy-btn",useIcon:!0,itemToCopy:s[0].cell}}),{c(){t=g("div"),l=g("span"),e=S(a),n=A(),w(r.$$.fragment),this.h()},l(i){t=k(i,"DIV",{class:!0});var p=y(t);l=k(p,"SPAN",{class:!0});var _=y(l);e=B(_,a),_.forEach(d),n=N(p),C(r.$$.fragment,p),p.forEach(d),this.h()},h(){f(l,"class","monospace"),f(t,"class","flex items-center")},m(i,p){h(i,t,p),v(t,l),v(l,e),v(t,n),D(r,t,null),o=!0},p(i,[p]){(!o||p&1)&&a!==(a=i[0].cell+"")&&L(e,a);const _={};p&1&&(_["data-testid"]=i[0].cell+"-copy-btn"),p&1&&(_.itemToCopy=i[0].cell),r.$set(_)},i(i){o||(b(r.$$.fragment,i),o=!0)},o(i){$(r.$$.fragment,i),o=!1},d(i){i&&d(t),E(r)}}}function lt(s,t,l){let{data:a={cell:"",row:{}}}=t;return s.$$set=e=>{"data"in e&&l(0,a=e.data)},[a]}class nt extends P{constructor(t){super(),q(this,t,lt,at,H,{data:0})}}function rt(s){let t,l,a,e,n;return{c(){t=g("button"),l=g("i"),this.h()},l(r){t=k(r,"BUTTON",{"data-testid":!0,type:!0,title:!0,"aria-label":!0,class:!0});var o=y(t);l=k(o,"I",{class:!0}),y(l).forEach(d),o.forEach(d),this.h()},h(){f(l,"class","fa-solid fa-trash fa-xl"),f(t,"data-testid",a=`dataset-action-archive-${s[0].cell}`),f(t,"type","button"),f(t,"title","Delete"),f(t,"aria-label","Delete"),f(t,"class","btn-icon-color")},m(r,o){h(r,t,o),v(t,l),s[4](t),e||(n=O(t,"click",M(s[2])),e=!0)},p(r,o){o&1&&a!==(a=`dataset-action-archive-${r[0].cell}`)&&f(t,"data-testid",a)},d(r){r&&d(t),s[4](null),e=!1,n()}}}function st(s){let t,l,a,e,n;return{c(){t=g("button"),l=g("i"),this.h()},l(r){t=k(r,"BUTTON",{"data-testid":!0,type:!0,title:!0,"aria-label":!0,class:!0});var o=y(t);l=k(o,"I",{class:!0}),y(l).forEach(d),o.forEach(d),this.h()},h(){f(l,"class","fa-solid fa-trash-arrow-up fa-xl"),f(t,"data-testid",a=`dataset-action-restore-${s[0].cell}`),f(t,"type","button"),f(t,"title","Restore"),f(t,"aria-label","Restore"),f(t,"class","btn-icon-color")},m(r,o){h(r,t,o),v(t,l),s[3](t),e||(n=O(t,"click",M(s[2])),e=!0)},p(r,o){o&1&&a!==(a=`dataset-action-restore-${r[0].cell}`)&&f(t,"data-testid",a)},d(r){r&&d(t),s[3](null),e=!1,n()}}}function ot(s){let t;function l(n,r){return n[0].row.archived?st:rt}let a=l(s),e=a(s);return{c(){e.c(),t=T()},l(n){e.l(n),t=T()},m(n,r){e.m(n,r),h(n,t,r)},p(n,[r]){a===(a=l(n))&&e?e.p(n,r):(e.d(1),e=a(n),e&&(e.c(),e.m(t.parentNode,t)))},i:I,o:I,d(n){n&&d(t),e.d(n)}}}function it(s,t,l){let{data:a={cell:"",row:{archived:!1}}}=t,e;async function n(){l(1,e.disabled=!0,e),z.toggleArchived(a.cell),l(1,e.disabled=!1,e)}function r(i){R[i?"unshift":"push"](()=>{e=i,l(1,e)})}function o(i){R[i?"unshift":"push"](()=>{e=i,l(1,e)})}return s.$$set=i=>{"data"in i&&l(0,a=i.data)},[a,e,n,r,o]}class ct extends P{constructor(t){super(),q(this,t,it,ot,H,{data:0})}}function ut(s){let t,l;return t=new Z({props:{title:"API Error",$$slots:{default:[ft]},$$scope:{ctx:s}}}),{c(){w(t.$$.fragment)},l(a){C(t.$$.fragment,a)},m(a,e){D(t,a,e),l=!0},p(a,e){const n={};e&1024&&(n.$$scope={dirty:e,ctx:a}),t.$set(n)},i(a){l||(b(t.$$.fragment,a),l=!0)},o(a){$(t.$$.fragment,a),l=!1},d(a){E(t,a)}}}function ft(s){let t,l="Something went wrong when sending your request.";return{c(){t=g("p"),t.textContent=l},l(a){t=k(a,"P",{"data-svelte-h":!0}),V(t)!=="svelte-n1xg7v"&&(t.textContent=l)},m(a,e){h(a,t,e)},p:I,d(a){a&&d(t)}}}function dt(s){let t,l,a,e,n=s[0]?"Hide":"Show",r,o,i,p,_;t=new G({props:{tableName:"ActiveDatasets",title:"Active Datasets",data:s[1],columns:s[3],cellOverides:s[4],rowClickHandler:s[8]}});let u=s[0]&&F(s);return{c(){w(t.$$.fragment),l=A(),u&&u.c(),a=A(),e=g("button"),r=S(n),o=S(" deleted datasets"),this.h()},l(c){C(t.$$.fragment,c),l=N(c),u&&u.l(c),a=N(c),e=k(c,"BUTTON",{"data-testid":!0,type:!0,class:!0});var m=y(e);r=B(m,n),o=B(m," deleted datasets"),m.forEach(d),this.h()},h(){f(e,"data-testid","dataset-toggle-archive"),f(e,"type","button"),f(e,"class","btn bg-secondary-500 text-on-secondary-token")},m(c,m){D(t,c,m),h(c,l,m),u&&u.m(c,m),h(c,a,m),h(c,e,m),v(e,r),v(e,o),i=!0,p||(_=O(e,"click",s[9]),p=!0)},p(c,m){const U={};m&2&&(U.data=c[1]),t.$set(U),c[0]?u?(u.p(c,m),m&1&&b(u,1)):(u=F(c),u.c(),b(u,1),u.m(a.parentNode,a)):u&&(W(),$(u,1,1,()=>{u=null}),X()),(!i||m&1)&&n!==(n=c[0]?"Hide":"Show")&&L(r,n)},i(c){i||(b(t.$$.fragment,c),b(u),i=!0)},o(c){$(t.$$.fragment,c),$(u),i=!1},d(c){c&&(d(l),d(a),d(e)),E(t,c),u&&u.d(c),p=!1,_()}}}function F(s){let t,l;return t=new G({props:{tableName:"ArchivedDatasets",title:"Deleted Datasets",data:s[2],columns:s[3],cellOverides:s[4]}}),{c(){w(t.$$.fragment)},l(a){C(t.$$.fragment,a)},m(a,e){D(t,a,e),l=!0},p(a,e){const n={};e&4&&(n.data=a[2]),t.$set(n)},i(a){l||(b(t.$$.fragment,a),l=!0)},o(a){$(t.$$.fragment,a),l=!1},d(a){E(t,a)}}}function mt(s){let t,l="Loading",a,e,n;return e=new Y({props:{animIndeterminate:"anim-progress-bar"}}),{c(){t=g("h3"),t.textContent=l,a=A(),w(e.$$.fragment),this.h()},l(r){t=k(r,"H3",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-16fo5h6"&&(t.textContent=l),a=N(r),C(e.$$.fragment,r),this.h()},h(){f(t,"class","text-left")},m(r,o){h(r,t,o),h(r,a,o),D(e,r,o),n=!0},p:I,i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){r&&(d(t),d(a)),E(e,r)}}}function pt(s){let t,l,a={ctx:s,current:null,token:null,hasCatch:!0,pending:mt,then:dt,catch:ut,blocks:[,,,]};return K(s[7](),a),{c(){t=T(),a.block.c()},l(e){t=T(),a.block.l(e)},m(e,n){h(e,t,n),a.block.m(e,a.anchor=n),a.mount=()=>t.parentNode,a.anchor=t,l=!0},p(e,n){s=e,Q(a,s,n)},i(e){l||(b(a.block),l=!0)},o(e){for(let n=0;n<3;n+=1){const r=a.blocks[n];$(r)}l=!1},d(e){e&&d(t),a.block.d(e),a.token=null,a=null}}}function _t(s){let t,l,a;return document.title=et.applicationName+" | Datasets",l=new x({props:{title:"Manage Datasets",$$slots:{default:[pt]},$$scope:{ctx:s}}}),{c(){t=A(),w(l.$$.fragment)},l(e){J("svelte-hk92pg",document.head).forEach(d),t=N(e),C(l.$$.fragment,e)},m(e,n){h(e,t,n),D(l,e,n),a=!0},p(e,[n]){const r={};n&1031&&(r.$$scope={dirty:n,ctx:e}),l.$set(r)},i(e){a||(b(l.$$.fragment,e),a=!0)},o(e){$(l.$$.fragment,e),a=!1},d(e){e&&d(t),E(l,e)}}}function ht(s,t,l){let a,e;const n=[{dataElement:"name",label:"Dataset ID Name"},{dataElement:"startTime",label:"Created"},{dataElement:"queryId",label:"Dataset ID"},{dataElement:"uuid",label:"Actions"}],r={queryId:nt,uuid:ct};let{active:o,archived:i,loadDatasets:p}=z;j(s,o,m=>l(1,a=m)),j(s,i,m=>l(2,e=m));let _=!1;return[_,a,e,n,r,o,i,p,()=>{console.error("Function not implemented.")},()=>l(0,_=!_)]}class Nt extends P{constructor(t){super(),q(this,t,ht,_t,H,{})}}export{Nt as component};
