import{s as O,e as g,t as S,a as A,c as k,b as y,d as B,f,g as N,m,i as h,h as v,j as M,q as T,n as I,Y as j,O as H,a0 as R,p as G,k as F,l as V}from"../chunks/scheduler.bui7uCNy.js";import{h as J,u as K}from"../chunks/await_block.B6WJ5gpV.js";import{S as P,i as q,d as w,e as C,m as D,t as b,a as $,f as E,g as Q,b as W}from"../chunks/index.CNwEczq-.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DAEU1KBT.js";import{P as X}from"../chunks/ProgressBar.BdFdKLzc.js";import{D as Y}from"../chunks/Dataset.jGvDPRAH.js";import{E as Z}from"../chunks/ErrorAlert.VXgRa8sz.js";import{C as x}from"../chunks/Content.CNl9l_Gf.js";import{T as z}from"../chunks/Table.6dwzo0We.js";import{C as tt}from"../chunks/CopyButton.8PIXlBbJ.js";import{b as et}from"../chunks/configuration.D7nHe1C4.js";function at(r){let t,n,a=r[0].cell+"",e,l,s,o;return s=new tt({props:{"data-testid":r[0].cell+"-copy-btn",useIcon:!0,itemToCopy:r[0].cell}}),{c(){t=g("div"),n=g("span"),e=S(a),l=A(),w(s.$$.fragment),this.h()},l(i){t=k(i,"DIV",{class:!0});var p=y(t);n=k(p,"SPAN",{class:!0});var _=y(n);e=B(_,a),_.forEach(f),l=N(p),C(s.$$.fragment,p),p.forEach(f),this.h()},h(){m(n,"class","monospace"),m(t,"class","flex items-center")},m(i,p){h(i,t,p),v(t,n),v(n,e),v(t,l),D(s,t,null),o=!0},p(i,[p]){(!o||p&1)&&a!==(a=i[0].cell+"")&&M(e,a);const _={};p&1&&(_["data-testid"]=i[0].cell+"-copy-btn"),p&1&&(_.itemToCopy=i[0].cell),s.$set(_)},i(i){o||(b(s.$$.fragment,i),o=!0)},o(i){$(s.$$.fragment,i),o=!1},d(i){i&&f(t),E(s)}}}function nt(r,t,n){let{data:a={cell:"",row:{}}}=t;return r.$$set=e=>{"data"in e&&n(0,a=e.data)},[a]}class lt extends P{constructor(t){super(),q(this,t,nt,at,O,{data:0})}}function st(r){let t,n,a,e,l;return{c(){t=g("button"),n=g("i"),this.h()},l(s){t=k(s,"BUTTON",{"data-testid":!0,type:!0,title:!0,class:!0});var o=y(t);n=k(o,"I",{class:!0}),y(n).forEach(f),o.forEach(f),this.h()},h(){m(n,"class","fa-solid fa-trash fa-xl"),m(t,"data-testid",a=`dataset-action-archive-${r[0].cell}`),m(t,"type","button"),m(t,"title","Delete"),m(t,"class","btn-icon-color")},m(s,o){h(s,t,o),v(t,n),r[4](t),e||(l=H(t,"click",R(r[2])),e=!0)},p(s,o){o&1&&a!==(a=`dataset-action-archive-${s[0].cell}`)&&m(t,"data-testid",a)},d(s){s&&f(t),r[4](null),e=!1,l()}}}function rt(r){let t,n,a,e,l;return{c(){t=g("button"),n=g("i"),this.h()},l(s){t=k(s,"BUTTON",{"data-testid":!0,type:!0,title:!0,class:!0});var o=y(t);n=k(o,"I",{class:!0}),y(n).forEach(f),o.forEach(f),this.h()},h(){m(n,"class","fa-solid fa-trash-arrow-up fa-xl"),m(t,"data-testid",a=`dataset-action-restore-${r[0].cell}`),m(t,"type","button"),m(t,"title","Restore"),m(t,"class","btn-icon-color")},m(s,o){h(s,t,o),v(t,n),r[3](t),e||(l=H(t,"click",R(r[2])),e=!0)},p(s,o){o&1&&a!==(a=`dataset-action-restore-${s[0].cell}`)&&m(t,"data-testid",a)},d(s){s&&f(t),r[3](null),e=!1,l()}}}function ot(r){let t;function n(l,s){return l[0].row.archived?rt:st}let a=n(r),e=a(r);return{c(){e.c(),t=T()},l(l){e.l(l),t=T()},m(l,s){e.m(l,s),h(l,t,s)},p(l,[s]){a===(a=n(l))&&e?e.p(l,s):(e.d(1),e=a(l),e&&(e.c(),e.m(t.parentNode,t)))},i:I,o:I,d(l){l&&f(t),e.d(l)}}}function it(r,t,n){let{data:a={cell:"",row:{archived:!1}}}=t,e;async function l(){n(1,e.disabled=!0,e),Y.toggleArchived(a.cell),n(1,e.disabled=!1,e)}function s(i){j[i?"unshift":"push"](()=>{e=i,n(1,e)})}function o(i){j[i?"unshift":"push"](()=>{e=i,n(1,e)})}return r.$$set=i=>{"data"in i&&n(0,a=i.data)},[a,e,l,s,o]}class ct extends P{constructor(t){super(),q(this,t,it,ot,O,{data:0})}}function ut(r){let t,n;return t=new Z({props:{title:"API Error",$$slots:{default:[ft]},$$scope:{ctx:r}}}),{c(){w(t.$$.fragment)},l(a){C(t.$$.fragment,a)},m(a,e){D(t,a,e),n=!0},p(a,e){const l={};e&1024&&(l.$$scope={dirty:e,ctx:a}),t.$set(l)},i(a){n||(b(t.$$.fragment,a),n=!0)},o(a){$(t.$$.fragment,a),n=!1},d(a){E(t,a)}}}function ft(r){let t,n="Something went wrong when sending your request.";return{c(){t=g("p"),t.textContent=n},l(a){t=k(a,"P",{"data-svelte-h":!0}),V(t)!=="svelte-n1xg7v"&&(t.textContent=n)},m(a,e){h(a,t,e)},p:I,d(a){a&&f(t)}}}function dt(r){let t,n,a,e,l=r[0]?"Hide":"Show",s,o,i,p,_;t=new z({props:{tableName:"ActiveDatasets",title:"Active Datasets",data:r[1],columns:r[3],cellOverides:r[4],rowClickHandler:r[8]}});let u=r[0]&&L(r);return{c(){w(t.$$.fragment),n=A(),u&&u.c(),a=A(),e=g("button"),s=S(l),o=S(" deleted datasets"),this.h()},l(c){C(t.$$.fragment,c),n=N(c),u&&u.l(c),a=N(c),e=k(c,"BUTTON",{"data-testid":!0,type:!0,class:!0});var d=y(e);s=B(d,l),o=B(d," deleted datasets"),d.forEach(f),this.h()},h(){m(e,"data-testid","dataset-toggle-archive"),m(e,"type","button"),m(e,"class","btn bg-secondary-500 text-on-secondary-token")},m(c,d){D(t,c,d),h(c,n,d),u&&u.m(c,d),h(c,a,d),h(c,e,d),v(e,s),v(e,o),i=!0,p||(_=H(e,"click",r[9]),p=!0)},p(c,d){const U={};d&2&&(U.data=c[1]),t.$set(U),c[0]?u?(u.p(c,d),d&1&&b(u,1)):(u=L(c),u.c(),b(u,1),u.m(a.parentNode,a)):u&&(Q(),$(u,1,1,()=>{u=null}),W()),(!i||d&1)&&l!==(l=c[0]?"Hide":"Show")&&M(s,l)},i(c){i||(b(t.$$.fragment,c),b(u),i=!0)},o(c){$(t.$$.fragment,c),$(u),i=!1},d(c){c&&(f(n),f(a),f(e)),E(t,c),u&&u.d(c),p=!1,_()}}}function L(r){let t,n;return t=new z({props:{tableName:"ArchivedDatasets",title:"Deleted Datasets",data:r[2],columns:r[3],cellOverides:r[4]}}),{c(){w(t.$$.fragment)},l(a){C(t.$$.fragment,a)},m(a,e){D(t,a,e),n=!0},p(a,e){const l={};e&4&&(l.data=a[2]),t.$set(l)},i(a){n||(b(t.$$.fragment,a),n=!0)},o(a){$(t.$$.fragment,a),n=!1},d(a){E(t,a)}}}function mt(r){let t,n="Loading",a,e,l;return e=new X({props:{animIndeterminate:"anim-progress-bar"}}),{c(){t=g("h3"),t.textContent=n,a=A(),w(e.$$.fragment),this.h()},l(s){t=k(s,"H3",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-16fo5h6"&&(t.textContent=n),a=N(s),C(e.$$.fragment,s),this.h()},h(){m(t,"class","text-left")},m(s,o){h(s,t,o),h(s,a,o),D(e,s,o),l=!0},p:I,i(s){l||(b(e.$$.fragment,s),l=!0)},o(s){$(e.$$.fragment,s),l=!1},d(s){s&&(f(t),f(a)),E(e,s)}}}function pt(r){let t,n,a={ctx:r,current:null,token:null,hasCatch:!0,pending:mt,then:dt,catch:ut,blocks:[,,,]};return J(r[7](),a),{c(){t=T(),a.block.c()},l(e){t=T(),a.block.l(e)},m(e,l){h(e,t,l),a.block.m(e,a.anchor=l),a.mount=()=>t.parentNode,a.anchor=t,n=!0},p(e,l){r=e,K(a,r,l)},i(e){n||(b(a.block),n=!0)},o(e){for(let l=0;l<3;l+=1){const s=a.blocks[l];$(s)}n=!1},d(e){e&&f(t),a.block.d(e),a.token=null,a=null}}}function _t(r){let t,n,a;return document.title=et.applicationName+" | Datasets",n=new x({props:{title:"Manage Datasets",$$slots:{default:[pt]},$$scope:{ctx:r}}}),{c(){t=A(),w(n.$$.fragment)},l(e){G("svelte-hk92pg",document.head).forEach(f),t=N(e),C(n.$$.fragment,e)},m(e,l){h(e,t,l),D(n,e,l),a=!0},p(e,[l]){const s={};l&1031&&(s.$$scope={dirty:l,ctx:e}),n.$set(s)},i(e){a||(b(n.$$.fragment,e),a=!0)},o(e){$(n.$$.fragment,e),a=!1},d(e){e&&f(t),E(n,e)}}}function ht(r,t,n){let a,e;const l=[{dataElement:"name",label:"Dataset ID Name"},{dataElement:"startTime",label:"Created"},{dataElement:"queryId",label:"Dataset ID"},{dataElement:"uuid",label:"Actions"}],s={queryId:lt,uuid:ct};let{active:o,archived:i,loadDatasets:p}=Y;F(r,o,d=>n(1,a=d)),F(r,i,d=>n(2,e=d));let _=!1;return[_,a,e,l,s,o,i,p,()=>{console.error("Function not implemented.")},()=>n(0,_=!_)]}class Nt extends P{constructor(t){super(),q(this,t,ht,_t,O,{})}}export{Nt as component};
