import{s as v,e as y,c as S,b as w,f as c,m as b,i as p,k as C,o as P,a as $,l as k,g as T}from"../chunks/scheduler.bui7uCNy.js";import{S as O,i as j,t as l,a as u,b as E,d as J,e as N,m as q,f as F,g as H}from"../chunks/index.Divvo4fc.js";import{p as L}from"../chunks/stores.CGSu9-ky.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.B7SkmbeT.js";import{P as M}from"../chunks/ProgressRadial.CtNAsR5Q.js";import{g as d}from"../chunks/entry.D9nKiiu7.js";import{c as R}from"../chunks/AuthProviderRegistry.C01toUd8.js";import{f as W}from"../chunks/Filter.BoavJqGc.js";import{p as z}from"../chunks/SidePanel.P7QvXKLj.js";function x(n){let s,a="Logging you in...",e,t,r;return t=new M({props:{width:"w-20"}}),{c(){s=y("h1"),s.textContent=a,e=$(),J(t.$$.fragment),this.h()},l(o){s=S(o,"H1",{class:!0,"data-svelte-h":!0}),k(s)!=="svelte-jsohhr"&&(s.textContent=a),e=T(o),N(t.$$.fragment,o),this.h()},h(){b(s,"class","m-10")},m(o,i){p(o,s,i),p(o,e,i),q(t,o,i),r=!0},i(o){r||(l(t.$$.fragment,o),r=!0)},o(o){u(t.$$.fragment,o),r=!1},d(o){o&&(c(s),c(e)),F(t,o)}}}function A(n){let s,a,e=!n[0]&&x();return{c(){s=y("section"),e&&e.c(),this.h()},l(t){s=S(t,"SECTION",{class:!0});var r=w(s);e&&e.l(r),r.forEach(c),this.h()},h(){b(s,"class","w-full h-full flex flex-col justify-center items-center")},m(t,r){p(t,s,r),e&&e.m(s,null),a=!0},p(t,[r]){t[0]?e&&(H(),u(e,1,1,()=>{e=null}),E()):e?r&1&&l(e,1):(e=x(),e.c(),l(e,1),e.m(s,null))},i(t){a||(l(e),a=!0)},o(t){u(e),a=!1},d(t){t&&c(s),e&&e.d()}}}function B(n,s,a){let e;C(n,L,r=>a(1,e=r));let t=!1;return P(async()=>{var g,_;z.set(!1);let r="/",o;r=sessionStorage.getItem("redirect")||"/",o=sessionStorage.getItem("type"),o||a(0,t=!0),r=r||"/";const i=(g=e.data)==null?void 0:g.providers.find(m=>m.type===o);i||a(0,t=!0),(!i||t)&&d("/login/error");const I=await R(i);let f=((_=e.url.hash)==null?void 0:_.split("&"))||[];e.url.search.startsWith("?")&&(f=e.url.search.substring(1).split("&")||[]),console.log("hashParts",f),a(0,t=await I.authenticate(f));let h=sessionStorage.getItem("filters");if(h){let m=JSON.parse(h||"[]");W.set(m),setTimeout(()=>sessionStorage.setItem("filters","[]"),500)}d(t?"/login/error":r)}),[t]}class ee extends O{constructor(s){super(),j(this,s,B,A,v,{})}}export{ee as component};
