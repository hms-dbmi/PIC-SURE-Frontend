import{s as R,q as C,i as f,n as c,f as i,e as _,t as L,c as g,b as $,d as M,m as u,h as T,u as x,a0 as B,x as H,a as N,p as O,g as q,o as z,a6 as j}from"../chunks/DfqJWsAP.js";import{h as F,u as J}from"../chunks/Cn0d3STq.js";import{S,i as G,d as k,e as w,m as v,t as h,a as b,f as y}from"../chunks/B9sU1H0B.js";import{g as K}from"../chunks/D5x_jT-A.js";import"../chunks/8fc_wYz-.js";import{P as Q}from"../chunks/CTXdiFMz.js";import{b as U,f as D}from"../chunks/DXXfEZPn.js";import{C as V}from"../chunks/SXpdNYfp.js";import{T as W}from"../chunks/BOL4pBGU.js";import{w as P}from"../chunks/DA0IzwqI.js";import{u as X,g as Y}from"../chunks/BB8gGrUk.js";function Z(o){let e,r,t,n;return{c(){e=_("a"),r=L("More Info"),this.h()},l(a){e=g(a,"A",{href:!0,title:!0,class:!0,target:!0});var s=$(e);r=M(s,"More Info"),s.forEach(i),this.h()},h(){u(e,"href",o[0]||"#"),u(e,"title",o[0]?"More Info":"Link not available"),u(e,"class","btn variant-ghost-primary hover:variant-filled-primary"+(o[0]?"":" opacity-50 cursor-not-allowed")),u(e,"target","_blank")},m(a,s){f(a,e,s),T(e,r),t||(n=x(e,"click",B(o[3])),t=!0)},p:c,d(a){a&&i(e),t=!1,n()}}}function ee(o){let e;return{c(){e=_("i"),this.h()},l(r){e=g(r,"I",{class:!0}),$(e).forEach(i),this.h()},h(){u(e,"class","fa-regular fa-circle-check text-3xl text-success-500")},m(r,t){f(r,e,t)},p:c,d(r){r&&i(e)}}}function te(o){let e;function r(a,s){return a[1]?ee:Z}let n=r(o)(o);return{c(){n.c(),e=C()},l(a){n.l(a),e=C()},m(a,s){n.m(a,s),f(a,e,s)},p(a,[s]){n.p(a,s)},i:c,o:c,d(a){a&&i(e),n.d(a)}}}function ne(o,e,r){let{data:t={row:{additional_info_link:"",consentGranted:!1}}}=e,n=t.row.additional_info_link,a=t.row.consentGranted;const s=l=>!n&&l.preventDefault();return o.$$set=l=>{"data"in l&&r(2,t=l.data)},[n,a,t,s]}class ae extends S{constructor(e){super(),G(this,e,ne,te,R,{data:2})}}const I=P([]),A=P([]);function re(){return Y("picsure/proxy/dictionary-api/dashboard")}async function oe(){const o=await re();I.set(o.columns),H(X);let e=[];const t=o.rows.map(se(e)).sort((n,a)=>{var m,p;const s=(((m=n.program_name)==null?void 0:m.toString().toLowerCase())||"")==="anvil",l=(((p=a.program_name)==null?void 0:p.toString().toLowerCase())||"")==="anvil";return s!==l?s?1:-1:n.consentGranted===a.consentGranted?ce(n,a):n.consentGranted?-1:1});A.set(t)}function se(o){return e=>{if(!e.accession)return{...e,consentGranted:!1};const r=e.accession.toString();if(/^phs\d+\.v\d+\.p\d+\.c\d+$/.test(r)){const n=r.replace(/\.v\d+\.p\d+/,"");return{...e,consentGranted:o.includes(n)}}return{...e,consentGranted:o.includes(r)}}}function ce(o,e){var n,a;const r=((n=o.abbreviation)==null?void 0:n.toString())||"",t=((a=e.abbreviation)==null?void 0:a.toString())||"";return r.localeCompare(t)}function le(o){return{c,l:c,m:c,p:c,i:c,o:c,d:c}}function ie(o){let e,r;return e=new W({props:{tableName:me,data:o[1],columns:o[0],cellOverides:o[2],defaultRowsPerPage:o[1].length,search:!1,showPagination:!1,stickyHeader:!0,rowClickHandler:D.dashboardDrawer?o[4]:void 0,isClickable:D.dashboardDrawer}}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){v(e,t,n),r=!0},p(t,n){const a={};n&2&&(a.data=t[1]),n&1&&(a.columns=t[0]),n&2&&(a.defaultRowsPerPage=t[1].length),e.$set(a)},i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function ue(o){let e,r;return e=new Q({props:{animIndeterminate:"anim-progress-bar"}}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){v(e,t,n),r=!0},p:c,i(t){r||(h(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){y(e,t)}}}function de(o){let e,r,t={ctx:o,current:null,token:null,hasCatch:!1,pending:ue,then:ie,catch:le,blocks:[,,,]};return F(o[3],t),{c(){e=_("section"),t.block.c(),this.h()},l(n){e=g(n,"SECTION",{id:!0,class:!0});var a=$(e);t.block.l(a),a.forEach(i),this.h()},h(){u(e,"id","data-container"),u(e,"class","")},m(n,a){f(n,e,a),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,r=!0},p(n,a){o=n,J(t,o,a)},i(n){r||(h(t.block),r=!0)},o(n){for(let a=0;a<3;a+=1){const s=t.blocks[a];b(s)}r=!1},d(n){n&&i(e),t.block.d(),t.token=null,t=null}}}function fe(o){let e,r,t;return document.title=U.applicationName,r=new V({props:{title:"Data Dashboard",class:"content-center",full:!0,$$slots:{default:[de]},$$scope:{ctx:o}}}),{c(){e=N(),k(r.$$.fragment)},l(n){O("svelte-1uz9aip",document.head).forEach(i),e=q(n),w(r.$$.fragment,n)},m(n,a){f(n,e,a),v(r,n,a),t=!0},p(n,[a]){const s={};a&259&&(s.$$scope={dirty:a,ctx:n}),r.$set(s)},i(n){t||(h(r.$$.fragment,n),t=!0)},o(n){b(r.$$.fragment,n),t=!1},d(n){n&&i(e),y(r,n)}}}const me="ExplorerTable";function pe(o,e,r){const t=K();let n,a,s=[],l=[];const m={additional_info_link:ae},p=oe();z(()=>{n=I.subscribe(d=>r(0,s=d)),a=A.subscribe(d=>{r(1,l=d)})}),j(()=>{n&&n(),a&&a()});function E(d){t.open({id:"dashboard-drawer",meta:{row:d}})}return[s,l,m,p,E]}class Re extends S{constructor(e){super(),G(this,e,pe,fe,R,{})}}export{Re as component};
