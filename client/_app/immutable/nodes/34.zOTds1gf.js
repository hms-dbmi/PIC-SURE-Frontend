import{f as p,a as n,t as at}from"../chunks/CtfeAAbw.js";import{o as st,a as ot}from"../chunks/DlIBaGjY.js";import{p as lt,b as it,d as nt,a as ct,t as h,f as Z,s as j,e as ut,$ as pt,c as u,r as s,g as t,h as F,n as mt}from"../chunks/B4GrenNm.js";import{h as ft,s as P}from"../chunks/DxSOTiY2.js";import{a as M}from"../chunks/bf3FOAR_.js";import{e as S,i as O}from"../chunks/BdG0KSB2.js";import{b as Q,c as dt}from"../chunks/BPiAbArq.js";import{s as vt,a as U,c as q}from"../chunks/DvPjbdiY.js";import{b as G}from"../chunks/CHRSknKA.js";import{S as y,c as z,a as ht}from"../chunks/EJhFMS5q.js";import{r as xt}from"../chunks/4cc1tg3A.js";import{p as H}from"../chunks/M_WnVc2Q.js";import{h as _t,f as bt}from"../chunks/yAhaO9Md.js";import{C as $t}from"../chunks/DpviI_uJ.js";import{L as I}from"../chunks/B7pZD2Tm.js";var yt=p("<th> </th>"),gt=p('<i class="fa-solid fa-circle-xmark text-error-500 w-full text-center"></i>'),kt=p("<td><!></td>"),Ct=p("<tr></tr>"),Dt=p('<div class="table-wrap"><table class="table caption-bottom"><thead><tr></tr></thead><tbody></tbody></table></div> <ul id="cohort-key" class="w-full flex text-center py-3"><li class="flex-auto">"0" = Site returned zero results</li> <li class="flex-auto">"-" = No data for that site</li> <li class="flex-auto"><i class="fa-solid fa-circle-xmark text-error-500"></i> = Site did not return results</li></ul>',1),Tt=p('<p class="text-center"> </p> <!>',1);function Qt(J,K){lt(K,!0);const[A,V]=vt(),W=()=>U(xt,"$resultCounts",A),B=()=>U(bt,"$resourcesPromise",A),E="-",m={center:"!text-center",left:"!text-left",stat:"font-bold",field:""};let x=it(nt([])),L=F(()=>[{style:m.left,value:"Details"},{style:m.center,value:"Total"},...t(x).map(o=>({style:m.center,value:o}))]),X=F(()=>t(x).length>0?Y(W(),t(x)):[]);function Y(o,g){let c=[];return o.forEach(r=>{const k=Promise.allSettled(y.list(r)).then(a=>z(a.map(y.valueOrZero))),C=g.map(a=>r.result[a].then(i=>z([i])));c.push({style:m.stat,values:[r.label,k,...C]}),ht(r.key).forEach(a=>{const i=e=>{const f=typeof e=="object"?e[a.conceptPath]||E:e;return`${f}`=="-1"?E:f},_=Promise.allSettled(y.list(r)).then(e=>z(e.map(y.valueOrZero).map(i))),b=g.map(e=>r.result[e].then(i));c.push({style:m.field,values:[a.label,_,...b]})})}),c}st(async()=>{await B(),ut(x,_t().map(({name:o})=>o),!0),q(H,!1)}),ot(()=>{q(H,!0)}),ft(o=>{h(()=>pt.title=`${G.applicationName??""} | Cohort Details`)}),$t(J,{full:!0,backUrl:"/explorer",backTitle:"Back to Cohort Builder",title:"Cohort Details",children:(o,g)=>{var c=Tt(),r=Z(c),k=u(r,!0);s(r);var C=j(r,2);M(C,B,a=>{I(a,{ring:!0,size:"large"})},a=>{var i=Dt(),_=Z(i),b=u(_),e=u(b),f=u(e);S(f,21,()=>t(L),O,(D,d)=>{var l=yt(),T=u(l,!0);s(l),h(()=>{Q(l,1,dt(t(d).style)),P(T,t(d).value)}),n(D,l)}),s(f),s(e);var N=j(e);S(N,21,()=>t(X),O,(D,d)=>{var l=Ct();S(l,21,()=>t(d).values,O,(T,tt,et)=>{var $=kt(),rt=u($);M(rt,()=>t(tt),v=>{I(v,{ring:!0,size:"micro"})},(v,w)=>{var R=at();h(()=>P(R,t(w))),n(v,R)},v=>{var w=gt();n(v,w)}),s($),h(()=>Q($,1,`${t(L)[et].style??""} ${t(d).style??""}`)),n(T,$)}),s(l),n(D,l)}),s(N),s(b),s(_),mt(2),n(a,i)}),h(()=>P(k,G.results.cohortDescription||"Distribution of total patient counts across networked institutions.")),n(o,c)},$$slots:{default:!0}}),ct(),V()}export{Qt as component};
