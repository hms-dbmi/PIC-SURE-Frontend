var ra=Object.defineProperty;var qr=r=>{throw TypeError(r)};var na=(r,e,n)=>e in r?ra(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var se=(r,e,n)=>na(r,typeof e!="symbol"?e+"":e,n),Hr=(r,e,n)=>e.has(r)||qr("Cannot "+n);var Ht=(r,e,n)=>(Hr(r,e,"read from private field"),n?n.call(r):e.get(r)),hr=(r,e,n)=>e.has(r)?qr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,n),br=(r,e,n,a)=>(Hr(r,e,"write to private field"),a?a.call(r,n):e.set(r,n),n);import"../chunks/Bzak7iHL.js";import{o as sr,g as aa,a as vn}from"../chunks/xU7jw7XU.js";import{bd as ia,k as t,a3 as oa,R as sa,S as lt,be as Kr,T as la,v as Zr,w as ca,q as da,bf as ua,L as fa,A as va,M as ga,N as ha,D as ba,U as ma,P as pa,f as F,d as E,s as B,r as _,t as te,b as p,aH as ya,p as me,u as s,c as pe,e as ie,a as Z,j as zt,B as Ze,l as A,h as oe,o as ee,i as gt,b0 as xa,aO as wa,aP as lr,au as Xt,m as ht,bc as Pe,at as vt,n as tt}from"../chunks/DhSNEPDw.js";import{i as G}from"../chunks/BG76zvuN.js";import{s as Ae}from"../chunks/C8tG8t5X.js";import{p as W,r as gn,a as de,s as nt,b as _a,c as Bt,e as Ra}from"../chunks/DpjY2ypC.js";import{p as Fe}from"../chunks/Jem-ehAR.js";import{g as Ct,b as Sa}from"../chunks/Dkbkn6HV.js";import{A as Da,aA as Ca,aB as ka,I as Ea,K as Ta,aC as Ia,O as Aa,u as Oa,R as Na,t as Fa}from"../chunks/M2p3ZkHt.js";import{T as Pa,F as La}from"../chunks/fouGjB6M.js";import{r as Ma,O as Jr,s as hn,t as bn,u as xt,v as za,f as kt,g as Ba,a as ut,p as st,c as mr,q as ja,w as Wa,h as mn,x as Ga,y as Ft,z as Ya,B as Xa,C as Va,D as Ua,E as qa}from"../chunks/Bji3XOvx.js";import{f as et,b as Jt}from"../chunks/BOAiLg0g.js";import{s as be,r as Ha,d as ct,o as Qr,m as Ka,u as Za}from"../chunks/DVtHS8ol.js";import{e as at,i as bt}from"../chunks/ByI6iVq5.js";import{s as Ke,g as _t,b as Ce,a as Nr,c as Ja,i as Qa,j as $a}from"../chunks/aV0zye_u.js";import{c as ei,u as ti,n as ri,L as pn}from"../chunks/CzbepVLR.js";import{c as ni}from"../chunks/DExt_NHW.js";import{L as ai}from"../chunks/_LI2_7jk.js";import{P as yn}from"../chunks/CM2gWXT6.js";import{e as xn,E as Sr,c as ii}from"../chunks/eUoM9-xI.js";import{t as Rt,b as wn,a as _n,s as Rn}from"../chunks/BbooiKwf.js";import{e as Sn}from"../chunks/BqrDejZS.js";import{S as oi}from"../chunks/D6DWNZYd.js";import{r as si,l as Kt,c as li,h as ci}from"../chunks/Cnvmmg-i.js";import{b as jt}from"../chunks/C0kNAPzX.js";import{p as di,k as ui}from"../chunks/Qw6Ii7Tz.js";import{a as fi,M as Pt,b as Dn}from"../chunks/BinYu0ZY.js";import{a as vi,A as gi}from"../chunks/dJtbhcX9.js";import{e as hi}from"../chunks/BmWUWu0n.js";import{C as Ot}from"../chunks/Cr1yGYQD.js";import{a as Cn}from"../chunks/Jhkhy7E3.js";import{h as bi}from"../chunks/DgX2KM8m.js";import{S as wt,c as mi}from"../chunks/DXULH1lJ.js";import{E as Fr}from"../chunks/CQQkdEes.js";import{H as pi}from"../chunks/Cn1EkP4j.js";import{s as yi}from"../chunks/COZ3s8UQ.js";import{p as Qt}from"../chunks/B1n7kAsq.js";import{o as $r,a as xi}from"../chunks/Ctt0TNon.js";import{q as wi}from"../chunks/CHznAy_H.js";function _i(r){let e=0,n=oa(0),a;return()=>{ia()&&(t(n),sa(()=>(e===0&&(a=lt(()=>r(()=>Kr(n)))),e+=1,()=>{la(()=>{e-=1,e===0&&(a==null||a(),a=void 0,Kr(n))})})))}}function cr(r,e,n){Zr&&ca();var a=r,o=ma,i,l,c=null,f=ua;function v(){i&&pa(i),c!==null&&(c.lastChild.remove(),a.before(c),c=null),i=l}da(()=>{if(f(o,o=e())){var h=a,g=ha();g&&(c=document.createDocumentFragment(),c.append(h=fa())),l=va(()=>n(h)),g?ga.add_callback(v):v()}}),Zr&&(a=ba)}var Ri=F("<div><!></div>"),Si=F("<div><!></div>"),Di=F("<div><!></div>"),Ci=F('<section data-testid="app-bar-headline"><!></section>'),ki=F('<header data-testid="app-bar"><section data-testid="app-bar-toolbar"><!> <!> <!></section> <!></header>');function Ei(r,e){const n=W(e,"base",3,"w-full flex flex-col"),a=W(e,"background",3,"bg-surface-100-900"),o=W(e,"spaceY",3,"space-y-4"),i=W(e,"border",3,""),l=W(e,"padding",3,"p-4"),c=W(e,"shadow",3,""),f=W(e,"classes",3,""),v=W(e,"toolbarBase",3,"flex justify-between"),h=W(e,"toolbarGridCols",3,"grid-cols-[auto_1fr_auto]"),g=W(e,"toolbarGap",3,"gap-4"),u=W(e,"toolbarClasses",3,""),d=W(e,"leadBase",3,"flex"),b=W(e,"leadSpaceX",3,"space-x-4 rtl:space-x-reverse"),m=W(e,"leadPadding",3,""),x=W(e,"leadClasses",3,""),y=W(e,"centerBase",3,"grow"),k=W(e,"centerAlign",3,"text-center"),I=W(e,"centerPadding",3,""),M=W(e,"centerClasses",3,""),z=W(e,"trailBase",3,"flex"),D=W(e,"trailSpaceX",3,"space-x-4 rtl:space-x-reverse"),L=W(e,"trailPadding",3,""),C=W(e,"trailClasses",3,""),O=W(e,"headlineBase",3,"w-full"),R=W(e,"headlineClasses",3,"");var N=ki(),T=E(N),Y=E(T);{var j=S=>{var X=Ri(),re=E(X);Ae(re,()=>e.lead),_(X),te(()=>Ke(X,1,`${d()??""} ${b()??""} ${m()??""} ${x()??""}`)),p(S,X)};G(Y,S=>{e.lead&&S(j)})}var H=B(Y,2);{var w=S=>{var X=Si(),re=E(X);Ae(re,()=>e.children),_(X),te(()=>Ke(X,1,`${y()??""} ${k()??""} ${I()??""} ${M()??""}`)),p(S,X)};G(H,S=>{e.children&&S(w)})}var V=B(H,2);{var U=S=>{var X=Di(),re=E(X);Ae(re,()=>e.trail),_(X),te(()=>Ke(X,1,`${z()??""} ${D()??""} ${L()??""} ${C()??""}`)),p(S,X)};G(V,S=>{e.trail&&S(U)})}_(T);var ne=B(T,2);{var P=S=>{var X=Ci(),re=E(X);Ae(re,()=>e.headline),_(X),te(()=>Ke(X,1,`${O()??""} ${R()??""}`)),p(S,X)};G(ne,S=>{e.headline&&S(P)})}_(N),te(()=>{Ke(N,1,`${n()??""} ${a()??""} ${o()??""} ${i()??""} ${l()??""} ${c()??""} ${f()??""}`),Ke(T,1,`${v()??""} ${h()??""} ${g()??""} ${u()??""}`)}),p(r,N)}var Ti=Ea("avatar").parts("root","image","fallback"),pr=Ti.build(),kn=r=>{var e;return((e=r.ids)==null?void 0:e.root)??`avatar:${r.id}`},En=r=>{var e;return((e=r.ids)==null?void 0:e.image)??`avatar:${r.id}:image`},Ii=r=>{var e;return((e=r.ids)==null?void 0:e.fallback)??`avatar:${r.id}:fallback`},Ai=r=>r.getById(kn(r)),Dr=r=>r.getById(En(r));function Oi(r,e){const{state:n,send:a,prop:o,scope:i}=r,l=n.matches("loaded");return{loaded:l,setSrc(c){const f=Dr(i);f==null||f.setAttribute("src",c)},setLoaded(){a({type:"img.loaded",src:"api"})},setError(){a({type:"img.error",src:"api"})},getRootProps(){return e.element({...pr.root.attrs,dir:o("dir"),id:kn(i)})},getImageProps(){return e.img({...pr.image.attrs,hidden:!l,dir:o("dir"),id:En(i),"data-state":l?"visible":"hidden",onLoad(){a({type:"img.loaded",src:"element"})},onError(){a({type:"img.error",src:"element"})}})},getFallbackProps(){return e.element({...pr.fallback.attrs,dir:o("dir"),id:Ii(i),hidden:l,"data-state":l?"hidden":"visible"})}}}var Ni=Da({initialState(){return"loading"},effects:["trackImageRemoval","trackSrcChange"],on:{"src.change":{target:"loading"},"img.unmount":{target:"error"}},states:{loading:{entry:["checkImageStatus"],on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]},"img.error":{target:"error",actions:["invokeOnError"]}}},error:{on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{on:{"img.error":{target:"error",actions:["invokeOnError"]}}}},implementations:{actions:{invokeOnLoad({prop:r}){var e;(e=r("onStatusChange"))==null||e({status:"loaded"})},invokeOnError({prop:r}){var e;(e=r("onStatusChange"))==null||e({status:"error"})},checkImageStatus({send:r,scope:e}){const n=Dr(e);if(!(n!=null&&n.complete))return;const a=Fi(n)?"img.loaded":"img.error";r({type:a,src:"ssr"})}},effects:{trackImageRemoval({send:r,scope:e}){const n=Ai(e);return ka(n,{callback(a){Array.from(a[0].removedNodes).find(l=>l.nodeType===Node.ELEMENT_NODE&&l.matches("[data-scope=avatar][data-part=image]"))&&r({type:"img.unmount"})}})},trackSrcChange({send:r,scope:e}){const n=Dr(e);return Ca(n,{attributes:["src","srcset"],callback(){r({type:"src.change"})}})}}}});function Fi(r){return r.complete&&r.naturalWidth!==0&&r.naturalHeight!==0}ei()(["dir","id","ids","onStatusChange","getRootNode"]);var Pi=F("<img/>"),Li=F("<figure><span><!></span> <!></figure>");function Mi(r,e){const n=ya();me(e,!0);const a=W(e,"initials",19,()=>[0,-1]),o=W(e,"base",3,"overflow-hidden isolate"),i=W(e,"background",3,"bg-surface-400-600"),l=W(e,"size",3,"size-16"),c=W(e,"font",3,""),f=W(e,"border",3,""),v=W(e,"rounded",3,"rounded-full"),h=W(e,"shadow",3,""),g=W(e,"classes",3,""),u=W(e,"imageBase",3,"w-full object-cover"),d=W(e,"imageClasses",3,""),b=W(e,"style",3,""),m=W(e,"fallbackBase",3,"w-full h-full flex justify-center items-center"),x=W(e,"fallbackClasses",3,""),y=gn(e,["$$slots","$$events","$$legacy","src","srcset","name","initials","base","background","size","font","border","rounded","shadow","classes","imageBase","imageClasses","style","fallbackBase","fallbackClasses","children"]),k=ti(Ni,()=>({id:n,...y})),I=s(()=>Oi(k,ri));function M(){return a().map(Y=>{var j;return(j=e.name.split(" ").at(Y))==null?void 0:j.charAt(0).toUpperCase()}).join("")}var z=Li();_t(z,T=>({...T,class:`${o()??""} ${i()??""} ${l()??""} ${c()??""} ${f()??""} ${v()??""} ${h()??""} ${g()??""}`,style:b(),"data-testid":"avatar"}),[()=>t(I).getRootProps()]);var D=E(z);_t(D,T=>({...T,class:`${m()??""} ${x()??""}`,"data-testid":"avatar-fallback"}),[()=>t(I).getFallbackProps()]);var L=E(D);{var C=T=>{var Y=ie(),j=Z(Y);Ae(j,()=>e.children),p(T,Y)},O=T=>{var Y=zt();te(j=>be(Y,j),[M]),p(T,Y)};G(L,T=>{e.children?T(C):T(O,!1)})}_(D);var R=B(D,2);{var N=T=>{var Y=Pi();_t(Y,j=>({...j,src:e.src,srcset:e.srcset,alt:e.name,class:`${u()??""} ${d()??""}`,"data-testid":"avatar-image"}),[()=>t(I).getImageProps()]),Ha(Y),p(T,Y)};G(R,T=>{(e.src||e.srcset)&&T(N)})}_(z),p(r,z),pe()}var zi=F('<div style="display: contents"><main class="w-full h-full"><div id="appShell" class="w-full h-full flex flex-col overflow-hidden" data-testid="app-shell"><!> <div class="flex-auto w-full h-full flex overflow-hidden"><div id="page" class="flex-1 overflow-x-hidden flex flex-col"><main id="page-content" class="flex-auto"><!></main> <footer id="page-footer" class="flex-none"><!></footer></div> <!></div></div></main></div>');function Bi(r,e){me(e,!0);let n=s(()=>et.login.open||!et.login.open&&Ta());var a=ie(),o=Z(a);{var i=l=>{var c=zi(),f=E(c),v=E(f),h=E(v);Ae(h,()=>e.header??Ze);var g=B(h,2),u=E(g),d=E(u),b=E(d);Ae(b,()=>e.children??Ze),_(d);var m=B(d,2),x=E(m);Ae(x,()=>e.pageFooter??Ze),_(m),_(u);var y=B(u,2);Ae(y,()=>e.sidebarRight??Ze),_(g),_(v),_(f),_(c),p(l,c)};G(o,l=>{t(n)&&l(i)})}p(r,a),pe()}function ji(r){r.stopImmediatePropagation(),Ct(`/login?redirectTo=${Fe.url.pathname}`)}var Wi=F('<a href="/" aria-current="page" data-testid="logo-home-link" class="content-center"><!></a>'),Gi=(r,e)=>Aa(t(e),!1),Yi=F('<div class="flex flex-col items-center"><p class="pb-6"> </p> <button id="user-logout-btn" class="btn preset-filled-primary-500 w-fit" title="Logout">Logout</button></div>'),Xi=F('<button id="user-login-btn" title="Login" class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500">Login</button>'),Vi=F('<div id="user-session-avatar" class="content-center"><!></div>'),Ui=F('<li><a class="nav-link"> </a></li>'),qi=F('<nav id="page-navigation"><ul></ul></nav>');function Hi(r,e){me(e,!0);const n=()=>de(Ia,"$userRoutes",i),a=()=>de(Oa,"$user",i),o=()=>de(Na,"$isLoggedIn",i),[i,l]=nt();let c,f=oe(void 0);function v({path:g,id:u}){return"nav-link"+(u?"-"+u:g.replaceAll("/","-"))}let h=s(()=>g=>{if(g.children){for(const u of g.children)if(Fe.url.pathname.includes(u.path))return"page";return}return Fe.url.pathname.includes(g.path)?"page":void 0});sr(async()=>{var g;if(Fe){const u=sessionStorage.getItem("type");u&&(c=(g=Fe.data)==null?void 0:g.providers.find(d=>d.type===u),A(f,await ni(c),!0))}}),Ei(r,{padding:"py-0 pl-2 pr-5",background:"bg-surface-50-950",toolbarClasses:"flex-none z-10",lead:d=>{var b=Wi(),m=E(b);ai(m,{height:4,class:"mx-1"}),_(b),p(d,b)},trail:d=>{var b=Vi(),m=E(b);{var x=k=>{yn(k,{trigger:M=>{{let z=s(()=>(a().email||"").toUpperCase());Mi(M,{get name(){return t(z)},background:"preset-tonal-primary hover:preset-tonal-secondary",border:"border hover:border-primary-400",font:"text-2xl",size:"size-12",classes:"m-3"})}},children:(M,z)=>{var D=Yi(),L=E(D),C=E(L,!0);_(L);var O=B(L,2);O.__click=[Gi,f],_(D),te(()=>be(C,a().email)),p(M,D)},$$slots:{trigger:!0,default:!0}})},y=k=>{var I=Xi();I.__click=[ji],p(k,I)};G(m,k=>{a()&&a().privileges&&a().email&&o()?k(x):k(y,!1)})}_(b),p(d,b)},children:(d,b)=>{var m=qi(),x=E(m);at(x,5,n,bt,(y,k)=>{var I=Ui(),M=E(I),z=E(M,!0);_(M),_(I),te((D,L)=>{Ce(M,"id",D),Ce(M,"href",t(k).path),Ce(M,"aria-current",L),be(z,t(k).text)},[()=>v(t(k)),()=>t(h)(t(k))]),p(y,I)}),_(x),_(m),p(d,m)},$$slots:{lead:!0,trail:!0,default:!0}}),pe(),l()}ct(["click"]);var Ki=F("<div> </div>"),Zi=F('<div data-testid="any-record-of-filter-modal"><header><h1 class="text-lg font-normal"> </h1></header> <!></div>');function Ji(r,e){me(e,!0);var n=Zi(),a=E(n),o=E(a),i=E(o,!0);_(o),_(a);var l=B(a,2);{var c=v=>{var h=ie(),g=Z(h);at(g,17,()=>e.filter.concepts,bt,(u,d)=>{var b=Ki(),m=E(b,!0);_(b),te(()=>be(m,t(d))),p(u,b)}),p(v,h)},f=v=>{var h=zt("No filter provided");p(v,h)};G(l,v=>{e.filter.filterType==="AnyRecordOf"?v(c):v(f,!1)})}_(n),te(()=>{var v,h,g,u;return be(i,`${(h=(v=e.filter)==null?void 0:v.concepts)==null?void 0:h.length} variable(s) in ${((g=e.filter.searchResult)==null?void 0:g.display)||((u=e.filter.searchResult)==null?void 0:u.name)||e.filter.variableName} category`)}),p(r,n),pe()}var Qi=F('<div style="display: none;"> </div>');function $i(r,e){var n=Qi(),a=E(n,!0);_(n),te(()=>{Ce(n,"id",e.id),be(a,e.value)}),p(r,n)}function eo(...r){return e=>{r.forEach(n=>n(e))}}function to(){let r=null;return[(a,o)=>{r=setInterval(a,o)},()=>{r!==null&&(clearInterval(r),r=null)}]}function Vt(r){let e=oe(void 0);return ee(()=>{A(e,r(lt(()=>t(e))),!0)}),{get current(){return t(e)}}}function ro(r){return typeof r=="function"}function no(r){return r!==null&&typeof r=="object"}const Wt=Symbol("box"),Pr=Symbol("is-writable");function ao(r){return no(r)&&Wt in r}function io(r){return J.isBox(r)&&Pr in r}function J(r){let e=oe(gt(r));return{[Wt]:!0,[Pr]:!0,get current(){return t(e)},set current(n){A(e,n,!0)}}}function oo(r,e){const n=s(r);return e?{[Wt]:!0,[Pr]:!0,get current(){return t(n)},set current(a){e(a)}}:{[Wt]:!0,get current(){return r()}}}function so(r){return J.isBox(r)?r:ro(r)?J.with(r):J(r)}function lo(r){return Object.entries(r).reduce((e,[n,a])=>J.isBox(a)?(J.isWritableBox(a)?Object.defineProperty(e,n,{get(){return a.current},set(o){a.current=o}}):Object.defineProperty(e,n,{get(){return a.current}}),e):Object.assign(e,{[n]:a}),{})}function co(r){return J.isWritableBox(r)?{[Wt]:!0,get current(){return r.current}}:r}J.from=so;J.with=oo;J.flatten=lo;J.readonly=co;J.isBox=ao;J.isWritableBox=io;function uo(r,e){const n=RegExp(r,"g");return a=>{if(typeof a!="string")throw new TypeError(`expected an argument of type string, but got ${typeof a}`);return a.match(n)?a.replace(n,e):a}}const fo=uo(/[A-Z]/,r=>`-${r.toLowerCase()}`);function vo(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError(`expected an argument of type object, but got ${typeof r}`);return Object.keys(r).map(e=>`${fo(e)}: ${r[e]};`).join(`
`)}function go(r={}){return vo(r).replace(`
`," ")}const ho={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};go(ho);const bo=typeof window<"u"?window:void 0;function mo(r){let e=r.activeElement;for(;e!=null&&e.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}var Dt,Yt;class po{constructor(e={}){hr(this,Dt);hr(this,Yt);const{window:n=bo,document:a=n==null?void 0:n.document}=e;n!==void 0&&(br(this,Dt,a),br(this,Yt,_i(o=>{const i=Qr(n,"focusin",o),l=Qr(n,"focusout",o);return()=>{i(),l()}})))}get current(){var e;return(e=Ht(this,Yt))==null||e.call(this),Ht(this,Dt)?mo(Ht(this,Dt)):null}}Dt=new WeakMap,Yt=new WeakMap;new po;function yo(r,e){switch(r){case"post":ee(e);break;case"pre":xa(e);break}}function Tn(r,e,n,a={}){const{lazy:o=!1}=a;let i=!o,l=Array.isArray(r)?[]:void 0;yo(e,()=>{const c=Array.isArray(r)?r.map(v=>v()):r();if(!i){i=!0,l=c;return}const f=lt(()=>n(c,l));return l=c,f})}function mt(r,e,n){Tn(r,"post",e,n)}function xo(r,e,n){Tn(r,"pre",e,n)}mt.pre=xo;function tr(r){let e=oe(null);const n=a=>{a!==t(e)&&(r==null||r(a,t(e))),A(e,a,!0)};return[J.with(()=>t(e),n),n]}const yr={};function Ut(r,e){if(e)return e;const n=yr[r]==null?0:yr[r]+1;return yr[r]=n,`${r}-${n}`}function In(r){return(e,...n)=>n.reduce((a,o)=>{const i=Object.entries(o);for(const[l,c]of i){const f=a[l];f!=null&&(a[l]=f+r*c)}return a},{...e})}const St=In(1),rr=In(-1);function wo(r){return"clientX"in r&&"clientY"in r}const dr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Et(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function Lr(r){return"nodeType"in r}function Le(r){var e;return r?Et(r)?r:Lr(r)?((e=r.ownerDocument)==null?void 0:e.defaultView)??window:window:window}function Mr(r){const{Document:e}=Le(r);return r instanceof e}function qt(r){return Et(r)?!1:r instanceof Le(r).HTMLElement}function An(r){return r instanceof Le(r).SVGElement}function Tt(r){return r?Et(r)?r.document:Lr(r)?Mr(r)?r:qt(r)||An(r)?r.ownerDocument:document:document:document}function ur(r){if(!r)return!1;const{KeyboardEvent:e}=Le(r.target);return e&&r instanceof e}function _o(r){if(!r)return!1;const{TouchEvent:e}=Le(r.target);return e&&r instanceof e}function nr(r){if(_o(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:n}=r.touches[0];return{x:e,y:n}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:n}=r.changedTouches[0];return{x:e,y:n}}}return wo(r)?{x:r.clientX,y:r.clientY}:null}const it=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:n}=r;return`translate3d(${e?Math.round(e):0}px, ${n?Math.round(n):0}px, 0)`}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:n}=r;return`scaleX(${e}) scaleY(${n})`}},Transform:{toString(r){if(r)return[it.Translate.toString(r),it.Scale.toString(r)].join(" ")}},Transition:{toString({property:r,duration:e,easing:n}){return`${r} ${e}ms ${n}`}}});function fr(r){return Object.entries(r).filter(([,e])=>e!==void 0).map(([e,n])=>{const o=typeof n=="number"&&!["opacity","zIndex","fontWeight","lineHeight","order","flexGrow","flexShrink"].includes(e)?`${n}px`:n;return`${e.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`)}:${o}`}).join(";")}const en="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ro(r){return r.matches(en)?r:r.querySelector(en)}function So(r){return typeof r=="function"?r():r}function zr(r){return Object.fromEntries(Object.entries(r).map(([e,n])=>[e,So(n)]))}var Do=F('<div role="status" aria-atomic="true"> </div>');function Co(r,e){me(e,!0);let n=W(e,"ariaLiveType",3,"assertive");const a=fr({position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"});var o=Do(),i=E(o,!0);_(o),te(()=>{Ce(o,"id",e.id),Nr(o,a),Ce(o,"aria-live",n()),be(i,e.announcement)}),p(r,o),pe()}function ko(r,e){var n=ie(),a=Z(n);cr(a,()=>e.children,o=>{var i=ie(),l=Z(i);Ae(l,()=>e.children??Ze),p(o,i)}),p(r,n)}function Eo(r,e){me(e,!0);let n=W(e,"to",3,"body");const a=wa();let o=s(i);function i(){if(!dr||e.disabled)return null;let g=null;return typeof n()=="string"?g=document.querySelector(n()):(n()instanceof HTMLElement||n()instanceof DocumentFragment)&&(g=n()),g}let l;function c(){l&&(Za(l),l=null)}mt([()=>t(o),()=>e.disabled],([g,u])=>{if(!g||u){c();return}return l=Ka(ko,{target:g,props:{children:e.children},context:a}),()=>{c()}});var f=ie(),v=Z(f);{var h=g=>{var u=ie(),d=Z(u);Ae(d,()=>e.children??Ze),p(g,u)};G(v,g=>{e.disabled&&g(h)})}p(r,f),pe()}function To(){let r=oe("");return{announce:n=>{n!=null&&A(r,n,!0)},announcement:{get current(){return t(r)}}}}function Io(){const r=new Set;return[({type:a,event:o})=>{r.forEach(i=>{var l;return(l=i[a])==null?void 0:l.call(i,o)})},a=>(r.add(a),()=>r.delete(a))]}const Cr=Symbol("DndMonitorContext");function Ao(){return lr(Cr)?Xt(Cr):null}function Oo(r){const e=Ao();ee(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)})}const No={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fo={onDragStart({active:r}){return`Picked up draggable item ${r.id}.`},onDragOver({active:r,over:e}){return e?`Draggable item ${r.id} was moved over droppable area ${e.id}.`:`Draggable item ${r.id} is no longer over a droppable area.`},onDragEnd({active:r,over:e}){return e?`Draggable item ${r.id} was dropped over droppable area ${e.id}`:`Draggable item ${r.id} was dropped.`},onDragCancel({active:r}){return`Dragging was cancelled. Draggable item ${r.id} was dropped.`}};var Po=F("<!> <!>",1);function Lo(r,e){me(e,!0);const n=u=>{var d=Po(),b=Z(d);$i(b,{get id(){return e.hiddenTextDescribedById},get value(){return o().draggable}});var m=B(b,2);Co(m,{get id(){return c},get announcement(){return l.current}}),p(u,d)};let a=W(e,"announcements",3,Fo),o=W(e,"screenReaderInstructions",3,No);const{announce:i,announcement:l}=To(),c=Ut("DndLiveRegion");let f=oe(!1);ee(()=>{A(f,!0)}),Oo({onDragStart({active:u}){i(a().onDragStart({active:u}))},onDragMove({active:u,over:d}){a().onDragMove&&i(a().onDragMove({active:u,over:d}))},onDragOver({active:u,over:d}){i(a().onDragOver({active:u,over:d}))},onDragEnd({active:u,over:d}){i(a().onDragEnd({active:u,over:d}))},onDragCancel({active:u,over:d}){i(a().onDragCancel({active:u,over:d}))}});var v=ie(),h=Z(v);{var g=u=>{var d=ie(),b=Z(d);{var m=y=>{Eo(y,{get to(){return e.container},children:(k,I)=>{n(k)},$$slots:{default:!0}})},x=y=>{n(y)};G(b,y=>{e.container?y(m):y(x,!1)})}p(u,d)};G(h,u=>{t(f)&&u(g)})}p(r,v),pe()}function xr(r,e){return{sensor:r,options:e??{}}}function Mo(...r){return r.filter(e=>e!=null)}const rt=Object.freeze({x:0,y:0});function zo(r,e){const n=nr(r);if(!n)return"0 0";const a={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return`${a.x}% ${a.y}%`}function Bo({data:{value:r}},{data:{value:e}}){return e-r}function jo(r,e){if(!r||r.length===0)return null;const[n]=r;return e?n[e]:n}function Wo(r,e){const n=Math.max(e.top,r.top),a=Math.max(e.left,r.left),o=Math.min(e.left+e.width,r.left+r.width),i=Math.min(e.top+e.height,r.top+r.height),l=o-a,c=i-n;if(a<o&&n<i){const f=e.width*e.height,v=r.width*r.height,h=l*c,g=h/(f+v-h);return Number(g.toFixed(4))}return 0}const Go=({collisionRect:r,droppableRects:e,droppableContainers:n})=>{const a=[];for(const o of n){const{id:i}=o,l=e.get(i);if(l){const c=Wo(l,r);c>0&&a.push({id:i,data:{droppableContainer:o,value:c}})}}return a.sort(Bo)};function Yo(r,e,n){return{...r,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function On(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:rt}function Xo(r){return function(n,...a){return a.reduce((o,i)=>({...o,top:o.top+r*i.y,bottom:o.bottom+r*i.y,left:o.left+r*i.x,right:o.right+r*i.x}),{...n})}}const Vo=Xo(1);function Nn(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Uo(r,e,n){const a=Nn(e);if(!a)return r;const{scaleX:o,scaleY:i,x:l,y:c}=a,f=r.left-l-(1-o)*parseFloat(n),v=r.top-c-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=o?r.width/o:r.width,g=i?r.height/i:r.height;return{width:h,height:g,top:v,right:f+h,bottom:v+g,left:f}}const qo={ignoreTransform:!1};function It(r,e=qo){let n=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:v,transformOrigin:h}=Le(r).getComputedStyle(r);v&&(n=Uo(n,v,h))}const{top:a,left:o,width:i,height:l,bottom:c,right:f}=n;return{top:a,left:o,width:i,height:l,bottom:c,right:f}}function tn(r){return It(r,{ignoreTransform:!0})}function Ho(r){const e=r.innerWidth,n=r.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Ko(r,e=Le(r).getComputedStyle(r)){return e.position==="fixed"}function Zo(r,e=Le(r).getComputedStyle(r)){const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=e[o];return typeof i=="string"?n.test(i):!1})}function Br(r,e){const n=[];function a(o){if(e!=null&&n.length>=e||!o)return n;if(Mr(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!qt(o)||An(o)||n.includes(o))return n;const i=Le(r).getComputedStyle(o);return o!==r&&Zo(o,i)&&n.push(o),Ko(o,i)?n:a(o.parentNode)}return r?a(r):n}function Fn(r){const[e]=Br(r,1);return e??null}function wr(r){return!dr||!r?null:Et(r)?r:Lr(r)?Mr(r)||r===Tt(r).scrollingElement?window:qt(r)?r:null:null}function Pn(r){return Et(r)?r.scrollX:r.scrollLeft}function Ln(r){return Et(r)?r.scrollY:r.scrollTop}function kr(r){return{x:Pn(r),y:Ln(r)}}var Ie;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Ie||(Ie={}));function Mn(r){return!dr||!r?!1:r===document.scrollingElement}function zn(r){const e={x:0,y:0},n=Mn(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},a={x:r.scrollWidth-n.width,y:r.scrollHeight-n.height},o=r.scrollTop<=e.y,i=r.scrollLeft<=e.x,l=r.scrollTop>=a.y,c=r.scrollLeft>=a.x;return{isTop:o,isLeft:i,isBottom:l,isRight:c,maxScroll:a,minScroll:e}}const Jo={x:.2,y:.2};function Qo(r,e,{top:n,left:a,right:o,bottom:i},l=10,c=Jo){const{isTop:f,isBottom:v,isLeft:h,isRight:g}=zn(r),u={x:0,y:0},d={x:0,y:0},b={height:e.height*c.y,width:e.width*c.x};return!f&&n<=e.top+b.height?(u.y=Ie.Backward,d.y=l*Math.abs((e.top+b.height-n)/b.height)):!v&&i>=e.bottom-b.height&&(u.y=Ie.Forward,d.y=l*Math.abs((e.bottom-b.height-i)/b.height)),!g&&o>=e.right-b.width?(u.x=Ie.Forward,d.x=l*Math.abs((e.right-b.width-o)/b.width)):!h&&a<=e.left+b.width&&(u.x=Ie.Backward,d.x=l*Math.abs((e.left+b.width-a)/b.width)),{direction:u,speed:d}}function $o(r){if(r===document.scrollingElement){const{innerWidth:i,innerHeight:l}=window;return{top:0,left:0,right:i,bottom:l,width:i,height:l}}const{top:e,left:n,right:a,bottom:o}=r.getBoundingClientRect();return{top:e,left:n,right:a,bottom:o,width:r.clientWidth,height:r.clientHeight}}function Bn(r){return r.reduce((e,n)=>St(e,kr(n)),rt)}function es(r){return r.reduce((e,n)=>e+Pn(n),0)}function ts(r){return r.reduce((e,n)=>e+Ln(n),0)}function jn(r,e=It){if(!r)return;const{top:n,left:a,bottom:o,right:i}=e(r);Fn(r)&&(o<=0||i<=0||n>=window.innerHeight||a>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const rs=[["x",["left","right"],es],["y",["top","bottom"],ts]];class jr{constructor(e,n){se(this,"rect");se(this,"width");se(this,"height");se(this,"top");se(this,"bottom");se(this,"right");se(this,"left");const a=Br(n),o=Bn(a);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,l,c]of rs)for(const f of l)Object.defineProperty(this,f,{get:()=>{const v=c(a),h=o[i]-v;return this.rect[f]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}function ar(...r){}class Lt{constructor(e){se(this,"target");se(this,"listeners",[]);se(this,"removeAll",()=>{this.listeners.forEach(e=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...e)})});this.target=e}add(e,n,a){var o;(o=this.target)==null||o.addEventListener(e,n,a),this.listeners.push([e,n,a])}}function ns(r){const{EventTarget:e}=Le(r);return r instanceof e?r:Tt(r)}function _r(r,e){const n=Math.abs(r.x),a=Math.abs(r.y);return typeof e=="number"?Math.sqrt(n**2+a**2)>e:"x"in e&&"y"in e?n>e.x&&a>e.y:"x"in e?n>e.x:"y"in e?a>e.y:!1}var Ve;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Ve||(Ve={}));function rn(r){r.preventDefault()}function as(r){r.stopPropagation()}var ce;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(ce||(ce={}));const nn={start:[ce.Space,ce.Enter],cancel:[ce.Esc],end:[ce.Space,ce.Enter,ce.Tab]},is=(r,{currentCoordinates:e})=>{switch(r.code){case ce.Right:return{...e,x:e.x+25};case ce.Left:return{...e,x:e.x-25};case ce.Down:return{...e,y:e.y+25};case ce.Up:return{...e,y:e.y-25}}};class Wr{constructor(e){se(this,"props");se(this,"autoScrollEnabled",!1);se(this,"referenceCoordinates");se(this,"listeners");se(this,"windowListeners");this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Lt(Tt(n)),this.windowListeners=new Lt(Le(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ve.Resize,this.handleCancel),this.windowListeners.add(Ve.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ve.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,a=e.node;a&&jn(a),n(rt)}handleKeyDown(e){if(ur(e)){const{active:n,context:a,options:o}=this.props,{keyboardCodes:i=nn,coordinateGetter:l=is,scrollBehavior:c="smooth"}=o,{code:f}=e;if(i.end.includes(f)){this.handleEnd(e);return}if(i.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:v}=a,h=v?{x:v.left,y:v.top}:rt;this.referenceCoordinates||(this.referenceCoordinates=h);const g=l(e,{active:n,context:a,currentCoordinates:h});if(g){const u=rr(g,h),d={x:0,y:0},{scrollableAncestors:b}=a;for(const m of b){const x=e.code,{isTop:y,isRight:k,isLeft:I,isBottom:M,maxScroll:z,minScroll:D}=zn(m),L=$o(m),C={x:Math.min(x===ce.Right?L.right-L.width/2:L.right,Math.max(x===ce.Right?L.left:L.left+L.width/2,g.x)),y:Math.min(x===ce.Down?L.bottom-L.height/2:L.bottom,Math.max(x===ce.Down?L.top:L.top+L.height/2,g.y))},O=x===ce.Right&&!k||x===ce.Left&&!I,R=x===ce.Down&&!M||x===ce.Up&&!y;if(O&&C.x!==g.x){const N=m.scrollLeft+u.x,T=x===ce.Right&&N<=z.x||x===ce.Left&&N>=D.x;if(T&&!u.y){m.scrollTo({left:N,behavior:c});return}T?d.x=m.scrollLeft-N:d.x=x===ce.Right?m.scrollLeft-z.x:m.scrollLeft-D.x,d.x&&m.scrollBy({left:-d.x,behavior:c});break}else if(R&&C.y!==g.y){const N=m.scrollTop+u.y,T=x===ce.Down&&N<=z.y||x===ce.Up&&N>=D.y;if(T&&!u.x){m.scrollTo({top:N,behavior:c});return}T?d.y=m.scrollTop-N:d.y=x===ce.Down?m.scrollTop-z.y:m.scrollTop-D.y,d.y&&m.scrollBy({top:-d.y,behavior:c});break}}this.handleMove(e,St(rr(g,this.referenceCoordinates),d))}}}handleMove(e,n){const{onMove:a}=this.props;e.preventDefault(),a(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}se(Wr,"activators",[{eventName:"onkeydown",handler:(e,{keyboardCodes:n=nn,onActivation:a},{active:o})=>{const{code:i}=e;if(n.start.includes(i)){const l=o.activatorNode;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e}),!0)}return!1}}]);function an(r){return!!(r&&"distance"in r)}function on(r){return!!(r&&"delay"in r)}class Gr{constructor(e,n,a=ns(e.event.target)){se(this,"props");se(this,"events");se(this,"autoScrollEnabled",!0);se(this,"document");se(this,"activated",!1);se(this,"initialCoordinates");se(this,"timeoutId",null);se(this,"listeners");se(this,"documentListeners");se(this,"windowListeners");this.props=e,this.events=n;const{event:o}=e,{target:i}=o;this.props=e,this.events=n,this.document=Tt(i),this.documentListeners=new Lt(this.document),this.listeners=new Lt(a),this.windowListeners=new Lt(Le(i)),this.initialCoordinates=nr(o)??rt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:a}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ve.Resize,this.handleCancel),this.windowListeners.add(Ve.DragStart,rn),this.windowListeners.add(Ve.VisibilityChange,this.handleCancel),this.windowListeners.add(Ve.ContextMenu,rn),this.documentListeners.add(Ve.Keydown,this.handleKeydown),n){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(on(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(an(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:a,onPending:o}=this.props;o(a,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ve.Click,as,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ve.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){const{activated:n,initialCoordinates:a,props:o}=this,{onMove:i,options:{activationConstraint:l}}=o;if(!a)return;const c=nr(e)??rt,f=rr(a,c);if(!n&&l){if(an(l)){if(l.tolerance!=null&&_r(f,l.tolerance))return this.handleCancel();if(_r(f,l.distance))return this.handleStart()}if(on(l)&&_r(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}e.cancelable&&e.preventDefault(),i(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ce.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const os={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Wn extends Gr{constructor(e){const{event:n}=e,a=Tt(n.target);super(e,os,a)}}se(Wn,"activators",[{eventName:"onpointerdown",handler:(e,{onActivation:n})=>!e.isPrimary||e.button!==0?!1:(n==null||n({event:e}),!0)}]);const ss={move:{name:"mousemove"},end:{name:"mouseup"}};var Er;(function(r){r[r.RightClick=2]="RightClick"})(Er||(Er={}));class Gn extends Gr{constructor(e){super(e,ss,Tt(e.event.target))}}se(Gn,"activators",[{eventName:"onmousedown",handler:(e,{onActivation:n})=>e.button===Er.RightClick?!1:(n==null||n({event:e}),!0)}]);const Rr={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Yn extends Gr{constructor(e){super(e,Rr)}static setup(){return window.addEventListener(Rr.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Rr.move.name,e)};function e(){}}}se(Yn,"activators",[{eventName:"ontouchstart",handler:(e,{onActivation:n})=>{const{touches:a}=e;return a.length>1?!1:(n==null||n({event:e}),!0)}}]);var Gt;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Gt||(Gt={}));var Tr;(function(r){r.Optimized="optimized"})(Tr||(Tr={}));const sn=new Map;function ls(r){const e=s(r),n=s(()=>t(e).containers),a=s(()=>t(e).dragging),o=s(()=>t(e).dependencies),i=s(()=>t(e).config.measure),l=s(()=>t(e).config.strategy),c=s(()=>t(e).config.frequency);let f=oe(null),v=t(n);const h=s(b),g=(m=[])=>{t(h)||A(f,t(f)===null?m:t(f).concat(m.filter(x=>!t(f).includes(x))),!0)};let u=null;const d=Vt(m=>{if(t(h)&&!t(a))return sn;if(!m||m===sn||v!==t(n)||t(f)!=null){const x=new Map;for(const y of t(n)){if(!y)continue;if(t(f)&&t(f).length>0&&!t(f).includes(y.id)&&y.rect){x.set(y.id,y.rect);continue}const k=y.node,I=k?new jr(t(i)(k),k):null;y.rect=I,I&&x.set(y.id,I)}return x}return m});return ee(()=>{v=t(n)}),ee(()=>{t(a),!t(h)&&lt(g)}),ee(()=>{t(f)&&t(f).length>0&&A(f,null)}),ee(()=>{t(o)(),!(t(h)||typeof t(c)!="number"||u!==null)&&(u=setTimeout(()=>{g(),u=null},t(c)))}),{droppableRects:J.with(()=>d.current),measureDroppableContainers:g,measuringScheduled:J.with(()=>t(f)!==null)};function b(){switch(t(l)){case Gt.Always:return!1;case Gt.BeforeDragging:return t(a);default:return!t(a)}}}function cs(r){const e=s(r),n=s(()=>ht(t(e),2)),a=s(()=>t(n)[0]),o=s(()=>t(n)[1]),i=s(()=>t(o)!=null?t(a).get(t(o)):void 0),l=s(()=>t(i)?t(i).node:null);return Vt(c=>t(o)==null?null:t(l)??c??null)}function Yr(r,e){return Vt(n=>{const a=r(),o=e==null?void 0:e();return a?n||(typeof o=="function"?o(a):a):null})}function ds(r,e){return Yr(r,e)}function us(r){return new jr(It(r),r)}function ln(r){let e=oe(null);const n=s(r),a=s(()=>ht(t(n),3)),o=s(()=>t(a)[0]),i=s(()=>Pe(t(a)[1],us)),l=s(()=>t(a)[2]);function c(){if(!t(o)){A(e,null);return}if(t(o).isConnected===!1){A(e,t(e)??t(l)??null,!0);return}const h=t(i)(t(o));JSON.stringify(t(e))!==JSON.stringify(h)&&A(e,h,!0)}const f=fs(()=>({callback(h){if(t(o))for(const g of h){const{type:u,target:d}=g;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t(o))){c();break}}}})),v=vr(()=>({callback:c}));return ee(()=>{var h,g,u,d;c(),t(o)?((h=v.current)==null||h.observe(t(o)),(g=f.current)==null||g.observe(document.body,{childList:!0,subtree:!0})):((u=v.current)==null||u.disconnect(),(d=f.current)==null||d.disconnect())}),{get current(){return t(e)}}}function fs(r){const e=s(r),n=s(()=>t(e).callback),a=s(()=>t(e).disabled),o=s(()=>{if(t(a)||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(t(n))});return ee(()=>()=>{var i;return(i=t(o))==null?void 0:i.disconnect()}),{get current(){return t(o)}}}function vr(r){const e=s(r),n=s(()=>t(e).callback),a=s(()=>t(e).disabled),o=s(()=>{if(t(a)||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(t(n))});return ee(()=>()=>{var i;return(i=t(o))==null?void 0:i.disconnect()}),{get current(){return t(o)}}}function Xn(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return qt(e)?e:r}function vs({measureFn:r}){const e=s(r);let n=oe(null);const a=f=>{for(const{target:v}of f)if(qt(v)){const h=t(e)(v);A(n,t(n)?{...t(n),width:h.width,height:h.height}:h,!0);break}},o=vr(()=>({callback:a})),i=f=>{var h,g;const v=Xn(f);(h=o==null?void 0:o.current)==null||h.disconnect(),v&&((g=o==null?void 0:o.current)==null||g.observe(v)),A(n,v?t(e)(v):null,!0)},[l,c]=tr(i);return{get nodeRef(){return l.current},get rect(){return t(n)},setRef:c}}function gs(r){const e=Yr(r);return{get current(){return On(r(),e.current)}}}function Vn(r){const e=s(r);return{get current(){return t(e)?Ho(t(e)):null}}}const cn=[];function hs(r,e){return r.length===e.length&&r.every((n,a)=>n===e[a])}function bs(r){const e=s(r);let n=t(e);const a=Vt(o=>t(e)?o&&Array.isArray(o)&&!hs(o,cn)&&t(e)&&n&&t(e).parentNode===n.parentNode?o:Br(t(e)):cn);return ee(()=>{n=t(e)}),a}const dn=[];function ms(r){const e=s(r),n=s(()=>ht(t(e),2)),a=s(()=>Pe(t(n)[0],()=>[],!0)),o=s(()=>Pe(t(n)[1],It)),i=s(()=>ht(t(a),1)),l=s(()=>t(i)[0]),c=Vn(()=>t(l)?Le(t(l)):null);let f=oe(gt(dn));function v(){if(!t(a).length){A(f,dn,!0);return}A(f,t(a).map(g=>Mn(g)?c.current:new jr(t(o)(g),g)),!0)}const h=vr(()=>({callback:v}));return ee(()=>{var g;(g=h.current)==null||g.disconnect(),v(),t(a).forEach(u=>{var d;return(d=h.current)==null?void 0:d.observe(u)})}),{get current(){return t(f)}}}function ps(r){const e=s(()=>r()??[]);let n=oe(null),a=t(e);const o=l=>{const c=wr(l.target);if(c){if(!t(n)){A(n,null);return}t(n).set(c,kr(c)),A(n,new Map(t(n)),!0)}};ee(()=>{const l=a;if(t(e)!==l){c(l);const f=t(e).map(v=>{const h=wr(v);return h?(h.addEventListener("scroll",o,{passive:!0}),[h,kr(h)]):null}).filter(v=>v!=null);A(n,f.length?new Map(f):null,!0),a=t(e)}function c(f){f==null||f.forEach(v=>{const h=wr(v);h==null||h.removeEventListener("scroll",o)})}return()=>{c(t(e)),c(l)}});const i=s(()=>t(e).length?t(n)?Array.from(t(n).values()).reduce((l,c)=>St(l,c),rt):Bn(t(e)):rt);return{get current(){return t(i)}}}function un(r){const e=s(r),n=s(()=>ht(t(e),2)),a=s(()=>t(n)[0]),o=s(()=>t(n)[1]);let i=oe(null);return ee(()=>{t(o),A(i,null)}),ee(()=>{const l=t(a)!==rt;l&&!lt(()=>t(i))&&A(i,t(a),!0),!l&&lt(()=>t(i))&&A(i,null)}),{get current(){return t(i)?rr(t(a),t(i)):rt}}}function ys(r){return J.with(()=>{const[e,n]=r();return e.reduce((a,{eventName:o,handler:i})=>(a[o]=l=>{i(l,n)},a),{})})}function xs(r){return J.with(()=>{const[e,n]=r();return e.reduce((a,o)=>{const{sensor:i}=o,l=i.activators.map(c=>({eventName:c.eventName,handler:n(c.handler,o)}));return[...a,...l]},[])})}function ws(r){ee(()=>{if(!dr)return;const n=r().map(({sensor:a})=>{var o;return(o=a.setup)==null?void 0:o.call(a)});return()=>{for(const a of n)a==null||a()}})}var Mt;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(Mt||(Mt={}));var ir;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(ir||(ir={}));function _s(r){const e=s(r),n=s(()=>t(e).acceleration),a=s(()=>Pe(t(e).activator,()=>Mt.Pointer,!0)),o=s(()=>t(e).canScroll),i=s(()=>t(e).draggingRect),l=s(()=>t(e).enabled),c=s(()=>Pe(t(e).interval,5)),f=s(()=>Pe(t(e).order,()=>ir.TreeOrder,!0)),v=s(()=>t(e).pointerCoordinates),h=s(()=>Pe(t(e).scrollableAncestors,()=>[],!0)),g=s(()=>Pe(t(e).scrollableAncestorRects,()=>[],!0)),u=s(()=>t(e).delta),d=s(()=>t(e).threshold),b=Ss(()=>[t(u),!t(l)]),[m,x]=to();let y={x:0,y:0},k={x:0,y:0};const I=s(()=>{switch(t(a)){case Mt.Pointer:return t(v)?{top:t(v).y,bottom:t(v).y,left:t(v).x,right:t(v).x}:null;case Mt.DraggableRect:return t(i)}});let M=null;const z=()=>{const L=M;if(!L)return;const C=y.x*k.x,O=y.y*k.y;L.scrollBy(C,O)},D=s(()=>t(f)===ir.TreeOrder?[...t(h)].reverse():t(h));ee(()=>{var L;if(!t(l)||!t(h).length||!t(I)){x();return}for(const C of t(D)){if(((L=t(o))==null?void 0:L(C))===!1)continue;const O=t(h).indexOf(C),R=t(g)[O];if(!R)continue;const{direction:N,speed:T}=Qo(C,R,t(I),t(n),t(d));for(const Y of["x","y"])b.current[Y][N[Y]]||(T[Y]=0,N[Y]=0);if(T.x>0||T.y>0){x(),M=C,m(z,t(c)),y=T,k=N;return}}y={x:0,y:0},k={x:0,y:0},x()})}const Rs={x:{[Ie.Backward]:!1,[Ie.Forward]:!1},y:{[Ie.Backward]:!1,[Ie.Forward]:!1}};function Ss(r){const e=s(r),n=s(()=>ht(t(e),2)),a=s(()=>t(n)[0]),o=s(()=>t(n)[1]);let i=vi(t(a));const l=Vt(c=>{if(t(o)||!i||!c)return Rs;const f={x:Math.sign(t(a).x-i.x),y:Math.sign(t(a).y-i.y)};return{x:{[Ie.Backward]:c.x[Ie.Backward]||f.x===-1,[Ie.Forward]:c.x[Ie.Forward]||f.x===1},y:{[Ie.Backward]:c.y[Ie.Backward]||f.y===-1,[Ie.Forward]:c.y[Ie.Forward]||f.y===1}}});return ee(()=>{i=t(a)}),l}const Ds=[{sensor:Wn,options:{}},{sensor:Wr,options:{}}],Cs={current:{}},$t={draggable:{measure:tn},droppable:{measure:tn,strategy:Gt.WhileDragging,frequency:Tr.Optimized},dragOverlay:{measure:It}};class Nt extends Map{get(e){return e!=null?super.get(e)??void 0:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(({disabled:e})=>!e)}getNodeFor(e){var n;return((n=this.get(e))==null?void 0:n.node)??void 0}}const ks={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Nt,over:null,dragOverlay:{nodeRef:null,rect:null,setRef:ar},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:$t,measureDroppableContainers:ar,windowRect:null,measuringScheduled:!1},Un={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ar,draggableNodes:new Map,over:null,measureDroppableContainers:ar},or=Symbol("InternalContext"),Ir=Symbol("PublicContext");function Xr(){return lr(or)?Xt(or)():Un}function Es(r,e){var f;me(e,!0);const n=s(Xr),a=s(()=>t(n).active),o=s(()=>t(n).activatorEvent),i=s(()=>t(n).draggableNodes);let l=t(o),c=(f=t(a))==null?void 0:f.id;ee(()=>{if(!e.disabled&&!t(o)&&l&&c!=null){if(!ur(l)||document.activeElement===l.target)return;const v=t(i).get(c);if(!v)return;const{activatorNode:h,node:g}=v;if(!h&&!g)return;requestAnimationFrame(()=>{for(const u of[h,g]){if(!u)continue;const d=Ro(u);if(d){d.focus();break}}})}}),ee(()=>{var v;l=t(o),c=(v=t(a))==null?void 0:v.id}),pe()}var De;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(De||(De={}));function Ts(){const r=gt({draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Nt}});function e(n){switch(n.type){case De.DragStart:r.draggable.initialCoordinates=n.initialCoordinates,r.draggable.active=n.active;break;case De.DragMove:if(r.draggable.active==null)return;r.draggable.translate={x:n.coordinates.x-r.draggable.initialCoordinates.x,y:n.coordinates.y-r.draggable.initialCoordinates.y};break;case De.DragEnd:case De.DragCancel:r.draggable.active=null,r.draggable.initialCoordinates={x:0,y:0},r.draggable.translate={x:0,y:0};break;case De.RegisterDroppable:{const{element:a}=n,{id:o}=a,i=new Nt(r.droppable.containers);i.set(o,a),r.droppable.containers=i;break}case De.SetDroppableDisabled:{const{id:a,key:o,disabled:i}=n,l=r.droppable.containers.get(a);if(!l||o!==l.key)return;const c=new Nt(r.droppable.containers);c.set(a,{...l,disabled:i}),r.droppable.containers=c;break}case De.UnregisterDroppable:{const{id:a,key:o}=n,i=r.droppable.containers.get(a);if(!i||o!==i.key)return;const l=new Nt(r.droppable.containers);l.delete(a),r.droppable.containers=l;break}}}return[r,e]}function qn(r,{transform:e,...n}){return r!=null&&r.length?r.reduce((a,o)=>o({transform:a,...n}),e):e}function Is(r){return{draggable:{...$t.draggable,...r==null?void 0:r.draggable},droppable:{...$t.droppable,...r==null?void 0:r.droppable},dragOverlay:{...$t.dragOverlay,...r==null?void 0:r.dragOverlay}}}function As(r){let e=!1;const n=s(r),a=s(()=>t(n).activeNode),o=s(()=>t(n).measure),i=s(()=>t(n).initialRect),l=s(()=>Pe(t(n).config,!0)),c=s(()=>typeof t(l)=="boolean"?{x:t(l),y:t(l)}:t(l)),f=s(()=>t(c).x),v=s(()=>t(c).y);ee(()=>{var b;if(!t(f)&&!t(v)||!t(a)){e=!1;return}if(e||!t(i))return;const g=(b=t(a))==null?void 0:b.node;if(!g||g.isConnected===!1)return;const u=t(o)(g),d=On(u,t(i));if(t(f)||(d.x=0),t(v)||(d.y=0),e=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const m=Fn(g);m&&m.scrollBy({top:d.y,left:d.x})}})}const Vr=Symbol("ActiveDraggableContext");function Hn(){return Xt(Vr)()}var ft=(r=>(r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized",r))(ft||{}),Os=F("<!> <!> <!>",1);function Ns(r,e){me(e,!0);let n=W(e,"autoScroll",3,!0),a=W(e,"sensors",3,Ds),o=W(e,"collisionDetection",3,Go),i=gn(e,["$$slots","$$events","$$legacy","id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const[l,c]=Ts(),[f,v]=Io();let h=oe(gt(ft.Uninitialized));const g=s(()=>t(h)===ft.Initialized),u=s(()=>l.draggable.active),d=s(()=>l.draggable.nodes),b=s(()=>l.draggable.translate),m=s(()=>l.droppable.containers),x=s(()=>t(u)!=null?t(d).get(t(u)):null),y=gt({initial:null,translated:null}),k=s(()=>{var he;return t(u)!=null?{id:t(u),data:((he=t(x))==null?void 0:he.data)??Cs,rect:y}:null});let I=null,M=oe(null),z=oe(null);const D=s(()=>Ut("DndDescribedBy",e.id)),L=s(()=>t(m).getEnabled()),C=s(()=>Is(e.measuring)),{droppableRects:O,measureDroppableContainers:R,measuringScheduled:N}=ls(()=>({containers:t(L),dragging:t(g),dependencies:()=>[t(b).x,t(b).y],config:t(C).droppable})),T=cs(()=>[t(d),t(u)]),Y=s(()=>t(z)?nr(t(z)):null),j=s(Ee),H=ds(()=>T.current,()=>t(C).draggable.measure);As(()=>({activeNode:t(u)!=null?t(d).get(t(u)):null,config:t(j).layoutShiftCompensation,initialRect:H.current,measure:t(C).draggable.measure}));const w=ln(()=>[T.current,t(C).draggable.measure,H.current]),V=ln(()=>[T.current?T.current.parentElement:null]),U=gt({activatorEvent:null,active:null,activeNode:T.current,collisionRect:null,collisions:null,droppableRects:O.current,draggableNodes:t(d),draggingNode:null,draggingNodeRect:null,droppableContainers:t(m),over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ne=s(()=>{var he;return t(m).getNodeFor((he=U.over)==null?void 0:he.id)}),P=vs({measureFn:()=>t(C).dragOverlay.measure}),S=s(()=>P.nodeRef?P.nodeRef:T.current),X=s(()=>t(g)?P.rect??w.current:null),re=s(()=>!!(P.nodeRef&&P.rect)),le=gs(()=>t(re)?null:w.current),ue=Vn(()=>t(S)?Le(t(S)):null),ve=bs(()=>t(g)?t(ne)??T.current:null),xe=ms(()=>[ve.current]),_e=s(()=>qn(e.modifiers,{transform:{x:t(b).x-le.current.x,y:t(b).y-le.current.y,scaleX:1,scaleY:1},activatorEvent:t(z),active:t(k),activeNodeRect:w.current,containerNodeRect:V.current,draggingNodeRect:t(X),over:U.over,overlayNodeRect:P.rect,scrollableAncestors:ve.current,scrollableAncestorRects:xe.current,windowRect:ue.current})),ae=s(()=>t(Y)?St(t(Y),t(b)):null),ke=ps(()=>ve.current),Re=un(()=>[ke.current]),ge=un(()=>[ke.current,[w.current]]),Me=s(()=>St(t(_e),Re.current)),Xe=s(()=>t(X)?Vo(t(X),t(_e)):null),Je=s(()=>t(k)&&t(Xe)?o()({active:t(k),collisionRect:t(Xe),droppableRects:O.current,droppableContainers:t(L),pointerCoordinates:t(ae)}):null),K=s(()=>jo(t(Je),"id"));let $=oe(null);const we=s(()=>t(re)?t(_e):St(t(_e),ge.current)),Ye=s(()=>{var he;return Yo(t(we),((he=t($))==null?void 0:he.rect)??null,w.current)});let q=null;const Q=(he,{sensor:ye,options:je})=>{if(I==null)return;const We=t(d).get(I);if(!We)return;const Ge=he;q=new ye({active:I,activeNode:We,event:Ge,options:je,context:U,onAbort(Te){if(!t(d).get(Te))return;const{onDragAbort:He}=i,$e={id:Te};He==null||He($e),f({type:"onDragAbort",event:$e})},onPending(Te,qe,He,$e){if(!t(d).get(Te))return;const{onDragPending:pt}=i,ot={id:Te,constraint:qe,initialCoordinates:He,offset:$e};pt==null||pt(ot),f({type:"onDragPending",event:ot})},onStart(Te){const qe=I;if(qe==null)return;const He=t(d).get(qe);if(!He)return;const{onDragStart:$e}=i,At={activatorEvent:Ge,active:{id:qe,data:He.data,rect:y}};$e==null||$e(At),A(h,ft.Initializing,!0),c({type:De.DragStart,initialCoordinates:Te,active:qe}),f({type:"onDragStart",event:At}),A(M,q,!0),A(z,Ge,!0)},onMove(Te){c({type:De.DragMove,coordinates:Te})},onEnd:Ue(De.DragEnd),onCancel:Ue(De.DragCancel)});function Ue(Te){return async function(){const{active:He,collisions:$e,over:At,scrollAdjustedTranslate:pt}=U;let ot=null;if(He&&pt){const{cancelDrop:yt}=i;ot={activatorEvent:Ge,active:He,collisions:$e,delta:pt,over:At},Te===De.DragEnd&&typeof yt=="function"&&await Promise.resolve(yt(ot))&&(Te=De.DragCancel)}I=null,c({type:Te}),A(h,ft.Uninitialized,!0),A($,null),A(M,null),A(z,null),q=null;const Ur=Te===De.DragEnd?"onDragEnd":"onDragCancel";if(ot){const yt=i[Ur];yt==null||yt(ot),f({type:Ur,event:ot})}}}},Se=(he,ye)=>(je,We)=>{const Ge=je,Qe=t(d).get(We);if(I!==null||!Qe||Ge.dndKit||Ge.defaultPrevented)return;const Ue={active:Qe};he(je,ye.options,Ue)===!0&&(Ge.dndKit={capturedBy:ye.sensor},I=We,Q(je,ye))},Oe=xs(()=>[a(),Se]);ws(()=>a()),ee(()=>{w.current&&t(h)===ft.Initializing&&A(h,ft.Initialized,!0)}),mt(()=>t(Me),()=>{const{onDragMove:he}=i,{active:ye,activatorEvent:je,collisions:We,over:Ge}=U;if(!ye||!je)return;const Qe={active:ye,activatorEvent:je,collisions:We,delta:{x:t(Me).x,y:t(Me).y},over:Ge};he==null||he(Qe),f({type:"onDragMove",event:Qe})}),mt(()=>t(K),()=>{const{active:he,activatorEvent:ye,collisions:je,droppableContainers:We,scrollAdjustedTranslate:Ge}=U;if(!he||I==null||!ye||!Ge)return;const{onDragOver:Qe}=i,Ue=We.get(t(K)),Te=Ue&&Ue.rect?{id:Ue.id,rect:Ue.rect,data:Ue.data,disabled:Ue.disabled}:null,qe={active:he,activatorEvent:ye,collisions:je,delta:{x:Ge.x,y:Ge.y},over:Te};A($,Te,!0),Qe==null||Qe(qe),f({type:"onDragOver",event:qe})}),ee(()=>{Object.assign(U,{activatorEvent:t(z),active:t(k),activeNode:T.current,collisionRect:t(Xe),collisions:t(Je),droppableRects:O.current,draggableNodes:t(d),draggingNode:t(S),draggingNodeRect:t(X),droppableContainers:t(m),over:t($),scrollableAncestors:ve.current,scrollAdjustedTranslate:t(Me)}),Object.assign(y,{initial:t(X),translated:t(Xe)})}),_s(()=>({...t(j),delta:t(b),draggingRect:t(Xe),pointerCoordinates:t(ae),scrollableAncestors:ve.current,scrollableAncestorRects:xe.current}));const Ne=s(()=>({active:t(k),activeNode:T.current,activeNodeRect:w.current,activatorEvent:t(z),collisions:t(Je),containerNodeRect:V.current,dragOverlay:P,draggableNodes:t(d),droppableContainers:t(m),droppableRects:O.current,over:t($),measureDroppableContainers:R,scrollableAncestors:ve.current,scrollableAncestorRects:xe.current,measuringConfiguration:t(C),measuringScheduled:N.current,windowRect:ue.current})),ze=s(()=>({activatorEvent:t(z),activators:Oe.current,active:t(k),activeNodeRect:w.current,ariaDescribedById:{draggable:t(D)},dispatch:c,draggableNodes:t(d),over:t($),measureDroppableContainers:R}));function Ee(){var We;const he=((We=t(M))==null?void 0:We.autoScrollEnabled)===!1,ye=typeof n()=="object"?n().enabled===!1:n()===!1,je=t(g)&&!he&&!ye;return typeof n()=="object"?{...n(),enabled:je}:{enabled:je}}vt(Cr,v),vt(or,()=>t(ze)),vt(Ir,()=>t(Ne)),vt(Vr,()=>t(Ye));var fe=Os(),Be=Z(fe);Ae(Be,()=>e.children??Ze);var dt=B(Be,2);{let he=s(()=>{var ye;return((ye=e.accessibility)==null?void 0:ye.restoreFocus)===!1});Es(dt,{get disabled(){return t(he)}})}var gr=B(dt,2);Lo(gr,_a(()=>e.accessibility,{get hiddenTextDescribedById(){return t(D)}})),p(r,fe),pe()}function Fs(r,e){me(e,!0);const n={x:0,y:0,scaleX:1,scaleY:1};vt(or,()=>Un),vt(Vr,()=>n);var a=ie(),o=Z(a);Ae(o,()=>e.children),p(r,a),pe()}const Ps={position:"fixed",touchAction:"none"};function Ls(r){return ur(r)?"transform 250ms ease":void 0}function Ms(r,e){me(e,!0);let n=W(e,"transition",3,Ls),a=W(e,"ref",15),o=s(()=>e.adjustScale?e.transform:{...e.transform,scaleX:1,scaleY:1}),i=s(()=>e.rect?{...Ps,width:e.rect.width,height:e.rect.height,top:e.rect.top,left:e.rect.left,transform:it.Transform.toString(t(o)),transformOrigin:e.adjustScale&&e.activatorEvent?zo(e.activatorEvent,e.rect):void 0,transition:typeof n()=="function"?n()(e.activatorEvent):n(),...e.style}:{});const l=s(()=>fr(t(i)));ee(()=>{e.onStylesUpdated(t(l))});var c=ie(),f=Z(c);{var v=h=>{var g=ie(),u=Z(g);hi(u,()=>e.as,!1,(d,b)=>{jt(d,y=>a(y),()=>a()),fi(d,y=>{var k;return(k=e.handleExit)==null?void 0:k.call(e,y)}),_t(d,()=>({class:e.className,style:t(l)}));var m=ie(),x=Z(m);Ae(x,()=>e.children??Ze),p(b,m)}),p(h,g)};G(f,h=>{e.rect&&h(v)})}p(r,c),pe()}const fn="button",zs="Draggable";function Bs(r){const e=Ut(zs),n=s(()=>zr(r)),a=s(()=>t(n).id),o=s(()=>Pe(t(n).disabled,!1)),i=s(()=>t(n).data),l=s(()=>t(n).attributes),c=s(Xr),f=s(()=>t(c).activators),v=s(()=>t(c).activatorEvent),h=s(()=>t(c).active),g=s(()=>t(c).activeNodeRect),u=s(()=>t(c).ariaDescribedById),d=s(()=>t(c).draggableNodes),b=s(()=>t(c).over),m=s(()=>t(l)??{}),x=s(()=>Pe(t(m).role,fn)),y=s(()=>Pe(t(m).roleDescription,"draggable")),k=s(()=>Pe(t(m).tabIndex,0)),I=s(()=>{var N;return((N=t(h))==null?void 0:N.id)===t(a)}),M=s(()=>t(I)?Hn():null),[z,D]=tr(),[L,C]=tr(),O=ys(()=>[t(f),t(a)]);mt(()=>t(a),N=>(t(d).set(N,{id:N,key:e,node:z.current,activatorNode:L.current,data:t(i)}),()=>{const T=t(d).get(N);T&&T.key===e&&t(d).delete(N)}));const R=s(()=>({role:t(x),tabIndex:t(k),"aria-disabled":t(o),"aria-pressed":t(I)&&t(x)===fn?!0:void 0,"aria-roledescription":t(y),"aria-describedby":t(u).draggable}));return{active:J.with(()=>t(h)),activatorEvent:J.with(()=>t(v)),activeNodeRect:J.with(()=>t(g)),attributes:J.with(()=>t(R)),isDragging:J.with(()=>t(I)),listeners:J.with(()=>t(o)?void 0:O.current),node:z,over:J.with(()=>t(b)),setNodeRef:D,setActivatorNodeRef:C,transform:J.with(()=>t(M))}}function Kn(){return lr(Ir)?Xt(Ir)():ks}const js="Droppable",Ws={timeout:25};function Gs(r){const e=Ut(js),n=s(()=>zr(r)),a=s(()=>t(n).id),o=s(()=>Pe(t(n).disabled,!1)),i=s(()=>t(n).data),l=s(()=>t(n).resizeObserverConfig),c=s(Xr),f=s(()=>t(c).active),v=s(()=>t(c).dispatch),h=s(()=>t(c).over),g=s(()=>t(c).measureDroppableContainers),u={disabled:t(o)};let d=!1;const b=null;let m=null;const x=s(()=>({...Ws,...t(l)})),y=s(()=>t(x).disabled),k=s(()=>t(x).updateMeasurementsFor),I=s(()=>t(x).timeout),M=s(()=>t(k)??t(a)),z=()=>{if(!d){d=!0;return}m!=null&&clearTimeout(m),m=setTimeout(()=>{t(g)(Array.isArray(t(M))?t(M):[t(M)]),m=null},t(I))},D=vr(()=>({callback:z,disabled:t(y)||!t(f)})),L=(R,N)=>{D.current&&(N&&(D.current.unobserve(N),d=!1),R&&D.current.observe(R))},[C,O]=tr(L);return ee(()=>{!D.current||!C.current||(D.current.disconnect(),d=!1,D.current.observe(C.current))}),mt(()=>t(a),()=>(t(v)({type:De.RegisterDroppable,element:{id:t(a),key:e,disabled:t(o),node:C.current,rect:b,data:t(i)}}),()=>{t(v)({type:De.UnregisterDroppable,key:e,id:t(a)})})),ee(()=>{t(o)!==u.disabled&&(t(v)({type:De.SetDroppableDisabled,id:t(a),key:e,disabled:t(o)}),u.disabled=t(o))}),{active:J.with(()=>t(f)),rect:J.with(()=>b),isOver:J.with(()=>{var R;return((R=t(h))==null?void 0:R.id)===t(a)}),node:C,over:J.with(()=>t(h)),setNodeRef:O}}const Ys=r=>({active:e,dragOverlay:n})=>{const a={},{styles:o,className:i}=r;if(o!=null&&o.active)for(const[l,c]of Object.entries(o.active))c!==void 0&&(a[l]=e.node.style.getPropertyValue(l),e.node.style.setProperty(l,c));if(o!=null&&o.dragOverlay)for(const[l,c]of Object.entries(o.dragOverlay))c!==void 0&&n.node.style.setProperty(l,c);return i!=null&&i.active&&e.node.classList.add(i.active),i!=null&&i.dragOverlay&&n.node.classList.add(i.dragOverlay),function(){for(const[c,f]of Object.entries(a))e.node.style.setProperty(c,f);i!=null&&i.active&&e.node.classList.remove(i.active)}},Xs=({transform:{initial:r,final:e}})=>[{transform:it.Transform.toString(r)},{transform:it.Transform.toString(e)}],Vs={duration:250,easing:"ease",keyframes:Xs,sideEffects:Ys({styles:{active:{opacity:"0"}}})};function Us({config:r,draggableNodes:e,droppableContainers:n,measuringConfiguration:a}){return(o,i)=>{if(r===null)return;const l=e.get(o);if(!l)return;const c=l.node;if(!c)return;const f=Xn(i);if(!f)return;const{transform:v}=Le(i).getComputedStyle(i),h=Nn(v);if(!h)return;const g=typeof r=="function"?r:qs(r);return jn(c,a.draggable.measure),g({active:{id:o,data:l.data,node:c,rect:a.draggable.measure(c)},draggableNodes:e,dragOverlay:{node:i,rect:a.dragOverlay.measure(f)},droppableContainers:n,measuringConfiguration:a,transform:h})}}function qs(r){const{duration:e,easing:n,sideEffects:a,keyframes:o}={...Vs,...r};return({active:i,dragOverlay:l,transform:c,...f})=>{if(!e)return;const v={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},h={scaleX:c.scaleX!==1?i.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?i.rect.height*c.scaleY/l.rect.height:1},g={x:c.x-v.x,y:c.y-v.y,...h},u=o({...f,active:i,dragOverlay:l,transform:{initial:c,final:g}}),[d]=u,b=u[u.length-1];if(JSON.stringify(d)===JSON.stringify(b))return;const m=a==null?void 0:a({active:i,dragOverlay:l,...f}),x=l.node.animate(u,{duration:e,easing:n,fill:"forwards"});return new Promise(y=>{x.onfinish=()=>{m==null||m(),y()}})}}function Hs(r,e){me(e,!0);let n=W(e,"adjustScale",3,!1),a=W(e,"wrapperElement",3,"div"),o=W(e,"zIndex",3,999);const i=s(Kn),l=s(()=>t(i).activatorEvent),c=s(()=>t(i).active),f=s(()=>t(i).activeNodeRect),v=s(()=>t(i).containerNodeRect),h=s(()=>t(i).draggableNodes),g=s(()=>t(i).droppableContainers),u=s(()=>t(i).dragOverlay),d=s(()=>t(i).over),b=s(()=>t(i).measuringConfiguration),m=s(()=>t(i).scrollableAncestors),x=s(()=>t(i).scrollableAncestorRects),y=s(()=>t(i).windowRect),k=s(Hn),I=s(()=>qn(e.modifiers,{activatorEvent:t(l),active:t(c),activeNodeRect:t(f),containerNodeRect:t(v),draggingNodeRect:t(u).rect,over:t(d),overlayNodeRect:t(u).rect,scrollableAncestors:t(m),scrollableAncestorRects:t(x),transform:t(k),windowRect:t(y)})),M=Yr(()=>t(f)),z=s(()=>Us({config:e.dropAnimation,draggableNodes:t(h),droppableContainers:t(g),measuringConfiguration:t(b)}));let D,L,C=oe(()=>{});function O(){D==null||D.remove(),D=void 0,L=void 0,A(C,()=>{})}function R(N){ee(()=>{var T;return D=N.cloneNode(!0),L=(T=t(c))==null?void 0:T.id,A(C,Y=>{D.style.cssText=Y}),()=>{if(!D||!L)return O();document.body.appendChild(D),Promise.resolve(t(z)(L,D)).then(O)}})}Fs(r,{children:(N,T)=>{var Y=ie(),j=Z(Y);{var H=w=>{var V=ie(),U=Z(V);cr(U,()=>t(c).id,ne=>{var P=()=>null,S=X=>{M.current&&t(u).setRef(X)};{let X=s(()=>({zIndex:o(),...e.style}));Ms(ne,{get id(){return t(c).id},get ref(){return P()},set ref(re){S(re)},get as(){return a()},get activatorEvent(){return t(l)},get adjustScale(){return n()},get className(){return e.className},get transition(){return e.transition},get rect(){return M.current},get style(){return t(X)},get transform(){return t(I)},handleExit:R,get onStylesUpdated(){return t(C)},children:(re,le)=>{var ue=ie(),ve=Z(ue);Ae(ve,()=>e.children??Ze),p(re,ue)},$$slots:{default:!0}})}}),p(w,V)};G(j,w=>{t(c)&&w(H)})}p(N,Y)},$$slots:{default:!0}}),pe()}function Zn(r,e,n){const a=r.slice();return a.splice(n<0?a.length+n:n,0,a.splice(e,1)[0]),a}function Ks(r,e){return r.reduce((n,a,o)=>{if(!e)return n;const i=e.get(a);return i&&(n[o]=i),n},Array(r.length))}function Zt(r){return r!==null&&r>=0}function Zs(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!==e[n])return!1;return!0}function Js(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const Jn=({rects:r,activeIndex:e,overIndex:n,index:a})=>{const o=Zn(r,n,e),i=r[a],l=o[a];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},Qn="Sortable",Ar=Symbol("SortableContext"),Qs={activeIndex:-1,containerId:Qn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Jn,disabled:{draggable:!1,droppable:!1}};function $s(){return lr(Ar)?Xt(Ar)():Qs}function $n(r,e){me(e,!0);let n=W(e,"items",19,()=>[]),a=W(e,"strategy",3,Jn),o=W(e,"disabled",3,!1);const i=s(Kn),l=s(()=>t(i).active),c=s(()=>t(i).dragOverlay),f=s(()=>t(i).droppableRects),v=s(()=>t(i).over),h=s(()=>t(i).measureDroppableContainers),g=s(()=>Ut(Qn,e.id)),u=s(()=>t(c).rect!==null),d=s(()=>n().map(C=>typeof C=="object"&&"id"in C?C.id:C)),b=s(()=>t(l)!=null),m=s(()=>t(l)?t(d).indexOf(t(l).id):-1),x=s(()=>t(v)?t(d).indexOf(t(v).id):-1);let y=oe(gt(t(d)));const k=s(()=>!Zs(t(d),t(y))),I=s(()=>t(x)!==-1&&t(m)===-1||t(k)),M=Js(o());mt(()=>[t(k),t(d),t(b)],([C,O,R])=>{C&&R&&t(h)(O)}),ee(()=>{A(y,t(d),!0)});const z=s(()=>({activeIndex:t(m),containerId:t(g),disabled:M,disableTransforms:t(I),items:t(d),overIndex:t(x),useDragOverlay:t(u),sortedRects:Ks(t(d),t(f)),strategy:a()}));vt(Ar,()=>t(z));var D=ie(),L=Z(D);Ae(L,()=>e.children),p(r,D),pe()}const el=({id:r,items:e,activeIndex:n,overIndex:a})=>Zn(e,n,a).indexOf(r),tl=({containerId:r,isSorting:e,wasDragging:n,index:a,items:o,newIndex:i,previousItems:l,previousContainerId:c,transition:f})=>!f||!n||l!==o&&a===i?!1:e?!0:i!==a&&r===c,rl={duration:200,easing:"ease"},ea="transform",nl=it.Transition.toString({property:ea,duration:0,easing:"linear"}),al={roleDescription:"sortable"};function il(r){const e=s(r),n=s(()=>t(e).rect),a=s(()=>t(e).disabled),o=s(()=>t(e).index),i=s(()=>t(e).node);let l=oe(null),c=t(o);return ee(()=>{if(!t(a)&&t(o)!==c&&t(i)){const f=t(n);if(f){const v=It(t(i),{ignoreTransform:!0}),h={x:f.left-v.left,y:f.top-v.top,scaleX:f.width/v.width,scaleY:f.height/v.height};(h.x||h.y)&&A(l,h,!0)}}t(o)!==c&&(c=t(o))}),ee(()=>{t(l)&&A(l,null)}),{get current(){return t(l)}}}function ta(r){const e=s(()=>zr(r)),n=s(()=>Pe(t(e).animateLayoutChanges,tl)),a=s(()=>t(e).attributes),o=s(()=>t(e).disabled),i=s(()=>t(e).data),l=s(()=>Pe(t(e).getNewIndex,el)),c=s(()=>t(e).id),f=s(()=>t(e).strategy),v=s(()=>t(e).resizeObserverConfig),h=s(()=>Pe(t(e).transition,rl)),g=s($s),u=s(()=>t(g).items),d=s(()=>t(g).containerId),b=s(()=>t(g).activeIndex),m=s(()=>t(g).disabled),x=s(()=>t(g).disableTransforms),y=s(()=>t(g).sortedRects),k=s(()=>t(g).overIndex),I=s(()=>t(g).useDragOverlay),M=s(()=>t(g).strategy),z=s(()=>ol(t(o),t(m))),D=s(()=>t(u).indexOf(t(c))),L=s(()=>({sortable:{containerId:t(d),index:t(D),items:t(u)},...t(i)})),C=s(()=>t(u).slice(t(u).indexOf(t(c)))),{rect:O,node:R,isOver:N,setNodeRef:T}=Gs({id:()=>t(c),data:()=>t(L),disabled:()=>t(z).droppable,resizeObserverConfig:()=>({updateMeasurementsFor:t(C),...t(v)})}),{active:Y,activatorEvent:j,activeNodeRect:H,attributes:w,setNodeRef:V,listeners:U,isDragging:ne,over:P,setActivatorNodeRef:S,transform:X}=Bs({id:()=>t(c),data:()=>t(L),attributes:()=>({...al,...t(a)}),disabled:()=>t(z).draggable}),re=s(()=>eo(T,V)),le=s(()=>!!Y.current),ue=s(()=>t(le)&&!t(x)&&Zt(t(b))&&Zt(t(k))),ve=s(()=>!t(I)&&ne.current),xe=s(()=>t(ve)&&t(ue)?X.current:null),_e=s(()=>t(f)??t(M)),ae=s(()=>t(ue)?t(xe)??t(_e)({rects:t(y),activeNodeRect:H.current,activeIndex:t(b),overIndex:t(k),index:t(D)}):null),ke=s(()=>Zt(t(b))&&Zt(t(k))?t(l)({id:t(c),items:t(u),activeIndex:t(b),overIndex:t(k)}):t(D)),Re=s(()=>{var $;return($=Y.current)==null?void 0:$.id}),ge={activeId:t(Re),items:t(u),newIndex:t(ke),containerId:t(d)},Me=s(()=>t(u)!==ge.items),Xe=s(()=>t(n)({active:Y.current,containerId:t(d),isDragging:ne.current,isSorting:t(le),id:t(c),index:t(D),items:t(u),newIndex:ge.newIndex,previousItems:ge.items,previousContainerId:ge.containerId,transition:t(h),wasDragging:ge.activeId!=null})),Je=il(()=>({disabled:!t(Xe),index:t(D),node:R.current,rect:O.current}));return ee(()=>{t(le)&&ge.newIndex!==t(ke)&&(ge.newIndex=t(ke)),t(d)!==ge.containerId&&(ge.containerId=t(d)),t(u)!==ge.items&&(ge.items=t(u))}),ee(()=>{if(t(Re)===ge.activeId)return;if(t(Re)!=null&&ge.activeId==null){ge.activeId=t(Re);return}const $=setTimeout(()=>{ge.activeId=t(Re)},50);return()=>clearTimeout($)}),{active:Y,activeIndex:J.with(()=>t(b)),attributes:w,data:J.with(()=>t(L)),rect:O,index:J.with(()=>t(D)),newIndex:J.with(()=>t(ke)),items:J.with(()=>t(u)),isOver:N,isSorting:J.with(()=>t(le)),isDragging:ne,listeners:U,node:J.with(()=>R.current,t(re)),activatorNode:J.with(()=>null,S),overIndex:J.with(()=>t(k)),over:P,setNodeRef:t(re),setActivatorNodeRef:S,setDroppableNodeRef:T,setDraggableNodeRef:V,transform:J.with(()=>Je.current??t(ae)),transition:J.with(K)};function K(){if(Je.current||t(Me)&&ge.newIndex===t(D))return nl;if(!(t(ve)&&!ur(j.current)||!t(h))&&(t(le)||t(Xe)))return it.Transition.toString({...t(h),property:ea})}}function ol(r,e){return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(r==null?void 0:r.draggable)??e.draggable,droppable:(r==null?void 0:r.droppable)??e.droppable}}function sl(r,e,n,a){e.filter.filterType==="genomic"?(di(e.filter),Ct("/explorer/genome-filter?edit="+Jr.Genomic)):e.filter.filterType==="snp"?(ui(e.filter),Ct("/explorer/genome-filter?edit="+Jr.SNP)):(Bt(hn,e.filter),Bt(bn,e.filter.searchResult))}const ll=function(r,e){return Ma(e.filter.uuid)};var cl=F('<div class="absolute -top-2 left-0 right-0 h-1 bg-primary-500 rounded-full z-10 shadow-lg"></div> <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-primary-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">Reorder before filter</div>',1),dl=F('<div><div class="cursor-grab active:cursor-grabbing text-primary-500"><i class="fa-solid fa-grip-vertical" style="color: var(--color-surface-900);"></i></div></div>'),ul=(r,e)=>(r.key==="Enter"||r.key===" ")&&e(r),fl=F('<div class="flex-auto variable svelte-1ukmkhn" tabindex="0" role="button"> </div>'),vl=F('<div class="text-left"> </div>'),gl=F('<button type="button" title="Edit Filter" class="bg-initial text-black-500 hover:text-primary-600"><i class="fa-solid fa-pen-to-square"></i> <span class="sr-only">Edit Filter</span></button>'),hl=F('<i class="fa-solid fa-pen-to-square"></i> <span class="sr-only">Edit Filter</span>',1),bl=F('<button type="button" title="See details" class="bg-initial text-black-500 hover:text-primary-600"><i></i> <span class="sr-only">See details</span></button>'),ml=F("<div> </div>"),pl=F('<section class="p-1 whitespace-pre-wrap"> <!></section>'),yl=F('<div class="absolute inset-0 flex flex-col card pointer-events-none"><header class="card-header p-1 flex"><div class="flex-auto flex items-center justify-center"><div class="text-surface-500 text-sm opacity-50 mt-0.5"> </div></div></header></div>'),xl=F('<div class="absolute -bottom-2 left-0 right-0 h-1 bg-primary-500 rounded-full z-10 shadow-lg"></div> <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-primary-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">Reorder after filter</div>',1),wl=F('<div class="relative"><!> <div class="flex flex-col card bg-surface-100 p-1 m-1"><header><!> <!> <div class="actions svelte-1ukmkhn"><!> <button type="button" title="Remove Filter" class="bg-initial text-black-500 hover:text-primary-600"><i class="fa-solid fa-times-circle"></i> <span class="sr-only">Remove Filter</span></button> <!></div></header> <!></div> <!> <!></div>');function er(r,e){me(e,!0);const n=()=>de(hn,"$activeFilter",o),a=()=>de(bn,"$activeSearch",o),[o,i]=nt();let l=W(e,"draggable",3,!1),c=W(e,"hoverZone",3,null),f=W(e,"hoverGroupId",3,null),v=oe(!1),h=oe("fa-caret-up");const g=s(()=>["genomic","snp"].includes(e.filter.filterType)),u=s(()=>e.filter.filterType==="AnyRecordOf");let d=oe(!1),b=oe(!1);const m=s(()=>f()===e.filter.uuid),x=s(()=>t(m)&&c()==="top"),y=s(()=>t(m)&&c()==="bottom"),{attributes:k,listeners:I,node:M,activatorNode:z,transform:D,transition:L,isDragging:C,isSorting:O}=ta({id:e.filter.uuid,data:{type:"item"}}),R=s(()=>{const w=D.current;return w&&(w.scaleY=1),fr({transform:it.Transform.toString(w),transition:O.current?L.current:void 0,zIndex:C.current?1:void 0})}),N=function(w){if(w.filterType==="Categorical")if(w.displayType==="restrict"){let V=w.categoryValues.length===1?"value":"values";return`Restricting to ${w.categoryValues.length} ${V}.`}else return w.displayType==="any"||w.displayType==="anyRecordOf"?"Restricting to any value.":w.description;else{if(w.filterType==="AnyRecordOf")return"Restricting to children of the selected value.";if(w.filterType==="numeric")switch(w.displayType){case"any":return"Restricting to any value.";case"between":return`Restricting to between ${w.min} and ${w.max}.`;case"greaterThan":return`Restricting to greater than ${w.min}.`;case"lessThan":return`Restricting to less than ${w.max}.`;default:return w.description||"N/A"}else if(w.filterType==="genomic"||w.filterType==="snp")return w.description}},T=function(w){var V,U,ne,P;return(V=w.searchResult)!=null&&V.studyAcronym&&((U=w.searchResult)!=null&&U.dataset)?`${w.searchResult.studyAcronym} (${w.searchResult.dataset})`:((ne=w.searchResult)==null?void 0:ne.studyAcronym)||((P=w.searchResult)==null?void 0:P.dataset)||""},Y=function(w){w.stopPropagation(),w.preventDefault(),A(v,!t(v)),A(h,t(v)?"fa-caret-down":"fa-caret-up",!0)};var j=ie(),H=Z(j);cr(H,()=>e.filter.uuid,w=>{var V=wl(),U=E(V);{var ne=q=>{var Q=cl();tt(2),p(q,Q)};G(U,q=>{t(x)&&q(ne)})}var P=B(U,2),S=E(P),X=E(S);{var re=q=>{var Q=dl();_t(Q,()=>({class:"flex items-center justify-center bg-surface-100 rounded-l-md p-1 w-7 flex-shrink-0 self-stretch min-h-full",...k.current,...I.current}),void 0,void 0,"svelte-1ukmkhn"),jt(Q,Se=>z.current=Se,()=>z==null?void 0:z.current),p(q,Q)};G(X,q=>{l()&&!C.current&&q(re)})}var le=B(X,2);{var ue=q=>{var Q=fl();Q.__click=Y,Q.__keydown=[ul,Y];var Se=E(Q,!0);_(Q),te(()=>be(Se,e.filter.variableName)),p(q,Q)},ve=q=>{{const Q=Oe=>{var Ne=vl(),ze=E(Ne);_(Ne),te(()=>{var Ee,fe,Be,dt;return be(ze,`${((fe=(Ee=e.filter)==null?void 0:Ee.concepts)==null?void 0:fe.length)??""} variable(s) in ${(((Be=e.filter.searchResult)==null?void 0:Be.display)||((dt=e.filter.searchResult)==null?void 0:dt.name)||e.filter.variableName)??""}
                category`)}),p(Oe,Ne)};let Se=s(()=>`any-record-of-filter-modal-${e.filter.id}`);Pt(q,{title:"View Variables in Filter",get"data-testid"(){return t(Se)},withDefault:!1,get open(){return t(b)},set open(Oe){A(b,Oe,!0)},trigger:Q,children:(Oe,Ne)=>{Ji(Oe,{get filter(){return e.filter}})},$$slots:{trigger:!0,default:!0}})}};G(le,q=>{t(u)?q(ve,!1):q(ue)})}var xe=B(le,2),_e=E(xe);{var ae=q=>{var Q=gl();Q.__click=[sl,e,n,a],p(q,Q)},ke=q=>{var Q=ie(),Se=Z(Q);{var Oe=Ne=>{Pt(Ne,{title:"Edit Filter",triggerBase:"bg-initial text-black-500 hover:text-primary-600",withDefault:!1,get open(){return t(d)},set open(Ee){A(d,Ee,!0)},trigger:Ee=>{var fe=hl();tt(2),p(Ee,fe)},children:(Ee,fe)=>{gi(Ee,{get data(){return e.filter.searchResult},get existingFilter(){return e.filter},onclose:()=>A(d,!1)})},$$slots:{trigger:!0,default:!0}})};G(Se,Ne=>{t(u)||Ne(Oe)},!0)}p(q,Q)};G(_e,q=>{t(g)?q(ae):q(ke,!1)})}var Re=B(_e,2);Re.__click=[ll,e];var ge=B(Re,2);{var Me=q=>{var Q=bl();Q.__click=Y;var Se=E(Q);tt(2),_(Q),te(()=>Ke(Se,1,`fa-solid ${t(h)??""}`,"svelte-1ukmkhn")),p(q,Q)};G(ge,q=>{t(u)||q(Me)})}_(xe),_(S);var Xe=B(S,2);{var Je=q=>{var Q=pl(),Se=E(Q),Oe=B(Se);{var Ne=ze=>{var Ee=ml(),fe=E(Ee);_(Ee),te(Be=>be(fe,`Values: ${Be??""}`),[()=>e.filter.categoryValues.join(", ")]),p(ze,Ee)};G(Oe,ze=>{e.filter.filterType==="Categorical"&&e.filter.displayType!=="any"&&e.filter.displayType!=="anyRecordOf"&&ze(Ne)})}_(Q),te((ze,Ee)=>be(Se,`${ze??""}
          ${Ee??""} `),[()=>N(e.filter),()=>T(e.filter)]),Rt(3,Q,()=>Rn,()=>({axis:"y"})),p(q,Q)};G(Xe,q=>{t(v)&&q(Je)})}_(P),jt(P,q=>M.current=q,()=>M==null?void 0:M.current);var K=B(P,2);{var $=q=>{var Q=yl(),Se=E(Q),Oe=E(Se),Ne=E(Oe),ze=E(Ne);_(Ne),_(Oe),_(Se),_(Q),te(()=>be(ze,`Moving filter: ${e.filter.variableName??""}`)),p(q,Q)};G(K,q=>{C.current&&q($)})}var we=B(K,2);{var Ye=q=>{var Q=xl();tt(2),p(q,Q)};G(we,q=>{t(y)&&q(Ye)})}_(V),te(()=>{Ce(P,"id",e.filter.uuid),Ce(P,"data-testid",`added-filter-${e.filter.id??""}`),Ce(P,"data-sortable-id",e.filter.uuid),Nr(P,t(R)),Ke(S,1,Ja(["card-header p-1 flex",{invisible:C.current}]),"svelte-1ukmkhn")}),Rt(1,P,()=>wn,()=>({easing:Sn})),Rt(2,P,()=>_n,()=>({duration:300})),p(w,V)}),p(r,j),pe(),i()}ct(["click","keydown"]);function _l(r,e){za(e.siblingA,e.siblingB)}var Rl=F('<select class="select operator-select"><option> </option><option> </option></select>');function Sl(r,e){me(e,!0);let n=s(()=>e.siblingA.uuid.split("-")[0]+"-"+e.siblingB.uuid.split("-")[0]);var a=Rl();a.__change=[_l,e];var o=E(a),i=E(o,!0);_(o);var l={},c=B(o),f=E(c,!0);_(c);var v={};_(a);var h;Qa(a),te(()=>{Ce(a,"data-testid",`operator-dropdown-${t(n)}`),be(i,xt.AND),l!==(l=xt.AND)&&(o.value=(o.__value=xt.AND)??""),be(f,xt.OR),v!==(v=xt.OR)&&(c.value=(c.__value=xt.OR)??""),h!==(h=e.operator)&&(a.value=(a.__value=e.operator)??"",$a(a,e.operator))}),p(r,a),pe()}ct(["change"]);var Dl=F('<div class="absolute -top-2 left-0 right-0 h-1 bg-primary-500 rounded-full z-10 shadow-lg"></div> <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-primary-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">Reorder before group</div>',1),Cl=F('<div><div class="cursor-grab active:cursor-grabbing text-primary-500"><i class="fa-solid fa-grip-vertical" style="color: var(--color-surface-900);"></i></div></div>'),kl=F("<!> <!>",1),El=F('<div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-primary-500 text-white text-xs px-3 py-1.5 rounded-md whitespace-nowrap z-10 shadow-lg font-medium">Add to group</div>'),Tl=F('<div class="absolute -bottom-2 left-0 right-0 h-1 bg-primary-500 rounded-full z-10 shadow-lg"></div> <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-primary-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10">Reorder after group</div>',1),Il=F('<div class="flex items-center justify-center bg-surface-200/50 rounded-l-md p-1.5 w-7 flex-shrink-0 self-stretch min-h-full border-2 border-dashed border-surface-400"></div>'),Al=F('<div class="absolute inset-0 flex flex-row items-center gap-0 pointer-events-none"><!> <div class="flex-1 h-full bg-surface-200/30 border-2 border-dashed border-surface-400 rounded-r-md flex items-center justify-center"><div class="text-surface-500 text-sm opacity-50"> </div></div></div>'),Ol=F('<div class="relative"><!> <div class="flex flex-row items-center gap-0 w-full transition-all"><!> <div></div></div> <!> <!> <!></div>');function Or(r,e){me(e,!0);let n=W(e,"hoverZone",3,null),a=W(e,"hoverGroupId",3,null),o=s(()=>e.group.uuid.split("-")[0]);const i=s(()=>e.group.children.length>1&&(!e.group.parent||e.group.parent.children.length>1)),l=s(()=>e.group.parent===void 0||e.group.parent===null),c=s(()=>a()===e.group.uuid),f=s(()=>t(c)&&n()==="middle"&&!t(l)),v=s(()=>t(c)&&n()==="top"&&!t(l)),h=s(()=>t(c)&&n()==="bottom"&&!t(l)),{attributes:g,listeners:u,node:d,activatorNode:b,transform:m,transition:x,isDragging:y,isSorting:k}=ta({id:e.group.uuid,data:{type:e.group.parent===void 0||e.group.parent===null?"root":"group",accepts:["item"]}}),I=s(()=>{const D=m.current;return D&&(D.scaleY=1),fr({transform:it.Transform.toString(D),transition:k.current?x.current:void 0,zIndex:y.current?1:void 0})});var M=ie(),z=Z(M);cr(z,()=>e.group.uuid,D=>{var L=Ol(),C=E(L);{var O=P=>{var S=Dl();tt(2),p(P,S)};G(C,P=>{t(v)&&P(O)})}var R=B(C,2),N=E(R);{var T=P=>{var S=Cl();_t(S,()=>({class:"flex items-center justify-center bg-surface-100 rounded-l-md p-1.5 w-7 flex-shrink-0 self-stretch min-h-full",...g.current,...u.current})),jt(S,X=>b.current=X,()=>b==null?void 0:b.current),p(P,S)};G(N,P=>{t(i)&&!t(l)&&P(T)})}var Y=B(N,2);at(Y,23,()=>e.group.children,P=>P.uuid,(P,S,X)=>{var re=kl(),le=Z(re);{var ue=ae=>{Sl(ae,{get siblingA(){return e.group.children[t(X)-1]},get siblingB(){return e.group.children[t(X)]},get operator(){return e.group.operator}})};G(le,ae=>{t(X)>0&&ae(ue)})}var ve=B(le,2);{var xe=ae=>{{let ke=s(()=>t(S).children.map(Re=>Re.uuid));$n(ae,{get items(){return t(ke)},children:(Re,ge)=>{Or(Re,{get group(){return t(S)},get hoverZone(){return n()},get hoverGroupId(){return a()}})},$$slots:{default:!0}})}},_e=ae=>{er(ae,{get filter(){return t(S)},get draggable(){return t(i)},get hoverZone(){return n()},get hoverGroupId(){return a()}})};G(ve,ae=>{t(S)&&"children"in t(S)?ae(xe):ae(_e,!1)})}p(P,re)}),_(Y),_(R),jt(R,P=>d.current=P,()=>d==null?void 0:d.current);var j=B(R,2);{var H=P=>{var S=El();p(P,S)};G(j,P=>{t(f)&&P(H)})}var w=B(j,2);{var V=P=>{var S=Tl();tt(2),p(P,S)};G(w,P=>{t(h)&&P(V)})}var U=B(w,2);{var ne=P=>{var S=Al(),X=E(S);{var re=xe=>{var _e=Il();p(xe,_e)};G(X,xe=>{t(i)&&!t(l)&&xe(re)})}var le=B(X,2),ue=E(le),ve=E(ue);_(ue),_(le),_(S),te(xe=>be(ve,`Moving group: ${xe??""}`),[()=>e.group.operator.toLowerCase()]),p(P,S)};G(U,P=>{y.current&&P(ne)})}_(L),te(P=>{Ce(R,"id",`filter-group-${t(o)}`),Ce(R,"data-testid",`filter-group-${t(o)}`),Ce(R,"data-sortable-id",e.group.uuid),Nr(R,t(I)),Ke(Y,1,P),Ce(Y,"data-testid",`filter-group-${t(o)}`)},[()=>`filter-group-${e.group.operator.toLowerCase()} w-full`]),p(D,L)}),p(r,M),pe()}var Nl=F('<p class="text-center">No filters added</p>'),Fl=F('<header class="text-left ml-1">Filters</header>'),Pl=F("<!> <!>",1),Ll=F('<div class="px-4 mb-1 w-80"><!> <section class="py-1"><!> <!></section></div>');function Ml(r,e){me(e,!0);const n=()=>de(mr,"$filterTree",c),a=()=>de(kt,"$filters",c),o=()=>de(Ba,"$genomicFilters",c),i=()=>de(xn,"$exports",c),l=()=>de(ut,"$advancedFilteringEnabled",c),[c,f]=nt();let v=s(()=>Fe.url.pathname.includes("/discover")),h=Mo(xr(Yn),xr(Wr),xr(Gn)),g=oe(void 0),u=oe(null),d=oe(null),b=0;function m(C){const O=n().find(R=>"uuid"in R&&R.uuid===C);return O&&n().isGroup(O)?O:O==null?void 0:O.parent}function x(C){const O=document.querySelectorAll("[data-sortable-id]");let R;if(O.forEach(H=>{H.getAttribute("data-sortable-id")===String(C)&&(R=H)}),!R)return console.warn("Element not found, returning middle as fallback"),"middle";const N=R.getBoundingClientRect(),T=b-N.top,Y=N.height,j=T/Y;return j<.2?"top":j>.8?"bottom":"middle"}function y({active:C}){const O=n().find(R=>"uuid"in R&&R.uuid===C.id);n().isGroup(O)?A(g,O??null,!0):A(g,O??null,!0)}function k(C){var V,U,ne,P;const{active:O,over:R}=C;if(!R||!O){A(u,null),A(d,null);return}const N=(V=O.data)==null?void 0:V.type,T=(U=R==null?void 0:R.data)==null?void 0:U.type,Y=((P=(ne=R==null?void 0:R.data)==null?void 0:ne.accepts)==null?void 0:P.includes("item"))??!1;if(N==="item"&&T==="group"){const S=x(R.id);if(A(u,S,!0),A(d,String(R.id),!0),S!=="middle")return}else if(N==="group"&&(T==="group"||T==="item"||T==="root")){if(T==="root"){A(u,null),A(d,null);return}if(T==="group"){const S=x(R.id);A(u,S==="middle"?"bottom":S,!0),A(d,String(R.id),!0)}else{const S=x(R.id);A(u,S==="middle"?"bottom":S,!0),A(d,String(R.id),!0)}return}else A(u,null),A(d,null);if(N!=="item"||!T&&!Y)return;const j=m(O.id),H=m(R.id);if(!j||!H||j===H)return;const w=j.children.find(S=>"uuid"in S&&S.uuid===O.id);w&&(j.children=j.children.filter(S=>"uuid"in S&&S.uuid!==O.id),H.children.push(w),w.parent=H)}function I({active:C,over:O}){var T,Y;if(!O){A(g,void 0),A(u,null),A(d,null);return}const R=(T=C.data)==null?void 0:T.type,N=(Y=O==null?void 0:O.data)==null?void 0:Y.type;if(R==="group"&&(N==="group"||N==="item")){const j=n().find(w=>"uuid"in w&&w.uuid===C.id),H=n().find(w=>"uuid"in w&&w.uuid===O.id);j&&H&&n().reorderNodes(j,H)}if(R==="item"&&N==="group"&&(t(u)==="top"||t(u)==="bottom")){const j=n().find(w=>"uuid"in w&&w.uuid===C.id),H=n().find(w=>"uuid"in w&&w.uuid===O.id);if(j&&H&&H.parent){const w=H.parent,V=j.parent;V&&(V.children=V.children.filter(ne=>ne!==j),V.uuid=st());const U=w.children.indexOf(H);t(u)==="bottom"?w.children.splice(U+1,0,j):w.children.splice(U,0,j),j.parent=w,w.uuid=st()}}if(R==="item"&&N==="item"){const j=m(C.id),H=m(O.id);if(!j||!H){A(g,void 0),A(u,null),A(d,null);return}if(j===H){const w=n().find(U=>"uuid"in U&&U.uuid===C.id),V=n().find(U=>"uuid"in U&&U.uuid===O.id);w&&V&&(n().reorderNodes(w,V),j.uuid=st())}else j&&(j.uuid=st()),H&&(H.uuid=st())}if(R==="item"&&N==="group"&&t(u)==="middle"){const j=n().find(w=>"uuid"in w&&w.uuid===C.id),H=n().find(w=>"uuid"in w&&w.uuid===O.id);j!=null&&j.parent&&H&&n().isGroup(H)&&(j.parent.uuid=st(),H.uuid=st())}A(g,void 0),A(u,null),A(d,null),n().pruneTree(),Ra(mr,lt(n).root.uuid=st(),lt(n)),mr.set(n())}var M=ie(),z=Z(M);{var D=C=>{var O=Nl();p(C,O)},L=C=>{var O=Ll(),R=E(O);{var N=V=>{var U=Fl();p(V,U)};G(R,V=>{a().length+o().length>0&&V(N)})}var T=B(R,2),Y=E(T);{var j=V=>{Ns(V,{get sensors(){return h},onDragStart:y,onDragEnd:I,onDragOver:k,children:(U,ne)=>{var P=Pl(),S=Z(P);{let re=s(()=>n().root.children.map(le=>le.uuid));$n(S,{get items(){return t(re)},children:(le,ue)=>{Or(le,{get group(){return n().root},get hoverZone(){return t(u)},get hoverGroupId(){return t(d)}})},$$slots:{default:!0}})}var X=B(S,2);Hs(X,{children:(re,le)=>{var ue=ie(),ve=Z(ue);{var xe=ae=>{Or(ae,{get group(){return t(g)}})},_e=ae=>{var ke=ie(),Re=Z(ke);{var ge=Me=>{er(Me,{get filter(){return t(g)}})};G(Re,Me=>{t(g)&&Me(ge)},!0)}p(ae,ke)};G(ve,ae=>{t(g)&&n().isGroup(t(g))?ae(xe):ae(_e,!1)})}p(re,ue)},$$slots:{default:!0}}),p(U,P)},$$slots:{default:!0}})},H=V=>{var U=ie(),ne=Z(U);at(ne,1,a,bt,(P,S)=>{er(P,{get filter(){return t(S)}})}),p(V,U)};G(Y,V=>{l()&&(et.explorer.enableOrQueries||!t(v))?V(j):V(H,!1)})}var w=B(Y,2);at(w,1,o,bt,(V,U)=>{er(V,{get filter(){return t(U)}})}),_(T),_(O),p(C,O)};G(z,C=>{a().length+o().length+i().length===0?C(D):C(L,!1)})}p(r,M),pe(),f()}const zl=function(r,e,n){e(n.variable.id)};var Bl=F('<div class="flex flex-col card bg-surface-100 p-1 m-1"><header class="card-header p-1 flex"><div class="flex-auto"> </div> <button type="button" title="Remove Export" class="btn-icon-color" aria-label="Remove Export"><i class="fa-solid fa-times-circle"></i></button></header></div>');function jl(r,e){me(e,!0);const{removeExport:n}=Sr;var a=Bl(),o=E(a),i=E(o),l=E(i,!0);_(i);var c=B(i,2);c.__click=[zl,n,e],_(o),_(a),te(()=>{var f,v;Ce(a,"id",e.variable.studyId?`${e.variable.studyId}-${e.variable.conceptPath}`:e.variable.conceptPath),Ce(a,"data-testid",`added-export-${e.variable.conceptPath??""}`),be(l,e.variable.display||((f=e.variable.searchResult)==null?void 0:f.display)||((v=e.variable.searchResult)==null?void 0:v.name))}),Rt(3,a,()=>_n,()=>({duration:300})),p(r,a),pe()}ct(["click"]);var Wl=F('<span class="text-4xl font-bold"></span>'),Gl=F('<div class="flex flex-row h-full"><span id="result-count-number" class="text-4xl"> </span> <!></div>'),Yl=F('<span id="result-count"><!></span>'),Xl=F('<div class="flex flex-col items-center mt-2"><!> <h4 class="text-center"> </h4></div>'),Vl=F('Some sites did not return patient counts for your query. See <a href="/explorer/cohort" class="anchor font-bold">Cohort Details</a> for more information.',1),Ul=F('<p class="text-[0.6rem] !m-0"><!></p>'),ql=F("<!> <!>",1);function Hl(r,e){me(e,!0);const n=()=>de(si,"$resultCounts",a),[a,o]=nt();let i=oe(!1);function l(u){return mi(u.filter(wt.fullfiled).map(({value:d})=>d))}function c(u){return u.filter(wt.fullfiled).length===0||u.some(wt.rejected)}ee(()=>{A(i,!1),n().forEach(u=>{Promise.allSettled(wt.list(u).map(({promise:d})=>d)).then(d=>{c(d)&&A(i,!0)})})});var f=ql(),v=Z(f);at(v,1,n,bt,(u,d)=>{var b=Xl(),m=E(b);Cn(m,()=>Promise.allSettled(wt.list(t(d)).map(({promise:k})=>k)),k=>{pn(k,{ring:!0,size:"mini"})},(k,I)=>{const M=s(()=>l(t(I))),z=s(()=>c(t(I)));var D=Yl(),L=E(D);{var C=R=>{var N=Wl();N.textContent="N/A",p(R,N)},O=R=>{var N=Gl(),T=E(N),Y=E(T,!0);_(T);var j=B(T,2);{var H=w=>{{let V=s(()=>{var U,ne,P,S;return aa(kt).length!==0?(ne=(U=Jt)==null?void 0:U.explorePage)==null?void 0:ne.filterErrorText:(S=(P=Jt)==null?void 0:P.explorePage)==null?void 0:S.queryErrorText});pi(w,{type:"exclamation",color:"warning",id:"result-count-error",get text(){return t(V)}})}};G(j,w=>{t(z)&&w(H)})}_(N),te(()=>be(Y,t(M))),p(R,N)};G(L,R=>{t(I).filter(wt.fullfiled).length===0?R(C):R(O,!1)})}_(D),p(k,D)});var x=B(m,2),y=E(x,!0);_(x),_(b),te(()=>be(y,t(d).label)),p(u,b)});var h=B(v,2);{var g=u=>{Fr(u,{color:"warning",iconSize:"2xl",children:(d,b)=>{var m=Ul(),x=E(m);{var y=I=>{var M=Vl();tt(2),p(I,M)},k=I=>{var M=ie(),z=Z(M);bi(z,()=>{var D,L;return yi((L=(D=Jt)==null?void 0:D.explorePage)==null?void 0:L.queryErrorText)}),p(I,M)};G(x,I=>{et.federated?I(y):I(k,!1)})}_(m),p(d,m)},$$slots:{default:!0}})};G(h,u=>{t(i)&&u(g)})}p(r,f),pe(),o()}var Kl=(r,e)=>{r.stopPropagation(),e()},Zl=F(`<p>With Advanced Filtering, you can build more complex queries by combining filters using "and" and
    "or" with the dropdown menu. As this feature is under active development, some other features
    may not be available with this enabled.</p> <p>What do you think about Advanced Filtering? <a target="_blank" rel="noopener noreferrer" class="anchor">Let us know</a>!</p>`,1),Jl=F(`<p>This will remove any "or" filters and filter groups you have added. The filters you have added
    will now be combined using "and".</p>`),Ql=()=>Ct("/explorer/export"),$l=F('<div class="h-11 mt-4"><button id="export-data-button" type="button" class="btn preset-filled-primary-500">Prepare for Analysis</button></div>'),ec=(r,e)=>A(e,!0),tc=F('<button data-testid="clear-all-results-btn" class="anchor text-sm flex-none">Reset</button>'),rc=F('<div class="flex items-center justify-between w-full px-4 mt-2 mb-2"><div class="flex items-center gap-2"><span class="text-sm">Advanced Filtering</span> <span class="chip preset-tonal-primary text-xs px-2 py-0.5 rounded" data-testid="advanced-filtering-beta-chip">Beta</span></div> <!></div>'),nc=F('<div class="px-4 mb-1 w-80"><header class="text-left ml-1" data-testid="export-header">Added Variables</header> <section class="py-1"></section></div>'),ac=F('<div class="flex flex-col items-center mt-7"><hr class="svelte-qyz27f"/> <h5 class="text-center text-xl mt-7">Tool Suite</h5> <div class="flex flex-row flex-wrap justify-items-center gap-4 w-80 justify-center"><!> <!> <!> <!></div></div>'),ic=F('<!> <!> <!> <section id="results-panel" class="flex flex-col items-center pt-8 pr-10 w-64"><!> <!> <div id="export-filters" class="flex flex-col items-center mt-7 w-80"><hr class="svelte-qyz27f"/> <div class="flex content-center mt-7"><h5 class="text-xl flex-auto mr-2 mb-2">Filtered Data Summary</h5> <!></div> <!> <!> <!></div> <!></section>',1);function oc(r,e){me(e,!0);const n=()=>de(kt,"$filters",v),a=()=>de(xn,"$exports",v),o=()=>de(li,"$countsLoading",v),i=()=>de(ci,"$hasNonZeroResult",v),l=()=>de(mn,"$hasGenomicFilter",v),c=()=>de(Ga,"$hasOrGroup",v),f=()=>de(ut,"$advancedFilteringEnabled",v),[v,h]=nt();let g=null,u=Fe.url.pathname,d=s(()=>Fe.url.pathname.includes("/discover")),b=s(()=>Fe.url.pathname.includes("/explorer")),m=oe(!1),x=oe(!1),y=oe(!1),k=s(()=>n().length!==0||et.explorer.exportsEnableExport&&a().length!==0),I=s(()=>et.explorer.allowExport&&!t(d)&&t(k)&&(o()||i())),M=s(()=>n().length!==0&&!n().every(K=>K.filterType==="genomic"||K.filterType==="snp"||K.filterType==="AnyRecordOf")),z=s(()=>t(b)&&et.explorer.distributionExplorer&&t(M)),D=s(()=>t(d)&&et.discoverFeautures.distributionExplorer&&t(M)),L=s(()=>t(b)&&et.explorer.variantExplorer&&l()),C=s(()=>t(b)&&et.explorer.enableCohortDetails),O=s(()=>t(C)||(n().length!==0||a().length!==0)&&(t(z)||t(D)||t(L)));function R(){g||(g=kt.subscribe(()=>Kt(t(d))))}function N(){g&&(g(),g=null)}ee(()=>{Fe.url.pathname.startsWith(u)||(u=Fe.url.pathname,N(),R())}),sr(R),vn(N);function T(K){K.checked?A(x,!0):c()?(ut.set(!1),A(y,!0)):(ut.set(!1),Kt(t(d)))}function Y(){ut.set(!0),A(x,!1),Kt(t(d))}function j(){Wa(),ut.set(!1),A(y,!1),Kt(t(d))}function H(){ut.set(!0),A(y,!1)}function w(){window.open("https://hms-dbmi.atlassian.net/servicedesk/customer/portal/5/group/6/create/362","_blank")}var V=ic(),U=Z(V);Pt(U,{title:"Clear All Filters",withDefault:!0,confirmText:"Yes",cancelText:"No",onconfirm:()=>{ja(),ii()},get open(){return t(m)},set open(K){A(m,K,!0)},children:(K,$)=>{tt();var we=zt("Are you sure you want to clear all filters?");p(K,we)},$$slots:{default:!0}});var ne=B(U,2);Pt(ne,{title:"Advanced Filtering is now enabled",withDefault:!0,confirmText:"Proceed",cancelText:"",width:"w-1/3",footerButtons:!0,onconfirm:Y,get open(){return t(x)},set open(K){A(x,K,!0)},children:(K,$)=>{var we=Zl(),Ye=B(Z(we),2),q=B(E(Ye));q.__click=[Kl,w],tt(),_(Ye),te(()=>Ce(q,"href",Jt.login.contactLink)),p(K,we)},$$slots:{default:!0}});var P=B(ne,2);Pt(P,{title:"Advanced Filtering will be removed",withDefault:!0,confirmText:"Proceed",cancelText:"Cancel",confirmClass:"preset-filled-primary-500",cancelClass:"preset-tonal-primary border hover:preset-filled-primary-500",footerButtons:!0,width:"w-1/3",onconfirm:j,onclose:H,get open(){return t(y)},set open(K){A(y,K,!0)},children:(K,$)=>{var we=Jl();p(K,we)},$$slots:{default:!0}});var S=B(P,2),X=E(S);Hl(X,{});var re=B(X,2);{var le=K=>{var $=$l(),we=E($);we.__click=[Ql],_($),te(()=>we.disabled=o()),Rt(3,we,()=>wn,()=>({easing:Sn})),p(K,$)};G(re,K=>{t(I)&&K(le)})}var ue=B(re,2),ve=B(E(ue),2),xe=B(E(ve),2);{var _e=K=>{var $=tc();$.__click=[ec,m],p(K,$)};G(xe,K=>{t(k)&&K(_e)})}_(ve);var ae=B(ve,2);{var ke=K=>{var $=rc(),we=B(E($),2);oi(we,{name:"advanced-filtering-toggle",controlActive:"bg-primary-500",get checked(){return f()},onCheckedChange:T}),_($),p(K,$)};G(ae,K=>{n().length>0&&K(ke)})}var Re=B(ae,2);Ml(Re,{});var ge=B(Re,2);{var Me=K=>{var $=nc(),we=B(E($),2);at(we,5,a,Ye=>Ye.id,(Ye,q)=>{jl(Ye,{get variable(){return t(q)}})}),_(we),_($),p(K,$)};G(ge,K=>{a().length>0&&K(Me)})}_(ue);var Xe=B(ue,2);{var Je=K=>{var $=ac(),we=B(E($),4),Ye=E(we);{var q=fe=>{{let Be=s(()=>Fe.url.pathname.includes("explorer/cohort"));Ot(fe,{href:"/explorer/cohort","data-testid":"cohort-details-btn",title:"Cohort Details",icon:"fa-solid fa-users",size:"md",get active(){return t(Be)}})}};G(Ye,fe=>{t(C)&&fe(q)})}var Q=B(Ye,2);{var Se=fe=>{Ot(fe,{href:"/explorer/distributions","data-testid":"distributions-btn",title:"Variable Distributions",icon:"fa-solid fa-chart-pie",size:"md"})};G(Q,fe=>{t(z)&&fe(Se)})}var Oe=B(Q,2);{var Ne=fe=>{var Be=ie(),dt=Z(Be);{var gr=ye=>{yn(ye,{triggerTypes:["hover","focus"],placement:"left",message:"Variable distributions currently not available with 'OR' queries.",trigger:We=>{Ot(We,{href:"/discover/distributions","data-testid":"distributions-btn",title:"Variable Distributions",icon:"fa-solid fa-chart-pie",size:"md",disabled:!0})},$$slots:{trigger:!0}})},he=ye=>{Ot(ye,{href:"/discover/distributions","data-testid":"distributions-btn",title:"Variable Distributions",icon:"fa-solid fa-chart-pie",size:"md"})};G(dt,ye=>{c()?ye(gr):ye(he,!1)})}p(fe,Be)};G(Oe,fe=>{t(D)&&fe(Ne)})}var ze=B(Oe,2);{var Ee=fe=>{{let Be=s(()=>Fe.url.pathname.includes("explorer/variant"));Ot(fe,{href:"/explorer/variant","data-testid":"variant-explorer-btn",title:"Variant Explorer",icon:"fa-solid fa-dna",size:"md",get active(){return t(Be)}})}};G(ze,fe=>{t(L)&&fe(Ee)})}_(we),_($),p(K,$)};G(Xe,K=>{t(O)&&K(Je)})}_(S),Rt(3,S,()=>Rn,()=>({axis:"x"})),p(r,V),pe(),h()}ct(["click"]);var sc=F('<div id="side-panel"><div id="side-panel-bar" class="svelte-19rrhxy"><button type="button" id="results-panel-toggle" class="btn-icon btn-icon-sm preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 svelte-19rrhxy" aria-label="Toggle Results Panel"><i></i></button></div> <!></div>');function lc(r,e){me(e,!0);const n=()=>de(kt,"$filters",i),a=()=>de(c,"$exports",i),o=()=>de(Qt,"$panelOpen",i),[i,l]=nt();let{exports:c}=Sr,f,v;function h(){Qt.set(!0)}sr(()=>{f=kt.subscribe(()=>{var y;((y=n())==null?void 0:y.length)!==0&&h()}),v=Sr.subscribe(()=>{var y;((y=a())==null?void 0:y.length)!==0&&h()})}),vn(()=>{f&&f(),v&&v()});var g=sc(),u=E(g),d=E(u);d.__click=()=>{Qt.update(y=>!y)};var b=E(d);_(d),_(u);var m=B(u,2);{var x=y=>{oc(y,{})};G(m,y=>{o()&&y(x)})}_(g),te(()=>{Ke(g,1,`flex ${o()?"open":"closed"}-panel`),Ce(d,"title",`${o()?"Hide":"Show"} Results`),Ke(b,1,`fa-solid ${o()?"fa-arrow-right":"fa-arrow-left"}`)}),p(r,g),pe(),l()}ct(["click"]);function cc(r,e){const n=()=>de($r,"$drawerState",a),[a,o]=nt();let i=W(e,"position",3,"right"),l=W(e,"width",3,"w-[480px]");const c=i()==="left"?"justify-start":"justify-end";Dn(r,{get open(){return n()},onOpenChange:v=>Bt($r,v.open),triggerBase:"btn preset-tonal",get contentBase(){return`bg-surface-50-950 p-4 space-y-4 shadow-xl ${l()??""} h-screen overflow-auto`},get positionerJustify(){return c},positionerAlign:"",positionerPadding:"",transitionsPositionerIn:{x:-480,duration:200},transitionsPositionerOut:{x:-480,duration:200},ids:{content:"drawer"},get trigger(){return e.trigger},content:v=>{var h=ie(),g=Z(h);Ae(g,()=>e.children??Ze),p(v,h)},$$slots:{content:!0}}),o()}var dc=F('<h2 data-testid="drawer-title" class="text-2xl font-bold ml-4"> </h2>'),uc=F('<li class="ml-8"> </li>'),fc=F('<ul class="list-disc"></ul>'),vc=F('<li class="m-2"><strong class="capitalize"> </strong>: <!></li>'),gc=r=>r.stopPropagation(),hc=F('<div class="flex justify-center items-center mb-4"><a class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500" target="_blank">More Info</a></div>'),bc=F('<ul data-testid="drawer-details" class="m-4 p-4"></ul> <!>',1),mc=F("<!> <hr/> <!>",1);function pc(r,e){var d,b,m;me(e,!0);const n=()=>de(xi,"$activeRow",a),[a,o]=nt(),i=((d=n())==null?void 0:d.dataset_id)||"",l=((b=n())==null?void 0:b.name)||"",c=((m=n())==null?void 0:m.additional_info_link)||"";async function f(){const x=await wi(i);if(!x||Object.keys(x).length===0)throw new Error("No details found");return x.datasetId&&delete x.datasetId,x.studyFullname&&delete x.studyFullname,x}var v=mc(),h=Z(v);{var g=x=>{var y=dc(),k=E(y,!0);_(y),te(()=>be(k,l)),p(x,y)};G(h,x=>{l&&x(g)})}var u=B(h,4);Cn(u,f,x=>{pn(x,{ring:!0,size:"medium"})},(x,y)=>{var k=bc(),I=Z(k);at(I,21,()=>Object.entries(t(y)),bt,(D,L)=>{var C=s(()=>ht(t(L),2));let O=()=>t(C)[0],R=()=>t(C)[1];var N=ie(),T=Z(N);{var Y=j=>{var H=vc(),w=E(H),V=E(w,!0);_(w);var U=B(w,2);{var ne=S=>{var X=fc();at(X,21,R,bt,(re,le)=>{var ue=ie(),ve=Z(ue);{var xe=_e=>{var ae=uc(),ke=E(ae,!0);_(ae),te(()=>be(ke,t(le))),p(_e,ae)};G(ve,_e=>{t(le)&&_e(xe)})}p(re,ue)}),_(X),p(S,X)},P=S=>{var X=zt();te(()=>be(X,R())),p(S,X)};G(U,S=>{Array.isArray(R())?S(ne):S(P,!1)})}_(H),te(S=>be(V,S),[()=>O().replace(/([A-Z])/g," $1").toLowerCase().trim()]),p(j,H)};G(T,j=>{R()&&j(Y)})}p(D,N)}),_(I);var M=B(I,2);{var z=D=>{var L=hc(),C=E(L);C.__click=[gc],_(L),te(()=>Ce(C,"href",c||"#")),p(D,L)};G(M,D=>{c&&D(z)})}p(x,k)},x=>{Fr(x,{title:"An Error Occured",children:(y,k)=>{tt();var I=zt("We're having trouble fetching the dataset details right now. Please try again later.");p(y,I)},$$slots:{default:!0}})}),p(r,v),pe(),o()}ct(["click"]);var yc=F('<p> </p> <p> </p> <div><button class="btn preset-outlined-warning-500 hover:preset-filled-warning-500">Remove Invalid Filters</button> <button class="btn preset-outlined-warning-500 hover:preset-filled-warning-500"> </button></div>',1);function xc(r,e){me(e,!0);const n=()=>de(Ft,"$filterWarning",a),[a,o]=nt();let i=W(e,"open",15,!1);const l={stigmatizing:{message:"Your selected filters contain stigmatizing variables and/or genomic filters, which are not supported with Discover",backTo:"Explore",path:"/discover",back:"/explorer",resetQuery:()=>{Xa(),Va()}},notAuthorized:{message:"You are not authorized to access the data in Explore based on your selected filters.",backTo:"Discover",path:"/explorer",back:"/discover",resetQuery:()=>Ya()},undefined:{message:"",backTo:"",path:"/",back:"/",resetQuery:()=>{}}},c=s(()=>l[n()||"undefined"]);function f(){const h=t(c).back;Ft.set(void 0),i(!1),Ct(h,{keepFocus:!1})}function v(){const h=t(c).path;t(c).resetQuery(),Qt.set(!1),Ft.set(void 0),i(!1),Ct(h,{keepFocus:!1})}Dn(r,{get open(){return i()},onOpenChange:g=>i(g.open),contentBase:"overflow-auto max-w-screen w-1/2 max-h-screen",backdropClasses:"backdrop-blur-sm",ids:{content:"modal-component"},content:g=>{Fr(g,{"data-testid":"sendfilter-warning",color:"warning",children:(u,d)=>{var b=yc(),m=Z(b),x=E(m,!0);_(m);var y=B(m,2),k=E(y);_(y);var I=B(y,2),M=E(I);M.__click=v;var z=B(M,2);z.__click=f;var D=E(z);_(z),_(I),te(()=>{be(x,t(c).message),be(k,`Would you like to remove the invalid filters or go back to ${t(c).backTo??""}?`),be(D,`Back to ${t(c).backTo??""}`)}),p(u,b)},$$slots:{default:!0}})},$$slots:{content:!0}}),pe(),o()}ct(["click"]);var wc=F('<div id="sidebar-right" class="flex overflow-auto"><!></div>'),_c=F("<!> <!> <!> <!>",1);function dd(r,e){me(e,!0);const n=()=>de(Ua,"$hasInvalidFilter",i),a=()=>de(mn,"$hasGenomicFilter",i),o=()=>de(qa,"$hasUnallowedFilter",i),[i,l]=nt();let c=oe(!1);sr(()=>{document.body.classList.add("started")});let f=s(()=>(Fe.url.pathname.includes("/explorer")||Fe.url.pathname.includes("/discover"))&&!Fe.url.pathname.includes("/export")&&!Fe.url.pathname.includes("/distributions"));Sa(({to:b,cancel:m})=>{const x=(b==null?void 0:b.url.pathname.includes("/explorer"))&&n(),y=(b==null?void 0:b.url.pathname.includes("/discover"))&&(a()||o());(y||x)&&(y?Bt(Ft,"stigmatizing"):x&&Bt(Ft,"notAuthorized"),m(),A(c,!0))});var v=_c(),h=Z(v);Pa(h,{get toaster(){return Fa}});var g=B(h,2);xc(g,{get open(){return t(c)},set open(b){A(c,b,!0)}});var u=B(g,2);cc(u,{position:"right",width:"w-1/2",children:(b,m)=>{pc(b,{})},$$slots:{default:!0}});var d=B(u,2);Bi(d,{header:y=>{Hi(y,{})},sidebarRight:y=>{var k=ie(),I=Z(k);{var M=z=>{var D=wc(),L=E(D);lc(L,{}),_(D),p(z,D)};G(I,z=>{t(f)&&z(M)})}p(y,k)},pageFooter:y=>{La(y,{})},children:(y,k)=>{var I=ie(),M=Z(I);Ae(M,()=>e.children??Ze),p(y,I)},$$slots:{header:!0,sidebarRight:!0,pageFooter:!0,default:!0}}),p(r,v),pe(),l()}export{dd as component};
