var Ce=Object.defineProperty;var _e=i=>{throw TypeError(i)};var Fe=(i,e,r)=>e in i?Ce(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r;var fe=(i,e,r)=>Fe(i,typeof e!="symbol"?e+"":e,r),$e=(i,e,r)=>e.has(i)||_e("Cannot "+r);var A=(i,e,r)=>($e(i,e,"read from private field"),r?r.call(i):e.get(i)),X=(i,e,r)=>e.has(i)?_e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,r);import"../chunks/Bzak7iHL.js";import{o as ke}from"../chunks/xU7jw7XU.js";import{p as I,f as k,d as y,s as h,r as _,t as j,b,c as M,k as s,u as J,j as Ne,B as Ee,h as B,i as Z,o as Le,l as $,a as U,n as ve,e as Oe,$ as ze}from"../chunks/DhSNEPDw.js";import{s as K,d as ee,h as Ae}from"../chunks/DVtHS8ol.js";import{i as E}from"../chunks/BG76zvuN.js";import{a as oe,s as T,r as ce,f as je,d as Re,h as Te}from"../chunks/CJ66PCUx.js";import{p as z,a as W,s as te,c as de,m as He}from"../chunks/DpjY2ypC.js";import{f as Y,b as pe}from"../chunks/BZHGrlEE.js";import{g as Ve}from"../chunks/BPde4ukL.js";import{p as Qe}from"../chunks/CftmxiRQ.js";import{C as De}from"../chunks/DCcVgSs7.js";import{O as Q,G as ae,n as Be,o as ge,j as Ie}from"../chunks/DA3-ipRP.js";import{C as ye}from"../chunks/DaAl-QrF.js";import{g as Me,s as be,a as Ue,d as We,c as Pe,b as ue,e as ie,v as Je,r as Ke,f as Xe,h as Ye,i as Ze,j as Ge,p as et,k as tt,l as at,m as rt}from"../chunks/Dsw-2KeE.js";import{s as me}from"../chunks/C8tG8t5X.js";import{b as nt,c as he}from"../chunks/DPXw0ygh.js";import{b as st}from"../chunks/C0kNAPzX.js";import{E as ot}from"../chunks/nxdkf_Tf.js";import{L as lt}from"../chunks/bwStxD3u.js";import{e as ne,i as se}from"../chunks/ByI6iVq5.js";import{H as xe}from"../chunks/DAS9fB1J.js";import{g as it,k as ct,t as dt,r as ut}from"../chunks/BNC-bmXQ.js";import{O as vt}from"../chunks/fGsiDjuU.js";import{p as we}from"../chunks/B1n7kAsq.js";var ft=k("<div><!> <!> <!></div>");function mt(i,e){I(e,!0);const r=z(e,"active",19,()=>Q.None),p=z(e,"class",3,""),c=z(e,"onselect",3,()=>{});var g=ft(),x=y(g);{var l=a=>{{let n=J(()=>r()===Q.Genomic);ye(a,{"data-testid":"gene-variant-option",title:"Variants by gene name",subtitle:"Ex: Rare BRCA1 variants with high severity",size:"other",class:"w-1/4 h-20 min-h-20",get active(){return s(n)},onclick:()=>c()(Q.Genomic)})}};E(x,a=>{Y.enableGENEQuery&&a(l)})}var t=h(x,2);{var v=a=>{{let n=J(()=>r()===Q.SNP);ye(a,{"data-testid":"snp-option",title:"Specific Variants",subtitle:"Ex: chr5,148481541,T,A",size:"other",class:"w-1/4 h-20 min-h-20",get active(){return s(n)},onclick:()=>c()(Q.SNP)})}};E(t,a=>{Y.enableSNPQuery&&a(v)})}var N=h(t,2);{var d=a=>{var n=Ne("Genomic filtering has not been enabled in this environment. :(");b(a,n)};E(N,a=>{!Y.enableGENEQuery&&!Y.enableSNPQuery&&a(d)})}_(g),j(()=>oe(g,1,`flex flex-row justify-center justify-items-center gap-16 ${p()??""??""}`)),b(i,g),M()}var ht=k('<span class="absolute top-0 left-1 p-1 text-error-600-400 text-xs">* Required</span>'),pt=k("<div> </div>"),bt=k('<span class="flex-none ml-1"><!></span>'),_t=k('<span class="flex-none ml-1"><!></span>'),gt=k('<div><div class="relative rounded-t-2xl bg-primary-300-700 p-4 items-center flex"><!> <div class="flex-auto text-center"><div class="font-bold"> </div> <!></div> <!> <!></div> <div class="h-full p-2 border rounded-b-2xl border-surface-300-700"><!></div></div>');function re(i,e){I(e,!0);const r=z(e,"title",3,""),p=z(e,"subtitle",3,""),c=z(e,"required",3,!1),g=z(e,"data-testid",3,""),x=z(e,"class",3,"");var l=gt(),t=y(l),v=y(t);{var N=w=>{var m=ht();b(w,m)};E(v,w=>{c()&&w(N)})}var d=h(v,2),a=y(d),n=y(a,!0);_(a);var f=h(a,2);{var u=w=>{var m=pt(),q=y(m,!0);_(m),j(()=>K(q,p())),b(w,m)};E(f,w=>{p()&&w(u)})}_(d);var G=h(d,2);{var P=w=>{var m=bt(),q=y(m);me(q,()=>e.action),_(m),b(w,m)};E(G,w=>{e.action&&w(P)})}var C=h(G,2);{var S=w=>{var m=_t(),q=y(m);me(q,()=>e.help),_(m),b(w,m)};E(C,w=>{e.help&&w(S)})}_(t);var o=h(t,2),L=y(o);me(L,()=>e.children??Ee),_(o),_(l),j(w=>{oe(l,1,`flex flex-col ${x()??""}`),T(l,"data-testid",w),K(n,r())},[()=>g()||r().replaceAll(" ","-").toLowerCase()]),b(i,l),M()}async function yt(i,e,r,p,c,g){$(e,!0);const x={search:s(r),constraint:""},{count:l,errors:t}=await Me(x);$(e,!1),t===0&&l>0?p()(x):l>0?($(c,g.SomeResults,!0),p()(x)):$(c,g.NoResults,!0)}var xt=k('<p class="text-center"> </p> <p class="text-center">If you have the rsID of the variant, you can use the <a href="https://www.ncbi.nlm.nih.gov/snp/" target="_blank" rel="noopener noreferrer" class="anchor">dbSNP database</a> to find the genomic coordinates.</p> <p class="text-center font-bold my-6"><em class="font-bold">Example:</em> chr5,148481541,T,A</p> <div class="flex gap-2 mx-auto my-8 w-1/2"><input type="search" class="input" placeholder="chromosome (chr#), position, reference allele, variant allele" data-testid="snp-search-box"/> <button type="button" data-testid="snp-search-btn" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Search <!></button></div> <!>',1);function St(i,e){var H;I(e,!0);const r=z(e,"search",3,""),p=z(e,"disabled",3,!1),c=z(e,"onvalid",3,()=>{}),g={NoResults:{color:"error",message:"We couldn't find any results for your search term. Please check to ensure the information you have entered is correct or try a different search."},SomeResults:{color:"warning",message:"Some sites did not return patient counts for your search. Click the Add Filter button to apply your filter and click Cohort Details for more information."}},x=((H=pe.genomic)==null?void 0:H.defaultGenomeBuild)||"GRCh38",l=/^\w+,\d+,(A|T|C|G)+,(A|T|C|G)+$/;let t,v=B(void 0),N=B(!1),d=B(Z(r())),a=J(()=>l.test(s(d)));Le(()=>{if(s(d)&&!s(a)){n();return}else f()});function n(){t.classList.add("required"),t.setCustomValidity("Please check that value matches: chromosome (chr#), position, reference allele, variant allele."),t.reportValidity()}function f(){t.classList.remove("required"),t.setCustomValidity(""),$(v,void 0)}var u=xt(),G=U(u),P=y(G);_(G);var C=h(G,6),S=y(C);ce(S),S.__keydown=f,st(S,F=>t=F,()=>t);var o=h(S,2);o.__click=[yt,N,d,c,v,g];var L=h(y(o));{var w=F=>{lt(F,{ring:!0,size:"micro",color:"white"})};E(L,F=>{s(N)&&F(w)})}_(o),_(C);var m=h(C,2);{var q=F=>{ot(F,{get color(){return s(v).color},children:(D,O)=>{ve();var V=Ne();j(()=>K(V,s(v).message)),b(D,V)},$$slots:{default:!0}})};E(m,F=>{s(v)&&F(q)})}j(()=>{K(P,`Enter the following information into the search bar using genome build ${x}: chromosome,
  position, reference allele, variant allele.`),S.disabled=p(),o.disabled=p()||!s(a)||s(N)}),nt(S,()=>s(d),F=>$(d,F)),b(i,u),M()}ee(["keydown","click"]);var kt=(i,e,r,p)=>e()({search:r.snp.search,constraint:s(p)}),Nt=k('<span class="mr-4"> </span> <select class="!w-96" data-testid="snp-constraint" required><option selected disabled>Select Genotype</option><option>Heterozygous</option><option>Homozygous</option><option>Heterozygous or homozygous</option></select> <button type="button" aria-label="Save SNP" data-testid="snp-save-btn" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Save SNP</button>',1);function Pt(i,e){I(e,!0);let r=z(e,"onsave",3,()=>{}),p=B(Z(e.snp.constraint));var c=Nt(),g=U(c),x=y(g,!0);_(g);var l=h(g,2),t=y(l);t.value=t.__value=!0;var v=h(t),N={},d=h(v),a={},n=h(d),f={};_(l);var u=h(l,2);u.__click=[kt,r,e,p],j(()=>{K(x,e.snp.search),N!==(N=ae.Heterozygous)&&(v.value=(v.__value=ae.Heterozygous)??""),a!==(a=ae.Homozygous)&&(d.value=(d.__value=ae.Homozygous)??""),f!==(f=ae.HeterozygousOrHomozygous)&&(n.value=(n.__value=ae.HeterozygousOrHomozygous)??""),u.disabled=s(p)===""}),je(l,()=>s(p),G=>$(p,G)),b(i,c),M()}ee(["click"]);var Gt=k("<p>No filters added.</p>"),wt=k('<div class="font-bold flex items-center justify-center p-6">AND</div>'),qt=(i,e,r)=>e()(s(r)),Ct=(i,e,r)=>e()(s(r)),Ft=k('<!> <div class="border rounded-sm border-surface-300-700 p-3 flex gap-4"><div class="flex-auto"><div class="text-surface-700-300 font-bold"> </div> <div class="text-surface-600-400"> </div></div> <div class="flex-none text-right"><button type="button" title="Edit" aria-label="Edit" class="btn-icon-color"><i class="fa-solid fa-pen-to-square"></i></button> <button type="button" title="Delete" aria-label="Delete" class="btn-icon-color"><i class="fa-solid fa-trash"></i></button></div></div>',1),$t=k('<div class="flex items-center justify-center"><!> <!></div>');function Et(i,e){I(e,!0);const r=()=>W(be,"$selectedSNPs",p),[p,c]=te(),g=z(e,"onedit",3,()=>{}),x=z(e,"ondelete",3,()=>{});var l=$t(),t=y(l);{var v=d=>{var a=Gt();b(d,a)};E(t,d=>{r().length===0&&d(v)})}var N=h(t,2);ne(N,1,r,se,(d,a,n)=>{var f=Ft(),u=U(f);{var G=F=>{var D=wt();b(F,D)};E(u,F=>{n!==0&&F(G)})}var P=h(u,2),C=y(P),S=y(C),o=y(S);_(S);var L=h(S,2),w=y(L,!0);_(L),_(C);var m=h(C,2),q=y(m);q.__click=[qt,g,a];var H=h(q,2);H.__click=[Ct,x,a],_(m),_(P),j(()=>{K(o,`${s(a).search??""}:`),K(w,Be[s(a).constraint]),T(q,"data-testid",`snp-edit-btn-${s(a).search}`),T(H,"data-testid",`snp-delete-btn-${s(a).search}`)}),b(d,f)}),_(l),b(i,l),M(),c()}ee(["click"]);var Lt=k('<hr/> <div class="flex gap-2 items-center justify-center my-8"><!></div>',1),Ot=k("<!> <!>",1),zt=k('<button class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),At=k('<div id="snp-search"><!> <!></div>');function jt(i,e){I(e,!0);const r=()=>W(be,"$selectedSNPs",p),[p,c]=te();let g=z(e,"class",3,"");const x={search:"",constraint:""};let l=B(Z(x));function t(u){$(l,u,!0)}function v(u){Ue(u),$(l,x,!0)}function N(u){$(l,u,!0)}function d(u){We(u)}var a=At(),n=y(a);re(n,{title:"Search for Genomic Variants",children:(u,G)=>{var P=Ot(),C=U(P);{let L=J(()=>!!s(l).search);St(C,{get disabled(){return s(L)},get search(){return s(l).search},onvalid:t})}var S=h(C,2);{var o=L=>{var w=Lt(),m=h(U(w),2),q=y(m);Pt(q,{get snp(){return s(l)},onsave:v}),_(m),b(L,w)};E(S,L=>{s(l).search&&L(o)})}b(u,P)},$$slots:{default:!0}});var f=h(n,2);re(f,{title:"Summary of Selected Filters",action:G=>{var P=zt();P.__click=function(...C){var S;(S=Pe)==null||S.apply(this,C)},j(()=>P.disabled=r().length===0),b(G,P)},children:(G,P)=>{Et(G,{onedit:N,ondelete:d})},$$slots:{action:!0,default:!0}}),_(a),j(()=>oe(a,1,`grid grid-cols-1 gap-3 ${(g()||"")??""}`)),b(i,a),M(),c()}ee(["click"]);var Rt=k('<div class="flex gap-4 mb-2"><!></div>');function Tt(i,e){I(e,!0);const r=()=>W(ue,"$selectedGenes",c),p=()=>W(ut,"$resources",c),[c,g]=te();let x=B(Z([])),l=J(()=>r().length===0?s(x):s(x).filter(P=>!r().includes(P))),t="",v=20,N=0,d=1,a=B(!1),n=B(!1);async function f(P=""){const C=t!==P;if(!(!C&&(N>=d||s(n)))){$(a,!0);try{const S=await it(`${ct.Search}/${p().search}/values/?`+new URLSearchParams({genomicConceptPath:"Gene_with_variant",query:P,page:(C?1:N+1).toString(),size:v.toString()}),{"content-type":"application/json"});if(S!=null&&S.error)throw S.error;const o=S.results;$(x,C?o:[...s(x),...o],!0),d=Math.ceil(S.total/v),N=S.page,t=P,$(n,o.length<v)}catch(S){console.error(S),dt.error({title:"An error occurred while loading genes list."})}finally{$(a,!1)}}}ke(async()=>{await f()});var u=Rt(),G=y(u);vt(G,{showSelectAll:!1,showClearAll:!1,get allOptionsLoaded(){return s(n)},onscroll:f,get unselectedOptions(){return s(l)},set unselectedOptions(P){$(l,P)},get selectedOptions(){return He(),r()},set selectedOptions(P){de(ue,P)},get currentlyLoading(){return s(a)},set currentlyLoading(P){$(a,P,!0)}}),_(u),b(i,u),M(),g()}var Ht=k('<label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Rare" type="checkbox"/> Rare</label> <label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Common" type="checkbox"/> Common</label> <label class="cursor-pointer block hover:preset-tonal-surface hover:rounded-md"><input id="Novel" type="checkbox"/> Novel</label>',1);function Vt(i){const e=()=>W(ie,"$selectedFrequency",r),[r,p]=te(),c=[];var g=Ht(),x=U(g),l=y(x);ce(l),l.value=l.__value="Rare",ve(),_(x);var t=h(x,2),v=y(t);ce(v),v.value=v.__value="Common",ve(),_(t);var N=h(t,2),d=y(N);ce(d),d.value=d.__value="Novel",ve(),_(N),he(c,[],l,e,a=>de(ie,a)),he(c,[],v,e,a=>de(ie,a)),he(c,[],d,e,a=>de(ie,a)),b(i,g),p()}var Qt=(i,e)=>e.node.toggleOpen(),Dt=k("<i></i>"),Bt=k('<i class="fa-solid fa-minus"></i>'),It=(i,e)=>e.node.toggleSelected(),Mt=k('<details class="tree-item"><summary class="tree-item-summary list-none [&amp;::-webkit-details-marker]:hidden flex items-center cursor-pointer space-x-4 rounded-container p-0 hover:preset-tonal-primary w-full" role="treeitem"><button type="button" class="m-1 ml-2"><!></button> <input class="checkbox tree-item-checkbox mr-1" type="checkbox"/> <label class="w-full"> </label></summary> <div class="tree-item-children ml-4" role="group"><!></div></details>');function qe(i,e){I(e,!0);var r=Mt(),p=y(r),c=y(p);c.__click=[Qt,e];var g=y(c);{var x=f=>{var u=Dt();j(()=>oe(u,1,`fa-solid fa-angle-${e.node.open?"up":"down"}`)),b(f,u)},l=f=>{var u=Bt();b(f,u)};E(g,f=>{e.node.isLeaf?f(l,!1):f(x)})}_(c);var t=h(c,2);ce(t),t.__click=[It,e];var v=h(t,2),N=y(v,!0);_(v),_(p);var d=h(p,2),a=y(d);{var n=f=>{var u=Oe(),G=U(u);ne(G,17,()=>e.node.children,se,(P,C)=>{qe(P,{get node(){return s(C)}})}),b(f,u)};E(a,f=>{!e.node.isLeaf&&e.node.open&&f(n)})}_(d),_(r),j(()=>{T(r,"data-testid",`tree-item:${e.node.name??""}-${e.node.value??""}`),T(r,"aria-disabled",e.node.disabled),r.open=e.node.open,T(p,"aria-selected",e.node.allSelected),T(p,"aria-expanded",e.node.open),T(c,"id",`tree-item-btn:${e.node.name??""}-${e.node.value??""}`),T(c,"data-testid",`tree-item-btn:${e.node.name??""}-${e.node.value??""}`),T(c,"title",e.node.isLeaf?void 0:`${e.node.open?"Close":"Open"} node`),T(c,"name",e.node.name),T(c,"tabindex",e.node.isLeaf?-1:0),T(t,"id",`checkbox:${e.node.name??""}-${e.node.value??""}`),T(t,"data-testid",`checkbox:${e.node.name??""}-${e.node.value??""}`),T(t,"name",e.node.name),Re(t,e.node.value),Te(t,e.node.allSelected),t.indeterminate=e.node.indeterminant,T(v,"for",`${e.node.isLeaf?"checkbox:":"tree-item-btn:"}${e.node.name??""}-${e.node.value??""}`),K(N,e.node.value),T(d,"data-testid",`tree-item-children:${e.node.name??""}`)}),b(i,r),M()}ee(["click"]);var Ut=k("<div></div>");function Wt(i,e){var N,d,a,n,f,u,G,P,C;I(e,!0);let r=z(e,"nodes",19,()=>[]),p=z(e,"onselect",3,()=>{}),c=z(e,"onunselect",3,()=>{}),g=z(e,"fullWidth",3,!1);class x{constructor(o,L,w=[],m=!1,q=!1){fe(this,"name","");fe(this,"value","");X(this,N,B(!1));X(this,d,B(!1));X(this,a,B(!1));X(this,n,B(Z([])));X(this,f,J(()=>this.children.length===0));X(this,u,J(()=>this.isLeaf?this.selected:this.children.some(o=>o.someSelected)));X(this,G,J(()=>this.isLeaf?this.selected:this.children.every(o=>o.allSelected)));X(this,P,J(()=>this.isLeaf?!this.selected:!this.someSelected));X(this,C,J(()=>this.isLeaf?!1:this.someSelected&&!this.allSelected));this.name=o,this.value=L,this.children=w,this.open=m,this.selected=q}get open(){return s(A(this,N))}set open(o){$(A(this,N),o,!0)}get selected(){return s(A(this,d))}set selected(o){$(A(this,d),o,!0)}get disabled(){return s(A(this,a))}set disabled(o){$(A(this,a),o,!0)}get children(){return s(A(this,n))}set children(o){$(A(this,n),o,!0)}get isLeaf(){return s(A(this,f))}set isLeaf(o){$(A(this,f),o)}get someSelected(){return s(A(this,u))}set someSelected(o){$(A(this,u),o)}get allSelected(){return s(A(this,G))}set allSelected(o){$(A(this,G),o)}get noneSelected(){return s(A(this,P))}set noneSelected(o){$(A(this,P),o)}get indeterminant(){return s(A(this,C))}set indeterminant(o){$(A(this,C),o)}select(){this.isLeaf?(this.selected=!0,p()(this.value)):(this.children.forEach(o=>o.select()),this.open=!0)}unselect(){this.isLeaf?(this.selected=!1,c()(this.value)):this.children.forEach(o=>o.unselect())}toggleSelected(){this.allSelected?this.unselect():this.select()}toggleOpen(){this.isLeaf||(this.open=!this.open)}}N=new WeakMap,d=new WeakMap,a=new WeakMap,n=new WeakMap,f=new WeakMap,u=new WeakMap,G=new WeakMap,P=new WeakMap,C=new WeakMap;function l(S){const{name:o,value:L,open:w,selected:m}=S;let q=[],H=w;return S.children.length>0&&(q=S.children.map(l),H=q.some(F=>F.someSelected)),new x(o,L,q,H,m)}let t=Z(r().map(l));var v=Ut();ne(v,21,()=>t,se,(S,o)=>{qe(S,{get node(){return s(o)}})}),_(v),j(()=>oe(v,1,`overflow-auto h-[350.75px] ${g()?"w-full":""}`)),b(i,v),M()}function Jt(i,e){I(e,!0);const r=()=>W(Ye,"$selectedConsequence",p),[p,c]=te();let g=Z(Je.map(({key:x,children:l})=>({name:"severity",value:x,children:l.map(t=>({name:x,value:t,children:[],open:!1,selected:r().includes(t)})),open:!1,selected:!1})));Wt(i,{get nodes(){return g},get onselect(){return Xe},get onunselect(){return Ke}}),M(),c()}var Kt=k('<span class="font-bold mx-1 text-primary-500">OR</span>'),Xt=k("<!> ",1),Yt=k('<span class="italic">None</span>'),Zt=k('<span class="font-bold mx-1 text-primary-500">OR</span>'),ea=k("<!> ",1),ta=k('<span class="italic">None</span>'),aa=k('<span class="font-bold mx-1 text-primary-500">OR</span>'),ra=k("<!> ",1),na=k('<span class="italic">None</span>'),sa=k('<div class="overflow-auto flex"><div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-1uozg91"><span class="font-bold">Geneomic Region:</span> <div id="selected-variant" class="text-center break-words"><!> <!></div></div> <div class="font-bold flex items-center justify-center w-1/15 svelte-1uozg91">AND</div> <div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-1uozg91"><span class="font-bold">Calculated Consequence:</span> <div id="selected-consequence" class="text-center break-words"><!> <!></div></div> <div class="font-bold flex items-center justify-center w-1/15 svelte-1uozg91">AND</div> <div class="border rounded-sm border-surface-500 flex flex-col items-center justify-center w-3/15 p-2 svelte-1uozg91"><span class="font-bold">Variant Frequency:</span> <div id="selected-frequency" class="text-center break-words"><!> <!></div></div></div>');function oa(i,e){I(e,!0);const r=()=>W(ue,"$selectedGenes",g),p=()=>W(Ze,"$consequences",g),c=()=>W(ie,"$selectedFrequency",g),[g,x]=te();var l=sa(),t=y(l),v=h(y(t),2),N=y(v);ne(N,1,r,se,(m,q,H)=>{var F=Xt(),D=U(F);{var O=R=>{var le=Kt();b(R,le)};E(D,R=>{H!==0&&R(O)})}var V=h(D);j(()=>K(V,` ${s(q)??""}`)),b(m,F)});var d=h(N,2);{var a=m=>{var q=Yt();b(m,q)};E(d,m=>{r().length===0&&m(a)})}_(v),_(t);var n=h(t,4),f=h(y(n),2),u=y(f);ne(u,1,p,se,(m,q,H)=>{var F=ea(),D=U(F);{var O=R=>{var le=Zt();b(R,le)};E(D,R=>{H!==0&&R(O)})}var V=h(D);j(()=>K(V,` ${s(q)??""}`)),b(m,F)});var G=h(u,2);{var P=m=>{var q=ta();b(m,q)};E(G,m=>{p().length===0&&m(P)})}_(f),_(n);var C=h(n,4),S=h(y(C),2),o=y(S);ne(o,1,c,se,(m,q,H)=>{var F=ra(),D=U(F);{var O=R=>{var le=aa();b(R,le)};E(D,R=>{H!==0&&R(O)})}var V=h(D);j(()=>K(V,` ${s(q)??""}`)),b(m,F)});var L=h(o,2);{var w=m=>{var q=na();b(m,q)};E(L,m=>{c().length===0&&m(w)})}_(S),_(C),_(l),b(i,l),M(),x()}function la(){ue.set([])}var ia=k('<button data-testid="clear-selected-genes-btn" class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),ca=k('<button data-testid="clear-gene-filters-btn" class="btn btn-xs preset-outlined-surface-500 hover:preset-tonal-primary border border-primary-500">Clear</button>'),da=k('<div id="gene-search"><!> <!> <!> <!></div>');function ua(i,e){var v,N,d;I(e,!0);let r=z(e,"class",3,"");const p=(d=(N=(v=pe)==null?void 0:v.help)==null?void 0:N.popups)==null?void 0:d.genomicFilter;var c=da(),g=y(c);re(g,{title:"Search for Gene with Variant",subtitle:"Use the official gene symbol.",required:!0,action:n=>{var f=ia();f.__click=[la],b(n,f)},children:(n,f)=>{Tt(n,{})},$$slots:{action:!0,default:!0}});var x=h(g,2);re(x,{title:"Select Calculated Consequence",subtitle:"The calculated consequence is based on VEP annotation.",help:n=>{xe(n,{id:"cons-help-popup",get text(){return p.consequence}})},children:(n,f)=>{Jt(n,{})},$$slots:{help:!0,default:!0}});var l=h(x,2);re(l,{title:"Select Variant Frequency",help:n=>{xe(n,{id:"freq-help-popup",get text(){return p.frequency}})},children:(n,f)=>{Vt(n)},$$slots:{help:!0,default:!0}});var t=h(l,2);re(t,{title:"Summary of Selected Filters",class:"col-span-3",action:n=>{var f=ca();f.__click=function(...u){var G;(G=Ge)==null||G.apply(this,u)},b(n,f)},children:(n,f)=>{oa(n,{})},$$slots:{action:!0,default:!0}}),_(c),j(()=>oe(c,1,`grid grid-cols-3 gap-3 ${(r()||"")??""}`)),b(i,c),M()}ee(["click"]);function Se(i,e,r,p){const c=s(e)===Q.Genomic?at():rt();Ie(c),r(),de(we,!0),Ve("/explorer")}var va=k('<div class="flex justify-end my-4"><button data-testid="save-filter-btn" type="button" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Save Filter <i class="fa-solid fa-plus ml-3"></i></button></div>'),fa=k('<div class="flex justify-end my-4" data-testid="filter-options-container"><button data-testid="add-filter-btn" type="button" class="btn btn-sm preset-filled-primary-500 text-lg disabled:opacity-75">Add Filter <i class="fa-solid fa-plus ml-3"></i></button></div>'),ma=k("<!> <!>",1),ha=k("<!> <!>",1);function Va(i,e){I(e,!0);const r=()=>W(we,"$panelOpen",g),p=()=>W(ue,"$selectedGenes",g),c=()=>W(be,"$selectedSNPs",g),[g,x]=te();let l=Qe.url.searchParams.get("edit")||"",t=B(Z(Y.enableGENEQuery&&!Y.enableSNPQuery?Q.Genomic:!Y.enableGENEQuery&&Y.enableSNPQuery?Q.SNP:["snp","genomic"].includes(l)?l:Q.None));function v(){Ge(),Pe()}function N(){if(s(t)===Q.Genomic){const n=ge("genomic");n.length===1&&et(n[0])}else if(s(t)===Q.SNP){const n=ge("snp");n.length===1&&tt(n[0])}}ke(N);function d(n){$(t,n,!0),N()}let a=J(()=>s(t)===Q.Genomic&&p().length>0||s(t)===Q.SNP&&c().length>0);Ae(n=>{j(()=>ze.title=`${pe.applicationName??""} | Gemonic Filter`)}),De(i,{full:!0,title:"Genomic Filtering",backUrl:"/explorer",backAction:v,backTitle:"Back to Explore",transition:!0,children:(n,f)=>{var u=ha(),G=U(u);{var P=o=>{mt(o,{class:"my-4",onselect:d,get active(){return s(t)}})};E(G,o=>{Y.enableGENEQuery&&Y.enableSNPQuery&&o(P)})}var C=h(G,2);{var S=o=>{var L=ma(),w=U(L);{var m=O=>{ua(O,{class:"mb-0 mt-6"})},q=O=>{jt(O,{class:"mt-6"})};E(w,O=>{s(t)===Q.Genomic?O(m):O(q,!1)})}var H=h(w,2);{var F=O=>{var V=va(),R=y(V);R.__click=[Se,t,v,r],_(V),j(()=>R.disabled=!s(a)),b(O,V)},D=O=>{var V=fa(),R=y(V);R.__click=[Se,t,v,r],_(V),j(()=>{T(R,"title",s(a)?"Add Filter":s(t)===Q.Genomic?"A gene is required":"A SNP is required"),R.disabled=!s(a)}),b(O,V)};E(H,O=>{l?O(F):O(D,!1)})}b(o,L)};E(C,o=>{s(t)!==Q.None&&o(S)})}b(n,u)},$$slots:{default:!0}}),M(),x()}ee(["click"]);export{Va as component};
