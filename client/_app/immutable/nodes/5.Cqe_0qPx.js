import"../chunks/Bzak7iHL.js";import{o as Be,g as lt,a as qe}from"../chunks/B9BhT3Ut.js";import{f as c,d as o,s as w,r as i,t as N,b as s,aO as dt,p as se,k as r,u as j,c as oe,e as ve,a as Z,j as Pe,B as xe,l as ie,h as he,n as Ce,o as He,m as ct}from"../chunks/pV5yBOfK.js";import{i as T}from"../chunks/BAa5cEXk.js";import{s as le}from"../chunks/CPDBQclr.js";import{p as P,r as vt,a as U,s as me,c as Ee}from"../chunks/C2caA9Pm.js";import{p as ee}from"../chunks/B9OKY7FI.js";import{g as ke,b as ut}from"../chunks/BLfKYx2_.js";import{H as ft,ay as gt,az as mt,Q as ht,v as pt,aA as bt,z as _t,u as xt,B as yt,t as kt}from"../chunks/tvkVmxlD.js";import{T as wt,F as Ft}from"../chunks/YSnChi_B.js";import{r as Rt,c as Ue,d as Qe,f as Se,e as Pt,h as Ye,i as Re,j as Ct,k as Et,l as St,m as Tt,n as At}from"../chunks/Drejzb63.js";import{f as ue,b as ze}from"../chunks/i859GThY.js";import{s as Y,r as It,d as be}from"../chunks/D3FUfhzK.js";import{e as pe,i as we}from"../chunks/CFqqwPkz.js";import{a as fe,f as De,s as ge}from"../chunks/B3YVaWvx.js";import{c as Bt,u as Ot,n as zt,L as Xe}from"../chunks/BK-nQ0m1.js";import{c as Dt}from"../chunks/N6i2_EpV.js";import{L as Lt}from"../chunks/D2cigjdB.js";import{P as Nt}from"../chunks/CeOJMxSL.js";import{E as Ne,c as $t,e as jt}from"../chunks/CA_H3qz9.js";import{t as ye,b as Ze,a as Je,s as Ke}from"../chunks/Dj8TqXX2.js";import{e as et}from"../chunks/BqrDejZS.js";import{r as Vt,l as Mt,c as Gt,h as Wt}from"../chunks/nhyXhP8M.js";import{g as Ge}from"../chunks/DTj_CgQu.js";import{p as qt,k as Ht}from"../chunks/DXhIR8yX.js";import{M as $e,a as tt}from"../chunks/DBMsBZi4.js";import{A as Ut}from"../chunks/B61b23iZ.js";import{C as Ae}from"../chunks/vuHm70bx.js";import{a as at}from"../chunks/CF-XIK1E.js";import{h as Qt}from"../chunks/xQt8NbMC.js";import{S as _e,c as Yt}from"../chunks/BnndZ7_C.js";import{E as Ve}from"../chunks/C6RsMIt9.js";import{H as Xt}from"../chunks/CAqE2ctY.js";import{s as Zt}from"../chunks/COZ3s8UQ.js";import{p as Ie}from"../chunks/DjPQy4x5.js";import{o as We,a as Jt}from"../chunks/8q9Zlb2q.js";import{e as Kt}from"../chunks/D3-cXwBU.js";var ea=c("<div><!></div>"),ta=c("<div><!></div>"),aa=c("<div><!></div>"),ra=c('<section data-testid="app-bar-headline"><!></section>'),ia=c('<header data-testid="app-bar"><section data-testid="app-bar-toolbar"><!> <!> <!></section> <!></header>');function sa(t,e){const d=P(e,"base",3,"w-full flex flex-col"),l=P(e,"background",3,"bg-surface-100-900"),C=P(e,"spaceY",3,"space-y-4"),h=P(e,"border",3,""),F=P(e,"padding",3,"p-4"),p=P(e,"shadow",3,""),E=P(e,"classes",3,""),u=P(e,"toolbarBase",3,"flex justify-between"),R=P(e,"toolbarGridCols",3,"grid-cols-[auto_1fr_auto]"),b=P(e,"toolbarGap",3,"gap-4"),v=P(e,"toolbarClasses",3,""),x=P(e,"leadBase",3,"flex"),f=P(e,"leadSpaceX",3,"space-x-4 rtl:space-x-reverse"),_=P(e,"leadPadding",3,""),m=P(e,"leadClasses",3,""),n=P(e,"centerBase",3,"grow"),k=P(e,"centerAlign",3,"text-center"),y=P(e,"centerPadding",3,""),A=P(e,"centerClasses",3,""),D=P(e,"trailBase",3,"flex"),S=P(e,"trailSpaceX",3,"space-x-4 rtl:space-x-reverse"),L=P(e,"trailPadding",3,""),Q=P(e,"trailClasses",3,""),ae=P(e,"headlineBase",3,"w-full"),W=P(e,"headlineClasses",3,"");var q=ia(),O=o(q),a=o(O);{var g=I=>{var z=ea(),ne=o(z);le(ne,()=>e.lead),i(z),N(()=>fe(z,1,`${x()??""} ${f()??""} ${_()??""} ${m()??""}`)),s(I,z)};T(a,I=>{e.lead&&I(g)})}var $=w(a,2);{var V=I=>{var z=ta(),ne=o(z);le(ne,()=>e.children),i(z),N(()=>fe(z,1,`${n()??""} ${k()??""} ${y()??""} ${A()??""}`)),s(I,z)};T($,I=>{e.children&&I(V)})}var H=w($,2);{var X=I=>{var z=aa(),ne=o(z);le(ne,()=>e.trail),i(z),N(()=>fe(z,1,`${D()??""} ${S()??""} ${L()??""} ${Q()??""}`)),s(I,z)};T(H,I=>{e.trail&&I(X)})}i(O);var M=w(O,2);{var J=I=>{var z=ra(),ne=o(z);le(ne,()=>e.headline),i(z),N(()=>fe(z,1,`${ae()??""} ${W()??""}`)),s(I,z)};T(M,I=>{e.headline&&I(J)})}i(q),N(()=>{fe(q,1,`${d()??""} ${l()??""} ${C()??""} ${h()??""} ${F()??""} ${p()??""} ${E()??""}`),fe(O,1,`${u()??""} ${R()??""} ${b()??""} ${v()??""}`)}),s(t,q)}var oa=ht("avatar").parts("root","image","fallback"),Le=oa.build(),rt=t=>{var e;return((e=t.ids)==null?void 0:e.root)??`avatar:${t.id}`},it=t=>{var e;return((e=t.ids)==null?void 0:e.image)??`avatar:${t.id}:image`},na=t=>{var e;return((e=t.ids)==null?void 0:e.fallback)??`avatar:${t.id}:fallback`},la=t=>t.getById(rt(t)),je=t=>t.getById(it(t));function da(t,e){const{state:d,send:l,prop:C,scope:h}=t,F=d.matches("loaded");return{loaded:F,setSrc(p){const E=je(h);E==null||E.setAttribute("src",p)},setLoaded(){l({type:"img.loaded",src:"api"})},setError(){l({type:"img.error",src:"api"})},getRootProps(){return e.element({...Le.root.attrs,dir:C("dir"),id:rt(h)})},getImageProps(){return e.img({...Le.image.attrs,hidden:!F,dir:C("dir"),id:it(h),"data-state":F?"visible":"hidden",onLoad(){l({type:"img.loaded",src:"element"})},onError(){l({type:"img.error",src:"element"})}})},getFallbackProps(){return e.element({...Le.fallback.attrs,dir:C("dir"),id:na(h),hidden:F,"data-state":F?"hidden":"visible"})}}}var ca=ft({initialState(){return"loading"},effects:["trackImageRemoval","trackSrcChange"],on:{"src.change":{target:"loading"},"img.unmount":{target:"error"}},states:{loading:{entry:["checkImageStatus"],on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]},"img.error":{target:"error",actions:["invokeOnError"]}}},error:{on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{on:{"img.error":{target:"error",actions:["invokeOnError"]}}}},implementations:{actions:{invokeOnLoad({prop:t}){var e;(e=t("onStatusChange"))==null||e({status:"loaded"})},invokeOnError({prop:t}){var e;(e=t("onStatusChange"))==null||e({status:"error"})},checkImageStatus({send:t,scope:e}){const d=je(e);if(!(d!=null&&d.complete))return;const l=va(d)?"img.loaded":"img.error";t({type:l,src:"ssr"})}},effects:{trackImageRemoval({send:t,scope:e}){const d=la(e);return mt(d,{callback(l){Array.from(l[0].removedNodes).find(F=>F.nodeType===Node.ELEMENT_NODE&&F.matches("[data-scope=avatar][data-part=image]"))&&t({type:"img.unmount"})}})},trackSrcChange({send:t,scope:e}){const d=je(e);return gt(d,{attributes:["src","srcset"],callback(){t({type:"src.change"})}})}}}});function va(t){return t.complete&&t.naturalWidth!==0&&t.naturalHeight!==0}Bt()(["dir","id","ids","onStatusChange","getRootNode"]);var ua=c("<img/>"),fa=c("<figure><span><!></span> <!></figure>");function ga(t,e){const d=dt();se(e,!0);const l=P(e,"initials",19,()=>[0,-1]),C=P(e,"base",3,"overflow-hidden isolate"),h=P(e,"background",3,"bg-surface-400-600"),F=P(e,"size",3,"size-16"),p=P(e,"font",3,""),E=P(e,"border",3,""),u=P(e,"rounded",3,"rounded-full"),R=P(e,"shadow",3,""),b=P(e,"classes",3,""),v=P(e,"imageBase",3,"w-full object-cover"),x=P(e,"imageClasses",3,""),f=P(e,"style",3,""),_=P(e,"fallbackBase",3,"w-full h-full flex justify-center items-center"),m=P(e,"fallbackClasses",3,""),n=vt(e,["$$slots","$$events","$$legacy","src","srcset","name","initials","base","background","size","font","border","rounded","shadow","classes","imageBase","imageClasses","style","fallbackBase","fallbackClasses","children"]),k=Ot(ca,()=>({id:d,...n})),y=j(()=>da(k,zt));function A(){return l().map(a=>{var g;return(g=e.name.split(" ").at(a))==null?void 0:g.charAt(0).toUpperCase()}).join("")}var D=fa();De(D,O=>({...O,class:`${C()??""} ${h()??""} ${F()??""} ${p()??""} ${E()??""} ${u()??""} ${R()??""} ${b()??""}`,style:f(),"data-testid":"avatar"}),[()=>r(y).getRootProps()]);var S=o(D);De(S,O=>({...O,class:`${_()??""} ${m()??""}`,"data-testid":"avatar-fallback"}),[()=>r(y).getFallbackProps()]);var L=o(S);{var Q=O=>{var a=ve(),g=Z(a);le(g,()=>e.children),s(O,a)},ae=O=>{var a=Pe();N(g=>Y(a,g),[A]),s(O,a)};T(L,O=>{e.children?O(Q):O(ae,!1)})}i(S);var W=w(S,2);{var q=O=>{var a=ua();De(a,g=>({...g,src:e.src,srcset:e.srcset,alt:e.name,class:`${v()??""} ${x()??""}`,"data-testid":"avatar-image"}),[()=>r(y).getImageProps()]),It(a),s(O,a)};T(W,O=>{(e.src||e.srcset)&&O(q)})}i(D),s(t,D),oe()}var ma=c('<div style="display: contents"><main class="w-full h-full"><div id="appShell" class="w-full h-full flex flex-col overflow-hidden" data-testid="app-shell"><!> <div class="flex-auto w-full h-full flex overflow-hidden"><div id="page" class="flex-1 overflow-x-hidden flex flex-col"><main id="page-content" class="flex-auto"><!></main> <footer id="page-footer" class="flex-none"><!></footer></div> <!></div></div></main></div>');function ha(t,e){se(e,!0);let d=j(()=>ue.login.open||!ue.login.open&&pt());var l=ve(),C=Z(l);{var h=F=>{var p=ma(),E=o(p),u=o(E),R=o(u);le(R,()=>e.header??xe);var b=w(R,2),v=o(b),x=o(v),f=o(x);le(f,()=>e.children??xe),i(x);var _=w(x,2),m=o(_);le(m,()=>e.pageFooter??xe),i(_),i(v);var n=w(v,2);le(n,()=>e.sidebarRight??xe),i(b),i(u),i(E),i(p),s(F,p)};T(C,F=>{r(d)&&F(h)})}s(t,l),oe()}function pa(t){t.stopImmediatePropagation(),ke(`/login?redirectTo=${ee.url.pathname}`)}var ba=c('<a href="/" aria-current="page" data-testid="logo-home-link" class="content-center"><!></a>'),_a=(t,e)=>_t(r(e),!1),xa=c('<div class="flex flex-col items-center"><p class="pb-6"> </p> <button id="user-logout-btn" class="btn preset-filled-primary-500 w-fit" title="Logout">Logout</button></div>'),ya=c('<button id="user-login-btn" title="Login" class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500">Login</button>'),ka=c('<div id="user-session-avatar" class="content-center"><!></div>'),wa=c('<li><a class="nav-link"> </a></li>'),Fa=c('<nav id="page-navigation"><ul></ul></nav>');function Ra(t,e){se(e,!0);const d=()=>U(bt,"$userRoutes",h),l=()=>U(xt,"$user",h),C=()=>U(yt,"$isLoggedIn",h),[h,F]=me();let p,E=he(void 0);function u({path:b,id:v}){return"nav-link"+(v?"-"+v:b.replaceAll("/","-"))}let R=j(()=>b=>{if(b.children){for(const v of b.children)if(ee.url.pathname.includes(v.path))return"page";return}return ee.url.pathname.includes(b.path)?"page":void 0});Be(async()=>{var b;if(ee){const v=sessionStorage.getItem("type");v&&(p=(b=ee.data)==null?void 0:b.providers.find(x=>x.type===v),ie(E,await Dt(p),!0))}}),sa(t,{padding:"py-0 pl-2 pr-5",background:"bg-surface-50-950",toolbarClasses:"flex-none z-10",lead:x=>{var f=ba(),_=o(f);Lt(_,{height:4,class:"mx-1"}),i(f),s(x,f)},trail:x=>{var f=ka(),_=o(f);{var m=k=>{Nt(k,{trigger:A=>{{let D=j(()=>(l().email||"").toUpperCase());ga(A,{get name(){return r(D)},background:"preset-tonal-primary hover:preset-tonal-secondary",border:"border hover:border-primary-400",font:"text-2xl",size:"size-12",classes:"m-3"})}},children:(A,D)=>{var S=xa(),L=o(S),Q=o(L,!0);i(L);var ae=w(L,2);ae.__click=[_a,E],i(S),N(()=>Y(Q,l().email)),s(A,S)},$$slots:{trigger:!0,default:!0}})},n=k=>{var y=ya();y.__click=[pa],s(k,y)};T(_,k=>{l()&&l().privileges&&l().email&&C()?k(m):k(n,!1)})}i(f),s(x,f)},children:(x,f)=>{var _=Fa(),m=o(_);pe(m,5,d,we,(n,k)=>{var y=wa(),A=o(y),D=o(A,!0);i(A),i(y),N((S,L)=>{ge(A,"id",S),ge(A,"href",r(k).path),ge(A,"aria-current",L),Y(D,r(k).text)},[()=>u(r(k)),()=>r(R)(r(k))]),s(n,y)}),i(m),i(_),s(x,_)},$$slots:{lead:!0,trail:!0,default:!0}}),oe(),F()}be(["click"]);var Pa=c("<div> </div>"),Ca=c('<div data-testid="any-record-of-filter-modal"><header><h1 class="text-lg font-normal"> </h1></header> <!></div>');function Ea(t,e){se(e,!0);var d=Ca(),l=o(d),C=o(l),h=o(C,!0);i(C),i(l);var F=w(l,2);{var p=u=>{var R=ve(),b=Z(R);pe(b,17,()=>e.filter.concepts,we,(v,x)=>{var f=Pa(),_=o(f,!0);i(f),N(()=>Y(_,r(x))),s(v,f)}),s(u,R)},E=u=>{var R=Pe("No filter provided");s(u,R)};T(F,u=>{e.filter.filterType==="AnyRecordOf"?u(p):u(E,!1)})}i(d),N(()=>{var u,R,b,v;return Y(h,`${(R=(u=e.filter)==null?void 0:u.concepts)==null?void 0:R.length} variable(s) in ${((b=e.filter.searchResult)==null?void 0:b.display)||((v=e.filter.searchResult)==null?void 0:v.name)||e.filter.variableName} category`)}),s(t,d),oe()}function Sa(t,e,d,l){e.filter.filterType==="genomic"?(qt(e.filter),ke("/explorer/genome-filter?edit="+Ge.Genomic)):e.filter.filterType==="snp"?(Ht(e.filter),ke("/explorer/genome-filter?edit="+Ge.SNP)):(Ee(Ue,e.filter),Ee(Qe,e.filter.searchResult))}const Ta=function(t,e){return Rt(e.filter.uuid)};var Aa=(t,e)=>(t.key==="Enter"||t.key===" ")&&e(t),Ia=c('<div class="flex-auto variable svelte-1ukmkhn" tabindex="0" role="button"> </div>'),Ba=c('<div class="text-left"> </div>'),Oa=c('<button type="button" title="Edit Filter" class="bg-initial text-black-500 hover:text-primary-600"><i class="fa-solid fa-pen-to-square"></i> <span class="sr-only">Edit Filter</span></button>'),za=c('<i class="fa-solid fa-pen-to-square"></i> <span class="sr-only">Edit Filter</span>',1),Da=c('<button type="button" title="See details" class="bg-initial text-black-500 hover:text-primary-600"><i></i> <span class="sr-only">See details</span></button>'),La=c("<div> </div>"),Na=c('<section class="p-1 whitespace-pre-wrap"> <!></section>'),$a=c('<div class="flex flex-col card bg-surface-100 p-1 m-1"><header class="card-header p-1 flex svelte-1ukmkhn"><!> <div class="actions svelte-1ukmkhn"><!> <button type="button" title="Remove Filter" class="bg-initial text-black-500 hover:text-primary-600"><i class="fa-solid fa-times-circle"></i> <span class="sr-only">Remove Filter</span></button> <!></div></header> <!></div>');function ja(t,e){se(e,!0);const d=()=>U(Ue,"$activeFilter",C),l=()=>U(Qe,"$activeSearch",C),[C,h]=me();let F=he(!1),p=he("fa-caret-up");const E=j(()=>["genomic","snp"].includes(e.filter.filterType)),u=j(()=>e.filter.filterType==="AnyRecordOf");let R=he(!1),b=he(!1);const v=function(a){if(a.filterType==="Categorical")if(a.displayType==="restrict"){let g=a.categoryValues.length===1?"value":"values";return`Restricting to ${a.categoryValues.length} ${g}.`}else return a.displayType==="any"||a.displayType==="anyRecordOf"?"Restricting to any value.":a.description;else{if(a.filterType==="AnyRecordOf")return"Restricting to children of the selected value.";if(a.filterType==="numeric")switch(a.displayType){case"any":return"Restricting to any value.";case"between":return`Restricting to between ${a.min} and ${a.max}.`;case"greaterThan":return`Restricting to greater than ${a.min}.`;case"lessThan":return`Restricting to less than ${a.max}.`;default:return a.description||"N/A"}else if(a.filterType==="genomic"||a.filterType==="snp")return a.description}},x=function(a){var g,$,V,H;return(g=a.searchResult)!=null&&g.studyAcronym&&(($=a.searchResult)!=null&&$.dataset)?`${a.searchResult.studyAcronym} (${a.searchResult.dataset})`:((V=a.searchResult)==null?void 0:V.studyAcronym)||((H=a.searchResult)==null?void 0:H.dataset)||""},f=function(a){a.stopPropagation(),a.preventDefault(),ie(F,!r(F)),ie(p,r(F)?"fa-caret-down":"fa-caret-up",!0)};var _=$a(),m=o(_),n=o(m);{var k=a=>{var g=Ia();g.__click=f,g.__keydown=[Aa,f];var $=o(g,!0);i(g),N(()=>Y($,e.filter.variableName)),s(a,g)},y=a=>{{const g=V=>{var H=Ba(),X=o(H);i(H),N(()=>{var M,J,I,z;return Y(X,`${((J=(M=e.filter)==null?void 0:M.concepts)==null?void 0:J.length)??""} variable(s) in ${(((I=e.filter.searchResult)==null?void 0:I.display)||((z=e.filter.searchResult)==null?void 0:z.name)||e.filter.variableName)??""}
            category`)}),s(V,H)};let $=j(()=>`any-record-of-filter-modal-${e.filter.id}`);$e(a,{title:"View Variables in Filter",get"data-testid"(){return r($)},withDefault:!1,get open(){return r(b)},set open(V){ie(b,V,!0)},trigger:g,children:(V,H)=>{Ea(V,{get filter(){return e.filter}})},$$slots:{trigger:!0,default:!0}})}};T(n,a=>{r(u)?a(y,!1):a(k)})}var A=w(n,2),D=o(A);{var S=a=>{var g=Oa();g.__click=[Sa,e,d,l],s(a,g)},L=a=>{var g=ve(),$=Z(g);{var V=H=>{$e(H,{title:"Edit Filter",triggerBase:"bg-initial text-black-500 hover:text-primary-600",withDefault:!1,get open(){return r(R)},set open(M){ie(R,M,!0)},trigger:M=>{var J=za();Ce(2),s(M,J)},children:(M,J)=>{Ut(M,{get data(){return e.filter.searchResult},get existingFilter(){return e.filter},onclose:()=>ie(R,!1)})},$$slots:{trigger:!0,default:!0}})};T($,H=>{r(u)||H(V)},!0)}s(a,g)};T(D,a=>{r(E)?a(S):a(L,!1)})}var Q=w(D,2);Q.__click=[Ta,e];var ae=w(Q,2);{var W=a=>{var g=Da();g.__click=f;var $=o(g);Ce(2),i(g),N(()=>fe($,1,`fa-solid ${r(p)??""}`,"svelte-1ukmkhn")),s(a,g)};T(ae,a=>{r(u)||a(W)})}i(A),i(m);var q=w(m,2);{var O=a=>{var g=Na(),$=o(g),V=w($);{var H=X=>{var M=La(),J=o(M);i(M),N(I=>Y(J,`Values: ${I??""}`),[()=>e.filter.categoryValues.join(", ")]),s(X,M)};T(V,X=>{e.filter.filterType==="Categorical"&&e.filter.displayType!=="any"&&e.filter.displayType!=="anyRecordOf"&&X(H)})}i(g),N((X,M)=>Y($,`${X??""}
      ${M??""} `),[()=>v(e.filter),()=>x(e.filter)]),ye(3,g,()=>Ke,()=>({axis:"y"})),s(a,g)};T(q,a=>{r(F)&&a(O)})}i(_),N(()=>{ge(_,"id",e.filter.uuid),ge(_,"data-testid",`added-filter-${e.filter.id??""}`)}),ye(1,_,()=>Ze,()=>({easing:et})),ye(2,_,()=>Je,()=>({duration:300})),s(t,_),oe(),h()}be(["click","keydown"]);const Va=function(t,e,d){e(d.variable.id)};var Ma=c('<div class="flex flex-col card bg-surface-100 p-1 m-1"><header class="card-header p-1 flex"><div class="flex-auto"> </div> <button type="button" title="Remove Export" class="btn-icon-color" aria-label="Remove Export"><i class="fa-solid fa-times-circle"></i></button></header></div>');function Ga(t,e){se(e,!0);const{removeExport:d}=Ne;var l=Ma(),C=o(l),h=o(C),F=o(h,!0);i(h);var p=w(h,2);p.__click=[Va,d,e],i(C),i(l),N(()=>{var E,u;ge(l,"id",e.variable.studyId?`${e.variable.studyId}-${e.variable.conceptPath}`:e.variable.conceptPath),ge(l,"data-testid",`added-export-${e.variable.conceptPath??""}`),Y(F,e.variable.display||((E=e.variable.searchResult)==null?void 0:E.display)||((u=e.variable.searchResult)==null?void 0:u.name))}),ye(3,l,()=>Je,()=>({duration:300})),s(t,l),oe()}be(["click"]);var Wa=c('<span class="text-4xl font-bold"></span>'),qa=c('<div class="flex flex-row h-full"><span id="result-count-number" class="text-4xl"> </span> <!></div>'),Ha=c('<span id="result-count"><!></span>'),Ua=c('<div class="flex flex-col items-center mt-2"><!> <h4 class="text-center"> </h4></div>'),Qa=c('Some sites did not return patient counts for your query. See <a href="/explorer/cohort" class="anchor font-bold">Cohort Details</a> for more information.',1),Ya=c('<p class="text-[0.6rem] !m-0"><!></p>'),Xa=c("<!> <!>",1);function Za(t,e){se(e,!0);const d=()=>U(Vt,"$resultCounts",l),[l,C]=me();let h=he(!1);function F(v){return Yt(v.filter(_e.fullfiled).map(({value:x})=>x))}function p(v){return v.filter(_e.fullfiled).length===0||v.some(_e.rejected)}He(()=>{ie(h,!1),d().forEach(v=>{Promise.allSettled(_e.list(v).map(({promise:x})=>x)).then(x=>{p(x)&&ie(h,!0)})})});var E=Xa(),u=Z(E);pe(u,1,d,we,(v,x)=>{var f=Ua(),_=o(f);at(_,()=>Promise.allSettled(_e.list(r(x)).map(({promise:k})=>k)),k=>{Xe(k,{ring:!0,size:"mini"})},(k,y)=>{const A=j(()=>F(r(y))),D=j(()=>p(r(y)));var S=Ha(),L=o(S);{var Q=W=>{var q=Wa();q.textContent="N/A",s(W,q)},ae=W=>{var q=qa(),O=o(q),a=o(O,!0);i(O);var g=w(O,2);{var $=V=>{{let H=j(()=>{var X,M,J,I;return lt(Se).length!==0?(M=(X=ze)==null?void 0:X.explorePage)==null?void 0:M.filterErrorText:(I=(J=ze)==null?void 0:J.explorePage)==null?void 0:I.queryErrorText});Xt(V,{type:"exclamation",color:"warning",id:"result-count-error",get text(){return r(H)}})}};T(g,V=>{r(D)&&V($)})}i(q),N(()=>Y(a,r(A))),s(W,q)};T(L,W=>{r(y).filter(_e.fullfiled).length===0?W(Q):W(ae,!1)})}i(S),s(k,S)});var m=w(_,2),n=o(m,!0);i(m),i(f),N(()=>Y(n,r(x).label)),s(v,f)});var R=w(u,2);{var b=v=>{Ve(v,{color:"warning",iconSize:"2xl",children:(x,f)=>{var _=Ya(),m=o(_);{var n=y=>{var A=Qa();Ce(2),s(y,A)},k=y=>{var A=ve(),D=Z(A);Qt(D,()=>{var S,L;return Zt((L=(S=ze)==null?void 0:S.explorePage)==null?void 0:L.queryErrorText)}),s(y,A)};T(m,y=>{ue.federated?y(n):y(k,!1)})}i(_),s(x,_)},$$slots:{default:!0}})};T(R,v=>{r(h)&&v(b)})}s(t,E),oe(),C()}var Ja=()=>ke("/explorer/export"),Ka=c('<div class="h-11 mt-4"><button id="export-data-button" type="button" class="btn preset-filled-primary-500">Prepare for Analysis</button></div>'),er=(t,e)=>ie(e,!0),tr=c('<button data-testid="clear-all-results-btn" class="anchor text-sm flex-none">Reset</button>'),ar=c('<p class="text-center">No filters added</p>'),rr=c('<header class="text-left ml-1">Filters</header>'),ir=c('<div class="px-4 mb-1 w-80"><!> <section class="py-1"></section></div>'),sr=c('<div class="px-4 mb-1 w-80"><header class="text-left ml-1" data-testid="export-header">Added Variables</header> <section class="py-1"></section></div>'),or=c('<div class="flex flex-col items-center mt-7"><hr class="svelte-qyz27f"/> <h5 class="text-center text-xl mt-7">Tool Suite</h5> <div class="flex flex-row flex-wrap justify-items-center gap-4 w-80 justify-center"><!> <!> <!> <!></div></div>'),nr=c('<!> <section id="results-panel" class="flex flex-col items-center pt-8 pr-10 w-64"><!> <!> <div id="export-filters" class="flex flex-col items-center mt-7 w-80"><hr class="svelte-qyz27f"/> <div class="flex content-center mt-7"><h5 class="text-xl flex-auto mr-2 mb-2">Filtered Data Summary</h5> <!></div> <!> <!></div> <!></section>',1);function lr(t,e){se(e,!0);const d=()=>U(Se,"$filters",p),l=()=>U(jt,"$exports",p),C=()=>U(Gt,"$countsLoading",p),h=()=>U(Wt,"$hasNonZeroResult",p),F=()=>U(Ye,"$hasGenomicFilter",p),[p,E]=me();let u=null,R=ee.url.pathname,b=j(()=>ee.url.pathname.includes("/discover")),v=j(()=>ee.url.pathname.includes("/explorer")),x=he(!1),f=j(()=>d().length!==0||ue.explorer.exportsEnableExport&&l().length!==0),_=j(()=>ue.explorer.allowExport&&!r(b)&&r(f)&&(C()||h())),m=j(()=>d().length!==0&&!d().every(B=>B.filterType==="genomic"||B.filterType==="snp"||B.filterType==="AnyRecordOf")),n=j(()=>r(v)&&ue.explorer.distributionExplorer&&r(m)),k=j(()=>r(b)&&ue.discoverFeautures.distributionExplorer&&r(m)),y=j(()=>r(v)&&ue.explorer.variantExplorer&&F()),A=j(()=>r(v)&&ue.explorer.enableCohortDetails),D=j(()=>r(A)||(d().length!==0||l().length!==0)&&(r(n)||r(k)||r(y)));function S(){u||(u=Se.subscribe(()=>Mt(r(b))))}function L(){u&&(u(),u=null)}He(()=>{ee.url.pathname.startsWith(R)||(R=ee.url.pathname,L(),S())}),Be(S),qe(L);var Q=nr(),ae=Z(Q);$e(ae,{title:"Clear All Filters",withDefault:!0,confirmText:"Yes",cancelText:"No",onconfirm:()=>{Pt(),$t()},get open(){return r(x)},set open(B){ie(x,B,!0)},children:(B,G)=>{Ce();var K=Pe("Are you sure you want to clear all filters?");s(B,K)},$$slots:{default:!0}});var W=w(ae,2),q=o(W);Za(q,{});var O=w(q,2);{var a=B=>{var G=Ka(),K=o(G);K.__click=[Ja],i(G),N(()=>K.disabled=C()),ye(3,K,()=>Ze,()=>({easing:et})),s(B,G)};T(O,B=>{r(_)&&B(a)})}var g=w(O,2),$=w(o(g),2),V=w(o($),2);{var H=B=>{var G=tr();G.__click=[er,x],s(B,G)};T(V,B=>{r(f)&&B(H)})}i($);var X=w($,2);{var M=B=>{var G=ar();s(B,G)},J=B=>{var G=ir(),K=o(G);{var re=ce=>{var Fe=rr();s(ce,Fe)};T(K,ce=>{d().length!==0&&ce(re)})}var de=w(K,2);pe(de,5,d,we,(ce,Fe)=>{ja(ce,{get filter(){return r(Fe)}})}),i(de),i(G),s(B,G)};T(X,B=>{d().length===0&&l().length===0?B(M):B(J,!1)})}var I=w(X,2);{var z=B=>{var G=sr(),K=w(o(G),2);pe(K,5,l,re=>re.id,(re,de)=>{Ga(re,{get variable(){return r(de)}})}),i(K),i(G),s(B,G)};T(I,B=>{l().length!==0&&B(z)})}i(g);var ne=w(g,2);{var Te=B=>{var G=or(),K=w(o(G),4),re=o(K);{var de=te=>{{let Oe=j(()=>ee.url.pathname.includes("explorer/cohort"));Ae(te,{href:"/explorer/cohort","data-testid":"cohort-details-btn",title:"Cohort Details",icon:"fa-solid fa-users",size:"md",get active(){return r(Oe)}})}};T(re,te=>{r(A)&&te(de)})}var ce=w(re,2);{var Fe=te=>{Ae(te,{href:"/explorer/distributions","data-testid":"distributions-btn",title:"Variable Distributions",icon:"fa-solid fa-chart-pie",size:"md"})};T(ce,te=>{r(n)&&te(Fe)})}var Me=w(ce,2);{var st=te=>{Ae(te,{href:"/discover/distributions","data-testid":"distributions-btn",title:"Variable Distributions",icon:"fa-solid fa-chart-pie",size:"md"})};T(Me,te=>{r(k)&&te(st)})}var ot=w(Me,2);{var nt=te=>{{let Oe=j(()=>ee.url.pathname.includes("explorer/variant"));Ae(te,{href:"/explorer/variant","data-testid":"variant-explorer-btn",title:"Variant Explorer",icon:"fa-solid fa-dna",size:"md",get active(){return r(Oe)}})}};T(ot,te=>{r(y)&&te(nt)})}i(K),i(G),s(B,G)};T(ne,B=>{r(D)&&B(Te)})}i(W),ye(3,W,()=>Ke,()=>({axis:"x"})),s(t,Q),oe(),E()}be(["click"]);var dr=c('<div id="side-panel"><div id="side-panel-bar" class="svelte-19rrhxy"><button type="button" id="results-panel-toggle" class="btn-icon btn-icon-sm preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500 svelte-19rrhxy" aria-label="Toggle Results Panel"><i></i></button></div> <!></div>');function cr(t,e){se(e,!0);const d=()=>U(Se,"$filters",h),l=()=>U(p,"$exports",h),C=()=>U(Ie,"$panelOpen",h),[h,F]=me();let{exports:p}=Ne,E,u;function R(){Ie.set(!0)}Be(()=>{E=Se.subscribe(()=>{var n;((n=d())==null?void 0:n.length)!==0&&R()}),u=Ne.subscribe(()=>{var n;((n=l())==null?void 0:n.length)!==0&&R()})}),qe(()=>{E&&E(),u&&u()});var b=dr(),v=o(b),x=o(v);x.__click=()=>{Ie.update(n=>!n)};var f=o(x);i(x),i(v);var _=w(v,2);{var m=n=>{lr(n,{})};T(_,n=>{C()&&n(m)})}i(b),N(()=>{fe(b,1,`flex ${C()?"open":"closed"}-panel`),ge(x,"title",`${C()?"Hide":"Show"} Results`),fe(f,1,`fa-solid ${C()?"fa-arrow-right":"fa-arrow-left"}`)}),s(t,b),oe(),F()}be(["click"]);function vr(t,e){const d=()=>U(We,"$drawerState",l),[l,C]=me();let h=P(e,"position",3,"right"),F=P(e,"width",3,"w-[480px]");const p=h()==="left"?"justify-start":"justify-end";tt(t,{get open(){return d()},onOpenChange:u=>Ee(We,u.open),triggerBase:"btn preset-tonal",get contentBase(){return`bg-surface-50-950 p-4 space-y-4 shadow-xl ${F()??""} h-screen overflow-auto`},get positionerJustify(){return p},positionerAlign:"",positionerPadding:"",transitionsPositionerIn:{x:-480,duration:200},transitionsPositionerOut:{x:-480,duration:200},ids:{content:"drawer"},get trigger(){return e.trigger},content:u=>{var R=ve(),b=Z(R);le(b,()=>e.children??xe),s(u,R)},$$slots:{content:!0}}),C()}var ur=c('<h2 data-testid="drawer-title" class="text-2xl font-bold ml-4"> </h2>'),fr=c('<li class="ml-8"> </li>'),gr=c('<ul class="list-disc"></ul>'),mr=c('<li class="m-2"><strong class="capitalize"> </strong>: <!></li>'),hr=t=>t.stopPropagation(),pr=c('<div class="flex justify-center items-center mb-4"><a class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500" target="_blank">More Info</a></div>'),br=c('<ul data-testid="drawer-details" class="m-4 p-4"></ul> <!>',1),_r=c("<!> <hr/> <!>",1);function xr(t,e){var x,f,_;se(e,!0);const d=()=>U(Jt,"$activeRow",l),[l,C]=me(),h=((x=d())==null?void 0:x.dataset_id)||"",F=((f=d())==null?void 0:f.name)||"",p=((_=d())==null?void 0:_.additional_info_link)||"";async function E(){const m=await Kt(h);if(!m||Object.keys(m).length===0)throw new Error("No details found");return m.datasetId&&delete m.datasetId,m.studyFullname&&delete m.studyFullname,m}var u=_r(),R=Z(u);{var b=m=>{var n=ur(),k=o(n,!0);i(n),N(()=>Y(k,F)),s(m,n)};T(R,m=>{F&&m(b)})}var v=w(R,4);at(v,E,m=>{Xe(m,{ring:!0,size:"medium"})},(m,n)=>{var k=br(),y=Z(k);pe(y,21,()=>Object.entries(r(n)),we,(S,L)=>{var Q=j(()=>ct(r(L),2));let ae=()=>r(Q)[0],W=()=>r(Q)[1];var q=ve(),O=Z(q);{var a=g=>{var $=mr(),V=o($),H=o(V,!0);i(V);var X=w(V,2);{var M=I=>{var z=gr();pe(z,21,W,we,(ne,Te)=>{var B=ve(),G=Z(B);{var K=re=>{var de=fr(),ce=o(de,!0);i(de),N(()=>Y(ce,r(Te))),s(re,de)};T(G,re=>{r(Te)&&re(K)})}s(ne,B)}),i(z),s(I,z)},J=I=>{var z=Pe();N(()=>Y(z,W())),s(I,z)};T(X,I=>{Array.isArray(W())?I(M):I(J,!1)})}i($),N(I=>Y(H,I),[()=>ae().replace(/([A-Z])/g," $1").toLowerCase().trim()]),s(g,$)};T(O,g=>{W()&&g(a)})}s(S,q)}),i(y);var A=w(y,2);{var D=S=>{var L=pr(),Q=o(L);Q.__click=[hr],i(L),N(()=>ge(Q,"href",p||"#")),s(S,L)};T(A,S=>{p&&S(D)})}s(m,k)},m=>{Ve(m,{title:"An Error Occured",children:(n,k)=>{Ce();var y=Pe("We're having trouble fetching the dataset details right now. Please try again later.");s(n,y)},$$slots:{default:!0}})}),s(t,u),oe(),C()}be(["click"]);var yr=c('<p> </p> <p> </p> <div><button class="btn preset-outlined-warning-500 hover:preset-filled-warning-500">Remove Invalid Filters</button> <button class="btn preset-outlined-warning-500 hover:preset-filled-warning-500"> </button></div>',1);function kr(t,e){se(e,!0);const d=()=>U(Re,"$filterWarning",l),[l,C]=me();let h=P(e,"open",15,!1);const F={stigmatizing:{message:"Your selected filters contain stigmatizing variables and/or genomic filters, which are not supported with Discover",backTo:"Explore",path:"/discover",back:"/explorer",resetQuery:()=>{Et(),St()}},notAuthorized:{message:"You are not authorized to access the data in Explore based on your selected filters.",backTo:"Discover",path:"/explorer",back:"/discover",resetQuery:()=>Ct()},undefined:{message:"",backTo:"",path:"/",back:"/",resetQuery:()=>{}}},p=j(()=>F[d()||"undefined"]);function E(){const R=r(p).back;Re.set(void 0),h(!1),ke(R,{keepFocus:!1})}function u(){const R=r(p).path;r(p).resetQuery(),Ie.set(!1),Re.set(void 0),h(!1),ke(R,{keepFocus:!1})}tt(t,{get open(){return h()},onOpenChange:b=>h(b.open),contentBase:"overflow-auto max-w-screen w-1/2 max-h-screen",backdropClasses:"backdrop-blur-sm",ids:{content:"modal-component"},content:b=>{Ve(b,{"data-testid":"sendfilter-warning",color:"warning",children:(v,x)=>{var f=yr(),_=Z(f),m=o(_,!0);i(_);var n=w(_,2),k=o(n);i(n);var y=w(n,2),A=o(y);A.__click=u;var D=w(A,2);D.__click=E;var S=o(D);i(D),i(y),N(()=>{Y(m,r(p).message),Y(k,`Would you like to remove the invalid filters or go back to ${r(p).backTo??""}?`),Y(S,`Back to ${r(p).backTo??""}`)}),s(v,f)},$$slots:{default:!0}})},$$slots:{content:!0}}),oe(),C()}be(["click"]);var wr=c(`<div class="alert-banner svelte-1rilbx2"><p>Because of a lapse in government funding, the information on this website may not be up to date,
        transactions submitted via the website may not be processed, and the agency may not be able to
        respond to inquiries until appropriations are enacted. The NIH Clinical Center (the research
        hospital of NIH) is open. For more details about its operating status, please visit <a href="http://cc.nih.gov/" class="anchor" target="_blank" rel="noopener noreferrer">cc.nih.gov.</a> Updates regarding government operating status and resumption of normal operations can be found at <a href="http://opm.gov/" class="anchor" target="_blank" rel="noopener noreferrer">opm.gov.</a></p></div> <!>`,1),Fr=c('<div id="sidebar-right" class="flex overflow-auto"><!></div>'),Rr=c("<!> <!> <!> <!>",1);function di(t,e){se(e,!0);const d=()=>U(Tt,"$hasInvalidFilter",h),l=()=>U(Ye,"$hasGenomicFilter",h),C=()=>U(At,"$hasUnallowedFilter",h),[h,F]=me();let p=he(!1);Be(()=>{document.body.classList.add("started")});let E=j(()=>(ee.url.pathname.includes("/explorer")||ee.url.pathname.includes("/discover"))&&!ee.url.pathname.includes("/export")&&!ee.url.pathname.includes("/distributions"));ut(({to:f,cancel:_})=>{const m=(f==null?void 0:f.url.pathname.includes("/explorer"))&&d(),n=(f==null?void 0:f.url.pathname.includes("/discover"))&&(l()||C());(n||m)&&(n?Ee(Re,"stigmatizing"):m&&Ee(Re,"notAuthorized"),_(),ie(p,!0))});var u=Rr(),R=Z(u);wt(R,{get toaster(){return kt}});var b=w(R,2);kr(b,{get open(){return r(p)},set open(f){ie(p,f,!0)}});var v=w(b,2);vr(v,{position:"right",width:"w-1/2",children:(f,_)=>{xr(f,{})},$$slots:{default:!0}});var x=w(v,2);ha(x,{header:n=>{var k=wr(),y=w(Z(k),2);Ra(y,{}),s(n,k)},sidebarRight:n=>{var k=ve(),y=Z(k);{var A=D=>{var S=Fr(),L=o(S);cr(L,{}),i(S),s(D,S)};T(y,D=>{r(E)&&D(A)})}s(n,k)},pageFooter:n=>{Ft(n,{})},children:(n,k)=>{var y=ve(),A=Z(y);le(A,()=>e.children??xe),s(n,y)},$$slots:{header:!0,sidebarRight:!0,pageFooter:!0,default:!0}}),s(t,u),oe(),F()}export{di as component};
