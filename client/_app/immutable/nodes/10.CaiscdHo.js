import{s as I,e as x,c as y,b as w,f as c,r as S,i as m,k as C,v as P,a as $,q as k,g as T}from"../chunks/CDvIr29H.js";import{S as O,i as j,t as l,a as p,b as q,d as E,e as J,m as N,f as F,g as H}from"../chunks/ByE-_V18.js";import{p as L}from"../chunks/BmKPRyWy.js";import"../chunks/C1zJQccS.js";import{P as M}from"../chunks/Bq_4NOFD.js";import{g as _}from"../chunks/BMKj-mzl.js";import{c as R}from"../chunks/BtHeeR-W.js";import{f as W}from"../chunks/DJhGLq0N.js";import{p as z}from"../chunks/-62wORGD.js";function v(n){let s,a="Logging you in...",e,t,r;return t=new M({props:{width:"w-20"}}),{c(){s=x("h1"),s.textContent=a,e=$(),E(t.$$.fragment),this.h()},l(o){s=y(o,"H1",{class:!0,"data-svelte-h":!0}),k(s)!=="svelte-jsohhr"&&(s.textContent=a),e=T(o),J(t.$$.fragment,o),this.h()},h(){S(s,"class","m-10")},m(o,i){m(o,s,i),m(o,e,i),N(t,o,i),r=!0},i(o){r||(l(t.$$.fragment,o),r=!0)},o(o){p(t.$$.fragment,o),r=!1},d(o){o&&(c(s),c(e)),F(t,o)}}}function A(n){let s,a,e=!n[0]&&v();return{c(){s=x("section"),e&&e.c(),this.h()},l(t){s=y(t,"SECTION",{class:!0});var r=w(s);e&&e.l(r),r.forEach(c),this.h()},h(){S(s,"class","w-full h-full flex flex-col justify-center items-center")},m(t,r){m(t,s,r),e&&e.m(s,null),a=!0},p(t,[r]){t[0]?e&&(H(),p(e,1,1,()=>{e=null}),q()):e?r&1&&l(e,1):(e=v(),e.c(),l(e,1),e.m(s,null))},i(t){a||(l(e),a=!0)},o(t){p(e),a=!1},d(t){t&&c(s),e&&e.d()}}}function B(n,s,a){let e;C(n,L,r=>a(1,e=r));let t=!1;return P(async()=>{var g,d;z.set(!1);let r="/",o;r=sessionStorage.getItem("redirect")||"/",o=sessionStorage.getItem("type"),o||a(0,t=!0),r=r||"/";const i=(g=e.data)==null?void 0:g.providers.find(f=>f.type===o);i||a(0,t=!0),(!i||t)&&(console.error("Provider not found"),_("/login/error"));const b=await R(i);let u=((d=e.url.hash)==null?void 0:d.split("&"))||[];e.url.search.startsWith("?")&&(u=e.url.search.substring(1).split("&")||[]),a(0,t=await b.authenticate(u));let h=sessionStorage.getItem("filters");if(h){let f=JSON.parse(h||"[]");W.set(f),setTimeout(()=>sessionStorage.setItem("filters","[]"),500)}_(t?"/login/error":r)}),[t]}class ee extends O{constructor(s){super(),j(this,s,B,A,I,{})}}export{ee as component};
