import{w as c,g}from"./xU7jw7XU.js";import{g as b,k as v,u as w}from"./BNC-bmXQ.js";import{f as R}from"./BZHGrlEE.js";const L=c(!1),h=c([]),y=c([]),T=c({});function G(){return b(v.Dashboard)}function S(){return!!localStorage.getItem("token")}async function _(){var u,d;const s=await G();h.set(s.columns);const e=g(w),t=R.useQueryTemplate&&S()&&(e==null?void 0:e.queryTemplate);let n=[];t&&(n=((d=(u=e.queryTemplate)==null?void 0:u.categoryFilters)==null?void 0:d["\\_consents\\"])||[]);const r=s.rows.map(A(n)).sort((a,i)=>{var p,f;const l=(((p=a.program_name)==null?void 0:p.toString().toLowerCase())||"")==="anvil",m=(((f=i.program_name)==null?void 0:f.toString().toLowerCase())||"")==="anvil";return l!==m?l?1:-1:a.consentGranted===i.consentGranted?D(a,i):a.consentGranted?-1:1});y.set(r)}function A(s){return e=>{if(!e.accession)return{...e,consentGranted:!1};const t=e.accession.toString();if(/^phs\d+\.v\d+\.p\d+\.c\d+$/.test(t)){const o=t.replace(/\.v\d+\.p\d+/,"");return{...e,consentGranted:s.includes(o)}}return{...e,consentGranted:s.includes(t)}}}function D(s,e){var o,r;const t=((o=s.abbreviation)==null?void 0:o.toString())||"",n=((r=e.abbreviation)==null?void 0:r.toString())||"";return t.localeCompare(n)}export{T as a,h as c,_ as l,L as o,y as r};
