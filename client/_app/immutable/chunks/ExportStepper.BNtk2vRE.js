import{s as ve,J as De,e as $,a as T,c as k,b as D,g as A,f as _,m as g,i as I,h as p,K as we,L as ye,M as Ie,k as oe,v as pe,N as bt,H as Me,I as He,P as at,R as gt,t as F,d as j,E as Fe,j as te,Q as de,q as ie,F as $t,u as _e,a3 as kt,n as H,a6 as Ct,l as O,O as me,w as Et,o as Dt,U as je,Y as Se,Z as Ve}from"./scheduler.bui7uCNy.js";import{h as Te,u as wt}from"./await_block.B6WJ5gpV.js";import{S as be,i as ge,t as C,g as le,a as E,b as ae,h as nt,c as rt,d as x,e as R,m as L,f as B,j as xe}from"./index.CNwEczq-.js";import{p as Ee}from"./User.KscV_1bU.js";import{b as yt}from"./index.Bt-Xh7oU.js";import{e as qe}from"./each.VHlBgARd.js";import{a as Ae}from"./index.D4B8xqkz.js";import{w as It,g as Tt}from"./entry.Df3FuYeh.js";import{A as Le}from"./AngleButton.DmvF9EC0.js";import{T as At}from"./Table.CtPI0KtF.js";import{E as st}from"./Export.Dc22e2m-.js";import{f as ot,t as it}from"./Filter.Crtay6JA.js";import{U as ct}from"./UserToken.BkI7A127.js";import{C as Pt}from"./CopyButton.DO3XPlmd.js";import{g as ft}from"./stores.OGuiKE5h.js";import"./ProgressBar.svelte_svelte_type_style_lang.BuMCQOqK.js";import{P as ut}from"./ProgressRadial.CbTPnjvT.js";import{T as Nt,a as Re,C as dt,c as Pe}from"./codeBlocks.BLHu9WGo.js";import{E as Be}from"./ErrorAlert.DSZ6fs8d.js";import{C as Ue}from"./CardButton.Br5wRS_G.js";import{b as Oe,f as ze,s as St}from"./configuration.LanpiT2M.js";const ce=It({current:0,total:0});function Ge(s,e,t){const l=s.slice();return l[10]=e[t],l}function Qe(s){let e,t,l,n,a=qe(Array.from(Array(s[0].total).keys())),r=[];for(let i=0;i<a.length;i+=1)r[i]=We(Ge(s,a,i));return{c(){e=$("header");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=k(i,"HEADER",{class:!0});var o=D(e);for(let c=0;c<r.length;c+=1)r[c].l(o);o.forEach(_),this.h()},h(){g(e,"class","stepper-header flex items-center border-t mt-[15px] mb-7 border-surface-400-500-token gap-4")},m(i,o){I(i,e,o);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);n=!0},p(i,o){if(o&3){a=qe(Array.from(Array(i[0].total).keys()));let c;for(c=0;c<a.length;c+=1){const d=Ge(i,a,c);r[c]?r[c].p(d,o):(r[c]=We(d),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=a.length}},i(i){n||(i&&at(()=>{n&&(l&&l.end(1),t=nt(e,Ae,{duration:100}),t.start())}),n=!0)},o(i){t&&t.invalidate(),i&&(l=rt(e,Ae,{duration:100})),n=!1},d(i){i&&_(e),gt(r,i),i&&l&&l.end()}}}function We(s){let e,t,l=(s[1](s[10])?`Step ${s[10]+1}`:s[10]+1)+"",n,a,r;return{c(){e=$("div"),t=$("span"),n=F(l),r=T(),this.h()},l(i){e=k(i,"DIV",{class:!0});var o=D(e);t=k(o,"SPAN",{class:!0});var c=D(t);n=j(c,l),c.forEach(_),r=A(o),o.forEach(_),this.h()},h(){g(t,"class",a="badge text-sm "+(s[1](s[10])?"variant-filled-primary":"variant-filled-surface")),g(e,"class","stepper-header-step -mt-[15px] transition-all duration-300"),Fe(e,"flex-1",s[1](s[10]))},m(i,o){I(i,e,o),p(e,t),p(t,n),p(e,r)},p(i,o){o&3&&l!==(l=(i[1](i[10])?`Step ${i[10]+1}`:i[10]+1)+"")&&te(n,l),o&3&&a!==(a="badge text-sm "+(i[1](i[10])?"variant-filled-primary":"variant-filled-surface"))&&g(t,"class",a),o&3&&Fe(e,"flex-1",i[1](i[10]))},d(i){i&&_(e)}}}function Vt(s){let e,t,l,n,a,r=s[0].total&&Qe(s);const i=s[5].default,o=De(i,s,s[4],null);return{c(){e=$("div"),r&&r.c(),t=T(),l=$("div"),o&&o.c(),this.h()},l(c){e=k(c,"DIV",{class:!0,"data-testid":!0});var d=D(e);r&&r.l(d),t=A(d),l=k(d,"DIV",{class:!0});var f=D(l);o&&o.l(f),f.forEach(_),d.forEach(_),this.h()},h(){g(l,"class","stepper-content"),g(e,"class",n="stepper space-y-4 "+(s[2].class??"")),g(e,"data-testid","stepper")},m(c,d){I(c,e,d),r&&r.m(e,null),p(e,t),p(e,l),o&&o.m(l,null),a=!0},p(c,[d]){c[0].total?r?(r.p(c,d),d&1&&C(r,1)):(r=Qe(c),r.c(),C(r,1),r.m(e,t)):r&&(le(),E(r,1,1,()=>{r=null}),ae()),o&&o.p&&(!a||d&16)&&we(o,i,c,c[4],a?Ie(i,c[4],d,null):ye(c[4]),null),(!a||d&4&&n!==(n="stepper space-y-4 "+(c[2].class??"")))&&g(e,"class",n)},i(c){a||(C(r),C(o,c),a=!0)},o(c){E(r),E(o,c),a=!1},d(c){c&&_(e),r&&r.d(),o&&o.d(c)}}}function xt(s,e,t){let l,n;oe(s,ce,u=>t(0,n=u));let{$$slots:a={},$$scope:r}=e,{buttonCompleteLabel:i=""}=e;pe("buttonCompleteLabel",i),pe("state",ce);const o=bt();async function c(u){await new Promise(h=>setTimeout(h)),!u&&(o("next",{step:n.current,state:n}),de(ce,n.current++,n))}function d(){o("back",{step:n.current,state:n}),de(ce,n.current=n.current===1?0:n.current-1,n)}function f(u,h){h||o("complete",{step:u,state:n})}return pe("onBack",d),pe("onNext",c),pe("onComplete",f),s.$$set=u=>{t(2,e=Me(Me({},e),He(u))),"buttonCompleteLabel"in u&&t(3,i=u.buttonCompleteLabel),"$$scope"in u&&t(4,r=u.$$scope)},s.$$.update=()=>{s.$$.dirty&1&&t(1,l=u=>u===n.current)},e=He(e),[n,l,e,i,r,a]}class Rt extends be{constructor(e){super(),ge(this,e,xt,Vt,ve,{buttonCompleteLabel:3})}}const Lt=s=>({}),Xe=s=>({}),Bt=s=>({}),Ye=s=>({});function Je(s){let e,t,l,n,a,r;const i=s[9].header,o=De(i,s,s[13],Ye),c=s[9].default,d=De(c,s,s[13],null),f=d||Mt(s);let u=s[6].total>1&&Ke(s);return{c(){e=$("div"),t=$("header"),o&&o.c(),l=T(),n=$("div"),f&&f.c(),a=T(),u&&u.c(),this.h()},l(h){e=k(h,"DIV",{class:!0,"data-testid":!0});var b=D(e);t=k(b,"HEADER",{class:!0});var y=D(t);o&&o.l(y),y.forEach(_),l=A(b),n=k(b,"DIV",{class:!0});var m=D(n);f&&f.l(m),m.forEach(_),a=A(b),u&&u.l(b),b.forEach(_),this.h()},h(){g(t,"class","step-header text-2xl font-bold"),g(n,"class","step-content space-y-4 px-2"),g(e,"class","step space-y-4"),g(e,"data-testid","step-"+(s[7]+1))},m(h,b){I(h,e,b),p(e,t),o&&o.m(t,null),p(e,l),p(e,n),f&&f.m(n,null),p(e,a),u&&u.m(e,null),r=!0},p(h,b){o&&o.p&&(!r||b&8192)&&we(o,i,h,h[13],r?Ie(i,h[13],b,Bt):ye(h[13]),Ye),d&&d.p&&(!r||b&8192)&&we(d,c,h,h[13],r?Ie(c,h[13],b,null):ye(h[13]),null),h[6].total>1?u?(u.p(h,b),b&64&&C(u,1)):(u=Ke(h),u.c(),C(u,1),u.m(e,null)):u&&(le(),E(u,1,1,()=>{u=null}),ae())},i(h){r||(C(o,h),C(f,h),C(u),r=!0)},o(h){E(o,h),E(f,h),E(u),r=!1},d(h){h&&_(e),o&&o.d(h),f&&f.d(h),u&&u.d()}}}function Mt(s){let e,t=s[7]+1+"",l,n;return{c(){e=F("(Step "),l=F(t),n=F(" Content)")},l(a){e=j(a,"(Step "),l=j(a,t),n=j(a," Content)")},m(a,r){I(a,e,r),I(a,l,r),I(a,n,r)},p:H,d(a){a&&(_(e),_(l),_(n))}}}function Ke(s){let e,t,l,n,a,r,i,o,c;const d=[jt,Ft,Ht],f=[];function u(m,v){return m[8].navigation?0:m[7]!==0?1:2}t=u(s),l=f[t]=d[t](s);const h=[Ot,Ut],b=[];function y(m,v){return m[7]<m[6].total-1?0:1}return a=y(s),r=b[a]=h[a](s),{c(){e=$("div"),l.c(),n=T(),r.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var v=D(e);l.l(v),n=A(v),r.l(v),v.forEach(_),this.h()},h(){g(e,"class","step-navigation flex justify-between gap-4")},m(m,v){I(m,e,v),f[t].m(e,null),p(e,n),b[a].m(e,null),c=!0},p(m,v){let S=t;t=u(m),t===S?f[t].p(m,v):(le(),E(f[S],1,1,()=>{f[S]=null}),ae(),l=f[t],l?l.p(m,v):(l=f[t]=d[t](m),l.c()),C(l,1),l.m(e,n));let P=a;a=y(m),a===P?b[a].p(m,v):(le(),E(b[P],1,1,()=>{b[P]=null}),ae(),r=b[a],r?r.p(m,v):(r=b[a]=h[a](m),r.c()),C(r,1),r.m(e,null))},i(m){c||(C(l),C(r),m&&at(()=>{c&&(o&&o.end(1),i=nt(e,Ae,{duration:100}),i.start())}),c=!0)},o(m){E(l),E(r),i&&i.invalidate(),m&&(o=rt(e,Ae,{duration:100})),c=!1},d(m){m&&_(e),f[t].d(),b[a].d(),m&&o&&o.end()}}}function Ht(s){let e;return{c(){e=$("div")},l(t){e=k(t,"DIV",{}),D(e).forEach(_)},m(t,l){I(t,e,l)},p:H,i:H,o:H,d(t){t&&_(e)}}}function Ft(s){let e,t;return e=new Le({props:{disabled:s[6].current===0,$$slots:{default:[qt]},$$scope:{ctx:s}}}),e.$on("click",s[10]),{c(){x(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,n){L(e,l,n),t=!0},p(l,n){const a={};n&64&&(a.disabled=l[6].current===0),n&8192&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function jt(s){let e,t;const l=s[9].navigation,n=De(l,s,s[13],Xe);return{c(){e=$("div"),n&&n.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var r=D(e);n&&n.l(r),r.forEach(_),this.h()},h(){g(e,"class","step-navigation-slot")},m(a,r){I(a,e,r),n&&n.m(e,null),t=!0},p(a,r){n&&n.p&&(!t||r&8192)&&we(n,l,a,a[13],t?Ie(l,a[13],r,Lt):ye(a[13]),Xe)},i(a){t||(C(n,a),t=!0)},o(a){E(n,a),t=!1},d(a){a&&_(e),n&&n.d(a)}}}function qt(s){let e;return{c(){e=F("Back")},l(t){e=j(t,"Back")},m(t,l){I(t,e,l)},d(t){t&&_(e)}}}function Ut(s){let e,t;return e=new Le({props:{name:s[1]||"complete",angle:"right",variant:"filled",disabled:s[0],$$slots:{default:[zt]},$$scope:{ctx:s}}}),e.$on("click",s[12]),{c(){x(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,n){L(e,l,n),t=!0},p(l,n){const a={};n&2&&(a.name=l[1]||"complete"),n&1&&(a.disabled=l[0]),n&8194&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function Ot(s){let e,t;return e=new Le({props:{name:"next",angle:"right",variant:"filled",disabled:s[0],$$slots:{default:[Gt]},$$scope:{ctx:s}}}),e.$on("click",s[11]),{c(){x(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,n){L(e,l,n),t=!0},p(l,n){const a={};n&1&&(a.disabled=l[0]),n&8192&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function zt(s){let e=(s[1]||"Complete")+"",t;return{c(){t=F(e)},l(l){t=j(l,e)},m(l,n){I(l,t,n)},p(l,n){n&2&&e!==(e=(l[1]||"Complete")+"")&&te(t,e)},d(l){l&&_(t)}}}function Gt(s){let e;return{c(){e=F("Next")},l(t){e=j(t,"Next")},m(t,l){I(t,e,l)},d(t){t&&_(e)}}}function Qt(s){let e,t,l=s[7]===s[6].current&&Je(s);return{c(){l&&l.c(),e=ie()},l(n){l&&l.l(n),e=ie()},m(n,a){l&&l.m(n,a),I(n,e,a),t=!0},p(n,[a]){n[7]===n[6].current?l?(l.p(n,a),a&64&&C(l,1)):(l=Je(n),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(le(),E(l,1,1,()=>{l=null}),ae())},i(n){t||(C(l),t=!0)},o(n){E(l),t=!1},d(n){n&&_(e),l&&l.d(n)}}}function Wt(s,e,t){let l,n=H,a=()=>(n(),n=Ct(f,P=>t(6,l=P)),f);s.$$.on_destroy.push(()=>n());let{$$slots:r={},$$scope:i}=e;const o=$t(r);let{locked:c=!1}=e,{buttonCompleteLabel:d=_e("buttonCompleteLabel")}=e,{state:f=_e("state")}=e;a();let{onNext:u=_e("onNext")}=e,{onBack:h=_e("onBack")}=e,{onComplete:b=_e("onComplete")}=e;const y=l.total;de(f,l.total++,l),kt(()=>{de(f,l.total--,l)});const m=()=>h(),v=()=>u(c),S=()=>b(y,c);return s.$$set=P=>{"locked"in P&&t(0,c=P.locked),"buttonCompleteLabel"in P&&t(1,d=P.buttonCompleteLabel),"state"in P&&a(t(2,f=P.state)),"onNext"in P&&t(3,u=P.onNext),"onBack"in P&&t(4,h=P.onBack),"onComplete"in P&&t(5,b=P.onComplete),"$$scope"in P&&t(13,i=P.$$scope)},[c,d,f,u,h,b,l,y,o,r,m,v,S,i]}class he extends be{constructor(e){super(),ge(this,e,Wt,Qt,ve,{locked:0,buttonCompleteLabel:1,state:2,onNext:3,onBack:4,onComplete:5})}}function Xt(s){let e,t,l,n='<label for="summary" class="mr-8 font-bold">Summary:</label>',a,r,i,o,c,d,f="Participants",u,h,b,y,m,v,S="Variables",P,N,V,W,G,U,ne="Data Points";return{c(){e=$("div"),t=$("div"),l=$("div"),l.innerHTML=n,a=T(),r=$("div"),i=$("span"),o=F(s[1]),c=T(),d=$("label"),d.textContent=f,u=T(),h=$("div"),b=$("span"),y=F(s[0]),m=T(),v=$("label"),v.textContent=S,P=T(),N=$("div"),V=$("span"),W=F(s[2]),G=T(),U=$("label"),U.textContent=ne,this.h()},l(Q){e=k(Q,"DIV",{id:!0,class:!0});var J=D(e);t=k(J,"DIV",{id:!0,class:!0});var ee=D(t);l=k(ee,"DIV",{class:!0,"data-svelte-h":!0}),O(l)!=="svelte-1vd72fa"&&(l.innerHTML=n),a=A(ee),r=k(ee,"DIV",{class:!0});var M=D(r);i=k(M,"SPAN",{id:!0,class:!0});var q=D(i);o=j(q,s[1]),q.forEach(_),c=A(M),d=k(M,"LABEL",{for:!0,"data-svelte-h":!0}),O(d)!=="svelte-1te5h4m"&&(d.textContent=f),M.forEach(_),u=A(ee),h=k(ee,"DIV",{class:!0});var z=D(h);b=k(z,"SPAN",{id:!0,class:!0});var K=D(b);y=j(K,s[0]),K.forEach(_),m=A(z),v=k(z,"LABEL",{for:!0,"data-svelte-h":!0}),O(v)!=="svelte-j0nyhs"&&(v.textContent=S),z.forEach(_),P=A(ee),N=k(ee,"DIV",{class:!0});var Y=D(N);V=k(Y,"SPAN",{id:!0,class:!0});var re=D(V);W=j(re,s[2]),re.forEach(_),G=A(Y),U=k(Y,"LABEL",{for:!0,"data-svelte-h":!0}),O(U)!=="svelte-kgfncs"&&(U.textContent=ne),Y.forEach(_),ee.forEach(_),J.forEach(_),this.h()},h(){g(l,"class","text-xl"),g(i,"id","participants"),g(i,"class","mr-2"),g(d,"for","participants"),g(r,"class","flex justify-left text-xl font-light"),g(b,"id","variables"),g(b,"class","mr-2"),g(v,"for","variables"),g(h,"class","flex justify-left text-xl font-light"),g(V,"id","dataPoints"),g(V,"class","mr-2"),g(U,"for","dataPoints"),g(N,"class","flex justify-left text-xl font-light"),g(t,"id","summary"),g(t,"class","w-full grid grid-flow-col auto-cols-auto"),g(e,"id","stats"),g(e,"class","w-full flex justify-evenly mb-5 pb-2 svelte-11yjabd")},m(Q,J){I(Q,e,J),p(e,t),p(t,l),p(t,a),p(t,r),p(r,i),p(i,o),p(r,c),p(r,d),p(t,u),p(t,h),p(h,b),p(b,y),p(h,m),p(h,v),p(t,P),p(t,N),p(N,V),p(V,W),p(N,G),p(N,U)},p(Q,[J]){J&2&&te(o,Q[1]),J&1&&te(y,Q[0]),J&4&&te(W,Q[2])},i:H,o:H,d(Q){Q&&_(e)}}}function Yt(s,e,t){let l,n,a,r,i,o;oe(s,ot,d=>t(5,i=d)),oe(s,it,d=>t(6,o=d));let{exports:c}=st;return oe(s,c,d=>t(4,r=d)),s.$$.update=()=>{s.$$.dirty&64&&t(1,l=o),s.$$.dirty&48&&t(0,n=i.length+r.length),s.$$.dirty&3&&t(2,a=typeof l=="number"?l*n:0)},[n,l,a,c,r,i,o]}class Ne extends be{constructor(e){super(),ge(this,e,Yt,Xt,ve,{})}}async function Jt(s,e){if(e===""&&e.trim()==="")throw"Please input a Dataset ID name";const t=/^[\w \-\\/?+=[\].():"']+$/g;if(!e.match(t))throw`Name can only contain letters, numbers, and these special symbols - ? + = [ ] . ( ) : ' "`;return await Ee("picsure/dataset/named",{queryId:s,name:e})}function Kt(s){let e,t,l,n,a,r,i,o,c,d,f,u;return{c(){e=$("div"),t=$("p"),l=F(s[0]),n=T(),a=$("div"),r=$("button"),i=F(s[3]),o=T(),c=$("button"),d=F(s[4]),this.h()},l(h){e=k(h,"DIV",{class:!0});var b=D(e);t=k(b,"P",{});var y=D(t);l=j(y,s[0]),y.forEach(_),n=A(b),a=k(b,"DIV",{class:!0});var m=D(a);r=k(m,"BUTTON",{class:!0});var v=D(r);i=j(v,s[3]),v.forEach(_),o=A(m),c=k(m,"BUTTON",{class:!0});var S=D(c);d=j(S,s[4]),S.forEach(_),m.forEach(_),b.forEach(_),this.h()},h(){g(r,"class","btn variant-ghost-surface hover:variant-filled-surface mt-6"),g(c,"class","btn variant-filled hover:variant-filled-primary mt-6"),g(a,"class","flex justify-end gap-4"),g(e,"class","flex flex-col gap-4")},m(h,b){I(h,e,b),p(e,t),p(t,l),p(e,n),p(e,a),p(a,r),p(r,i),p(a,o),p(a,c),p(c,d),f||(u=[me(r,"click",s[6]),me(c,"click",s[7])],f=!0)},p(h,[b]){b&1&&te(l,h[0]),b&8&&te(i,h[3]),b&16&&te(d,h[4])},i:H,o:H,d(h){h&&_(e),f=!1,Et(u)}}}function Zt(s,e,t){let l;const n=ft();oe(s,n,u=>t(8,l=u));let{message:a}=e,{onCancel:r=()=>n.close()}=e,{onConfirm:i}=e,{cancelText:o="Cancel"}=e,{confirmText:c="Accept"}=e;Dt(()=>{var u,h,b,y,m,v,S,P,N,V;(u=l[0])!=null&&u.meta.onCancel&&t(1,r=(h=l[0])==null?void 0:h.meta.onCancel),(b=l[0])!=null&&b.meta.onConfirm&&t(2,i=(y=l[0])==null?void 0:y.meta.onConfirm),(m=l[0])!=null&&m.meta.confirmText&&t(4,c=(v=l[0])==null?void 0:v.meta.confirmText),(S=l[0])!=null&&S.meta.cancelText&&t(3,o=(P=l[0])==null?void 0:P.meta.cancelText),(N=l[0])!=null&&N.meta.message&&t(0,a=(V=l[0])==null?void 0:V.meta.message)});const d=()=>r(),f=()=>i();return s.$$set=u=>{"message"in u&&t(0,a=u.message),"onCancel"in u&&t(1,r=u.onCancel),"onConfirm"in u&&t(2,i=u.onConfirm),"cancelText"in u&&t(3,o=u.cancelText),"confirmText"in u&&t(4,c=u.confirmText)},[a,r,i,o,c,n,d,f]}class el extends be{constructor(e){super(),ge(this,e,Zt,Kt,ve,{message:0,onCancel:1,onConfirm:2,cancelText:3,confirmText:4})}}function tl(s){let e,t,l,n,a={ctx:s,current:null,token:null,hasCatch:!0,pending:rl,then:nl,catch:al,blocks:[,,,]};return Te(e=s[5],a),l=new At({props:{tableName:"ExportSummary",data:s[3],columns:s[14]}}),{c(){a.block.c(),t=T(),x(l.$$.fragment)},l(r){a.block.l(r),t=A(r),R(l.$$.fragment,r)},m(r,i){a.block.m(r,a.anchor=i),a.mount=()=>t.parentNode,a.anchor=t,I(r,t,i),L(l,r,i),n=!0},p(r,i){s=r,a.ctx=s,i[0]&32&&e!==(e=s[5])&&Te(e,a);const o={};i[0]&8&&(o.data=s[3]),l.$set(o)},i(r){n||(C(a.block),C(l.$$.fragment,r),n=!0)},o(r){for(let i=0;i<3;i+=1){const o=a.blocks[i];E(o)}E(l.$$.fragment,r),n=!1},d(r){r&&_(t),a.block.d(r),a.token=null,a=null,B(l,r)}}}function ll(s){let e,t,l='<i class="fa-solid fa-triangle-exclamation text-4xl"></i>',n,a,r=`<h3 class="h3">Warning</h3> <p>Warning: Your selected data exceeds 1,000,000 estimated data points, which is too
                large to export. Please reduce the data selection or the number of selected
                participants.</p>`,i,o,c,d="Back",f,u;return{c(){e=$("aside"),t=$("div"),t.innerHTML=l,n=T(),a=$("div"),a.innerHTML=r,i=T(),o=$("div"),c=$("button"),c.textContent=d,this.h()},l(h){e=k(h,"ASIDE",{class:!0});var b=D(e);t=k(b,"DIV",{"data-svelte-h":!0}),O(t)!=="svelte-1dz1fc7"&&(t.innerHTML=l),n=A(b),a=k(b,"DIV",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-e8x9nn"&&(a.innerHTML=r),i=A(b),o=k(b,"DIV",{class:!0});var y=D(o);c=k(y,"BUTTON",{class:!0,"data-svelte-h":!0}),O(c)!=="svelte-1datm77"&&(c.textContent=d),y.forEach(_),b.forEach(_),this.h()},h(){g(a,"class","alert-message"),g(c,"class","btn variant-filled"),g(o,"class","alert-actions dark"),g(e,"class","alert variant-filled-error")},m(h,b){I(h,e,b),p(e,t),p(e,n),p(e,a),p(e,i),p(e,o),p(o,c),f||(u=me(c,"click",s[22]),f=!0)},p:H,i:H,o:H,d(h){h&&_(e),f=!1,u()}}}function al(s){let e,t,l;return t=new Be({props:{title:`An error occurred while preparing your dataset. Please try again. If this problem persists, please
                  contact an administrator.`}}),{c(){e=$("div"),x(t.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var a=D(e);R(t.$$.fragment,a),a.forEach(_),this.h()},h(){g(e,"class","flex justify-center mb-4")},m(n,a){I(n,e,a),L(t,e,null),l=!0},i(n){l||(C(t.$$.fragment,n),l=!0)},o(n){E(t.$$.fragment,n),l=!1},d(n){n&&_(e),B(t)}}}function nl(s){return{c:H,l:H,m:H,i:H,o:H,d:H}}function rl(s){let e,t,l,n="Preparing your dataset...",a;return e=new ut({props:{width:"w-4"}}),{c(){x(e.$$.fragment),t=T(),l=$("div"),l.textContent=n},l(r){R(e.$$.fragment,r),t=A(r),l=k(r,"DIV",{"data-svelte-h":!0}),O(l)!=="svelte-1m53t1h"&&(l.textContent=n)},m(r,i){L(e,r,i),I(r,t,i),I(r,l,i),a=!0},i(r){a||(C(e.$$.fragment,r),a=!0)},o(r){E(e.$$.fragment,r),a=!1},d(r){r&&(_(t),_(l)),B(e,r)}}}function sl(s){let e,t,l,n,a,r,i;t=new Ne({});const o=[ll,tl],c=[];function d(f,u){return f[21]()?0:1}return a=d(s),r=c[a]=o[a](s),{c(){e=$("div"),x(t.$$.fragment),l=T(),n=$("section"),r.c(),this.h()},l(f){e=k(f,"DIV",{id:!0,class:!0});var u=D(e);R(t.$$.fragment,u),l=A(u),n=k(u,"SECTION",{class:!0});var h=D(n);r.l(h),h.forEach(_),u.forEach(_),this.h()},h(){g(n,"class","w-full"),g(e,"id","first-step-container"),g(e,"class","flex flex-col w-full h-full items-center")},m(f,u){I(f,e,u),L(t,e,null),p(e,l),p(e,n),c[a].m(n,null),i=!0},p(f,u){r.p(f,u)},i(f){i||(C(t.$$.fragment,f),C(r),i=!0)},o(f){E(t.$$.fragment,f),E(r),i=!1},d(f){f&&_(e),B(t),c[a].d()}}}function ol(s){let e;return{c(){e=F("Review Cohort Details:")},l(t){e=j(t,"Review Cohort Details:")},m(t,l){I(t,e,l)},d(t){t&&_(e)}}}function Ze(s){let e,t;return e=new he({props:{$$slots:{header:[cl],default:[il]},$$scope:{ctx:s}}}),{c(){x(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,n){L(e,l,n),t=!0},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function il(s){let e,t,l,n,a=`<header class="card-header">Select <strong>additional variables</strong> you would like to be included in your final
            data export.</header> <hr/> <div class="card-body p-4">Tree Component Here</div>`,r;return t=new Ne({}),{c(){e=$("section"),x(t.$$.fragment),l=T(),n=$("div"),n.innerHTML=a,this.h()},l(i){e=k(i,"SECTION",{class:!0});var o=D(e);R(t.$$.fragment,o),l=A(o),n=k(o,"DIV",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1l9s757"&&(n.innerHTML=a),o.forEach(_),this.h()},h(){g(n,"class","w-full h-full m-2 card p-4"),g(e,"class","flex flex-col w-full h-full items-center")},m(i,o){I(i,e,o),L(t,e,null),p(e,l),p(e,n),r=!0},p:H,i(i){r||(C(t.$$.fragment,i),r=!0)},o(i){E(t.$$.fragment,i),r=!1},d(i){i&&_(e),B(t)}}}function cl(s){let e;return{c(){e=F("Finalize Data:")},l(t){e=j(t,"Finalize Data:")},m(t,l){I(t,e,l)},d(t){t&&_(e)}}}function fl(s){let e,t,l,n,a,r,i,o;return t=new Ne({}),a=new Ue({props:{"data-testid":"csv-export-option",title:"Export as Data Frame or CSV",subtitle:"Export data as a Python or R data frame or a comma-separated values file",size:"other",class:"card variant-ringed-primary",active:s[1]==="DATAFRAME"}}),a.$on("click",s[23]),i=new Ue({props:{"data-testid":"csv-export-option",title:"Export as PFB",subtitle:"Export data in Portable Format for Biomedical Data file format",size:"other",class:"card variant-ringed-primary",active:s[1]==="DATAFRAME_PFB"}}),i.$on("click",s[24]),{c(){e=$("section"),x(t.$$.fragment),l=T(),n=$("div"),x(a.$$.fragment),r=T(),x(i.$$.fragment),this.h()},l(c){e=k(c,"SECTION",{class:!0});var d=D(e);R(t.$$.fragment,d),l=A(d),n=k(d,"DIV",{class:!0});var f=D(n);R(a.$$.fragment,f),r=A(f),R(i.$$.fragment,f),f.forEach(_),d.forEach(_),this.h()},h(){g(n,"class","grid gap-10 grid-cols-2"),g(e,"class","flex flex-col w-full h-full items-center")},m(c,d){I(c,e,d),L(t,e,null),p(e,l),p(e,n),L(a,n,null),p(n,r),L(i,n,null),o=!0},p(c,d){const f={};d[0]&2&&(f.active=c[1]==="DATAFRAME"),a.$set(f);const u={};d[0]&2&&(u.active=c[1]==="DATAFRAME_PFB"),i.$set(u)},i(c){o||(C(t.$$.fragment,c),C(a.$$.fragment,c),C(i.$$.fragment,c),o=!0)},o(c){E(t.$$.fragment,c),E(a.$$.fragment,c),E(i.$$.fragment,c),o=!1},d(c){c&&_(e),B(t),B(a),B(i)}}}function ul(s){let e;return{c(){e=F("Review and Save Dataset:")},l(t){e=j(t,"Review and Save Dataset:")},m(t,l){I(t,e,l)},d(t){t&&_(e)}}}function et(s){let e,t,l;return t=new Be({props:{title:"Error",$$slots:{default:[dl]},$$scope:{ctx:s}}}),{c(){e=$("div"),x(t.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var a=D(e);R(t.$$.fragment,a),a.forEach(_),this.h()},h(){g(e,"class","w-full h-full m-2")},m(n,a){I(n,e,a),L(t,e,null),l=!0},p(n,a){const r={};a[0]&256|a[1]&2048&&(r.$$scope={dirty:a,ctx:n}),t.$set(r)},i(n){l||(C(t.$$.fragment,n),l=!0)},o(n){E(t.$$.fragment,n),l=!1},d(n){n&&_(e),B(t)}}}function dl(s){let e;return{c(){e=F(s[8])},l(t){e=j(t,s[8])},m(t,l){I(t,e,l)},p(t,l){l[0]&256&&te(e,t[8])},d(t){t&&_(e)}}}function ml(s){let e,t,l,n,a,r=`Save the information in your final data export by clicking the Save Dataset ID button.
          Navigate to the <a class="anchor" href="/dataset">Manage Datasets page</a> to view or manage
          your Dataset IDs.`,i,o,c,d,f,u,h,b,y="Dataset Name:",m,v,S,P,N,V,W="Dataset ID:",G,U,ne,Q,J,ee;t=new Ne({});let M=s[8]&&et(s);return{c(){e=$("section"),x(t.$$.fragment),l=T(),n=$("div"),a=$("header"),a.innerHTML=r,i=T(),o=$("hr"),c=T(),M&&M.c(),d=T(),f=$("div"),u=$("div"),h=$("div"),b=$("label"),b.textContent=y,m=T(),v=$("input"),S=T(),P=$("div"),N=$("div"),V=$("label"),V.textContent=W,G=T(),U=$("div"),ne=F(s[10]),this.h()},l(q){e=k(q,"SECTION",{class:!0});var z=D(e);R(t.$$.fragment,z),l=A(z),n=k(z,"DIV",{class:!0});var K=D(n);a=k(K,"HEADER",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-1l8cwjc"&&(a.innerHTML=r),i=A(K),o=k(K,"HR",{}),c=A(K),M&&M.l(K),d=A(K),f=k(K,"DIV",{class:!0});var Y=D(f);u=k(Y,"DIV",{});var re=D(u);h=k(re,"DIV",{class:!0});var fe=D(h);b=k(fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(b)!=="svelte-1i4hx8x"&&(b.textContent=y),m=A(fe),v=k(fe,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),fe.forEach(_),S=A(re),P=k(re,"DIV",{class:!0});var $e=D(P);N=k($e,"DIV",{class:!0});var ue=D(N);V=k(ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(V)!=="svelte-vytwml"&&(V.textContent=W),G=A(ue),U=k(ue,"DIV",{id:!0});var ke=D(U);ne=j(ke,s[10]),ke.forEach(_),ue.forEach(_),$e.forEach(_),re.forEach(_),Y.forEach(_),K.forEach(_),z.forEach(_),this.h()},h(){g(a,"class","card-header"),g(b,"for","dataset-name"),g(b,"class","font-bold mr-2"),g(v,"type","text"),g(v,"id","dataset-name"),g(v,"class","w-80 svelte-uusfhg"),g(v,"placeholder","Enter a name"),v.required=!0,g(h,"class","flex items-center m-2"),g(V,"for","dataset-id"),g(V,"class","font-bold mr-2"),g(U,"id","dataset-id"),g(N,"class","flex items-center"),g(P,"class","flex items-center m-2"),g(f,"class","card-body p-4 flex flex-col justify-center items-center"),g(n,"class","w-full h-full m-2 card p-4"),g(e,"class","flex flex-col w-full h-full items-center")},m(q,z){I(q,e,z),L(t,e,null),p(e,l),p(e,n),p(n,a),p(n,i),p(n,o),p(n,c),M&&M.m(n,null),p(n,d),p(n,f),p(f,u),p(u,h),p(h,b),p(h,m),p(h,v),je(v,s[6]),p(u,S),p(u,P),p(P,N),p(N,V),p(N,G),p(N,U),p(U,ne),Q=!0,J||(ee=me(v,"input",s[25]),J=!0)},p(q,z){q[8]?M?(M.p(q,z),z[0]&256&&C(M,1)):(M=et(q),M.c(),C(M,1),M.m(n,d)):M&&(le(),E(M,1,1,()=>{M=null}),ae()),z[0]&64&&v.value!==q[6]&&je(v,q[6]),(!Q||z[0]&1024)&&te(ne,q[10])},i(q){Q||(C(t.$$.fragment,q),C(M),Q=!0)},o(q){E(t.$$.fragment,q),E(M),Q=!1},d(q){q&&_(e),B(t),M&&M.d(),J=!1,ee()}}}function pl(s){let e;return{c(){e=F("Save Dataset ID:")},l(t){e=j(t,"Save Dataset ID:")},m(t,l){I(t,e,l)},d(t){t&&_(e)}}}function tt(s){let e,t,l,n={ctx:s,current:null,token:null,hasCatch:!0,pending:Il,then:hl,catch:_l,error:41,blocks:[,,,]};return Te(t=s[4],n),{c(){e=ie(),n.block.c()},l(a){e=ie(),n.block.l(a)},m(a,r){I(a,e,r),n.block.m(a,n.anchor=r),n.mount=()=>e.parentNode,n.anchor=e,l=!0},p(a,r){s=a,n.ctx=s,r[0]&16&&t!==(t=s[4])&&Te(t,n)||wt(n,s,r)},i(a){l||(C(n.block),l=!0)},o(a){for(let r=0;r<3;r+=1){const i=n.blocks[r];E(i)}l=!1},d(a){a&&_(e),n.block.d(a),n.token=null,n=null}}}function _l(s){let e,t,l,n,a=s[41]+"",r,i;return t=new Be({props:{title:`An error occurred while preparing your dataset. Please try again. If this problem persists, please
                contact an administrator.`}}),{c(){e=$("div"),x(t.$$.fragment),l=T(),n=$("div"),r=F(a),this.h()},l(o){e=k(o,"DIV",{class:!0});var c=D(e);R(t.$$.fragment,c),l=A(c),n=k(c,"DIV",{class:!0});var d=D(n);r=j(d,a),d.forEach(_),c.forEach(_),this.h()},h(){g(n,"class","hidden"),g(e,"class","flex justify-center")},m(o,c){I(o,e,c),L(t,e,null),p(e,l),p(e,n),p(n,r),i=!0},p(o,c){(!i||c[0]&16)&&a!==(a=o[41]+"")&&te(r,a)},i(o){i||(C(t.$$.fragment,o),i=!0)},o(o){E(t.$$.fragment,o),i=!1},d(o){o&&_(e),B(t)}}}function hl(s){let e,t,l,n;const a=[bl,vl],r=[];function i(o,c){return o[0].query.expectedResultType==="DATAFRAME"?0:o[0].query.expectedResultType==="DATAFRAME_PFB"?1:-1}return~(e=i(s))&&(t=r[e]=a[e](s)),{c(){t&&t.c(),l=ie()},l(o){t&&t.l(o),l=ie()},m(o,c){~e&&r[e].m(o,c),I(o,l,c),n=!0},p(o,c){let d=e;e=i(o),e===d?~e&&r[e].p(o,c):(t&&(le(),E(r[d],1,1,()=>{r[d]=null}),ae()),~e?(t=r[e],t?t.p(o,c):(t=r[e]=a[e](o),t.c()),C(t,1),t.m(l.parentNode,l)):t=null)},i(o){n||(C(t),n=!0)},o(o){E(t),n=!1},d(o){o&&_(l),~e&&r[e].d(o)}}}function vl(s){let e,t,l="Use the option below to download your selected data in the PFB format.",n,a,r,i,o,c,d='<i class="fa-solid fa-download"></i>Download as PFB',f,u,h,b;return{c(){e=$("section"),t=$("div"),t.textContent=l,n=T(),a=$("div"),r=$("div"),i=T(),o=$("div"),c=$("button"),c.innerHTML=d,f=T(),u=$("div"),this.h()},l(y){e=k(y,"SECTION",{class:!0});var m=D(e);t=k(m,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-qfbmlq"&&(t.textContent=l),n=A(m),a=k(m,"DIV",{class:!0});var v=D(a);r=k(v,"DIV",{}),D(r).forEach(_),i=A(v),o=k(v,"DIV",{});var S=D(o);c=k(S,"BUTTON",{class:!0,"data-svelte-h":!0}),O(c)!=="svelte-1o3nllj"&&(c.innerHTML=d),S.forEach(_),f=A(v),u=k(v,"DIV",{}),D(u).forEach(_),v.forEach(_),m.forEach(_),this.h()},h(){g(t,"class","flex justify-center mt-4"),g(c,"class","flex-initial w-64 btn variant-filled-primary"),g(a,"class","grid grid-cols-3"),g(e,"class","flex flex-col gap-8")},m(y,m){I(y,e,m),p(e,t),p(e,n),p(e,a),p(a,r),p(a,i),p(a,o),p(o,c),p(a,f),p(a,u),h||(b=me(c,"click",s[30]),h=!0)},p:H,i:H,o:H,d(y){y&&_(e),h=!1,b()}}}function bl(s){let e,t,l=`To export data and start your analysis, copy and paste the following code in an
                  analysis workspace, such as BioData Catalyst Powered by Seven Bridges or BioData
                  Catalyst Powered by Terra, to connect to PIC-SURE and save the data frame or
                  download the file. Note that you will need your personal access token to complete
                  the connection to PIC-SURE with code.`,n,a,r,i,o=`Copy your personal access token and save as a text file called “token.txt” in the
                  same working directory to execute the code above.`,c,d,f,u,h,b='<a class="btn variant-ghost-primary m-2 hover:variant-filled-primary" href="https://platform.sb.biodatacatalyst.nhlbi.nih.gov/u/biodatacatalyst/data-export-from-the-pic-sure-ui" target="_blank">Go to Seven Bridges</a> <a class="btn variant-ghost-primary m-2 hover:variant-filled-primary" href="https://terra.biodatacatalyst.nhlbi.nih.gov/" target="_blank">Go to Terra</a>',y;return a=new Nt({props:{class:"card p-4",$$slots:{panel:[yl],default:[Cl]},$$scope:{ctx:s}}}),f=new ct({}),{c(){e=$("section"),t=$("p"),t.textContent=l,n=T(),x(a.$$.fragment),r=T(),i=$("p"),i.textContent=o,c=T(),d=$("div"),x(f.$$.fragment),u=T(),h=$("div"),h.innerHTML=b,this.h()},l(m){e=k(m,"SECTION",{class:!0});var v=D(e);t=k(v,"P",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-hpr0ix"&&(t.textContent=l),n=A(v),R(a.$$.fragment,v),r=A(v),i=k(v,"P",{"data-svelte-h":!0}),O(i)!=="svelte-104z5lh"&&(i.textContent=o),c=A(v),d=k(v,"DIV",{class:!0});var S=D(d);R(f.$$.fragment,S),S.forEach(_),u=A(v),h=k(v,"DIV",{class:!0,"data-svelte-h":!0}),O(h)!=="svelte-h1oinp"&&(h.innerHTML=b),v.forEach(_),this.h()},h(){g(t,"class","mt-4"),g(d,"class","flex justify-center"),g(h,"class","flex justify-center"),g(e,"class","flex flex-col gap-8")},m(m,v){I(m,e,v),p(e,t),p(e,n),L(a,e,null),p(e,r),p(e,i),p(e,c),p(e,d),L(f,d,null),p(e,u),p(e,h),y=!0},p(m,v){const S={};v[0]&1536|v[1]&2048&&(S.$$scope={dirty:v,ctx:m}),a.$set(S)},i(m){y||(C(a.$$.fragment,m),C(f.$$.fragment,m),y=!0)},o(m){E(a.$$.fragment,m),E(f.$$.fragment,m),y=!1},d(m){m&&_(e),B(a),B(f)}}}function gl(s){let e;return{c(){e=F("Python")},l(t){e=j(t,"Python")},m(t,l){I(t,e,l)},d(t){t&&_(e)}}}function $l(s){let e;return{c(){e=F("R")},l(t){e=j(t,"R")},m(t,l){I(t,e,l)},d(t){t&&_(e)}}}function kl(s){let e;return{c(){e=F("Download")},l(t){e=j(t,"Download")},m(t,l){I(t,e,l)},d(t){t&&_(e)}}}function Cl(s){let e,t,l,n,a,r,i,o,c;function d(m){s[27](m)}let f={name:"python",value:0,$$slots:{default:[gl]},$$scope:{ctx:s}};s[9]!==void 0&&(f.group=s[9]),e=new Re({props:f}),Se.push(()=>xe(e,"group",d));function u(m){s[28](m)}let h={name:"r",value:1,$$slots:{default:[$l]},$$scope:{ctx:s}};s[9]!==void 0&&(h.group=s[9]),n=new Re({props:h}),Se.push(()=>xe(n,"group",u));function b(m){s[29](m)}let y={name:"download",value:2,$$slots:{default:[kl]},$$scope:{ctx:s}};return s[9]!==void 0&&(y.group=s[9]),i=new Re({props:y}),Se.push(()=>xe(i,"group",b)),{c(){x(e.$$.fragment),l=T(),x(n.$$.fragment),r=T(),x(i.$$.fragment)},l(m){R(e.$$.fragment,m),l=A(m),R(n.$$.fragment,m),r=A(m),R(i.$$.fragment,m)},m(m,v){L(e,m,v),I(m,l,v),L(n,m,v),I(m,r,v),L(i,m,v),c=!0},p(m,v){const S={};v[1]&2048&&(S.$$scope={dirty:v,ctx:m}),!t&&v[0]&512&&(t=!0,S.group=m[9],Ve(()=>t=!1)),e.$set(S);const P={};v[1]&2048&&(P.$$scope={dirty:v,ctx:m}),!a&&v[0]&512&&(a=!0,P.group=m[9],Ve(()=>a=!1)),n.$set(P);const N={};v[1]&2048&&(N.$$scope={dirty:v,ctx:m}),!o&&v[0]&512&&(o=!0,N.group=m[9],Ve(()=>o=!1)),i.$set(N)},i(m){c||(C(e.$$.fragment,m),C(n.$$.fragment,m),C(i.$$.fragment,m),c=!0)},o(m){E(e.$$.fragment,m),E(n.$$.fragment,m),E(i.$$.fragment,m),c=!1},d(m){m&&(_(l),_(r)),B(e,m),B(n,m),B(i,m)}}}function El(s){let e,t,l='<i class="fa-solid fa-download mr-1"></i>Download as CSV',n,a;return{c(){e=$("div"),t=$("button"),t.innerHTML=l,this.h()},l(r){e=k(r,"DIV",{});var i=D(e);t=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1t3f70y"&&(t.innerHTML=l),i.forEach(_),this.h()},h(){g(t,"class","btn variant-filled-primary")},m(r,i){I(r,e,i),p(e,t),n||(a=me(t,"click",s[26]),n=!0)},p:H,i:H,o:H,d(r){r&&_(e),n=!1,a()}}}function Dl(s){var l,n;let e,t;return e=new dt({props:{language:"r",lineNumbers:!0,code:((n=(l=Pe)==null?void 0:l.bdcRExport)==null?void 0:n.replace("{{queryId}}",s[10]))||"Code not set"}}),{c(){x(e.$$.fragment)},l(a){R(e.$$.fragment,a)},m(a,r){L(e,a,r),t=!0},p(a,r){var o,c;const i={};r[0]&1024&&(i.code=((c=(o=Pe)==null?void 0:o.bdcRExport)==null?void 0:c.replace("{{queryId}}",a[10]))||"Code not set"),e.$set(i)},i(a){t||(C(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function wl(s){var l,n;let e,t;return e=new dt({props:{language:"python",lineNumbers:!0,buttonCopied:"Copied!",code:((n=(l=Pe)==null?void 0:l.bdcPythonExport)==null?void 0:n.replace("{{queryId}}",s[10]))||"Code not set"}}),{c(){x(e.$$.fragment)},l(a){R(e.$$.fragment,a)},m(a,r){L(e,a,r),t=!0},p(a,r){var o,c;const i={};r[0]&1024&&(i.code=((c=(o=Pe)==null?void 0:o.bdcPythonExport)==null?void 0:c.replace("{{queryId}}",a[10]))||"Code not set"),e.$set(i)},i(a){t||(C(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function yl(s){let e,t,l,n;const a=[wl,Dl,El],r=[];function i(o,c){return o[9]===0?0:o[9]===1?1:o[9]===2?2:-1}return~(e=i(s))&&(t=r[e]=a[e](s)),{c(){t&&t.c(),l=ie()},l(o){t&&t.l(o),l=ie()},m(o,c){~e&&r[e].m(o,c),I(o,l,c),n=!0},p(o,c){let d=e;e=i(o),e===d?~e&&r[e].p(o,c):(t&&(le(),E(r[d],1,1,()=>{r[d]=null}),ae()),~e?(t=r[e],t?t.p(o,c):(t=r[e]=a[e](o),t.c()),C(t,1),t.m(l.parentNode,l)):t=null)},i(o){n||(C(t),n=!0)},o(o){E(t),n=!1},d(o){o&&_(l),~e&&r[e].d(o)}}}function Il(s){let e,t,l,n,a="Preparing your dataset...",r;return t=new ut({props:{width:"w-4"}}),{c(){e=$("div"),x(t.$$.fragment),l=T(),n=$("div"),n.textContent=a,this.h()},l(i){e=k(i,"DIV",{class:!0});var o=D(e);R(t.$$.fragment,o),l=A(o),n=k(o,"DIV",{"data-svelte-h":!0}),O(n)!=="svelte-1m53t1h"&&(n.textContent=a),o.forEach(_),this.h()},h(){g(e,"class","flex justify-center items-center")},m(i,o){I(i,e,o),L(t,e,null),p(e,l),p(e,n),r=!0},p:H,i(i){r||(C(t.$$.fragment,i),r=!0)},o(i){E(t.$$.fragment,i),r=!1},d(i){i&&_(e),B(t)}}}function lt(s){let e,t,l=`Use your personal access token and the dataset ID to export your participant-level
            cohort data using the PIC-SURE API.`,n,a,r,i,o,c,d="Dataset ID:",f,u,h,b,y,m,v,S=`Navigate to the <a class="anchor" href="/api">API page</a> to view examples and learn more
            about the PIC-SURE API.`,P;return a=new ct({}),y=new Pt({props:{itemToCopy:s[10]}}),{c(){e=$("div"),t=$("div"),t.textContent=l,n=T(),x(a.$$.fragment),r=T(),i=$("div"),o=$("div"),c=$("label"),c.textContent=d,f=T(),u=$("div"),h=F(s[10]),b=T(),x(y.$$.fragment),m=T(),v=$("p"),v.innerHTML=S,this.h()},l(N){e=k(N,"DIV",{class:!0});var V=D(e);t=k(V,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1d55zu0"&&(t.textContent=l),n=A(V),R(a.$$.fragment,V),r=A(V),i=k(V,"DIV",{class:!0});var W=D(i);o=k(W,"DIV",{class:!0});var G=D(o);c=k(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(c)!=="svelte-10o6xpf"&&(c.textContent=d),f=A(G),u=k(G,"DIV",{id:!0,class:!0});var U=D(u);h=j(U,s[10]),U.forEach(_),b=A(G),R(y.$$.fragment,G),G.forEach(_),W.forEach(_),m=A(V),v=k(V,"P",{"data-svelte-h":!0}),O(v)!=="svelte-188gcj5"&&(v.innerHTML=S),V.forEach(_),this.h()},h(){g(t,"class","flex justify-center"),g(c,"for","dataset-id"),g(c,"class","font-bold ml-4 mr-2"),g(u,"id","dataset-id"),g(u,"class","mr-4"),g(o,"class","flex items-center"),g(i,"class","flex items-center m-4"),g(e,"class","flex flex-col justify-center items-center")},m(N,V){I(N,e,V),p(e,t),p(e,n),L(a,e,null),p(e,r),p(e,i),p(i,o),p(o,c),p(o,f),p(o,u),p(u,h),p(o,b),L(y,o,null),p(e,m),p(e,v),P=!0},p(N,V){(!P||V[0]&1024)&&te(h,N[10]);const W={};V[0]&1024&&(W.itemToCopy=N[10]),y.$set(W)},i(N){P||(C(a.$$.fragment,N),C(y.$$.fragment,N),P=!0)},o(N){E(a.$$.fragment,N),E(y.$$.fragment,N),P=!1},d(N){N&&_(e),B(a),B(y)}}}function Tl(s){let e,t,l,n,a=s[12]&&tt(s),r=s[11]&&lt(s);return{c(){e=$("section"),t=$("div"),a&&a.c(),l=T(),r&&r.c(),this.h()},l(i){e=k(i,"SECTION",{class:!0});var o=D(e);t=k(o,"DIV",{class:!0});var c=D(t);a&&a.l(c),c.forEach(_),l=A(o),r&&r.l(o),o.forEach(_),this.h()},h(){g(t,"class","flex justify-center"),g(e,"class","flex flex-col w-full h-full items-center")},m(i,o){I(i,e,o),p(e,t),a&&a.m(t,null),p(e,l),r&&r.m(e,null),n=!0},p(i,o){i[12]?a?(a.p(i,o),o[0]&4096&&C(a,1)):(a=tt(i),a.c(),C(a,1),a.m(t,null)):a&&(le(),E(a,1,1,()=>{a=null}),ae()),i[11]?r?(r.p(i,o),o[0]&2048&&C(r,1)):(r=lt(i),r.c(),C(r,1),r.m(e,null)):r&&(le(),E(r,1,1,()=>{r=null}),ae())},i(i){n||(C(a),C(r),n=!0)},o(i){E(a),E(r),n=!1},d(i){i&&_(e),a&&a.d(),r&&r.d()}}}function Al(s){let e;return{c(){e=F("Start Analysis:")},l(t){e=j(t,"Start Analysis:")},m(t,l){I(t,e,l)},d(t){t&&_(e)}}}function Pl(s){let e,t,l,n,a,r,i,o,c;e=new he({props:{locked:s[21](),$$slots:{header:[ol],default:[sl]},$$scope:{ctx:s}}});let d=s[2]&&Ze(s);return n=new he({props:{locked:s[1]===void 0,$$slots:{header:[ul],default:[fl]},$$scope:{ctx:s}}}),r=new he({props:{locked:!s[6]||s[6].length<2,$$slots:{header:[pl],default:[ml]},$$scope:{ctx:s}}}),o=new he({props:{locked:s[7],$$slots:{header:[Al],default:[Tl]},$$scope:{ctx:s}}}),{c(){x(e.$$.fragment),t=T(),d&&d.c(),l=T(),x(n.$$.fragment),a=T(),x(r.$$.fragment),i=T(),x(o.$$.fragment)},l(f){R(e.$$.fragment,f),t=A(f),d&&d.l(f),l=A(f),R(n.$$.fragment,f),a=A(f),R(r.$$.fragment,f),i=A(f),R(o.$$.fragment,f)},m(f,u){L(e,f,u),I(f,t,u),d&&d.m(f,u),I(f,l,u),L(n,f,u),I(f,a,u),L(r,f,u),I(f,i,u),L(o,f,u),c=!0},p(f,u){const h={};u[0]&40|u[1]&2048&&(h.$$scope={dirty:u,ctx:f}),e.$set(h),f[2]?d?u[0]&4&&C(d,1):(d=Ze(f),d.c(),C(d,1),d.m(l.parentNode,l)):d&&(le(),E(d,1,1,()=>{d=null}),ae());const b={};u[0]&2&&(b.locked=f[1]===void 0),u[0]&2|u[1]&2048&&(b.$$scope={dirty:u,ctx:f}),n.$set(b);const y={};u[0]&64&&(y.locked=!f[6]||f[6].length<2),u[0]&1344|u[1]&2048&&(y.$$scope={dirty:u,ctx:f}),r.$set(y);const m={};u[0]&128&&(m.locked=f[7]),u[0]&7697|u[1]&2048&&(m.$$scope={dirty:u,ctx:f}),o.$set(m)},i(f){c||(C(e.$$.fragment,f),C(d),C(n.$$.fragment,f),C(r.$$.fragment,f),C(o.$$.fragment,f),c=!0)},o(f){E(e.$$.fragment,f),E(d),E(n.$$.fragment,f),E(r.$$.fragment,f),E(o.$$.fragment,f),c=!1},d(f){f&&(_(t),_(l),_(a),_(i)),B(e,f),d&&d.d(f),B(n,f),B(r,f),B(o,f)}}}function Nl(s){let e,t;return e=new Rt({props:{class:"w-full h-full m-8",buttonCompleteLabel:"Done",$$slots:{default:[Pl]},$$scope:{ctx:s}}}),e.$on("complete",s[20]),e.$on("next",s[17]),e.$on("step",Sl),e.$on("back",s[18]),{c(){x(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,n){L(e,l,n),t=!0},p(l,n){const a={};n[0]&8191|n[1]&2048&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function Sl(s){console.log("event:next",s)}function Vl(s,e,t){let l,n,a,r,i,o,c;oe(s,ot,w=>t(33,i=w)),oe(s,it,w=>t(34,o=w)),oe(s,ce,w=>t(35,c=w));let{exports:d}=st;oe(s,d,w=>t(32,r=w));let{query:f}=e,{showTreeStep:u=!1}=e,{rows:h=[]}=e;const b=ft();let y,m,v="",S="",P=!0,N="";const V=[{dataElement:"variableName",label:"Variable Name",sort:!0},{dataElement:"description",label:"Variable Description",sort:!0},{dataElement:"type",label:"Type",sort:!0}],W=St.maxDataPointsForExport||1e6;function G(){const w=async()=>{await U(),b.close()},Z=()=>{b.close()},X={type:"component",title:Oe.explorePage.confirmDownloadTitle||"Are you sure you want to download data?",component:"modalWrapper",modalClasses:"bg-surface-100-800-token p-4 block",meta:{component:el,message:Oe.explorePage.confirmDownloadMessage,onConfirm:w,onCancel:Z,confirmText:"Download"},response:se=>{console.log(se)}};b.trigger(X)}async function U(){try{const w=await Ee(`picsure/query/${l}/result`,{}),Z=URL.createObjectURL(new Blob([w],{type:"octet/stream"}));if(yt){const X=document.createElement("a");X.href=Z,f.query.expectedResultType==="DATAFRAME"?X.download="pic-sure-data.csv":f.query.expectedResultType==="DATAFRAME_PFB"&&(X.download="pic-sure-data.avro"),document.body.appendChild(X),X.click(),document.body.removeChild(X)}}catch(w){console.error("Error in onCompleteHandler",w)}}function ne(w){console.log("event:next",w),!(w.detail.step===0&&!u)&&(w.detail.step===1&&u?console.log("event:next",w):w.detail.step===1&&!u||u&&w.detail.step===2?t(5,m=J()):(w.detail.step===2&&!u||u&&w.detail.step===3)&&ee(),w.detail.state.total-1===w.detail.step+1&&t(4,y=new Promise((Z,X)=>{const se=setInterval(async()=>{const Ce=await M(S);Ce==="ERROR"?(t(7,P=!0),clearInterval(se),X(Ce)):["PENDING","RUNNING","QUEUED"].includes(Ce)||(t(7,P=!1),clearInterval(se),Z(Ce))},2e3)})))}function Q(w){t(8,N=""),console.log("event:next",w)}async function J(){try{t(0,f.query.fields=r.map(Z=>Z.conceptPath),f);const w=await Ee("picsure/query",f);console.log("res",w),t(10,l=w.picsureResultId)}catch(w){throw de(ce,c.current--,c),console.error("Error in handleFirstStep",w),w}}async function ee(){var w;try{await Jt(l,v)}catch(Z){if(Z instanceof Object){const X=Z;t(8,N=((w=X==null?void 0:X.message)==null?void 0:w.message)||"Error Creating Named Dataset")}else t(8,N=String(Z)||"Error Creating Named Dataset");de(ce,c.current--,c),console.error("Error in createNamedDataset",Z)}}async function M(w){const X="picsure/query/"+(w||l)+"/status";try{const se=await Ee(X,f);return S=se.picsureResultId,se.status}catch(se){console.error("Error in checkExportStatus",se)}return"ERROR"}let{activeType:q}=e;function z(w){t(0,f.query.expectedResultType=w,f),t(1,q=w)}function K(){Tt("/explorer")}let Y=0;function re(){return(typeof o=="number"?o:W+1)+i.length+r.length>W}const fe=()=>K(),$e=()=>z("DATAFRAME"),ue=()=>z("DATAFRAME_PFB");function ke(){v=this.value,t(6,v)}const mt=()=>ze.confirmDownload?G():U();function pt(w){Y=w,t(9,Y)}function _t(w){Y=w,t(9,Y)}function ht(w){Y=w,t(9,Y)}const vt=()=>ze.confirmDownload?G():U();return s.$$set=w=>{"query"in w&&t(0,f=w.query),"showTreeStep"in w&&t(2,u=w.showTreeStep),"rows"in w&&t(3,h=w.rows),"activeType"in w&&t(1,q=w.activeType)},t(10,l=""),t(12,n=!0),t(11,a=!1),[f,q,u,h,y,m,v,P,N,Y,l,a,n,d,V,G,U,ne,Q,z,K,re,fe,$e,ue,ke,mt,pt,_t,ht,vt]}class ta extends be{constructor(e){super(),ge(this,e,Vl,Nl,ve,{query:0,showTreeStep:2,rows:3,activeType:1},null,[-1,-1])}}export{ta as E,ce as s};
