var ut=Object.defineProperty;var tt=s=>{throw TypeError(s)};var dt=(s,e,t)=>e in s?ut(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var u=(s,e,t)=>dt(s,typeof e!="symbol"?e+"":e,t),ft=(s,e,t)=>e.has(s)||tt("Cannot "+t);var c=(s,e,t)=>(ft(s,e,"read from private field"),t?t.call(s):e.get(s)),w=(s,e,t)=>e.has(s)?tt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);import{f as y,a as b,c as be,t as it}from"./DKNWTM-D.js";import{ae as gt,aL as bt,aR as vt,d as N,g as n,b as _,e as ne,h as x,C as wt,p as ie,f as se,c as m,r as g,t as j,s as M,a as ae,R as at,u as mt,n as _t}from"./KPVYLOSR.js";import{d as he,s as Y}from"./NtGCh5xy.js";import{s as lt}from"./kg2g7Go4.js";import{i as F}from"./CDCmQmr-.js";import{e as ve,i as we}from"./B5lqQSsR.js";import{c as me,s as z,b as U,r as nt}from"./Be_LeCLl.js";import{p as P}from"./CfrH0FQi.js";import{E as Pt,V as kt,T as pt,p as yt}from"./BPGq02fb.js";import{c as st}from"./BgGYXS0j.js";import{t as Rt,s as Ht}from"./nsQMHjqs.js";import{a as Ze,s as xt}from"./B2Bg6RTa.js";import{a as St,s as Ct,b as At,c as Nt}from"./Dqw5Xd3-.js";import{b as ct}from"./BlQKM0Gb.js";import{b as jt}from"./BwVKHEJU.js";import{L as Et}from"./BW_ShK1N.js";const qt=[];function Bt(s,e=!1){return Xe(s,new Map,"",qt)}function Xe(s,e,t,r,i=null){if(typeof s=="object"&&s!==null){var l=e.get(s);if(l!==void 0)return l;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(gt(s)){var a=Array(s.length);e.set(s,a),i!==null&&e.set(i,a);for(var o=0;o<s.length;o+=1){var f=s[o];o in s&&(a[o]=Xe(f,e,t,r))}return a}if(bt(s)===vt){a={},e.set(s,a),i!==null&&e.set(i,a);for(var d in s)a[d]=Xe(s[d],e,t,r);return a}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function")return Xe(s.toJSON(),e,t,r,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}const le=s=>s==null||s==="",et=s=>!le(s),fe=(s=null)=>String(s).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),Ot=s=>typeof s!="object"?!1:s!==null,ce={isLike:(s,e)=>fe(s).includes(fe(e)),isEqualTo:(s,e)=>fe(s)===fe(e),whereIn:(s,e=[])=>{if(le(s)||e.length===0)return!1;for(const{value:t,check:r}of e){if(t!=null&&t.key)return Ft(s,t,r);if(r(s,t))return!0}return!1},match:(s,e)=>{const t=e.match(/^([\/~@;%#'])(.*?)\1([gimsuy]*)$/),r=t?new RegExp(t[2],t[3].split("").filter((i,l,a)=>a.indexOf(i)===l).join("")):new RegExp(e);return!!fe(s).match(r)}},Ft=(s,e,t)=>{if(!(e!=null&&e.key))return!1;const{key:r,value:i}=e;return!!(Array.isArray(s)===!1&&typeof s=="object"&&Object.keys(s).includes(r)&&t(s[r],i))},oe=(s,e,t)=>(t.check=t.check??ce.isLike,le(e)?!0:Ot(s)?Object.keys(s).some(r=>oe(s[r],e,t)):t.check(s,e)),$e=(s,e,t)=>(Array.isArray(s)&&(s=s.filter(r=>{const i=t.isRecursive===!0?oe(r,e,t):!0;if(typeof r=="object"&&i===!0)for(const l of Object.keys(r))r[l]=$e(r[l],e,t);return i})),t.highlight&&(typeof s=="string"||typeof s=="number")&&typeof e=="string"&&oe(s,e,t)?ot(s,e):s),ot=(s,e)=>{const t=e.replace(/a/g,"[aàâáä]").replace(/e/g,"[eèêéë]").replace(/i/g,"[iìîíï]").replace(/o/g,"[oòôо́ö]").replace(/u/g,"[uùûúü]").replace(/y/g,"[yỳŷýÿ]"),r=new RegExp(`${t}`,"gi");return String(s).replace(r,'<u class="highlight">$&</u>')},rt=(s,e,t)=>{const r=t.toString().split("=>")[1].replace(/\(\)/g,"").replace(/\?/g,"").split(".").splice(1).join(".").trim();return r.indexOf(" ")>-1?s:Tt(s,r,e)},Tt=(s,e,t)=>{const r=s,i=e.replace(/\[/g,".[").split(".");try{for(let l=0;l<i.length;l++){let a=i[l],o=i[l+1];a.includes("[")&&(a=String(parseInt(a.substring(1,a.length-1)))),o&&o.includes("[")&&(o=String(parseInt(o.substring(1,o.length-1)))),o!==void 0?s[a]=s[a]?s[a]:isNaN(Number(o))?{}:[]:s[a]=ot(s[a],t),s=s[a]}return r}catch{return r}},re=(s,e)=>{if(typeof s=="string")return{callback:t=>t[s],id:e,key:s};if(typeof s=="function")return{callback:s,id:e,key:void 0};throw new Error(`Invalid field argument: ${String(s)}`)},ge={search:(s,{scope:e,isRecursive:t,value:r,check:i},l=!1)=>s.filter(a=>{const f=(e??Object.keys(a)).map(d=>re(d));for(const{key:d,callback:h}of f)d?a[d]=$e(a[d],r,{highlight:l,isRecursive:t===!0}):l&&(a=rt(a,r,h));return f.some(({callback:d})=>oe(d(a),r,{check:i}))}),filter:(s,{callback:e,value:t,check:r,key:i},l=!1)=>s.filter(a=>{const o=oe(e(a),t,{check:r});return i?a[i]=$e(a[i],t,{highlight:l,check:r,isRecursive:!0}):l&&o&&t&&typeof t=="string"&&(a=rt(a,t,e)),o}),query:(s,{path:e,key:t,value:r,check:i})=>s.map(l=>{let a=l;const[o,...f]=e;let d=1;for(const h of e)a[h]&&(a[o]&&(a[o]=ge.query(a[o],{path:e,key:t,value:r,check:i})),d<f.length?a[h]=ge.query(a[h],{path:e,key:t,value:r,check:i}):a[h]=a[h].filter(k=>i(k[t],r))),d++;return l}).filter(Boolean)},Ye={asc:(s,e,t,r)=>s===e?0:le(s)?1:le(e)?-1:typeof s=="boolean"?s===!1?1:-1:typeof s=="string"?s.localeCompare(e,t,r):typeof s=="number"?s-e:typeof s=="object"?JSON.stringify(s).localeCompare(JSON.stringify(e),t,r):String(s).localeCompare(String(e),t,r),desc:(s,e,t,r)=>s===e?0:le(s)?1:le(e)?-1:typeof e=="boolean"?e===!1?1:-1:typeof e=="string"?e.localeCompare(s,t,r):typeof e=="number"?e-s:typeof e=="object"?JSON.stringify(e).localeCompare(JSON.stringify(s),t,r):String(e).localeCompare(String(s),t,r)};var _e,Pe,ke,pe,ye,Re,He,xe,Se,Ce,Ae,Ne,je,Ee,qe,Be,Oe,Fe,Te;class Mt{constructor(e,t){u(this,"selectBy");w(this,_e,N("currentPage"));u(this,"highlight");u(this,"event",new Pt);w(this,Pe,N([]));w(this,ke,N(ne({value:null})));w(this,pe,N(ne({})));w(this,ye,N(ne([])));w(this,Re,N(ne([])));w(this,He,N(10));w(this,xe,N(1));w(this,Se,N(void 0));w(this,Ce,N(1e3));w(this,Ae,x(()=>this.filters.length));w(this,Ne,x(()=>this.createAllRows()));w(this,je,x(()=>this.createRows()));w(this,Ee,x(()=>this.createRowCount()));w(this,qe,x(()=>this.createPages()));w(this,Be,x(()=>this.pages.length));w(this,Oe,x(()=>this.createPagesWithEllipsis()));w(this,Fe,N(ne([])));w(this,Te,x(()=>this.createIsAllSelected()));this.rawRows=e,this.rowsPerPage=t.rowsPerPage??null,this.highlight=t.highlight??!1,this.selectBy=t.selectBy}get selectScope(){return n(c(this,_e))}set selectScope(e){_(c(this,_e),e,!0)}get rawRows(){return n(c(this,Pe))}set rawRows(e){_(c(this,Pe),e)}get search(){return n(c(this,ke))}set search(e){_(c(this,ke),e,!0)}get sort(){return n(c(this,pe))}set sort(e){_(c(this,pe),e,!0)}get filters(){return n(c(this,ye))}set filters(e){_(c(this,ye),e,!0)}get queries(){return n(c(this,Re))}set queries(e){_(c(this,Re),e,!0)}get rowsPerPage(){return n(c(this,He))}set rowsPerPage(e){_(c(this,He),e,!0)}get currentPage(){return n(c(this,xe))}set currentPage(e){_(c(this,xe),e,!0)}get element(){return n(c(this,Se))}set element(e){_(c(this,Se),e,!0)}get clientWidth(){return n(c(this,Ce))}set clientWidth(e){_(c(this,Ce),e,!0)}get filterCount(){return n(c(this,Ae))}set filterCount(e){_(c(this,Ae),e)}get allRows(){return n(c(this,Ne))}set allRows(e){_(c(this,Ne),e)}get rows(){return n(c(this,je))}set rows(e){_(c(this,je),e)}get rowCount(){return n(c(this,Ee))}set rowCount(e){_(c(this,Ee),e)}get pages(){return n(c(this,qe))}set pages(e){_(c(this,qe),e)}get pageCount(){return n(c(this,Be))}set pageCount(e){_(c(this,Be),e)}get pagesWithEllipsis(){return n(c(this,Oe))}set pagesWithEllipsis(e){_(c(this,Oe),e)}get selected(){return n(c(this,Fe))}set selected(e){_(c(this,Fe),e,!0)}get isAllSelected(){return n(c(this,Te))}set isAllSelected(e){_(c(this,Te),e)}createAllRows(){let e=Bt(this.rawRows);if(this.search.value)e=ge.search(e,this.search,this.highlight),this.event.dispatch("change");else if(this.filters.length>0){for(const t of this.filters)e=ge.filter(e,t,this.highlight);this.event.dispatch("change")}else if(this.queries.length>0){for(const t of this.queries)e=ge.query(e,t);this.event.dispatch("change")}return e}createRows(){return this.rowsPerPage?this.allRows.slice((this.currentPage-1)*this.rowsPerPage,this.currentPage*this.rowsPerPage):this.allRows}createRowCount(){const e=this.allRows.length;return this.rowsPerPage?{total:e,start:this.currentPage*this.rowsPerPage-this.rowsPerPage+1,end:Math.min(this.currentPage*this.rowsPerPage,e),selected:this.selected.length}:{total:e,start:1,end:e,selected:this.selected.length}}createPages(){return this.rowsPerPage?Array.from(Array(Math.ceil(this.allRows.length/this.rowsPerPage))).map((t,r)=>r+1):[1]}createPagesWithEllipsis(){if(this.pageCount<=7)return this.pages;const e=null,t=1,r=this.pageCount;return this.currentPage<=4?[...this.pages.slice(0,5),e,r]:this.currentPage<r-3?[t,e,...this.pages.slice(this.currentPage-2,this.currentPage+1),e,r]:[t,e,...this.pages.slice(r-5,r)]}createIsAllSelected(){if(this.rowCount.total===0||!this.selectBy)return!1;const{callback:e}=re(this.selectBy);return this.selectScope==="all"?this.allRows.map(e).every(i=>this.selected.includes(i)):this.rows.map(e).every(r=>this.selected.includes(r))}}_e=new WeakMap,Pe=new WeakMap,ke=new WeakMap,pe=new WeakMap,ye=new WeakMap,Re=new WeakMap,He=new WeakMap,xe=new WeakMap,Se=new WeakMap,Ce=new WeakMap,Ae=new WeakMap,Ne=new WeakMap,je=new WeakMap,Ee=new WeakMap,qe=new WeakMap,Be=new WeakMap,Oe=new WeakMap,Fe=new WeakMap,Te=new WeakMap;class Wt{constructor(e){u(this,"backup");u(this,"table");this.table=e,this.backup=[]}set(e,t,r={}){this.table.sort.id!==t&&(this.table.sort.direction=null),this.table.sort.direction===null||this.table.sort.direction==="desc"?this.asc(e,t,r):this.table.sort.direction==="asc"&&this.desc(e,t,r)}asc(e,t,{locales:r,options:i}={}){if(!e)return;const{callback:l,key:a}=re(e,t);this.table.sort={id:t,callback:l,direction:"asc",key:a},this.table.rawRows=[...this.table.rawRows].sort((o,f)=>{const[d,h]=[l(o),l(f)];return Ye.asc(d,h,r,i)}),this.save({id:t,callback:l,direction:"asc"}),this.table.setPage(1)}desc(e,t,{locales:r,options:i}={}){if(!e)return;const{callback:l,key:a}=re(e,t);this.table.sort={id:t,callback:l,direction:"desc",key:a},this.table.rawRows=[...this.table.rawRows].sort((o,f)=>{const[d,h]=[l(o),l(f)];return Ye.desc(d,h,r,i)}),this.save({id:t,callback:l,direction:"desc"}),this.table.setPage(1)}clear(){this.backup=[],this.table.sort={}}restore(){for(const{key:e,callback:t,direction:r,id:i}of this.backup){const l=e??t;this[r](l,i)}}save(e){if(this.backup=this.backup.filter(t=>t.id!==e.id),this.backup.length>=3){const[t,r,i]=this.backup;this.backup=[r,i,e]}else this.backup=[...this.backup,e]}}class It{constructor(e){u(this,"table");this.table=e}set(e,t,r=null,i){this.table.setPage(1);const{callback:l,key:a}=re(t,i),o={value:e,id:i,callback:l,check:r,key:a};this.table.filters=this.table.filters.filter(f=>f.id!==i),et(e)&&this.table.filters.push(o)}unset(e){this.table.setPage(1),this.table.filters=this.table.filters.filter(t=>t.id!==e)}}class Lt{constructor(e){u(this,"table");this.table=e}set(e,t,r,i,l){this.table.setPage(1),this.table.queries=this.table.queries.filter(a=>a.id!==l),et(r)&&this.table.queries.push({path:e,key:t,value:r,check:i,id:l})}unset(e){this.table.setPage(1),this.table.queries=this.table.queries.filter(t=>t.id!==e)}}class Dt{constructor(e){u(this,"table");this.table=e}set(e){this.table.selected.includes(e)?this.table.selected=this.table.selected.filter(t=>t!==e):this.table.selected=[e,...this.table.selected]}all(e){const t=e==="currentPage"?this.table.rows:this.table.allRows,{callback:r}=re(this.table.selectBy),i=t.map(r);e==="currentPage"?this.table.isAllSelected?this.table.selected=this.table.selected.filter(l=>i.includes(l)===!1):this.table.selected=[...new Set([...i,...this.table.selected])]:this.table.isAllSelected?this.clear():this.table.selected=i}clear(){this.table.selected=[]}getRows(){const{callback:e}=re(this.table.selectBy);return this.table.rawRows.filter(t=>this.table.selected.includes(e(t)))}}class Jt{constructor(e){u(this,"table");this.table=e}goto(e){this.table.rowsPerPage&&e>=1&&e<=this.table.pageCount&&(this.table.currentPage=e,this.table.event.dispatch("change"))}previous(){this.goto(this.table.currentPage-1)}next(){this.goto(this.table.currentPage+1)}last(){this.goto(this.table.pageCount)}}class Vt{constructor(e){u(this,"table");this.table=e}set(e,t){this.table.setPage(1),this.table.search={value:e,scope:t}}recursive(e,t){this.table.setPage(1),this.table.search={value:e,scope:t,isRecursive:!0}}regex(e,t){this.table.setPage(1),this.table.search={value:e,scope:t,check:ce.match}}clear(){this.table.setPage(1),this.table.search={value:""}}}var Me;class zt{constructor(e,t){w(this,Me,N(""));u(this,"scope");u(this,"searchHandler");this.searchHandler=e,this.scope=t,this.cleanup()}get value(){return n(c(this,Me))}set value(e){_(c(this,Me),e,!0)}set(){this.searchHandler.set(this.value,this.scope)}recursive(){this.searchHandler.recursive(this.value,this.scope)}regex(){this.searchHandler.regex(this.value,this.scope)}clear(){this.value="",this.searchHandler.clear()}cleanup(){this.searchHandler.table.on("clearSearch",()=>this.clear())}}Me=new WeakMap;var We;class Qt{constructor(e,t,r){w(this,We,N(""));u(this,"id",Math.random().toString(36).substring(2,15));u(this,"filterHandler");u(this,"field");u(this,"check");this.filterHandler=e,this.field=t,this.check=r??ce.isLike,this.cleanup()}get value(){return n(c(this,We))}set value(e){_(c(this,We),e,!0)}set(e){this.filterHandler.set(this.value,this.field,e??this.check,this.id)}clear(){this.value="",this.filterHandler.unset(this.id)}cleanup(){this.filterHandler.table.on("clearFilters",()=>this.clear())}}We=new WeakMap;var Ie;class Kt{constructor(e,t){w(this,Ie,N(""));u(this,"id",Math.random().toString(36).substring(2,15));u(this,"queryHandler");u(this,"path");u(this,"key");u(this,"check");this.queryHandler=e,this.key=t,this.cleanup()}get value(){return n(c(this,Ie))}set value(e){_(c(this,Ie),e,!0)}where(e){return this.check=e,this}from(e){return this.path=e,this}set(e){e&&(this.value=e),this.queryHandler.set(this.path,this.key,this.value,this.check??ce.isLike,this.id)}clear(){this.value="",this.queryHandler.unset(this.id)}cleanup(){this.queryHandler.table.on("clearFilters",()=>this.clear())}}Ie=new WeakMap;var Le;class Ut{constructor(e,t,r){w(this,Le,N(ne([])));u(this,"id",Math.random().toString(36).substring(2,15));u(this,"filterHandler");u(this,"collection");u(this,"field");u(this,"check");this.filterHandler=e,this.field=t,this.collection=[],this.check=r??ce.isEqualTo,this.cleanup()}get criteria(){return n(c(this,Le))}set criteria(e){_(c(this,Le),e,!0)}set(e,t){if(this.collection.find(r=>r.value===e)?this.collection=this.collection.filter(r=>r.value!==e):this.collection=[{value:e,check:t??this.check},...this.collection],this.collection.length===0)return this.clear();this.filterHandler.set(this.collection,this.field,ce.whereIn,this.id),this.criteria=this.collection.map(r=>r.value)}clear(){this.collection=[],this.criteria=[],this.filterHandler.unset(this.id)}cleanup(){this.filterHandler.table.on("clearFilters",()=>this.clear())}}Le=new WeakMap;class Gt{constructor(e,t){u(this,"callback");u(this,"precision");u(this,"table");this.table=e,this.callback=re(t).callback}distinct(e){const r=this.table.allRows.map(l=>this.callback(l)).reduce((l,a)=>{if(Array.isArray(a)){for(const o of a)l[o]=(l[o]??0)+1;return l}return l[a]=(l[a]??0)+1,l},{}),i=Object.entries(r).map(([l,a])=>({value:l,count:a}));if(e!=null&&e.sort){const[l,a]=e.sort;l==="count"&&i.sort((o,f)=>Ye.asc(o.value,f.value)),i.sort((o,f)=>Ye[a](o[l],f[l]))}return i}avg(e){if(this.precision=(e==null?void 0:e.precision)??2,this.table.allRows.length===0)return 0;const t=this.table.allRows.map(r=>this.callback(r)).filter(Boolean);return this.round(t.reduce((r,i)=>r+i,0)/t.length)}sum(e){this.precision=(e==null?void 0:e.precision)??2;const t=this.table.allRows.map(r=>this.callback(r));return this.round(t.reduce((r,i)=>r+i,0))}median(e){this.precision=(e==null?void 0:e.precision)??2;const t=[...this.table.allRows.map(i=>this.callback(i))].sort((i,l)=>i-l).filter(Boolean);if(t.length===0)return null;const r=Math.floor(t.length/2);return t.length%2?t[r]:this.round((t[r-1]+t[r])/2)}bounds(){const t=this.table.allRows.map(r=>this.callback(r)).filter(Boolean);return t.length===0?[null,null]:[Math.min(...t),Math.max(...t)]}round(e){return Number(e.toFixed(this.precision))}}var De,Je;class Xt{constructor(e,t,r){w(this,De,x(()=>this.createDirection()));w(this,Je,x(()=>this.createIsActive()));u(this,"id",Math.random().toString(36).substring(2,15));u(this,"sortHandler");u(this,"field");u(this,"params");this.sortHandler=e,this.field=t,this.params=r??{}}get direction(){return n(c(this,De))}set direction(e){_(c(this,De),e)}get isActive(){return n(c(this,Je))}set isActive(e){_(c(this,Je),e)}set(){this.sortHandler.set(this.field,this.id,this.params)}asc(){this.sortHandler.asc(this.field,this.id,this.params)}desc(){this.sortHandler.desc(this.field,this.id,this.params)}clear(){this.sortHandler.clear()}createIsActive(){var e;return this.id===((e=this.sortHandler.table.sort)==null?void 0:e.id)}createDirection(){var e;return this.isActive===!1?null:(e=this.sortHandler.table.sort)==null?void 0:e.direction}}De=new WeakMap,Je=new WeakMap;class Yt{constructor(e){u(this,"table");this.table=e}download(e){const t=this.get(),r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}get(){const e=this.getRows();return e.unshift(this.getHeader().join(",")),e.join(`\r
`)}getRows(){return this.table.allRows.map(e=>Object.entries(e).map(([r,i])=>i===null?"":typeof i=="number"?i:`"${i}"`).join(","))}getHeader(){const[e]=this.table.allRows;return Object.entries(e).map(([t,r])=>`"${t}"`)}}var Ve,ze,Qe,Ke;class Zt{constructor(e){w(this,Ve,N(""));w(this,ze,x(()=>this.createRecords()));w(this,Qe,N([]));w(this,Ke,N(""));this.rawRecords=e}get value(){return n(c(this,Ve))}set value(e){_(c(this,Ve),e,!0)}get records(){return n(c(this,ze))}set records(e){_(c(this,ze),e)}get rawRecords(){return n(c(this,Qe))}set rawRecords(e){_(c(this,Qe),e)}get filter(){return n(c(this,Ke))}set filter(e){_(c(this,Ke),e,!0)}set(){this.filter=this.value}createRecords(){return et(this.filter)?this.rawRecords.filter(e=>oe(e,this.filter)):this.rawRecords}}Ve=new WeakMap,ze=new WeakMap,Qe=new WeakMap,Ke=new WeakMap;class $t extends Mt{constructor(t=[],r={rowsPerPage:null}){super(t,r);u(this,"i18n");u(this,"view");u(this,"sortHandler");u(this,"filterHandler");u(this,"queryHandler");u(this,"selectHandler");u(this,"pageHandler");u(this,"searchHandler");this.translate(r.i18n),this.sortHandler=new Wt(this),this.filterHandler=new It(this),this.queryHandler=new Lt(this),this.selectHandler=new Dt(this),this.pageHandler=new Jt(this),this.searchHandler=new Vt(this)}setRows(t){var i;const r=((i=this.element)==null?void 0:i.scrollTop)??0;this.rawRows=t,wt(()=>{this.event.dispatch("change"),this.sortHandler.restore(),this.element&&setTimeout(()=>this.element.scrollTop=r,2)})}setRowsPerPage(t){this.rowsPerPage=t,this.setPage(1)}setPage(t){switch(t){case"previous":return this.pageHandler.previous();case"next":return this.pageHandler.next();case"last":return this.pageHandler.last();default:return this.pageHandler.goto(t)}}createSearch(t){return new zt(this.searchHandler,t)}clearSearch(){this.searchHandler.clear(),this.event.dispatch("clearSearch"),this.setPage(1)}createRecordFilter(t){return new Zt(t)}createSort(t,r){return new Xt(this.sortHandler,t,r)}clearSort(){this.sortHandler.clear()}clearFilters(){this.filters=[],this.event.dispatch("clearFilters"),this.setPage(1)}createAdvancedFilter(t,r){return new Ut(this.filterHandler,t,r)}createFilter(t,r){return new Qt(this.filterHandler,t,r)}createQuery(t){return new Kt(this.queryHandler,t)}select(t){this.selectHandler.set(t)}selectAll(t={}){this.selectScope=t.scope==="all"?"all":"currentPage",this.selectHandler.all(this.selectScope)}getSelectedRows(){return this.selectHandler.getRows()}clearSelection(){this.selectHandler.clear()}on(t,r){this.event.add(t,r)}createCalculation(t){return new Gt(this,t)}createCSV(){return new Yt(this)}createView(t){return this.view=new kt(this,t),this.view}getView(){return this.view}translate(t){this.i18n={search:"Search...",show:"Show",entries:"entries",filter:"Filter",rowCount:"Showing {start} to {end} of {total} entries",noRows:"No entries found",previous:"Previous",next:"Next",...t}}}var es=(s,e,t)=>e(t()),ts=y("<td><!></td>"),ss=y('<tr class="expandable-row"><td><div><!></div></td></tr>'),rs=y("<tr></tr> <!>",1);function is(s,e){ie(e,!0);const[t,r]=xt(),i=()=>Ze(At,"$activeTable",t),l=()=>Ze(St,"$activeRow",t),a=()=>Ze(Nt,"$activeComponent",t);let o=P(e,"cellOverides",19,()=>({})),f=P(e,"columns",19,()=>[]),d=P(e,"index",19,()=>-2),h=P(e,"row",19,()=>({})),k=P(e,"tableName",3,""),R=P(e,"isClickable",3,!1),H=P(e,"expandable",3,!1),K=P(e,"rowClickHandler",3,()=>{});function q(S){Ct({row:S.conceptPath||S.dataset_id,table:k()}),K()(S)}let B=x(()=>{var S;return i()===k()&&(l()===((S=h())==null?void 0:S.conceptPath)||l()===h().dataset_id)});var Z=rs(),G=se(Z);G.__click=[es,q,h],ve(G,21,f,we,(S,O,ee)=>{var L=ts(),ue=m(L);{var de=E=>{var T=be();const p=x(()=>o()[n(O).dataElement]);var v=se(T);const C=x(()=>({tableName:k(),index:d(),row:h(),cell:h()[n(O).dataElement]}));st(v,()=>n(p),(W,A)=>{A(W,{get data(){return n(C)}})}),b(E,T)},X=E=>{var T=it();j(()=>Y(T,h()[n(O).dataElement]?h()[n(O).dataElement]:"")),b(E,T)};F(ue,E=>{o()[n(O).dataElement]?E(de):E(X,!1)})}g(L),j((E,T,p)=>{z(L,"id",`row-${E??""}-col-${T??""}`),U(L,1,p)},[()=>d().toString(),()=>ee.toString(),()=>{var E,T;return me((T=(E=n(O))==null?void 0:E.class)!=null&&T.includes("text-center")?"text-center":"")}]),b(S,L)}),g(G);var $=M(G,2);{var Ue=S=>{var O=ss(),ee=m(O),L=m(ee),ue=m(L);{var de=X=>{var E=be();const T=x(a);var p=se(E);st(p,()=>n(T),(v,C)=>{C(v,{get data(){return h()}})}),b(X,E)};F(ue,X=>{a()&&X(de)})}g(L),g(ee),g(O),j(X=>{z(O,"id",`active-row-${X??""}`),z(ee,"colspan",f().length)},[()=>d().toString()]),Rt(3,L,()=>Ht,()=>({axis:"y"})),b(S,O)};F($,S=>{H()&&n(B)&&l()&&S(Ue)})}j(S=>{z(G,"id",`row-${S??""}`),U(G,1,me(R()?"cursor-pointer":"")),z(G,"tabindex",R()?0:-1)},[()=>d().toString()]),b(s,Z),ae(),r()}he(["click"]);var as=y('<th><input type="text" class="input text-sm w-full" placeholder="Filter"/></th>');function ls(s,e){ie(e,!0);let t=P(e,"class",3,"");const r=e.handler.createFilter(e.filterBy);let i;const l=()=>{r.set(),e.handler instanceof pt&&(clearTimeout(i),i=setTimeout(()=>{e.handler.invalidate()},400))};var a=as(),o=m(a);nt(o),o.__input=l,g(a),j(()=>U(a,1,me(t()))),ct(o,()=>r.value,f=>r.value=f),b(s,a),ae()}he(["input"]);var ns=(s,e)=>e.set(),cs=y('<i class="fa-solid fa-sort-up"></i>'),os=y('<i class="fa-solid fa-sort-down"></i>'),hs=y('<i class="fa-solid fa-sort"></i>'),us=y("<th><!> <!></th>");function ds(s,e){ie(e,!0);let t=P(e,"class",3,"");const r=e.handler.createSort(e.orderBy);var i=us();let l;i.__click=[ns,r];var a=m(i);lt(a,()=>e.children??at);var o=M(a,2);{var f=h=>{var k=be(),R=se(k);{var H=q=>{var B=cs();b(q,B)},K=q=>{var B=os();b(q,B)};F(R,q=>{r.direction==="asc"?q(H):q(K,!1)})}b(h,k)},d=h=>{var k=hs();b(h,k)};F(o,h=>{r.isActive?h(f):h(d,!1)})}g(i),j(h=>l=U(i,1,`cursor-pointer select-none align-bottom ${t()??""}`,null,l,h),[()=>({active:r.isActive})]),b(s,i),ae()}he(["click"]);const fs=(s,e,t)=>{yt(e.tableName,t().rowsPerPage),t().setPage(1)};var gs=y("<option> </option>"),bs=y('<aside><label class="flex place-items-center">Show <select id="row-count-select" class="select ml-2 rounded-xl" aria-label="Rows per page"></select></label></aside>');function vs(s,e){ie(e,!0);let t=P(e,"handler",7),r=P(e,"options",19,()=>[5,10,20,50]),i=P(e,"class",3,"");var l=bs(),a=m(l),o=M(m(a));o.__change=[fs,e,t],ve(o,21,r,we,(f,d)=>{var h=gs(),k={},R=m(h,!0);g(h),j(()=>{k!==(k=n(d))&&(h.value=(h.__value=n(d))??""),Y(R,n(d))}),b(f,h)}),g(o),g(a),g(l),j(()=>U(l,1,me(i()))),jt(o,()=>t().rowsPerPage,f=>t().rowsPerPage=f),b(s,l),ae()}he(["change"]);var ws=y("<b> </b> - <b> </b> / <b> </b>",1),ms=y('<aside class="text-sm leading-8 mr-6"><!></aside>');function _s(s,e){ie(e,!0);let t=x(()=>e.handler.rowCount),r=x(()=>{let{start:d,end:h,total:k}=n(t);return d}),i=x(()=>{let{start:d,end:h,total:k}=n(t);return h}),l=x(()=>{let{start:d,end:h,total:k}=n(t);return k});var a=ms(),o=m(a);{var f=d=>{var h=ws(),k=se(h),R=m(k,!0);g(k);var H=M(k,2),K=m(H,!0);g(H);var q=M(H,2),B=m(q,!0);g(q),j(()=>{Y(R,n(r)),Y(K,n(i)),Y(B,n(l))}),b(d,h)};F(o,d=>{n(l)>0&&d(f)})}g(a),b(s,a),ae()}var Ps=(s,e)=>e("previous"),ks=y('<button type="button"> </button>'),ps=(s,e)=>e("next"),ys=y('<button type="button" aria-label="Previous" title="Previous"><i class="fa-solid fa-arrow-left"></i></button> <!> <button type="button" aria-label="Next" title="Next"><i class="fa-solid fa-arrow-right"></i></button>',1),Rs=y('<section class="pagination flex gap-0" aria-label="pagination"><!></section>');function Hs(s,e){ie(e,!0);const t=a=>{e.handler.setPage(a)};var r=Rs(),i=m(r);{var l=a=>{var o=ys(),f=se(o);f.__click=[Ps,t];var d=M(f,2);ve(d,17,()=>e.handler.pagesWithEllipsis,we,(k,R)=>{var H=ks();H.__click=function(...B){var Z;(Z=n(R)?()=>t(n(R)):()=>{})==null||Z.apply(this,B)};let K;var q=m(H,!0);g(H),j(B=>{z(H,"aria-label",n(R)?"Page "+n(R):"Ellipses"),z(H,"title",n(R)?"Page "+n(R):"Ellipses"),H.disabled=n(R)===null,z(H,"aria-current",e.handler.currentPage===n(R)?"page":!1),K=U(H,1,"",null,K,B),Y(q,n(R)??"...")},[()=>({active:e.handler.currentPage===n(R)})]),b(k,H)});var h=M(d,2);h.__click=[ps,t],j(()=>{f.disabled=e.handler.currentPage===1,h.disabled=e.handler.currentPage===e.handler.pages.length}),b(a,o)};F(i,a=>{(e.handler.pagesWithEllipsis!==void 0||e.handler.pages!==void 0)&&a(l)})}g(r),b(s,r),ae()}he(["click"]);var xs=y('<input class="input text-sm sm:w-64 w-36" type="search" placeholder="Search..."/>');function Ss(s,e){ie(e,!0);const t=e.handler.createSearch();var r=xs();nt(r),r.__input=()=>t.set(),ct(r,()=>t.value,i=>t.value=i),b(s,r),ae()}he(["input"]);var Cs=y('<div class="flex-auto"><h2 class="my-2"> </h2></div>'),As=y('<div class="flex-none"><!></div>'),Ns=y("<header><!> <!> <!></header>"),js=y("<th> </th>"),Es=y('<tr><td class="text-center py-8"><div class="flex justify-center items-center"><!></div></td></tr>'),qs=y("<tr><td>No entries found.</td></tr>"),Bs=y('<footer class="flex justify-between mt-1"><!> <div class="flex justify-end gap-4"><!> <!></div></footer>'),Os=y('<div class="table-wrap space-y-1"><!> <table><thead class="svelte-rudmja"><tr></tr></thead><tbody><!></tbody></table> <!></div>');function $s(s,e){ie(e,!0);let t=P(e,"isLoading",11,!1),r=P(e,"searchable",3,!1),i=P(e,"title",3,""),l=P(e,"fullWidth",3,!1),a=P(e,"options",19,()=>[5,10,20,50,100]),o=P(e,"columns",19,()=>[]),f=P(e,"cellOverides",19,()=>({})),d=P(e,"tableAuto",3,!0),h=P(e,"stickyHeader",3,!1),k=P(e,"showPagination",3,!0),R=P(e,"class",3,""),H=P(e,"isClickable",3,!1),K=P(e,"expandable",3,!1),q=P(e,"rowClickHandler",3,()=>{});mt(()=>{k()||(e.handler instanceof $t?e.handler.setRowsPerPage(e.handler.allRows.length):e.handler.setRowsPerPage(e.handler.totalRows))});var B=Os(),Z=m(B);{var G=p=>{var v=Ns(),C=m(v);{var W=I=>{var V=Cs(),Q=m(V),te=m(Q,!0);g(Q),g(V),j(()=>Y(te,i())),b(I,V)};F(C,I=>{i()&&I(W)})}var A=M(C,2);lt(A,()=>e.tableActions??at);var D=M(A,2);{var J=I=>{var V=As(),Q=m(V);Ss(Q,{get handler(){return e.handler}}),g(V),b(I,V)};F(D,I=>{r()&&I(J)})}g(v),j(()=>U(v,1,`flex items-center ${i()||e.tableActions?"justify-between":"justify-end"} gap-4`)),b(p,v)};F(Z,p=>{(i()||r()||e.tableActions)&&p(G)})}var $=M(Z,2);let Ue;var S=m($),O=m(S);let ee;ve(O,21,o,we,(p,v)=>{var C=be(),W=se(C);{var A=J=>{ds(J,{get handler(){return e.handler},get orderBy(){return n(v).dataElement},get class(){return n(v).class},children:(I,V)=>{_t();var Q=it();j(()=>Y(Q,n(v).label)),b(I,Q)},$$slots:{default:!0}})},D=(J,I)=>{{var V=te=>{ls(te,{get handler(){return e.handler},get class(){return n(v).class},get filterBy(){return n(v).dataElement}})},Q=te=>{var Ge=js(),ht=m(Ge,!0);g(Ge),j(()=>{U(Ge,1,me(n(v).class),"svelte-rudmja"),Y(ht,n(v).label)}),b(te,Ge)};F(J,te=>{n(v).filter?te(V):te(Q,!1)},I)}};F(W,J=>{n(v).sort?J(A):J(D,!1)})}b(p,C)}),g(O),g(S);var L=M(S),ue=m(L);{var de=p=>{var v=Es(),C=m(v),W=m(C),A=m(W);Et(A,{}),g(W),g(C),g(v),j(()=>z(C,"colspan",o().length)),b(p,v)},X=(p,v)=>{{var C=A=>{var D=be(),J=se(D);ve(J,17,()=>e.handler.rows,we,(I,V,Q)=>{is(I,{get tableName(){return e.tableName},get cellOverides(){return f()},get columns(){return o()},index:Q,get row(){return n(V)},get rowClickHandler(){return q()},get isClickable(){return H()},get expandable(){return K()}})}),b(A,D)},W=A=>{var D=qs(),J=m(D);g(D),j(()=>z(J,"colspan",o().length)),b(A,D)};F(p,A=>{e.handler.rows.length>0?A(C):A(W,!1)},v)}};F(ue,p=>{t()?p(de):p(X,!1)})}g(L),g($);var E=M($,2);{var T=p=>{var v=Bs(),C=m(v);_s(C,{get handler(){return e.handler}});var W=M(C,2),A=m(W);vs(A,{get tableName(){return e.tableName},get handler(){return e.handler},get options(){return a()}});var D=M(A,2);Hs(D,{get handler(){return e.handler}}),g(W),g(v),b(p,v)};F(E,p=>{k()&&p(T)})}g(B),j((p,v)=>{z($,"id",`${e.tableName??""}-table`),z($,"data-testid",`${e.tableName??""}-table`),Ue=U($,1,`table table-${d()?"auto":"fixed"} ${R()??""}`,"svelte-rudmja",Ue,p),ee=U(O,1,"",null,ee,v)},[()=>({"w-max":l(),clickable:H()}),()=>({"sticky-header":h()})]),b(s,B),ae()}export{$s as R,$t as T};
