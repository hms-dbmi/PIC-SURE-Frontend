import{w,d as M,g as x}from"./B9BhT3Ut.js";import{u as N}from"./tvkVmxlD.js";const G=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function L(r){return typeof r=="string"&&G.test(r)}function q(r){if(!L(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var f=[];for(var D=0;D<256;++D)f.push((D+256).toString(16).slice(1));function V(r,e=0){return(f[r[e+0]]+f[r[e+1]]+f[r[e+2]]+f[r[e+3]]+"-"+f[r[e+4]]+f[r[e+5]]+"-"+f[r[e+6]]+f[r[e+7]]+"-"+f[r[e+8]]+f[r[e+9]]+"-"+f[r[e+10]]+f[r[e+11]]+f[r[e+12]]+f[r[e+13]]+f[r[e+14]]+f[r[e+15]]).toLowerCase()}var I,J=new Uint8Array(16);function k(){if(!I&&(I=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!I))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return I(J)}function B(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var H="6ba7b810-9dad-11d1-80b4-00c04fd430c8",K="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function P(r,e,t){function n(o,l,a,s){var u;if(typeof o=="string"&&(o=B(o)),typeof l=="string"&&(l=q(l)),((u=l)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+o.length);if(c.set(l),c.set(o,l.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,a){s=s||0;for(var d=0;d<16;++d)a[s+d]=c[d];return a}return V(c)}try{n.name=r}catch{}return n.DNS=H,n.URL=K,n}var X=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const E={randomUUID:X};function b(r,e,t){if(E.randomUUID&&!r)return E.randomUUID();r=r||{};var n=r.random||(r.rng||k)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,V(n)}function Q(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function T(r,e){return r<<e|r>>>32-e}function Y(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var o=0;o<n.length;++o)r.push(n.charCodeAt(o))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var l=r.length/4+2,a=Math.ceil(l/16),s=new Array(a),u=0;u<a;++u){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=r[u*64+d*4]<<24|r[u*64+d*4+1]<<16|r[u*64+d*4+2]<<8|r[u*64+d*4+3];s[u]=c}s[a-1][14]=(r.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(r.length-1)*8&4294967295;for(var S=0;S<a;++S){for(var v=new Uint32Array(80),g=0;g<16;++g)v[g]=s[S][g];for(var p=16;p<80;++p)v[p]=T(v[p-3]^v[p-8]^v[p-14]^v[p-16],1);for(var h=t[0],m=t[1],y=t[2],U=t[3],A=t[4],F=0;F<80;++F){var R=Math.floor(F/20),O=T(h,5)+Q(R,m,y,U)+A+e[R]+v[F]>>>0;A=U,U=y,y=T(m,30)>>>0,m=h,h=O}t[0]=t[0]+h>>>0,t[1]=t[1]+m>>>0,t[2]=t[2]+y>>>0,t[3]=t[3]+U>>>0,t[4]=t[4]+A>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Z=P("v5",80,Y);const j=b();function $(){return b()}function C(r){return Z(JSON.stringify(r),j)}const i=w(z()),rr=M(i,r=>r&&r.length>0?r.some(e=>e.filterType==="genomic"):!1),er=M(i,r=>r&&r.length>0?r.some(e=>!e.allowFiltering):!1),tr=M([N,i],([r,e])=>e.length===0||!(r!=null&&r.queryScopes)?!1:e.some(t=>{var l;let n=t.dataset||"";return(t.filterType==="genomic"||t.filterType==="snp")&&(n="Gene_with_variant"),!((l=r==null?void 0:r.queryScopes)==null?void 0:l.some(a=>n.length>0&&a.includes(n)))})),nr=w(),fr=w(),ar=w();i.subscribe(r=>{sessionStorage.setItem("filters",JSON.stringify(r))});function z(){return sessionStorage.getItem("filters")?JSON.parse(sessionStorage.getItem("filters")||"[]").map(e=>({...e,uuid:C(e)})):[]}function ir(r){const e=x(i);return e.forEach(t=>{t.id===r.id&&e.splice(e.indexOf(t),1)}),r.uuid=C(r),i.set([...e,r]),r}function or(r){const e=x(i);i.set(e.filter(t=>t.uuid!==r))}function sr(){const r=x(i);i.set(r.filter(e=>e.filterType!=="genomic"))}function cr(){const r=x(i);i.set(r.filter(e=>e.allowFiltering))}function lr(){const r=x(N),e=x(i);if(!r||e.length===0)return;const t=e.filter(n=>{var a;let o=n.dataset||"";return(n.filterType==="genomic"||n.filterType==="snp")&&(o="Gene_with_variant"),(a=r.queryScopes)==null?void 0:a.some(s=>o.length>0&&s.includes(o))});i.set(t)}function ur(){i.set([])}function dr(r){return x(i).filter(e=>e.filterType===r)}export{ir as a,dr as b,nr as c,fr as d,ur as e,i as f,$ as g,rr as h,ar as i,lr as j,sr as k,cr as l,tr as m,er as n,or as r};
