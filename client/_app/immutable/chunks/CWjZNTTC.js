import"./DKNWTM-D.js";import{r as L,a as _,g as pe,p as ye,q as B,u as q,b as U,w as X,x as ce,y as Ee,z as K,A as F,B as Y,C as le,D as ue,E as ve,F as be,G as Te,H,I as de,k as xe,d as fe,M as Se,e as Ie,J as G,K as Oe,j as R}from"./DCY6c1ra.js";function ke(e){const t={each(n){var s;for(let i=0;i<((s=e.frames)==null?void 0:s.length);i+=1){const r=e.frames[i];r&&n(r)}},addEventListener(n,s,i){return t.each(r=>{try{r.document.addEventListener(n,s,i)}catch{}}),()=>{try{t.removeEventListener(n,s,i)}catch{}}},removeEventListener(n,s,i){t.each(r=>{try{r.document.removeEventListener(n,s,i)}catch{}})}};return t}function Pe(e){const t=e.frameElement!=null?e.parent:null;return{addEventListener:(n,s,i)=>{try{t==null||t.addEventListener(n,s,i)}catch{}return()=>{try{t==null||t.removeEventListener(n,s,i)}catch{}}},removeEventListener:(n,s,i)=>{try{t==null||t.removeEventListener(n,s,i)}catch{}}}}var Q="pointerdown.outside",z="focus.outside";function De(e){for(const t of e)if(K(t)&&ce(t))return!0;return!1}var ge=e=>"clientY"in e;function we(e,t){if(!ge(t)||!e)return!1;const n=e.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=t.clientY&&t.clientY<=n.top+n.height&&n.left<=t.clientX&&t.clientX<=n.left+n.width}function Le(e,t){return e.y<=t.y&&t.y<=e.y+e.height&&e.x<=t.x&&t.x<=e.x+e.width}function J(e,t){if(!t||!ge(e))return!1;const n=t.scrollHeight>t.clientHeight,s=n&&e.clientX>t.offsetLeft+t.clientWidth,i=t.scrollWidth>t.clientWidth,r=i&&e.clientY>t.offsetTop+t.clientHeight,l={x:t.offsetLeft,y:t.offsetTop,width:t.clientWidth+(n?16:0),height:t.clientHeight+(i?16:0)},u={x:e.clientX,y:e.clientY};return Le(l,u)?s||r:!1}function Re(e,t){const{exclude:n,onFocusOutside:s,onPointerDownOutside:i,onInteractOutside:r,defer:l}=t;if(!e)return;const u=_(e),h=pe(e),E=ke(h),f=Pe(h);function v(p,T){if(!K(T)||!T.isConnected||F(e,T)||we(e,p))return!1;const d=u.querySelector(`[aria-controls="${e.id}"]`);if(d){const I=Y(d);if(J(p,I))return!1}const P=Y(e);return J(p,P)?!1:!(n!=null&&n(T))}const b=new Set,c=ye(e==null?void 0:e.getRootNode());function g(p){function T(d){var $;const P=l&&!q()?L:C=>C(),I=d??p,V=(($=I==null?void 0:I.composedPath)==null?void 0:$.call(I))??[I==null?void 0:I.target];P(()=>{const C=c?V[0]:U(p);if(!(!e||!v(p,C))){if(i||r){const j=X(i,r);e.addEventListener(Q,j,{once:!0})}Z(e,Q,{bubbles:!1,cancelable:!0,detail:{originalEvent:I,contextmenu:Ee(I),focusable:De(V),target:C}})}})}p.pointerType==="touch"?(b.forEach(d=>d()),b.add(B(u,"click",T,{once:!0})),b.add(f.addEventListener("click",T,{once:!0})),b.add(E.addEventListener("click",T,{once:!0}))):T()}const m=new Set,y=setTimeout(()=>{m.add(B(u,"pointerdown",g,!0)),m.add(f.addEventListener("pointerdown",g,!0)),m.add(E.addEventListener("pointerdown",g,!0))},0);function x(p){(l?L:d=>d())(()=>{const d=U(p);if(!(!e||!v(p,d))){if(s||r){const P=X(s,r);e.addEventListener(z,P,{once:!0})}Z(e,z,{bubbles:!1,cancelable:!0,detail:{originalEvent:p,contextmenu:!1,focusable:ce(d),target:d}})}})}return q()||(m.add(B(u,"focusin",x,!0)),m.add(f.addEventListener("focusin",x,!0)),m.add(E.addEventListener("focusin",x,!0))),()=>{clearTimeout(y),b.forEach(p=>p()),m.forEach(p=>p())}}function Me(e,t){const{defer:n}=t,s=n?L:r=>r(),i=[];return i.push(s(()=>{const r=typeof e=="function"?e():e;i.push(Re(r,t))})),()=>{i.forEach(r=>r==null?void 0:r())}}function Z(e,t,n){const s=e.ownerDocument.defaultView||window,i=new s.CustomEvent(t,n);return e.dispatchEvent(i)}function Be(e,t){const n=s=>{s.key==="Escape"&&(s.isComposing||t==null||t(s))};return B(_(e),"keydown",n,{capture:!0})}var k={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){var s;const t=this.indexOf(e),n=this.topMostPointerBlockingLayer()?this.indexOf((s=this.topMostPointerBlockingLayer())==null?void 0:s.node):-1;return t<n},isTopMost(e){const t=this.layers[this.count()-1];return(t==null?void 0:t.node)===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},isInNestedLayer(e,t){return this.getNestedLayers(e).some(n=>F(n.node,t))},isInBranch(e){return Array.from(this.branches).some(t=>F(t,e))},add(e){const t=this.layers.push(e);e.node.style.setProperty("--layer-index",`${t}`)},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);t<0||(t<this.count()-1&&this.getNestedLayers(e).forEach(s=>s.dismiss()),this.layers.splice(t,1),e.style.removeProperty("--layer-index"))},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e){var t;(t=this.layers[this.indexOf(e)])==null||t.dismiss()},clear(){this.remove(this.layers[0].node)}},ee;function te(){k.layers.forEach(({node:e})=>{e.style.pointerEvents=k.isBelowPointerBlockingLayer(e)?"none":"auto"})}function Ce(e){e.style.pointerEvents=""}function Ae(e,t){const n=_(e),s=[];if(k.hasPointerBlockingLayer()&&!n.body.hasAttribute("data-inert")&&(ee=document.body.style.pointerEvents,queueMicrotask(()=>{n.body.style.pointerEvents="none",n.body.setAttribute("data-inert","")})),t){const i=ve(t,r=>{s.push(be(r,{pointerEvents:"auto"}))});s.push(i)}return()=>{k.hasPointerBlockingLayer()||(queueMicrotask(()=>{n.body.style.pointerEvents=ee,n.body.removeAttribute("data-inert"),n.body.style.length===0&&n.body.removeAttribute("style")}),s.forEach(i=>i()))}}function Fe(e,t){const{warnOnMissingNode:n=!0}=t;if(n&&!e){ue("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!e)return;const{onDismiss:s,pointerBlocking:i,exclude:r,debug:l}=t,u={dismiss:s,node:e,pointerBlocking:i};k.add(u),te();function h(c){var m,y;const g=U(c.detail.originalEvent);k.isBelowPointerBlockingLayer(e)||k.isInBranch(g)||((m=t.onPointerDownOutside)==null||m.call(t,c),(y=t.onInteractOutside)==null||y.call(t,c),!c.defaultPrevented&&(l&&console.log("onPointerDownOutside:",c.detail.originalEvent),s==null||s()))}function E(c){var m,y;const g=U(c.detail.originalEvent);k.isInBranch(g)||((m=t.onFocusOutside)==null||m.call(t,c),(y=t.onInteractOutside)==null||y.call(t,c),!c.defaultPrevented&&(l&&console.log("onFocusOutside:",c.detail.originalEvent),s==null||s()))}function f(c){var g;k.isTopMost(e)&&((g=t.onEscapeKeyDown)==null||g.call(t,c),!c.defaultPrevented&&s&&(c.preventDefault(),s()))}function v(c){var x;if(!e)return!1;const g=typeof r=="function"?r():r,m=Array.isArray(g)?g:[g],y=(x=t.persistentElements)==null?void 0:x.map(p=>p()).filter(K);return y&&m.push(...y),m.some(p=>F(p,c))||k.isInNestedLayer(e,c)}const b=[i?Ae(e,t.persistentElements):void 0,Be(e,f),Me(e,{exclude:v,onFocusOutside:E,onPointerDownOutside:h,defer:t.defer})];return()=>{k.remove(e),te(),Ce(e),b.forEach(c=>c==null?void 0:c())}}function nt(e,t){const{defer:n}=t,s=n?L:r=>r(),i=[];return i.push(s(()=>{const r=le(e)?e():e;i.push(Fe(r,t))})),()=>{i.forEach(r=>r==null?void 0:r())}}function Ne(e,t={}){const{defer:n}=t,s=n?L:r=>r(),i=[];return i.push(s(()=>{const r=le(e)?e():e;if(!r){ue("[@zag-js/dismissable] branch node is `null` or `undefined`");return}k.addBranch(r),i.push(()=>{k.removeBranch(r)})})),()=>{i.forEach(r=>r==null?void 0:r())}}var He=xe("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),M=He.build(),Ue=e=>`toast-group:${e}`,se=(e,t)=>e.getById(`toast-group:${t}`),he=e=>`toast:${e.id}`,ne=e=>e.getById(he(e)),ie=e=>`toast:${e.id}:title`,re=e=>`toast:${e.id}:description`,Ve=e=>`toast${e.id}:close`,oe={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function W(e,t){return e??oe[t]??oe.DEFAULT}var $e=e=>typeof e=="string"?{left:e,right:e,bottom:e,top:e}:e;function Ge(e,t){var m;const{prop:n,computed:s,context:i}=e,{offsets:r,gap:l}=n("store").attrs,u=i.get("heights"),h=$e(r),E=n("dir")==="rtl",f=t.replace("-start",E?"-right":"-left").replace("-end",E?"-left":"-right"),v=f.includes("right"),b=f.includes("left"),c={position:"fixed",pointerEvents:s("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${l}px`,"--first-height":`${((m=u[0])==null?void 0:m.height)||0}px`,zIndex:Se};let g="center";if(v&&(g="flex-end"),b&&(g="flex-start"),c.alignItems=g,f.includes("top")){const y=h.top;c.top=`max(env(safe-area-inset-top, 0px), ${y})`}if(f.includes("bottom")){const y=h.bottom;c.bottom=`max(env(safe-area-inset-bottom, 0px), ${y})`}if(!f.includes("left")){const y=h.right;c.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${y})`}if(!f.includes("right")){const y=h.left;c.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${y})`}return c}function We(e,t){const{prop:n,context:s,computed:i}=e,r=n("parent"),l=r.computed("placement"),{gap:u}=r.prop("store").attrs,[h]=l.split("-"),E=s.get("mounted"),f=s.get("remainingTime"),v=i("height"),b=i("frontmost"),c=!b,g=!n("stacked"),m=n("stacked"),x=n("type")==="loading"?Number.MAX_SAFE_INTEGER:f,p=i("heightIndex")*u+i("heightBefore"),T={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${n("removeDelay")}ms`,"--duration":`${x}ms`,"--initial-height":`${v}px`,"--offset":`${p}px`,"--index":n("index"),"--z-index":i("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},d=P=>Object.assign(T,P);return h==="top"?d({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):h==="bottom"&&d({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),E&&(d({"--y":"0","--opacity":"1"}),m&&d({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),t||d({"--opacity":"0",pointerEvents:"none"}),c&&g&&(d({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),t||d({"--y":"calc(var(--sign) * 40%)"})),c&&m&&!t&&d({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),b&&!t&&d({"--y":"calc(var(--lift) * -100%)"}),T}function _e(e,t){const{computed:n}=e,s={position:"absolute",inset:"0",scale:"1 2",pointerEvents:t?"none":"auto"},i=r=>Object.assign(s,r);return n("frontmost")&&!t&&i({height:"calc(var(--initial-height) + 80%)"}),s}function Ke(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function je(e,t){const{context:n,prop:s,send:i,refs:r,computed:l}=e;return{getCount(){return n.get("toasts").length},getToasts(){return n.get("toasts")},getGroupProps(u={}){const{label:h="Notifications"}=u,{hotkey:E}=s("store").attrs,f=E.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=l("placement"),[b,c="center"]=v.split("-");return t.element({...M.group.attrs,dir:s("dir"),tabIndex:-1,"aria-label":`${v} ${h} ${f}`,id:Ue(v),"data-placement":v,"data-side":b,"data-align":c,"aria-live":"polite",role:"region",style:Ge(e,v),onMouseMove(){i({type:"REGION.POINTER_ENTER",placement:v})},onMouseLeave(){i({type:"REGION.POINTER_LEAVE",placement:v})},onFocus(g){i({type:"REGION.FOCUS",target:g.relatedTarget})},onBlur(g){r.get("isFocusWithin")&&!F(g.currentTarget,g.relatedTarget)&&queueMicrotask(()=>i({type:"REGION.BLUR"}))}})},subscribe(u){return s("store").subscribe(()=>u(n.get("toasts")))}}}var qe=fe({props({props:e}){return{dir:"ltr",id:de(),...e,store:e.store}},initialState({prop:e}){return e("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,dismissableCleanup:void 0}},context({bindable:e}){return{toasts:e(()=>({defaultValue:[],sync:!0,hash:t=>t.map(n=>n.id).join(",")})),heights:e(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:e})=>e.get("toasts").length,overlap:({prop:e})=>e("store").attrs.overlap,placement:({prop:e})=>e("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:e,context:t,action:n}){e([()=>t.hash("toasts")],()=>{queueMicrotask(()=>{n(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["collapseToasts","resumeToasts","restoreLastFocusedEl"]},{target:"stack",actions:["resumeToasts","restoreLastFocusedEl"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","collapseToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:e})=>e("overlap")},effects:{subscribeToStore({context:e,prop:t}){return t("store").subscribe(n=>{if(n.dismiss){e.set("toasts",s=>s.filter(i=>i.id!==n.id));return}e.set("toasts",s=>{const i=s.findIndex(r=>r.id===n.id);return i!==-1?[...s.slice(0,i),{...s[i],...n},...s.slice(i+1)]:[n,...s]})})},trackHotKeyPress({prop:e,send:t}){return B(document,"keydown",s=>{const{hotkey:i}=e("store").attrs;i.every(l=>s[l]||s.code===l)&&t({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:e,send:t,scope:n}){const{pauseOnPageIdle:s}=e("store").attrs;if(!s)return;const i=n.getDoc();return B(i,"visibilitychange",()=>{const r=i.visibilityState==="hidden";t({type:r?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:e,context:t,computed:n,scope:s}){var E;const i=t.get("toasts"),r=n("placement"),l=i.length>0;if(!l){(E=e.get("dismissableCleanup"))==null||E();return}if(l&&e.get("dismissableCleanup"))return;const h=Ne(()=>se(s,r),{defer:!0});e.set("dismissableCleanup",h)},clearDismissableBranch({refs:e}){var t;(t=e.get("dismissableCleanup"))==null||t()},focusRegionEl({scope:e,computed:t}){queueMicrotask(()=>{var n;(n=se(e,t("placement")))==null||n.focus()})},pauseToasts({prop:e}){e("store").pause()},resumeToasts({prop:e}){e("store").resume()},expandToasts({prop:e}){e("store").expand()},collapseToasts({prop:e}){e("store").collapse()},removeToast({prop:e,event:t}){e("store").remove(t.id)},removeHeight({event:e,context:t}){(e==null?void 0:e.id)!=null&&queueMicrotask(()=>{t.set("heights",n=>n.filter(s=>s.id!==e.id))})},collapsedIfEmpty({send:e,computed:t}){!t("overlap")||t("count")>1||e({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:e,event:t}){e.get("isFocusWithin")||!t.target||(e.set("isFocusWithin",!0),e.set("lastFocusedEl",t.target))},restoreLastFocusedEl({refs:e}){var t;e.get("lastFocusedEl")&&((t=e.get("lastFocusedEl"))==null||t.focus({preventScroll:!0}),e.set("lastFocusedEl",null),e.set("isFocusWithin",!1))},clearLastFocusedEl({refs:e}){var t;e.get("lastFocusedEl")&&((t=e.get("lastFocusedEl"))==null||t.focus({preventScroll:!0}),e.set("lastFocusedEl",null),e.set("isFocusWithin",!1))}}}});function it(e,t){const{state:n,send:s,prop:i,scope:r,context:l,computed:u}=e,h=n.hasTag("visible"),E=n.hasTag("paused"),f=l.get("mounted"),v=u("frontmost"),b=i("parent").computed("placement"),c=i("type"),g=i("stacked"),m=i("title"),y=i("description"),x=i("action"),[p,T="center"]=b.split("-");return{type:c,title:m,description:y,placement:b,visible:h,paused:E,closable:!!i("closable"),pause(){s({type:"PAUSE"})},resume(){s({type:"RESUME"})},dismiss(){s({type:"DISMISS",src:"programmatic"})},getRootProps(){return t.element({...M.root.attrs,dir:i("dir"),id:he(r),"data-state":h?"open":"closed","data-type":c,"data-placement":b,"data-align":T,"data-side":p,"data-mounted":R(f),"data-paused":R(E),"data-first":R(v),"data-sibling":R(!v),"data-stack":R(g),"data-overlap":R(!g),role:"status","aria-atomic":"true","aria-describedby":y?re(r):void 0,"aria-labelledby":m?ie(r):void 0,tabIndex:0,style:We(e,h),onKeyDown(d){d.defaultPrevented||d.key=="Escape"&&(s({type:"DISMISS",src:"keyboard"}),d.preventDefault())}})},getGhostBeforeProps(){return t.element({"data-ghost":"before",style:_e(e,h)})},getGhostAfterProps(){return t.element({"data-ghost":"after",style:Ke()})},getTitleProps(){return t.element({...M.title.attrs,id:ie(r)})},getDescriptionProps(){return t.element({...M.description.attrs,id:re(r)})},getActionTriggerProps(){return t.button({...M.actionTrigger.attrs,type:"button",onClick(d){var P;d.defaultPrevented||((P=x==null?void 0:x.onClick)==null||P.call(x),s({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return t.button({id:Ve(r),...M.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(d){d.defaultPrevented||s({type:"DISMISS",src:"user"})}})}}}var{not:Xe}=Ie(),rt=fe({props({props:e}){return Oe(e,["id","type","parent","removeDelay"],"toast"),{closable:!0,...e,duration:W(e.duration,e.type)}},initialState({prop:e}){return e("type")==="loading"||e("duration")===1/0?"visible:persist":"visible"},context({prop:e,bindable:t}){return{remainingTime:t(()=>({defaultValue:W(e("duration"),e("type"))})),createdAt:t(()=>({defaultValue:Date.now()})),mounted:t(()=>({defaultValue:!1})),initialHeight:t(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:e})=>{const t=e("parent").context.get("toasts"),n=t.findIndex(s=>s.id===e("id"));return t.length-n},height:({prop:e})=>{const n=e("parent").context.get("heights").find(s=>s.id===e("id"));return(n==null?void 0:n.height)??0},heightIndex:({prop:e})=>e("parent").context.get("heights").findIndex(n=>n.id===e("id")),frontmost:({prop:e})=>e("index")===0,heightBefore:({prop:e})=>{const t=e("parent").context.get("heights"),n=t.findIndex(s=>s.id===e("id"));return t.reduce((s,i,r)=>r>=n?s:s+i.height,0)},shouldPersist:({prop:e})=>e("type")==="loading"||e("duration")===1/0},watch({track:e,prop:t,send:n}){e([()=>t("message")],()=>{const s=t("message");s&&n({type:s,src:"programmatic"})}),e([()=>t("type"),()=>t("duration")],()=>{n({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:Xe("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:e,send:t}){return G(()=>{t({type:"REMOVE",src:"timer"})},e("removeDelay"))},waitForDuration({send:e,context:t,computed:n}){if(!n("shouldPersist"))return G(()=>{e({type:"DISMISS",src:"timer"})},t.get("remainingTime"))},waitForNextTick({send:e}){return G(()=>{e({type:"SHOW",src:"timer"})},0)},trackHeight({scope:e,prop:t}){let n;return L(()=>{const s=ne(e);if(!s)return;const i=()=>{const u=s.style.height;s.style.height="auto";const h=s.getBoundingClientRect().height;s.style.height=u;const E={id:t("id"),height:h};ae(t("parent"),E)},r=e.getWin(),l=new r.MutationObserver(i);l.observe(s,{childList:!0,subtree:!0,characterData:!0}),n=()=>l.disconnect()}),()=>n==null?void 0:n()}},guards:{isLoadingType:({prop:e})=>e("type")==="loading",shouldPersist:({computed:e})=>e("shouldPersist")},actions:{setMounted({context:e}){L(()=>{e.set("mounted",!0)})},measureHeight({scope:e,prop:t,context:n}){queueMicrotask(()=>{const s=ne(e);if(!s)return;const i=s.style.height;s.style.height="auto";const r=s.getBoundingClientRect().height;s.style.height=i,n.set("initialHeight",r);const l={id:t("id"),height:r};ae(t("parent"),l)})},setCloseTimer({refs:e}){e.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:e,refs:t,prop:n}){t.set("closeTimerStartTime",Date.now()),e.set("remainingTime",W(n("duration"),n("type")))},syncRemainingTime({context:e,refs:t}){e.set("remainingTime",n=>{const s=t.get("closeTimerStartTime"),i=Date.now()-s;return t.set("lastCloseStartTimerStartTime",Date.now()),n-i})},notifyParentToRemove({prop:e}){e("parent").send({type:"TOAST.REMOVE",id:e("id")})},invokeOnDismiss({prop:e,event:t}){var n;(n=e("onStatusChange"))==null||n({status:"dismissing",src:t.src})},invokeOnUnmount({prop:e}){var t;(t=e("onStatusChange"))==null||t({status:"unmounted"})},invokeOnVisible({prop:e}){var t;(t=e("onStatusChange"))==null||t({status:"visible"})}}}});function ae(e,t){const{id:n,height:s}=t;e.context.set("heights",i=>i.find(l=>l.id===n)?i.map(l=>l.id===n?{...l,height:s}:l):[{id:n,height:s},...i])}var Ye=(e,t)=>({...t,...Te(e)});function Qe(e){const t=Ye(e,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let n=[],s=[],i=new Set,r=[];const l=o=>(n.push(o),()=>{const a=n.indexOf(o);n.splice(a,1)}),u=o=>(n.forEach(a=>a(o)),o),h=o=>{if(s.length>=t.max){r.push(o);return}u(o),s.unshift(o)},E=()=>{for(;r.length>0&&s.length<t.max;){const o=r.shift();o&&(u(o),s.unshift(o))}},f=o=>{const a=o.id??`toast:${de()}`,D=s.find(S=>S.id===a);return i.has(a)&&i.delete(a),D?s=s.map(S=>S.id===a?u({...S,...o,id:a}):S):h({id:a,duration:t.duration,removeDelay:t.removeDelay,type:"info",...o,stacked:!t.overlap,gap:t.gap}),a},v=o=>(i.add(o),o?(n.forEach(a=>a({id:o,dismiss:!0})),s=s.filter(a=>a.id!==o),E()):(s.forEach(a=>{n.forEach(D=>D({id:a.id,dismiss:!0}))}),s=[],r=[]),o);return{attrs:t,subscribe:l,create:f,update:(o,a)=>f({id:o,...a}),remove:v,dismiss:o=>{o!=null?s=s.map(a=>a.id===o?u({...a,message:"DISMISS"}):a):s=s.map(a=>u({...a,message:"DISMISS"}))},error:o=>f({...o,type:"error"}),success:o=>f({...o,type:"success"}),info:o=>f({...o,type:"info"}),warning:o=>f({...o,type:"warning"}),loading:o=>f({...o,type:"loading"}),getVisibleToasts:()=>s.filter(o=>!i.has(o.id)),getCount:()=>s.length,promise:(o,a,D={})=>{if(!a)return;let S;a.loading!==void 0&&(S=f({...D,...a.loading,promise:o,type:"loading"}));let N=S!==void 0,A;const me=H(o).then(async O=>{if(A=["resolve",O],ze(O)&&!O.ok){N=!1;const w=H(a.error,`HTTP Error! status: ${O.status}`);f({...D,...w,id:S,type:"error"})}else if(a.success!==void 0){N=!1;const w=H(a.success,O);f({...D,...w,id:S,type:"success"})}}).catch(async O=>{if(A=["reject",O],a.error!==void 0){N=!1;const w=H(a.error,O);f({...D,...w,id:S,type:"error"})}}).finally(()=>{var O;N&&(v(S),S=void 0),(O=a.finally)==null||O.call(a)});return{id:S,unwrap:()=>new Promise((O,w)=>me.then(()=>A[0]==="reject"?w(A[1]):O(A[1])).catch(w))}},pause:o=>{o!=null?s=s.map(a=>a.id===o?u({...a,message:"PAUSE"}):a):s=s.map(a=>u({...a,message:"PAUSE"}))},resume:o=>{o!=null?s=s.map(a=>a.id===o?u({...a,message:"RESUME"}):a):s=s.map(a=>u({...a,message:"RESUME"}))},isVisible:o=>!i.has(o)&&!!s.find(a=>a.id===o),isDismissed:o=>i.has(o),expand:()=>{s=s.map(o=>u({...o,stacked:!0}))},collapse:()=>{s=s.map(o=>u({...o,stacked:!1}))}}}var ze=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",ot={connect:je,machine:qe};function Je(e){return e===void 0&&(e={}),Qe(e)}const at=Je({placement:"top"});export{nt as a,it as c,ot as g,rt as m,at as t};
