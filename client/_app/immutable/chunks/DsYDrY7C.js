import{v as g}from"./CwvcP1kx.js";import{f as T,a as x}from"./CtfeAAbw.js";import{p as Se,d as Z,u as Te,e as m,g as r,h as y,b as S,c as f,s as u,r as p,t as z,a as Le}from"./B4GrenNm.js";import{s as $}from"./DxSOTiY2.js";import{i as A}from"./CSsnQ7i2.js";import{e as R,i as Oe}from"./BdG0KSB2.js";import{r as D,s as ee,d as te}from"./BPiAbArq.js";import{d as He,e as ae}from"./D7VV4X-8.js";import{b as ke}from"./CJCVGGPV.js";import{b as ie}from"./DFQ-BVSw.js";import{p as v}from"./DvPjbdiY.js";import{L as re}from"./B7pZD2Tm.js";var Fe=(e=>(e.None="none",e.Genomic="genomic",e.SNP="snp",e))(Fe||{}),ze=(e=>(e.Heterozygous="0/1",e.Homozygous="1/1",e.HeterozygousOrHomozygous="1/1,0/1",e.Neither="0/0",e))(ze||{});const Ae={"0/1":"Heterozygous","1/1":"Homozygous","1/1,0/1":"Heterozygous or Homozygous","0/1,1/1":"Heterozygous or Homozygous"};function $e(e,t){return{uuid:g(),id:e.conceptPath,filterType:"Categorical",displayType:t&&(t==null?void 0:t.length)>0?"restrict":"anyRecordOf",searchResult:e,categoryValues:t||[],variableName:e.display||e.name,description:e.description,allowFiltering:e.allowFiltering,dataset:e.dataset}}function Re(e){return{uuid:g(),id:e.conceptPath,filterType:"Categorical",displayType:"any",searchResult:e,variableName:e.display||e.name,description:e.description,categoryValues:[],allowFiltering:e.allowFiltering,dataset:e.dataset}}function oe(e){return e.flatMap(t=>[t.conceptPath,...(t.children||[]).flatMap(i=>oe([i]))])}function et(e,t){const i=oe((t==null?void 0:t.children)||[]);return{uuid:g(),id:e.conceptPath,concepts:i,filterType:"AnyRecordOf",displayType:"anyRecordOf",searchResult:e,variableName:e.name||e.display||e.conceptPath,description:e.description,allowFiltering:e.allowFiltering,dataset:e.dataset}}function tt(e,t,i){return{uuid:g(),id:e.conceptPath,filterType:"numeric",displayType:t!==void 0&&i!==void 0?"between":t!==void 0?"greaterThan":i!==void 0?"lessThan":"any",searchResult:e,min:t!==void 0?t.toLocaleString():void 0,max:i!==void 0?i.toLocaleString():void 0,variableName:e.display||e.name,description:e.description,allowFiltering:e.allowFiltering,dataset:e.dataset}}function at(e){const t=(n,s)=>s&&s.length>0?`${n}: ${s.join(", ")}`:void 0,i=[t("Gene with variant",e.Gene_with_variant),t("Variant frequency",e.Variant_frequency_as_text),t("Consequence Group by severity",e.Variant_consequence_calculated)].filter(n=>n).join("; ");return{uuid:g(),id:"genomic",filterType:"genomic",displayType:"any",variableName:"Genomic Filter",description:i,Gene_with_variant:e.Gene_with_variant,Variant_consequence_calculated:e.Variant_consequence_calculated,Variant_frequency_as_text:e.Variant_frequency_as_text,allowFiltering:!0,dataset:""}}function it(e){const t=e.map(o=>`${o.search}: ${o.constraint.split(",").map(n=>Ae[n]).join(", ")}`).join("; ");return{uuid:g(),id:"snp-variant",filterType:"snp",displayType:"any",snpValues:e,variableName:"Variant Filter",description:t,allowFiltering:!0,dataset:""}}function Ce(e,t,i,o){t()(r(i)),r(o).scrollTop=0}function Ve(e,t,i,o){t([...t(),...i()].sort()),i([]),o(20)}function Ne(e,t,i,o,n){var s;t()&&((s=t())==null?void 0:s.length)!==0?(i(t()),o([]),n(20)):(i([...i(),...o()]),o([]),n(20))}var qe=T('<button id="select-all" class="btn preset-outlined-surface-500 hover:preset-filled-primary-500 ml-2 text-sm">Select All</button>'),Pe=T('<label class="p-1 m-1 block cursor-pointer hover:preset-tonal-surface hover:rounded-md" role="listitem"><input type="checkbox" class="mr-1 float-left"/> </label>'),Ge=T('<button id="clear" class="btn preset-outlined-surface-500 hover:preset-filled-primary-500 ml-2 text-sm">Clear</button>'),je=T('<label class="p-1 m-1 block hover:preset-tonal-surface hover:rounded-md cursor-pointer" role="listitem"><input type="checkbox" class="mr-1" checked/> </label>'),Me=T('<div data-testid="optional-selection-list" class="flex w-full"><div class="flex flex-1 flex-col h-full p-3 m-1 card bg-surface-100 rounded-xl"><header class="flex pb-1"><input class="input text-sm" type="search" name="search" placeholder="Search..."/> <!></header> <section class="card-body"><div id="options-container" class="overflow-scroll scrollbar-color h-25vh svelte-klmedf"><!> <!></div></section></div> <div class="flex flex-1 flex-col h-full p-3 m-1 card bg-surface-100 rounded-xl"><header class="flex justify-between pb-1"><div class="py-2">Selected:</div> <!></header> <section class="card-body"><div id="selected-options-container" class="overflow-scroll scrollbar-color h-25vh svelte-klmedf"><!> <!></div></section></div></div>');function rt(e,t){Se(t,!0);let i=S(""),o=v(t,"unselectedOptions",31,()=>Z([])),n=v(t,"selectedOptions",31,()=>Z([])),s=v(t,"selectedOptionEndLocation",15,20),I=v(t,"currentlyLoading",11,!1),le=v(t,"showClearAll",3,!0),ne=v(t,"showSelectAll",3,!0),ce=v(t,"allOptionsLoaded",3,!1),C=v(t,"allOptions",3,void 0),B=v(t,"onscroll",3,()=>{}),V=S(!1),h=S(void 0),L=S(void 0),N=S(!1);function U(a,l){const c=a.scrollTop,d=a.clientHeight,b=a.scrollHeight;return!l&&b-(c+d)<=30}function se(){r(h)&&!I()&&U(r(h),r(ve))&&B()(r(i))}function de(){r(L)&&(m(V,!0),U(r(L),r(N))&&s(s()+20),m(V,!1))}function fe(a){return l=>{l.preventDefault(),o(o().filter(c=>c!==a)),n([...n(),a].sort())}}function pe(a){return l=>{l.preventDefault(),n(n().filter(c=>c!==a)),o([a,...o()])}}function E(a){return a.replaceAll(" ","-").toLowerCase()}let q=y(()=>C()===void 0),ue=y(()=>{var a;return r(q)?1/0:(((a=C())==null?void 0:a.length)||0)-n().length}),ve=y(()=>r(q)?ce():o().length>=r(ue)),J=y(()=>n().slice(0,s()));Te(()=>{m(N,r(q)?r(N):r(J).length>=n().length,!0)});var P=Me(),G=f(P),j=f(G),O=f(j);D(O),O.__input=[Ce,B,i,h];var _e=u(O,2);{var me=a=>{var l=qe();l.__click=[Ne,C,n,o,s],z(()=>l.disabled=o().length===0),x(a,l)};A(_e,a=>{ne()&&a(me)})}p(j);var K=u(j,2),H=f(K),Q=f(H);R(Q,17,o,Oe,(a,l)=>{var c=Pe(),d=f(c);D(d);var b=y(()=>fe(r(l)));d.__click=function(..._){var w;(w=r(b))==null||w.apply(this,_)};var F=u(d);p(c),z(_=>{ee(c,"id",`option-${_??""}`),te(d,r(l)),$(F,` ${r(l)??""}`)},[()=>E(r(l))]),x(a,c)});var ye=u(Q,2);{var ge=a=>{re(a,{ring:!0,size:"small"})};A(ye,a=>{I()&&a(ge)})}p(H),ie(H,a=>m(h,a),()=>r(h)),p(K),p(G);var W=u(G,2),M=f(W),he=u(f(M),2);{var be=a=>{var l=Ge();l.__click=[Ve,o,n,s],z(()=>l.disabled=n().length===0),x(a,l)};A(he,a=>{le()&&a(be)})}p(M);var X=u(M,2),k=f(X),Y=f(k);R(Y,16,()=>r(J),a=>a,(a,l)=>{var c=je(),d=f(c);D(d);var b=y(()=>pe(l));d.__click=function(..._){var w;(w=r(b))==null||w.apply(this,_)};var F=u(d);p(c),z(_=>{ee(c,"id",`option-${_??""}`),te(d,l),$(F,` ${l??""}`)},[()=>E(l)]),x(a,c)});var we=u(Y,2);{var xe=a=>{re(a,{})};A(we,a=>{r(V)&&a(xe)})}p(k),ie(k,a=>m(L,a),()=>r(L)),p(X),p(W),p(P),ke(O,()=>r(i),a=>m(i,a)),ae("scroll",H,se),ae("scroll",k,de),x(e,P),Le()}He(["input","click"]);export{ze as G,rt as O,it as a,et as b,at as c,Re as d,$e as e,tt as f,Fe as g,Ae as h};
