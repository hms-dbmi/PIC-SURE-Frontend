import{v as Y}from"./DvF23Exx.js";import{s as Te,e as E,a as I,c as S,b as A,g as N,f as g,l as Ce,m as c,i as G,h as p,r as ae,u as z,y as Ve,w as Ae,S as He,t as ie,d as ne,v as be,j as ke,_ as se}from"./DfqJWsAP.js";import{S as Ie,i as Ne,t as D,g as ce,a as K,b as ue,d as we,e as Oe,m as Ee,f as Se}from"./B9sU1H0B.js";import{e as te,u as qe,d as De}from"./CnUKkpeB.js";import"./8fc_wYz-.js";import{P as Le}from"./hZi8C6Ly.js";var ze=(t=>(t.None="none",t.Genomic="genomic",t.SNP="snp",t))(ze||{}),Fe=(t=>(t.Heterozygous="0/1",t.Homozygous="1/1",t.HeterozygousOrHomozygous="1/1,0/1",t.Neither="0/0",t))(Fe||{});const Pe={"0/1":"Heterozygous","1/1":"Homozygous","1/1,0/1":"Heterozygous or Homozygous","0/1,1/1":"Heterozygous or Homozygous","0/0":"Excluded"};function We(t,e){return{uuid:Y(),id:t.conceptPath,filterType:"Categorical",displayType:e&&(e==null?void 0:e.length)>0?"restrict":"anyRecordOf",searchResult:t,categoryValues:e||[],variableName:t.display||t.name,description:t.description,allowFiltering:t.allowFiltering,dataset:t.dataset}}function Xe(t){return{uuid:Y(),id:t.conceptPath,filterType:"Categorical",displayType:"any",searchResult:t,variableName:t.display||t.name,description:t.description,categoryValues:[],allowFiltering:t.allowFiltering,dataset:t.dataset}}function Ye(t,e,l){return{uuid:Y(),id:t.conceptPath,filterType:"numeric",displayType:e!==void 0&&l!==void 0?"between":e!==void 0?"greaterThan":l!==void 0?"lessThan":"any",searchResult:t,min:e!==void 0?e.toLocaleString():void 0,max:l!==void 0?l.toLocaleString():void 0,variableName:t.display||t.name,description:t.description,allowFiltering:t.allowFiltering,dataset:t.dataset}}function Ze(t){const e=(r,o)=>o&&o.length>0?`${r}: ${o.join(", ")}`:void 0,l=[e("Gene with variant",t.Gene_with_variant),e("Variant frequency",t.Variant_frequency_as_text),e("Consequence Group by severity",t.Variant_consequence_calculated)].filter(r=>r).join("; ");return{uuid:Y(),id:"genomic",filterType:"genomic",displayType:"any",variableName:"Genomic Filter",description:l,Gene_with_variant:t.Gene_with_variant,Variant_consequence_calculated:t.Variant_consequence_calculated,Variant_frequency_as_text:t.Variant_frequency_as_text,allowFiltering:!0,dataset:""}}function Re(t){const e=t.map(n=>`${n.search}: ${n.constraint.split(",").map(r=>Pe[r]).join(", ")}`).join("; ");return{uuid:Y(),id:"snp-variant",filterType:"snp",displayType:"any",snpValues:t,variableName:"Variant Filter",description:e,allowFiltering:!0,dataset:""}}function fe(t,e,l){const n=t.slice();return n[30]=e[l],n}function de(t,e,l){const n=t.slice();return n[30]=e[l],n}function he(t){let e,l,n,r,o;return{c(){e=E("button"),l=ie("Select All"),this.h()},l(u){e=S(u,"BUTTON",{id:!0,class:!0});var a=A(e);l=ne(a,"Select All"),a.forEach(g),this.h()},h(){c(e,"id","select-all"),c(e,"class","btn variant-ringed-surface hover:variant-filled-primary ml-2 text-sm"),e.disabled=n=t[0].length===0},m(u,a){G(u,e,a),p(e,l),r||(o=z(e,"click",t[16]),r=!0)},p(u,a){a[0]&1&&n!==(n=u[0].length===0)&&(e.disabled=n)},d(u){u&&g(e),r=!1,o()}}}function _e(t){let e,l,n,r,o=t[30]+"",u,a,s,_;function T(){return t[24](t[30])}return{c(){e=E("label"),l=E("input"),r=I(),u=ie(o),this.h()},l(m){e=S(m,"LABEL",{id:!0,class:!0,role:!0});var f=A(e);l=S(f,"INPUT",{type:!0,class:!0}),r=N(f),u=ne(f,o),f.forEach(g),this.h()},h(){c(l,"type","checkbox"),l.value=n=t[30],c(l,"class","mr-1 float-left"),c(e,"id",a="option-"+le(t[30])),c(e,"class","p-1 m-1 cursor-pointer hover:variant-soft-surface hover:rounded-md"),c(e,"role","listitem")},m(m,f){G(m,e,f),p(e,l),p(e,r),p(e,u),s||(_=z(l,"click",be(T)),s=!0)},p(m,f){t=m,f[0]&1&&n!==(n=t[30])&&(l.value=n),f[0]&1&&o!==(o=t[30]+"")&&ke(u,o),f[0]&1&&a!==(a="option-"+le(t[30]))&&c(e,"id",a)},d(m){m&&g(e),s=!1,_()}}}function pe(t){let e,l,n;return l=new Le({props:{width:"w-5",meter:"stroke-primary-500",track:"stroke-primary-500/30"}}),{c(){e=E("div"),we(l.$$.fragment),this.h()},l(r){e=S(r,"DIV",{class:!0});var o=A(e);Oe(l.$$.fragment,o),o.forEach(g),this.h()},h(){c(e,"class","flex justify-center")},m(r,o){G(r,e,o),Ee(l,e,null),n=!0},i(r){n||(D(l.$$.fragment,r),n=!0)},o(r){K(l.$$.fragment,r),n=!1},d(r){r&&g(e),Se(l)}}}function me(t){let e,l,n,r,o;return{c(){e=E("button"),l=ie("Clear"),this.h()},l(u){e=S(u,"BUTTON",{id:!0,class:!0});var a=A(e);l=ne(a,"Clear"),a.forEach(g),this.h()},h(){c(e,"id","clear"),c(e,"class","btn variant-ringed-surface hover:variant-filled-primary ml-2 text-sm"),e.disabled=n=t[1].length===0},m(u,a){G(u,e,a),p(e,l),r||(o=z(e,"click",t[15]),r=!0)},p(u,a){a[0]&2&&n!==(n=u[1].length===0)&&(e.disabled=n)},d(u){u&&g(e),r=!1,o()}}}function ge(t,e){let l,n,r,o,u=e[30]+"",a,s,_,T;function m(){return e[26](e[30])}return{key:t,first:null,c(){l=E("label"),n=E("input"),o=I(),a=ie(u),this.h()},l(f){l=S(f,"LABEL",{id:!0,class:!0,role:!0});var v=A(l);n=S(v,"INPUT",{type:!0,class:!0}),o=N(v),a=ne(v,u),v.forEach(g),this.h()},h(){c(n,"type","checkbox"),c(n,"class","mr-1"),n.value=r=e[30],n.checked=!0,c(l,"id",s="option-"+le(e[30])),c(l,"class","p-1 m-1 hover:variant-soft-surface hover:rounded-md cursor-pointer"),c(l,"role","listitem"),this.first=l},m(f,v){G(f,l,v),p(l,n),p(l,o),p(l,a),_||(T=z(n,"click",be(m)),_=!0)},p(f,v){e=f,v[0]&32&&r!==(r=e[30])&&(n.value=r),v[0]&32&&u!==(u=e[30]+"")&&ke(a,u),v[0]&32&&s!==(s="option-"+le(e[30]))&&c(l,"id",s)},d(f){f&&g(l),_=!1,T()}}}function ve(t){let e,l,n;return l=new Le({props:{width:"w-5",meter:"stroke-primary-500",track:"stroke-primary-500/30"}}),{c(){e=E("div"),we(l.$$.fragment),this.h()},l(r){e=S(r,"DIV",{class:!0});var o=A(e);Oe(l.$$.fragment,o),o.forEach(g),this.h()},h(){c(e,"class","flex justify-center")},m(r,o){G(r,e,o),Ee(l,e,null),n=!0},i(r){n||(D(l.$$.fragment,r),n=!0)},o(r){K(l.$$.fragment,r),n=!1},d(r){r&&g(e),Se(l)}}}function je(t){let e,l,n,r,o,u,a,s,_,T,m,f,v,U="Selected:",V,F,H,k,C=[],Q=new Map,B,M,W,X,w=t[4]&&he(t),q=te(t[0]),O=[];for(let i=0;i<q.length;i+=1)O[i]=_e(de(t,q,i));let y=t[2]&&pe(),L=t[3]&&me(t),J=te(t[5]);const Z=i=>i[30];for(let i=0;i<J.length;i+=1){let h=fe(t,J,i),d=Z(h);Q.set(d,C[i]=ge(d,h))}let b=t[7]&&ve();return{c(){e=E("div"),l=E("div"),n=E("header"),r=E("input"),o=I(),w&&w.c(),u=I(),a=E("section"),s=E("div");for(let i=0;i<O.length;i+=1)O[i].c();_=I(),y&&y.c(),T=I(),m=E("div"),f=E("header"),v=E("div"),v.textContent=U,V=I(),L&&L.c(),F=I(),H=E("section"),k=E("div");for(let i=0;i<C.length;i+=1)C[i].c();B=I(),b&&b.c(),this.h()},l(i){e=S(i,"DIV",{"data-testid":!0,class:!0});var h=A(e);l=S(h,"DIV",{class:!0});var d=A(l);n=S(d,"HEADER",{class:!0});var P=A(n);r=S(P,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),o=N(P),w&&w.l(P),P.forEach(g),u=N(d),a=S(d,"SECTION",{class:!0});var re=A(a);s=S(re,"DIV",{id:!0,class:!0});var R=A(s);for(let j=0;j<O.length;j+=1)O[j].l(R);_=N(R),y&&y.l(R),R.forEach(g),re.forEach(g),d.forEach(g),T=N(h),m=S(h,"DIV",{class:!0});var x=A(m);f=S(x,"HEADER",{class:!0});var $=A(f);v=S($,"DIV",{class:!0,"data-svelte-h":!0}),Ce(v)!=="svelte-1eal34y"&&(v.textContent=U),V=N($),L&&L.l($),$.forEach(g),F=N(x),H=S(x,"SECTION",{class:!0});var oe=A(H);k=S(oe,"DIV",{id:!0,class:!0});var ee=A(k);for(let j=0;j<C.length;j+=1)C[j].l(ee);B=N(ee),b&&b.l(ee),ee.forEach(g),oe.forEach(g),x.forEach(g),h.forEach(g),this.h()},h(){c(r,"class","input text-sm"),c(r,"type","search"),c(r,"name","search"),c(r,"placeholder","Search..."),c(n,"class","flex pb-1"),c(s,"id","options-container"),c(s,"class","overflow-scroll scrollbar-color h-25vh svelte-c314iq"),c(a,"class","card-body"),c(l,"class","flex flex-1 flex-col h-full p-3 m-1 card"),c(v,"class","py-2"),c(f,"class","flex justify-between pb-1"),c(k,"id","selected-options-container"),c(k,"class","overflow-scroll scrollbar-color h-25vh svelte-c314iq"),c(H,"class","card-body"),c(m,"class","flex flex-1 flex-col h-full p-3 m-1 card"),c(e,"data-testid","optional-selection-list"),c(e,"class","flex w-full")},m(i,h){G(i,e,h),p(e,l),p(l,n),p(n,r),ae(r,t[6]),p(n,o),w&&w.m(n,null),p(l,u),p(l,a),p(a,s);for(let d=0;d<O.length;d+=1)O[d]&&O[d].m(s,null);p(s,_),y&&y.m(s,null),t[25](s),p(e,T),p(e,m),p(m,f),p(f,v),p(f,V),L&&L.m(f,null),p(m,F),p(m,H),p(H,k);for(let d=0;d<C.length;d+=1)C[d]&&C[d].m(k,null);p(k,B),b&&b.m(k,null),t[27](k),M=!0,W||(X=[z(r,"input",t[23]),z(r,"input",t[12]),z(s,"scroll",t[10]),z(k,"scroll",t[11])],W=!0)},p(i,h){if(h[0]&64&&r.value!==i[6]&&ae(r,i[6]),i[4]?w?w.p(i,h):(w=he(i),w.c(),w.m(n,null)):w&&(w.d(1),w=null),h[0]&8193){q=te(i[0]);let d;for(d=0;d<q.length;d+=1){const P=de(i,q,d);O[d]?O[d].p(P,h):(O[d]=_e(P),O[d].c(),O[d].m(s,_))}for(;d<O.length;d+=1)O[d].d(1);O.length=q.length}i[2]?y?h[0]&4&&D(y,1):(y=pe(),y.c(),D(y,1),y.m(s,null)):y&&(ce(),K(y,1,1,()=>{y=null}),ue()),i[3]?L?L.p(i,h):(L=me(i),L.c(),L.m(f,null)):L&&(L.d(1),L=null),h[0]&16416&&(J=te(i[5]),C=qe(C,h,Z,1,i,J,Q,k,De,ge,B,fe)),i[7]?b?h[0]&128&&D(b,1):(b=ve(),b.c(),D(b,1),b.m(k,null)):b&&(ce(),K(b,1,1,()=>{b=null}),ue())},i(i){M||(D(y),D(b),M=!0)},o(i){K(y),K(b),M=!1},d(i){i&&g(e),w&&w.d(),Ve(O,i),y&&y.d(),t[25](null),L&&L.d();for(let h=0;h<C.length;h+=1)C[h].d();b&&b.d(),t[27](null),W=!1,Ae(X)}}}function ye(t,e){const l=t.scrollTop,n=t.clientHeight,r=t.scrollHeight;return!e&&r-(l+n)<=30}function le(t){return t.replaceAll(" ","-").toLowerCase()}function Ge(t,e,l){let n,r,o,u,a="",{unselectedOptions:s=[]}=e,{selectedOptions:_=[]}=e,{selectedOptionEndLocation:T=20}=e,{currentlyLoading:m=!1}=e,{showClearAll:f=!0}=e,{showSelectAll:v=!0}=e,{allOptionsLoaded:U=!1}=e,{allOptions:V=void 0}=e,F=!1,H,k,C=!1;const Q=He();function B(){H&&!m&&ye(H,o)&&Q("scroll",{search:a})}function M(){k&&(l(7,F=!0),ye(k,C)&&l(17,T=T+20),l(7,F=!1))}function W(){Q("scroll",{search:a}),l(8,H.scrollTop=0,H)}function X(i){l(0,s=s.filter(h=>h!==i)),l(1,_=[..._,i].sort())}function w(i){l(1,_=_.filter(h=>h!==i)),l(0,s=[i,...s])}function q(){l(0,s=[...s,..._].sort()),l(1,_=[]),l(17,T=20)}function O(){V&&(V==null?void 0:V.length)!==0?(l(1,_=V),l(0,s=[]),l(17,T=20)):(l(1,_=[..._,...s]),l(0,s=[]),l(17,T=20))}function y(){a=this.value,l(6,a)}const L=i=>X(i);function J(i){se[i?"unshift":"push"](()=>{H=i,l(8,H)})}const Z=i=>w(i);function b(i){se[i?"unshift":"push"](()=>{k=i,l(9,k)})}return t.$$set=i=>{"unselectedOptions"in i&&l(0,s=i.unselectedOptions),"selectedOptions"in i&&l(1,_=i.selectedOptions),"selectedOptionEndLocation"in i&&l(17,T=i.selectedOptionEndLocation),"currentlyLoading"in i&&l(2,m=i.currentlyLoading),"showClearAll"in i&&l(3,f=i.showClearAll),"showSelectAll"in i&&l(4,v=i.showSelectAll),"allOptionsLoaded"in i&&l(18,U=i.allOptionsLoaded),"allOptions"in i&&l(19,V=i.allOptions)},t.$$.update=()=>{t.$$.dirty[0]&524288&&l(21,n=V===void 0),t.$$.dirty[0]&2621442&&l(22,r=n?1/0:((V==null?void 0:V.length)||0)-_.length),t.$$.dirty[0]&6553601&&(o=n?U:s.length>=r),t.$$.dirty[0]&131074&&l(5,u=_.slice(0,T)),t.$$.dirty[0]&3145762&&l(20,C=n?C:u.length>=_.length)},[s,_,m,f,v,u,a,F,H,k,B,M,W,X,w,q,O,T,U,V,C,n,r,y,L,J,Z,b]}class xe extends Ie{constructor(e){super(),Ne(this,e,Ge,je,Te,{unselectedOptions:0,selectedOptions:1,selectedOptionEndLocation:17,currentlyLoading:2,showClearAll:3,showSelectAll:4,allOptionsLoaded:18,allOptions:19},null,[-1,-1])}}export{Fe as G,xe as O,We as a,Ye as b,Xe as c,Ze as d,Re as e,ze as f,Pe as g};
