import{d as l,w as u}from"./BMKj-mzl.js";import{m as r}from"./BmRh3WJ6.js";import{g as p,p as f,b as m,d as g}from"./BF5nqrJG.js";import{l as n}from"./CDvIr29H.js";const o="psama/privilege",c=u(!1),e=u([]),v=l(e,s=>s.map(t=>[t.name,t.uuid||""]),[]);async function P(){if(n(c))return;const s=await p(o);e.set(s.map(r)),c.set(!0)}async function w(s){const i=n(e).find(d=>d.uuid===s);if(i)return i;const a=await p(`${o}/${s}`);return r(a)}async function b(s){const t=await f(o,[{...s,application:{uuid:s.application}}]),i=r(t[0]),a=n(e);a.push(i),e.set(a)}async function x(s){await m(o,[{...s,application:{uuid:s.application}}]);const t=n(e),i=t.findIndex(a=>a.uuid===s.uuid);i===-1?t.push(s):t[i]=s,e.set(t)}async function y(s){await g(`${o}/${s}`);const t=n(e),i=t.findIndex(a=>a.uuid===s);i>-1&&(t.splice(i,1),e.set(t))}const A={subscribe:e.subscribe,privileges:e,privilegeList:v,loadPrivileges:P,getPrivilege:w,addPrivilege:b,updatePrivilege:x,deletePrivilege:y};export{A as P,b as a,e as b,w as g,P as l,v as p,x as u};
