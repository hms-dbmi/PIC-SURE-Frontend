import{d as l,w as u,g as n}from"./DpyMT7OB.js";import{m as r}from"./BD7x6Jnt.js";import{d as f,g as d,p as g,c as m}from"./BpV1Tt4c.js";const o="psama/privilege",c=u(!1),i=u([]),P=l(i,s=>s.map(t=>[t.name,t.uuid||""]),[]);async function v(){if(n(c))return;const s=await d(o);i.set(s.map(r)),c.set(!0)}async function y(s){const e=n(i).find(p=>p.uuid===s);if(e)return e;const a=await d(`${o}/${s}`);return r(a)}async function I(s){const t=await m(o,[{...s,application:{uuid:s.application}}]),e=r(t[0]),a=n(i);a.push(e),i.set(a)}async function $(s){await g(o,[{...s,application:{uuid:s.application}}]);const t=n(i),e=t.findIndex(a=>a.uuid===s.uuid);e===-1?t.push(s):t[e]=s,i.set(t)}async function h(s){await f(`${o}/${s}`);const t=n(i),e=t.findIndex(a=>a.uuid===s);e>-1&&(t.splice(e,1),i.set(t))}const A={subscribe:i.subscribe,privilegeList:P,loadPrivileges:v};export{A as P,I as a,i as b,h as d,y as g,v as l,P as p,$ as u};
