var dt=Object.defineProperty;var tt=s=>{throw TypeError(s)};var ft=(s,e,t)=>e in s?dt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var u=(s,e,t)=>ft(s,typeof e!="symbol"?e+"":e,t),gt=(s,e,t)=>e.has(s)||tt("Cannot "+t);var o=(s,e,t)=>(gt(s,e,"read from private field"),t?t.call(s):e.get(s)),w=(s,e,t)=>e.has(s)?tt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);import"./Bzak7iHL.js";import{a5 as bt,b6 as vt,bc as wt,h as A,k as n,l as m,i as ne,u as x,S as _t,p as re,f as y,a as U,d as _,r as g,t as N,b,s as W,c as ie,e as ae,j as it,B as at,o as mt,n as Pt}from"./pV5yBOfK.js";import{d as he,s as Z}from"./D3FUfhzK.js";import{s as lt}from"./CPDBQclr.js";import{i as T}from"./BAa5cEXk.js";import{e as be,i as ve}from"./CFqqwPkz.js";import{c as we,s as z,a as G,r as nt,e as kt}from"./B3YVaWvx.js";import{p as P,a as $e,s as yt}from"./C2caA9Pm.js";import{E as pt,V as Ht,T as Rt,q as xt}from"./D3-cXwBU.js";import{c as st}from"./D2EutmVf.js";import{t as St,s as Ct}from"./Dj8TqXX2.js";import{a as At,s as Nt,b as jt,c as Et}from"./B61b23iZ.js";import{b as ct}from"./CMMNa4Y8.js";import{L as qt}from"./BK-nQ0m1.js";const Bt=[];function Ot(s,e=!1,t=!1){return Xe(s,new Map,"",Bt,null,t)}function Xe(s,e,t,r,i=null,a=!1){if(typeof s=="object"&&s!==null){var l=e.get(s);if(l!==void 0)return l;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(bt(s)){var c=Array(s.length);e.set(s,c),i!==null&&e.set(i,c);for(var h=0;h<s.length;h+=1){var f=s[h];h in s&&(c[h]=Xe(f,e,t,r,null,a))}return c}if(vt(s)===wt){c={},e.set(s,c),i!==null&&e.set(i,c);for(var d in s)c[d]=Xe(s[d],e,t,r,null,a);return c}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function"&&!a)return Xe(s.toJSON(),e,t,r,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}const ce=s=>s==null||s==="",ot=s=>!ce(s),ge=(s=null)=>String(s).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),Ft=s=>typeof s!="object"?!1:s!==null,_e={isLike:(s,e)=>ge(s).includes(ge(e)),isEqualTo:(s,e)=>ge(s)===ge(e),whereIn:(s,e=[])=>{if(e.length===0)return!1;for(const{value:t,check:r}of e){if(t!=null&&t.key)return Tt(s,t,r);if(r(s,t))return!0}return!1},match:(s,e)=>{const t=e.match(/^([\/~@;%#'])(.*?)\1([gimsuy]*)$/),r=t?new RegExp(t[2],t[3].split("").filter((i,a,l)=>l.indexOf(i)===a).join("")):new RegExp(e);return!!ge(s).match(r)}},Tt=(s,e,t)=>{if(!(e!=null&&e.key))return!1;const{key:r,value:i}=e;return!!(Array.isArray(s)===!1&&typeof s=="object"&&Object.keys(s).includes(r)&&t(s[r],i))},oe=(s,e,t)=>(t.check=t.check??_e.isLike,ce(e)?!0:Ft(s)?Object.keys(s).some(r=>oe(s[r],e,t)):t.check(s,e)),et=(s,e,t)=>(Array.isArray(s)&&(s=s.filter(r=>{const i=t.isRecursive===!0?oe(r,e,t):!0;if(typeof r=="object"&&i===!0)for(const a of Object.keys(r))r[a]=et(r[a],e,t);return i})),t.highlight&&(typeof s=="string"||typeof s=="number")&&typeof e=="string"&&oe(s,e,t)?ht(s,e):s),ht=(s,e)=>{const t=e.replace(/a/g,"[aàâáä]").replace(/e/g,"[eèêéë]").replace(/i/g,"[iìîíï]").replace(/o/g,"[oòôо́ö]").replace(/u/g,"[uùûúü]").replace(/y/g,"[yỳŷýÿ]"),r=new RegExp(`${t}`,"gi");return String(s).replace(r,'<u class="highlight">$&</u>')},rt=(s,e,t)=>{const r=t.toString().split("=>")[1].replace(/\(\)/g,"").replace(/\?/g,"").split(".").splice(1).join(".").trim();return r.indexOf(" ")>-1?s:Mt(s,r,e)},Mt=(s,e,t)=>{const r=s,i=e.replace(/\[/g,".[").split(".");try{for(let a=0;a<i.length;a++){let l=i[a],c=i[a+1];l.includes("[")&&(l=String(parseInt(l.substring(1,l.length-1)))),c&&c.includes("[")&&(c=String(parseInt(c.substring(1,c.length-1)))),c!==void 0?s[l]=s[l]?s[l]:isNaN(Number(c))?{}:[]:s[l]=ht(s[l],t),s=s[l]}return r}catch{return r}},se=(s,e)=>{if(typeof s=="string")return{callback:t=>t[s],id:e,key:s};if(typeof s=="function")return{callback:s,id:e,key:void 0};throw new Error(`Invalid field argument: ${String(s)}`)},Ye={search:(s,{scope:e,isRecursive:t,value:r,check:i},a=!1)=>s.filter(l=>{const h=(e??Object.keys(l)).map(f=>se(f));for(const{key:f,callback:d}of h)f?l[f]=et(l[f],r,{highlight:a,isRecursive:t===!0}):a&&(l=rt(l,r,d));return h.some(({callback:f})=>oe(f(l),r,{check:i}))}),filter:(s,{callback:e,value:t,check:r,key:i},a=!1)=>s.filter(l=>{const c=oe(e(l),t,{check:r});return i?l[i]=et(l[i],t,{highlight:a,check:r,isRecursive:!0}):a&&c&&t&&typeof t=="string"&&(l=rt(l,t,e)),c}),query:(s,{path:e,value:t,check:r})=>s.filter(i=>{if(e.length===0)return r(i,t);let a=i,l=1,c=!1;for(const h of e){if(l===1&&l<e.length){a=a[h];for(const f of a[h]);}l===e.length&&(console.log(h,a),a[h]=Ye.query(a[h],{path:[],value:t,check:r}),a[h].length>0&&(c=!0)),a=a[h],l++}return c})},Ze={asc:(s,e,t,r)=>s===e?0:ce(s)?1:ce(e)?-1:typeof s=="boolean"?s===!1?1:-1:typeof s=="string"?s.localeCompare(e,t,r):typeof s=="number"?s-e:typeof s=="object"?JSON.stringify(s).localeCompare(JSON.stringify(e),t,r):String(s).localeCompare(String(e),t,r),desc:(s,e,t,r)=>s===e?0:ce(s)?1:ce(e)?-1:typeof e=="boolean"?e===!1?1:-1:typeof e=="string"?e.localeCompare(s,t,r):typeof e=="number"?e-s:typeof e=="object"?JSON.stringify(e).localeCompare(JSON.stringify(s),t,r):String(e).localeCompare(String(s),t,r)};var me,Pe,ke,ye,pe,He,Re,xe,Se,Ce,Ae,Ne,je,Ee,qe,Be,Oe,Fe,Te;class Wt{constructor(e,t){u(this,"selectBy");w(this,me,A("currentPage"));u(this,"highlight");u(this,"event",new pt);w(this,Pe,A([]));w(this,ke,A(ne({value:null})));w(this,ye,A(ne({})));w(this,pe,A(ne([])));w(this,He,A(ne([])));w(this,Re,A(10));w(this,xe,A(1));w(this,Se,A(void 0));w(this,Ce,A(1e3));w(this,Ae,x(()=>this.filters.length));w(this,Ne,x(()=>this.createAllRows()));w(this,je,x(()=>this.createRows()));w(this,Ee,x(()=>this.createRowCount()));w(this,qe,x(()=>this.createPages()));w(this,Be,x(()=>this.pages.length));w(this,Oe,x(()=>this.createPagesWithEllipsis()));w(this,Fe,A(ne([])));w(this,Te,x(()=>this.createIsAllSelected()));this.rawRows=e,this.rowsPerPage=t.rowsPerPage??null,this.highlight=t.highlight??!1,this.selectBy=t.selectBy}get selectScope(){return n(o(this,me))}set selectScope(e){m(o(this,me),e,!0)}get rawRows(){return n(o(this,Pe))}set rawRows(e){m(o(this,Pe),e)}get search(){return n(o(this,ke))}set search(e){m(o(this,ke),e,!0)}get sort(){return n(o(this,ye))}set sort(e){m(o(this,ye),e,!0)}get filters(){return n(o(this,pe))}set filters(e){m(o(this,pe),e,!0)}get queries(){return n(o(this,He))}set queries(e){m(o(this,He),e,!0)}get rowsPerPage(){return n(o(this,Re))}set rowsPerPage(e){m(o(this,Re),e,!0)}get currentPage(){return n(o(this,xe))}set currentPage(e){m(o(this,xe),e,!0)}get element(){return n(o(this,Se))}set element(e){m(o(this,Se),e,!0)}get clientWidth(){return n(o(this,Ce))}set clientWidth(e){m(o(this,Ce),e,!0)}get filterCount(){return n(o(this,Ae))}set filterCount(e){m(o(this,Ae),e)}get allRows(){return n(o(this,Ne))}set allRows(e){m(o(this,Ne),e)}get rows(){return n(o(this,je))}set rows(e){m(o(this,je),e)}get rowCount(){return n(o(this,Ee))}set rowCount(e){m(o(this,Ee),e)}get pages(){return n(o(this,qe))}set pages(e){m(o(this,qe),e)}get pageCount(){return n(o(this,Be))}set pageCount(e){m(o(this,Be),e)}get pagesWithEllipsis(){return n(o(this,Oe))}set pagesWithEllipsis(e){m(o(this,Oe),e)}get selected(){return n(o(this,Fe))}set selected(e){m(o(this,Fe),e,!0)}get isAllSelected(){return n(o(this,Te))}set isAllSelected(e){m(o(this,Te),e)}createAllRows(){let e=Ot(this.rawRows);if(this.search.value)e=Ye.search(e,this.search,this.highlight),this.event.dispatch("change");else if(this.filters.length>0){for(const t of this.filters)e=Ye.filter(e,t,this.highlight);this.event.dispatch("change")}else if(this.queries.length>0){for(const t of this.queries)e=Ye.query(e,t);this.event.dispatch("change")}return e}createRows(){return this.rowsPerPage?this.allRows.slice((this.currentPage-1)*this.rowsPerPage,this.currentPage*this.rowsPerPage):this.allRows}createRowCount(){const e=this.allRows.length;return this.rowsPerPage?{total:e,start:this.currentPage*this.rowsPerPage-this.rowsPerPage+1,end:Math.min(this.currentPage*this.rowsPerPage,e),selected:this.selected.length}:{total:e,start:1,end:e,selected:this.selected.length}}createPages(){return this.rowsPerPage?Array.from(Array(Math.ceil(this.allRows.length/this.rowsPerPage))).map((t,r)=>r+1):[1]}createPagesWithEllipsis(){if(this.pageCount<=7)return this.pages;const e=null,t=1,r=this.pageCount;return this.currentPage<=4?[...this.pages.slice(0,5),e,r]:this.currentPage<r-3?[t,e,...this.pages.slice(this.currentPage-2,this.currentPage+1),e,r]:[t,e,...this.pages.slice(r-5,r)]}createIsAllSelected(){if(this.rowCount.total===0||!this.selectBy)return!1;const{callback:e}=se(this.selectBy);return this.selectScope==="all"?this.allRows.map(e).every(i=>this.selected.includes(i)):this.rows.map(e).every(r=>this.selected.includes(r))}}me=new WeakMap,Pe=new WeakMap,ke=new WeakMap,ye=new WeakMap,pe=new WeakMap,He=new WeakMap,Re=new WeakMap,xe=new WeakMap,Se=new WeakMap,Ce=new WeakMap,Ae=new WeakMap,Ne=new WeakMap,je=new WeakMap,Ee=new WeakMap,qe=new WeakMap,Be=new WeakMap,Oe=new WeakMap,Fe=new WeakMap,Te=new WeakMap;class It{constructor(e){u(this,"backup");u(this,"table");this.table=e,this.backup=[]}set(e,t,r={}){this.table.sort.id!==t&&(this.table.sort.direction=null),this.table.sort.direction===null||this.table.sort.direction==="desc"?this.asc(e,t,r):this.table.sort.direction==="asc"&&this.desc(e,t,r)}asc(e,t,{locales:r,options:i}={}){if(!e)return;const{callback:a,key:l}=se(e,t);this.table.sort={id:t,callback:a,direction:"asc",key:l},this.table.rawRows=[...this.table.rawRows].sort((c,h)=>{const[f,d]=[a(c),a(h)];return Ze.asc(f,d,r,i)}),this.save({id:t,callback:a,direction:"asc"}),this.table.setPage(1)}desc(e,t,{locales:r,options:i}={}){if(!e)return;const{callback:a,key:l}=se(e,t);this.table.sort={id:t,callback:a,direction:"desc",key:l},this.table.rawRows=[...this.table.rawRows].sort((c,h)=>{const[f,d]=[a(c),a(h)];return Ze.desc(f,d,r,i)}),this.save({id:t,callback:a,direction:"desc"}),this.table.setPage(1)}clear(){this.backup=[],this.table.sort={}}restore(){for(const{key:e,callback:t,direction:r,id:i}of this.backup){const a=e??t;this[r](a,i)}}save(e){if(this.backup=this.backup.filter(t=>t.id!==e.id),this.backup.length>=3){const[t,r,i]=this.backup;this.backup=[r,i,e]}else this.backup=[...this.backup,e]}}class Lt{constructor(e){u(this,"table");this.table=e}set(e,t,r=null,i){this.table.setPage(1);const{callback:a,key:l}=se(t,i),c={value:e,id:i,callback:a,check:r,key:l};this.table.filters=this.table.filters.filter(h=>h.id!==i),ot(e)&&this.table.filters.push(c)}unset(e){this.table.setPage(1),this.table.filters=this.table.filters.filter(t=>t.id!==e)}}class Dt{constructor(e){u(this,"table");this.table=e}set(e,t,r,i){this.table.setPage(1),this.table.queries=this.table.queries.filter(a=>a.id!==i),this.table.queries.push({path:e,value:t,check:r,id:i})}unset(e){this.table.setPage(1),this.table.queries=this.table.queries.filter(t=>t.id!==e)}}class Jt{constructor(e){u(this,"table");this.table=e}set(e){this.table.selected.includes(e)?this.table.selected=this.table.selected.filter(t=>t!==e):this.table.selected=[e,...this.table.selected]}all(e){const t=e==="currentPage"?this.table.rows:this.table.allRows,{callback:r}=se(this.table.selectBy),i=t.map(r);e==="currentPage"?this.table.isAllSelected?this.table.selected=this.table.selected.filter(a=>i.includes(a)===!1):this.table.selected=[...new Set([...i,...this.table.selected])]:this.table.isAllSelected?this.clear():this.table.selected=i}clear(){this.table.selected=[]}getRows(){const{callback:e}=se(this.table.selectBy);return this.table.rawRows.filter(t=>this.table.selected.includes(e(t)))}}class Vt{constructor(e){u(this,"table");this.table=e}goto(e){this.table.rowsPerPage&&e>=1&&e<=this.table.pageCount&&(this.table.currentPage=e,this.table.event.dispatch("change"))}previous(){this.goto(this.table.currentPage-1)}next(){this.goto(this.table.currentPage+1)}last(){this.goto(this.table.pageCount)}}class zt{constructor(e){u(this,"table");this.table=e}set(e,t){this.table.setPage(1),this.table.search={value:e,scope:t}}recursive(e,t){this.table.setPage(1),this.table.search={value:e,scope:t,isRecursive:!0}}regex(e,t){this.table.setPage(1),this.table.search={value:e,scope:t,check:_e.match}}clear(){this.table.setPage(1),this.table.search={value:""}}}var Me;class Qt{constructor(e,t){w(this,Me,A(""));u(this,"scope");u(this,"searchHandler");this.searchHandler=e,this.scope=t,this.cleanup()}get value(){return n(o(this,Me))}set value(e){m(o(this,Me),e,!0)}set(){this.searchHandler.set(this.value,this.scope)}init(e){return this.value=e,this.set(),this}recursive(){this.searchHandler.recursive(this.value,this.scope)}regex(){this.searchHandler.regex(this.value,this.scope)}clear(){this.value="",this.searchHandler.clear()}cleanup(){this.searchHandler.table.on("clearSearch",()=>this.clear())}}Me=new WeakMap;var We;class Kt{constructor(e,t,r){w(this,We,A(""));u(this,"id",Math.random().toString(36).substring(2,15));u(this,"filterHandler");u(this,"field");u(this,"check");this.filterHandler=e,this.field=t,this.check=r??_e.isLike,this.cleanup()}get value(){return n(o(this,We))}set value(e){m(o(this,We),e,!0)}set(e){this.filterHandler.set(this.value,this.field,e??this.check,this.id)}init(e){return this.value=e,this.set(),this}clear(){this.value="",this.filterHandler.unset(this.id)}cleanup(){this.filterHandler.table.on("clearFilters",()=>this.clear())}}We=new WeakMap;var Ie;class Ut{constructor(e){w(this,Ie,A(""));u(this,"id",Math.random().toString(36).substring(2,15));u(this,"queryHandler");u(this,"path",[]);u(this,"check");this.queryHandler=e,this.cleanup()}get value(){return n(o(this,Ie))}set value(e){m(o(this,Ie),e,!0)}from(e){return this.path=e,this}where(e){return this.check=e,this}set(e){e&&(this.value=e),this.queryHandler.set(this.path,this.value,this.check,this.id)}clear(){this.value="",this.queryHandler.unset(this.id)}cleanup(){this.queryHandler.table.on("clearFilters",()=>this.clear())}}Ie=new WeakMap;var Le;class Gt{constructor(e,t,r){w(this,Le,A(ne([])));u(this,"id",Math.random().toString(36).substring(2,15));u(this,"filterHandler");u(this,"collection");u(this,"field");u(this,"check");this.filterHandler=e,this.field=t,this.collection=[],this.check=r??_e.isEqualTo,this.cleanup()}get criteria(){return n(o(this,Le))}set criteria(e){m(o(this,Le),e,!0)}set(e,t){if(this.collection.find(r=>r.value===e)?this.collection=this.collection.filter(r=>r.value!==e):this.collection=[{value:e,check:t??this.check},...this.collection],this.collection.length===0)return this.clear();this.filterHandler.set(this.collection,this.field,_e.whereIn,this.id),this.criteria=this.collection.map(r=>r.value)}clear(){this.collection=[],this.criteria=[],this.filterHandler.unset(this.id)}cleanup(){this.filterHandler.table.on("clearFilters",()=>this.clear())}}Le=new WeakMap;class Xt{constructor(e,t){u(this,"callback");u(this,"precision");u(this,"table");this.table=e,this.callback=se(t).callback}distinct(e){const r=this.table.allRows.map(a=>this.callback(a)).reduce((a,l)=>{if(Array.isArray(l)){for(const c of l)a[c]=(a[c]??0)+1;return a}return a[l]=(a[l]??0)+1,a},{}),i=Object.entries(r).map(([a,l])=>({value:a,count:l}));if(e!=null&&e.sort){const[a,l]=e.sort;a==="count"&&i.sort((c,h)=>Ze.asc(c.value,h.value)),i.sort((c,h)=>Ze[l](c[a],h[a]))}return i}avg(e){if(this.precision=(e==null?void 0:e.precision)??2,this.table.allRows.length===0)return 0;const t=this.table.allRows.map(r=>this.callback(r)).filter(Boolean);return this.round(t.reduce((r,i)=>r+i,0)/t.length)}sum(e){this.precision=(e==null?void 0:e.precision)??2;const t=this.table.allRows.map(r=>this.callback(r));return this.round(t.reduce((r,i)=>r+i,0))}median(e){this.precision=(e==null?void 0:e.precision)??2;const t=[...this.table.allRows.map(i=>this.callback(i))].sort((i,a)=>i-a).filter(Boolean);if(t.length===0)return null;const r=Math.floor(t.length/2);return t.length%2?t[r]:this.round((t[r-1]+t[r])/2)}bounds(){const t=this.table.allRows.map(r=>this.callback(r)).filter(Boolean);return t.length===0?[null,null]:[Math.min(...t),Math.max(...t)]}round(e){return console.log(e,typeof e),Number(e.toFixed(this.precision))}}var De,Je;class Yt{constructor(e,t,r){w(this,De,x(()=>this.createDirection()));w(this,Je,x(()=>this.createIsActive()));u(this,"id",Math.random().toString(36).substring(2,15));u(this,"sortHandler");u(this,"field");u(this,"params");this.sortHandler=e,this.field=t,this.params=r??{}}get direction(){return n(o(this,De))}set direction(e){m(o(this,De),e)}get isActive(){return n(o(this,Je))}set isActive(e){m(o(this,Je),e)}set(){this.sortHandler.set(this.field,this.id,this.params)}init(e){return e?(this[e](),this):this}asc(){this.sortHandler.asc(this.field,this.id,this.params)}desc(){this.sortHandler.desc(this.field,this.id,this.params)}clear(){this.sortHandler.clear()}createIsActive(){var e;return this.id===((e=this.sortHandler.table.sort)==null?void 0:e.id)}createDirection(){var e;return this.isActive===!1?null:(e=this.sortHandler.table.sort)==null?void 0:e.direction}}De=new WeakMap,Je=new WeakMap;class Zt{constructor(e){u(this,"table");this.table=e}download(e){const t=this.get(),r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}get(){const e=this.getRows();return e.unshift(this.getHeader().join(",")),e.join(`\r
`)}getRows(){return this.table.allRows.map(e=>Object.entries(e).map(([r,i])=>i===null?"":typeof i=="number"?i:`"${i}"`).join(","))}getHeader(){const[e]=this.table.allRows;return Object.entries(e).map(([t,r])=>`"${t}"`)}}var Ve,ze,Qe,Ke;class $t{constructor(e){w(this,Ve,A(""));w(this,ze,x(()=>this.createRecords()));w(this,Qe,A([]));w(this,Ke,A(""));this.rawRecords=e}get value(){return n(o(this,Ve))}set value(e){m(o(this,Ve),e,!0)}get records(){return n(o(this,ze))}set records(e){m(o(this,ze),e)}get rawRecords(){return n(o(this,Qe))}set rawRecords(e){m(o(this,Qe),e)}get filter(){return n(o(this,Ke))}set filter(e){m(o(this,Ke),e,!0)}set(){this.filter=this.value}createRecords(){return ot(this.filter)?this.rawRecords.filter(e=>oe(e,this.filter)):this.rawRecords}}Ve=new WeakMap,ze=new WeakMap,Qe=new WeakMap,Ke=new WeakMap;class es extends Wt{constructor(t=[],r={rowsPerPage:null}){super(t,r);u(this,"i18n");u(this,"view");u(this,"sortHandler");u(this,"filterHandler");u(this,"queryHandler");u(this,"selectHandler");u(this,"pageHandler");u(this,"searchHandler");this.translate(r.i18n),this.sortHandler=new It(this),this.filterHandler=new Lt(this),this.queryHandler=new Dt(this),this.selectHandler=new Jt(this),this.pageHandler=new Vt(this),this.searchHandler=new zt(this)}setRows(t){var i;const r=((i=this.element)==null?void 0:i.scrollTop)??0;this.rawRows=t,_t(()=>{this.event.dispatch("change"),this.sortHandler.restore(),this.element&&setTimeout(()=>this.element.scrollTop=r,2)})}setRowsPerPage(t){this.rowsPerPage=t,this.setPage(1)}setPage(t){switch(t){case"previous":return this.pageHandler.previous();case"next":return this.pageHandler.next();case"last":return this.pageHandler.last();default:return this.pageHandler.goto(t)}}createSearch(t){return new Qt(this.searchHandler,t)}clearSearch(){this.searchHandler.clear(),this.event.dispatch("clearSearch"),this.setPage(1)}createRecordFilter(t){return new $t(t)}createSort(t,r){return new Yt(this.sortHandler,t,r)}clearSort(){this.sortHandler.clear()}clearFilters(){this.filters=[],this.event.dispatch("clearFilters"),this.setPage(1)}createAdvancedFilter(t,r){return new Gt(this.filterHandler,t,r)}createFilter(t,r){return new Kt(this.filterHandler,t,r)}createQuery(){return new Ut(this.queryHandler)}select(t){this.selectHandler.set(t)}selectAll(t={}){this.selectScope=t.scope==="all"?"all":"currentPage",this.selectHandler.all(this.selectScope)}getSelectedRows(){return this.selectHandler.getRows()}clearSelection(){this.selectHandler.clear()}on(t,r){this.event.add(t,r)}createCalculation(t){return new Xt(this,t)}createCSV(){return new Zt(this)}createView(t){return this.view=new Ht(this,t),this.view}getView(){return this.view}translate(t){this.i18n={search:"Search...",show:"Show",entries:"entries",filter:"Filter",rowCount:"Showing {start} to {end} of {total} entries",noRows:"No entries found",previous:"Previous",next:"Next",...t}}}var ts=(s,e,t)=>e(t()),ss=y("<td><!></td>"),rs=y('<tr class="expandable-row"><td><div><!></div></td></tr>'),is=y("<tr></tr> <!>",1);function as(s,e){re(e,!0);const t=()=>$e(jt,"$activeTable",a),r=()=>$e(At,"$activeRow",a),i=()=>$e(Et,"$activeComponent",a),[a,l]=yt();let c=P(e,"cellOverides",19,()=>({})),h=P(e,"columns",19,()=>[]),f=P(e,"index",19,()=>-2),d=P(e,"row",19,()=>({})),H=P(e,"tableName",3,""),p=P(e,"isClickable",3,!1),R=P(e,"expandable",3,!1),K=P(e,"rowClickHandler",3,()=>{});function E(S){Nt({row:S.conceptPath||S.dataset_id,table:H()}),K()(S)}let q=x(()=>{var S;return t()===H()&&(r()===((S=d())==null?void 0:S.conceptPath)||r()===d().dataset_id)});var $=is(),X=U($);X.__click=[ts,E,d],be(X,21,h,ve,(S,B,te)=>{var D=ss(),ue=_(D);{var de=O=>{const M=x(()=>c()[n(B).dataElement]);var k=ae(),v=U(k);{let C=x(()=>({tableName:H(),index:f(),row:d(),cell:d()[n(B).dataElement]}));st(v,()=>n(M),(I,L)=>{L(I,{get data(){return n(C)}})})}b(O,k)},Y=O=>{var M=it();N(()=>Z(M,d()[n(B).dataElement]?d()[n(B).dataElement]:"")),b(O,M)};T(ue,O=>{c()[n(B).dataElement]?O(de):O(Y,!1)})}g(D),N((O,M,k)=>{z(D,"id",`row-${O??""}-col-${M??""}`),G(D,1,k)},[()=>f().toString(),()=>te.toString(),()=>{var O,M;return we((M=(O=n(B))==null?void 0:O.class)!=null&&M.includes("text-center")?"text-center":"")}]),b(S,D)}),g(X);var ee=W(X,2);{var Ue=S=>{var B=rs(),te=_(B),D=_(te),ue=_(D);{var de=Y=>{const O=x(i);var M=ae(),k=U(M);st(k,()=>n(O),(v,C)=>{C(v,{get data(){return d()}})}),b(Y,M)};T(ue,Y=>{i()&&Y(de)})}g(D),g(te),g(B),N(Y=>{z(B,"id",`active-row-${Y??""}`),z(te,"colspan",h().length)},[()=>f().toString()]),St(3,D,()=>Ct,()=>({axis:"y"})),b(S,B)};T(ee,S=>{R()&&n(q)&&r()&&S(Ue)})}N(S=>{z(X,"id",`row-${S??""}`),G(X,1,we(p()?"cursor-pointer":"")),z(X,"tabindex",p()?0:-1)},[()=>f().toString()]),b(s,$),ie(),l()}he(["click"]);var ls=y('<th><input type="text" class="input text-sm w-full" placeholder="Filter"/></th>');function ns(s,e){re(e,!0);let t=P(e,"class",3,"");const r=e.handler.createFilter(e.filterBy);let i;const a=()=>{r.set(),e.handler instanceof Rt&&(clearTimeout(i),i=setTimeout(()=>{e.handler.invalidate()},400))};var l=ls(),c=_(l);nt(c),c.__input=a,g(l),N(()=>G(l,1,we(t()))),ct(c,()=>r.value,h=>r.value=h),b(s,l),ie()}he(["input"]);var cs=(s,e)=>e.set(),os=y('<i class="fa-solid fa-sort-up"></i>'),hs=y('<i class="fa-solid fa-sort-down"></i>'),us=y('<i class="fa-solid fa-sort"></i>'),ds=y("<th><!> <!></th>");function fs(s,e){re(e,!0);let t=P(e,"class",3,"");const r=e.handler.createSort(e.orderBy);var i=ds();let a;i.__click=[cs,r];var l=_(i);lt(l,()=>e.children??at);var c=W(l,2);{var h=d=>{var H=ae(),p=U(H);{var R=E=>{var q=os();b(E,q)},K=E=>{var q=hs();b(E,q)};T(p,E=>{r.direction==="asc"?E(R):E(K,!1)})}b(d,H)},f=d=>{var H=us();b(d,H)};T(c,d=>{r.isActive?d(h):d(f,!1)})}g(i),N(d=>a=G(i,1,`cursor-pointer select-none align-bottom ${t()??""}`,null,a,d),[()=>({active:r.isActive})]),b(s,i),ie()}he(["click"]);const gs=(s,e,t)=>{xt(e.tableName,t().rowsPerPage),t().setPage(1)};var bs=y("<option> </option>"),vs=y('<aside><label class="flex place-items-center">Show <select id="row-count-select" class="ml-2 rounded-xl" aria-label="Rows per page"></select></label></aside>');function ws(s,e){re(e,!0);let t=P(e,"handler",7),r=P(e,"options",19,()=>[5,10,20,50]),i=P(e,"class",3,"");var a=vs(),l=_(a),c=W(_(l));c.__change=[gs,e,t],be(c,21,r,ve,(h,f)=>{var d=bs(),H=_(d,!0);g(d);var p={};N(()=>{Z(H,n(f)),p!==(p=n(f))&&(d.value=(d.__value=n(f))??"")}),b(h,d)}),g(c),g(l),g(a),N(()=>G(a,1,we(i()))),kt(c,()=>t().rowsPerPage,h=>t().rowsPerPage=h),b(s,a),ie()}he(["change"]);var _s=y("<b> </b> - <b> </b> / <b> </b>",1),ms=y('<aside class="text-sm leading-8 mr-6"><!></aside>');function Ps(s,e){re(e,!0);let t=x(()=>e.handler.rowCount),r=x(()=>n(t).start),i=x(()=>n(t).end),a=x(()=>n(t).total);var l=ms(),c=_(l);{var h=f=>{var d=_s(),H=U(d),p=_(H,!0);g(H);var R=W(H,2),K=_(R,!0);g(R);var E=W(R,2),q=_(E,!0);g(E),N(()=>{Z(p,n(r)),Z(K,n(i)),Z(q,n(a))}),b(f,d)};T(c,f=>{n(a)>0&&f(h)})}g(l),b(s,l),ie()}var ks=(s,e)=>e("previous"),ys=y('<button type="button"> </button>'),ps=(s,e)=>e("next"),Hs=y('<button type="button" aria-label="Previous" title="Previous"><i class="fa-solid fa-arrow-left"></i></button> <!> <button type="button" aria-label="Next" title="Next"><i class="fa-solid fa-arrow-right"></i></button>',1),Rs=y('<section class="pagination flex gap-0" aria-label="pagination"><!></section>');function xs(s,e){re(e,!0);const t=l=>{e.handler.setPage(l)};var r=Rs(),i=_(r);{var a=l=>{var c=Hs(),h=U(c);h.__click=[ks,t];var f=W(h,2);be(f,17,()=>e.handler.pagesWithEllipsis,ve,(H,p)=>{var R=ys();R.__click=function(...q){var $;($=n(p)?()=>t(n(p)):()=>{})==null||$.apply(this,q)};let K;var E=_(R,!0);g(R),N(q=>{z(R,"aria-label",n(p)?"Page "+n(p):"Ellipses"),z(R,"title",n(p)?"Page "+n(p):"Ellipses"),R.disabled=n(p)===null,z(R,"aria-current",e.handler.currentPage===n(p)?"page":!1),K=G(R,1,"",null,K,q),Z(E,n(p)??"...")},[()=>({active:e.handler.currentPage===n(p)})]),b(H,R)});var d=W(f,2);d.__click=[ps,t],N(()=>{h.disabled=e.handler.currentPage===1,d.disabled=e.handler.currentPage===e.handler.pages.length}),b(l,c)};T(i,l=>{(e.handler.pagesWithEllipsis!==void 0||e.handler.pages!==void 0)&&l(a)})}g(r),b(s,r),ie()}he(["click"]);var Ss=y('<input class="input text-sm sm:w-64 w-36" type="search" placeholder="Search..."/>');function Cs(s,e){re(e,!0);const t=e.handler.createSearch();var r=Ss();nt(r),r.__input=()=>t.set(),ct(r,()=>t.value,i=>t.value=i),b(s,r),ie()}he(["input"]);var As=y('<div class="flex-auto"><h2 class="my-2"> </h2></div>'),Ns=y('<div class="flex-none"><!></div>'),js=y("<header><!> <!> <!></header>"),Es=y("<th> </th>"),qs=y('<tr><td class="text-center py-8"><div class="flex justify-center items-center"><!></div></td></tr>'),Bs=y("<tr><td>No entries found.</td></tr>"),Os=y('<footer class="flex justify-between mt-1"><!> <div class="flex justify-end gap-4"><!> <!></div></footer>'),Fs=y('<div class="table-wrap space-y-1"><!> <table><thead class="svelte-buj8sd"><tr></tr></thead><tbody><!></tbody></table> <!></div>');function Zs(s,e){re(e,!0);let t=P(e,"isLoading",11,!1),r=P(e,"searchable",3,!1),i=P(e,"title",3,""),a=P(e,"fullWidth",3,!1),l=P(e,"options",19,()=>[5,10,20,50,100]),c=P(e,"columns",19,()=>[]),h=P(e,"cellOverides",19,()=>({})),f=P(e,"tableAuto",3,!0),d=P(e,"stickyHeader",3,!1),H=P(e,"showPagination",3,!0),p=P(e,"class",3,""),R=P(e,"isClickable",3,!1),K=P(e,"expandable",3,!1),E=P(e,"rowClickHandler",3,()=>{});mt(()=>{H()||(e.handler instanceof es?e.handler.setRowsPerPage(e.handler.allRows.length):e.handler.setRowsPerPage(e.handler.totalRows))});var q=Fs(),$=_(q);{var X=k=>{var v=js(),C=_(v);{var I=j=>{var V=As(),Q=_(V),fe=_(Q,!0);g(Q),g(V),N(()=>Z(fe,i())),b(j,V)};T(C,j=>{i()&&j(I)})}var L=W(C,2);lt(L,()=>e.tableActions??at);var J=W(L,2);{var F=j=>{var V=Ns(),Q=_(V);Cs(Q,{get handler(){return e.handler}}),g(V),b(j,V)};T(J,j=>{r()&&j(F)})}g(v),N(()=>G(v,1,`flex items-center ${i()||e.tableActions?"justify-between":"justify-end"} gap-4`)),b(k,v)};T($,k=>{(i()||r()||e.tableActions)&&k(X)})}var ee=W($,2);let Ue;var S=_(ee),B=_(S);let te;be(B,21,c,ve,(k,v)=>{var C=ae(),I=U(C);{var L=F=>{fs(F,{get handler(){return e.handler},get orderBy(){return n(v).dataElement},get class(){return n(v).class},children:(j,V)=>{Pt();var Q=it();N(()=>Z(Q,n(v).label)),b(j,Q)},$$slots:{default:!0}})},J=F=>{var j=ae(),V=U(j);{var Q=le=>{ns(le,{get handler(){return e.handler},get class(){return n(v).class},get filterBy(){return n(v).dataElement}})},fe=le=>{var Ge=Es(),ut=_(Ge,!0);g(Ge),N(()=>{G(Ge,1,we(n(v).class),"svelte-buj8sd"),Z(ut,n(v).label)}),b(le,Ge)};T(V,le=>{n(v).filter?le(Q):le(fe,!1)},!0)}b(F,j)};T(I,F=>{n(v).sort?F(L):F(J,!1)})}b(k,C)}),g(B),g(S);var D=W(S),ue=_(D);{var de=k=>{var v=qs(),C=_(v),I=_(C),L=_(I);qt(L,{ring:!0,size:"small",color:"primary"}),g(I),g(C),g(v),N(()=>z(C,"colspan",c().length)),b(k,v)},Y=k=>{var v=ae(),C=U(v);{var I=J=>{var F=ae(),j=U(F);be(j,17,()=>e.handler.rows,ve,(V,Q,fe)=>{as(V,{get tableName(){return e.tableName},get cellOverides(){return h()},get columns(){return c()},index:fe,get row(){return n(Q)},get rowClickHandler(){return E()},get isClickable(){return R()},get expandable(){return K()}})}),b(J,F)},L=J=>{var F=Bs(),j=_(F);g(F),N(()=>z(j,"colspan",c().length)),b(J,F)};T(C,J=>{e.handler.rows.length>0?J(I):J(L,!1)},!0)}b(k,v)};T(ue,k=>{t()?k(de):k(Y,!1)})}g(D),g(ee);var O=W(ee,2);{var M=k=>{var v=Os(),C=_(v);Ps(C,{get handler(){return e.handler}});var I=W(C,2),L=_(I);ws(L,{get tableName(){return e.tableName},get handler(){return e.handler},get options(){return l()}});var J=W(L,2);xs(J,{get handler(){return e.handler}}),g(I),g(v),b(k,v)};T(O,k=>{H()&&k(M)})}g(q),N((k,v)=>{z(ee,"id",`${e.tableName??""}-table`),z(ee,"data-testid",`${e.tableName??""}-table`),Ue=G(ee,1,`table table-${f()?"auto":"fixed"} ${p()??""}`,"svelte-buj8sd",Ue,k),te=G(B,1,"",null,te,v)},[()=>({"w-max":a(),clickable:R()}),()=>({"sticky-header":d()})]),b(s,q),ie()}export{Zs as R,es as T,Ot as s};
