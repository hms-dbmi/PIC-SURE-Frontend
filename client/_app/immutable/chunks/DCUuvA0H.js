import{s as le,e as m,a as x,c as g,b as N,g as S,l as O,f as y,m as _,u as T,T as ae,i as V,h as c,W as Q,v as M,w as ne,n as Y,x as ie,y as se,t as re,d as oe,j as ue,X as ce}from"./CseAM1pm.js";import{e as Z}from"./Ba1MNdbe.js";import{S as pe,i as fe}from"./CUD_i9MT.js";import{g as he}from"./Dx2jxSvH.js";import{g as de}from"./xidBtgCA.js";import"./Cd9QPAjN.js";import{u as ve,a as _e}from"./DRAZuV9j.js";function $(o,e,l){const u=o.slice();return u[4]=e[l][0],u[10]=e[l][1],u}function ee(o){let e,l,u="UUID:",a,i,s;return{c(){e=m("label"),l=m("span"),l.textContent=u,a=x(),i=m("input"),this.h()},l(t){e=g(t,"LABEL",{class:!0});var f=N(e);l=g(f,"SPAN",{"data-svelte-h":!0}),O(l)!=="svelte-xruxbf"&&(l.textContent=u),a=S(f),i=g(f,"INPUT",{type:!0,class:!0}),f.forEach(y),this.h()},h(){var t;_(i,"type","text"),_(i,"class","input"),i.value=s=(t=o[0])==null?void 0:t.uuid,i.disabled=!0,_(e,"class","label svelte-1pdeqr")},m(t,f){V(t,e,f),c(e,l),c(e,a),c(e,i)},p(t,f){var b;f&1&&s!==(s=(b=t[0])==null?void 0:b.uuid)&&i.value!==s&&(i.value=s)},d(t){t&&y(e)}}}function te(o){let e,l=o[4]+"",u,a;return{c(){e=m("option"),u=re(l),this.h()},l(i){e=g(i,"OPTION",{});var s=N(e);u=oe(s,l),s.forEach(y),this.h()},h(){e.__value=a=o[10],T(e,e.__value)},m(i,s){V(i,e,s),c(e,u)},p(i,s){s&2&&l!==(l=i[4]+"")&&ue(u,l),s&2&&a!==(a=i[10])&&(e.__value=a,T(e,e.__value))},d(i){i&&y(e)}}}function me(o){var K;let e,l,u,a,i="Name:",s,t,f,b,E,D="Description:",U,r,B,q,k,W="Application:",j,C,P,X="Select an application",F,w,G='<button type="submit" class="btn variant-ghost-primary hover:variant-filled-primary">Save</button> <a href="/admin/configuration" class="btn variant-ghost-secondary hover:variant-filled-secondary">Cancel</a>',H,J,v=((K=o[0])==null?void 0:K.uuid)&&ee(o),I=Z(o[1]),h=[];for(let n=0;n<I.length;n+=1)h[n]=te($(o,I,n));return{c(){e=m("form"),v&&v.c(),l=x(),u=m("label"),a=m("span"),a.textContent=i,s=x(),t=m("input"),f=x(),b=m("label"),E=m("span"),E.textContent=D,U=x(),r=m("input"),B=x(),q=m("label"),k=m("span"),k.textContent=W,j=x(),C=m("select"),P=m("option"),P.textContent=X;for(let n=0;n<h.length;n+=1)h[n].c();F=x(),w=m("div"),w.innerHTML=G,this.h()},l(n){e=g(n,"FORM",{class:!0});var p=N(e);v&&v.l(p),l=S(p),u=g(p,"LABEL",{class:!0});var L=N(u);a=g(L,"SPAN",{"data-svelte-h":!0}),O(a)!=="svelte-m2peuz"&&(a.textContent=i),s=S(L),t=g(L,"INPUT",{type:!0,class:!0,minlength:!0,maxlength:!0}),L.forEach(y),f=S(p),b=g(p,"LABEL",{class:!0});var d=N(b);E=g(d,"SPAN",{"data-svelte-h":!0}),O(E)!=="svelte-n5lbfe"&&(E.textContent=D),U=S(d),r=g(d,"INPUT",{type:!0,class:!0,minlength:!0,maxlength:!0}),d.forEach(y),B=S(p),q=g(p,"LABEL",{class:!0});var A=N(q);k=g(A,"SPAN",{"data-svelte-h":!0}),O(k)!=="svelte-u1sl8e"&&(k.textContent=W),j=S(A),C=g(A,"SELECT",{class:!0});var z=N(C);P=g(z,"OPTION",{"data-svelte-h":!0}),O(P)!=="svelte-e5qj4t"&&(P.textContent=X);for(let R=0;R<h.length;R+=1)h[R].l(z);z.forEach(y),A.forEach(y),F=S(p),w=g(p,"DIV",{"data-svelte-h":!0}),O(w)!=="svelte-1u8xx9t"&&(w.innerHTML=G),p.forEach(y),this.h()},h(){_(t,"type","text"),_(t,"class","input"),t.required=!0,_(t,"minlength","1"),_(t,"maxlength","255"),_(u,"class","label required svelte-1pdeqr"),_(r,"type","text"),_(r,"class","input"),r.required=!0,_(r,"minlength","1"),_(r,"maxlength","255"),_(b,"class","label required svelte-1pdeqr"),P.__value="",T(P,P.__value),P.disabled=!0,_(C,"class","select"),C.required=!0,o[3]===void 0&&ae(()=>o[8].call(C)),_(q,"class","label required svelte-1pdeqr"),_(e,"class","grid gap-4 my-3")},m(n,p){V(n,e,p),v&&v.m(e,null),c(e,l),c(e,u),c(u,a),c(u,s),c(u,t),T(t,o[4]),c(e,f),c(e,b),c(b,E),c(b,U),c(b,r),T(r,o[2]),c(e,B),c(e,q),c(q,k),c(q,j),c(q,C),c(C,P);for(let L=0;L<h.length;L+=1)h[L]&&h[L].m(C,null);Q(C,o[3],!0),c(e,F),c(e,w),H||(J=[M(t,"input",o[6]),M(r,"input",o[7]),M(C,"change",o[8]),M(e,"submit",ne(o[5]))],H=!0)},p(n,[p]){var L;if((L=n[0])!=null&&L.uuid?v?v.p(n,p):(v=ee(n),v.c(),v.m(e,l)):v&&(v.d(1),v=null),p&16&&t.value!==n[4]&&T(t,n[4]),p&4&&r.value!==n[2]&&T(r,n[2]),p&2){I=Z(n[1]);let d;for(d=0;d<I.length;d+=1){const A=$(n,I,d);h[d]?h[d].p(A,p):(h[d]=te(A),h[d].c(),h[d].m(C,null))}for(;d<h.length;d+=1)h[d].d(1);h.length=I.length}p&10&&Q(C,n[3])},i:Y,o:Y,d(n){n&&y(e),v&&v.d(),ie(h,n),H=!1,se(J)}}}function ge(o,e,l){const u=de();let{privilege:a=void 0}=e,{applicationList:i}=e,s=a?a.name:"",t=a?a.description:"",f=a?a.application:"";async function b(){let r={name:s,description:t,application:f};try{a?(r={...r,uuid:a.uuid},await ve(r)):await _e(r),u.trigger({message:`Successfully saved ${r&&"new "}privilege '${s}'`,background:"variant-filled-success"}),he("/admin/configuration")}catch(B){console.error(B),u.trigger({message:`An error occured while saving ${r&&"new "}privilege '${s}'`,background:"variant-filled-error"})}}function E(){s=this.value,l(4,s)}function D(){t=this.value,l(2,t)}function U(){f=ce(this),l(3,f),l(1,i)}return o.$$set=r=>{"privilege"in r&&l(0,a=r.privilege),"applicationList"in r&&l(1,i=r.applicationList)},[a,i,t,f,s,b,E,D,U]}class xe extends pe{constructor(e){super(),fe(this,e,ge,me,le,{privilege:0,applicationList:1})}}export{xe as P};
