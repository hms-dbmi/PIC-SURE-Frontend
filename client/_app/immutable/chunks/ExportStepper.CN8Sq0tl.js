import{s as Ee,J as Ie,e as g,a as T,c as k,b as E,g as A,f as p,m as b,i as I,h as _,K as Te,L as Ae,M as Pe,k as fe,v as ke,N as Lt,H as We,I as Xe,P as dt,R as Bt,t as U,d as F,E as Ye,j as re,Q as be,q as ae,F as Mt,u as $e,a3 as jt,n as j,a6 as Ut,l as H,O as ue,w as mt,o as Ft,U as Je,Y as Be,Z as Me}from"./scheduler.bui7uCNy.js";import{h as Se,u as Ht}from"./await_block.B6WJ5gpV.js";import{S as ye,i as we,t as C,g as ne,a as D,b as se,h as pt,c as _t,d as V,e as R,m as L,f as B,j as je}from"./index.CNwEczq-.js";import{p as ve}from"./User.C8JF3DW-.js";import{b as qt}from"./index.Bt-Xh7oU.js";import{e as Ke}from"./each.VHlBgARd.js";import{a as xe}from"./index.BufUHdI9.js";import{w as Ot,g as zt}from"./entry.DxzR7bMM.js";import{A as Fe}from"./AngleButton.DmvF9EC0.js";import{T as Gt}from"./Table.DI27nJGp.js";import{E as ht}from"./Export.Bpb4nVSg.js";import{f as vt,t as bt}from"./Filter.C0g4eJgs.js";import{U as gt}from"./UserToken.CFUeaa4z.js";import{C as Qt}from"./CopyButton.rvclSSMp.js";import{g as kt}from"./stores.CxgLQ31Y.js";import{g as Wt}from"./stores.De0gTmA3.js";import"./ProgressBar.svelte_svelte_type_style_lang.CGDEO2C7.js";import{P as He}from"./ProgressRadial.CbTPnjvT.js";import{T as Xt,a as Ue,C as $t,c as Ne}from"./codeBlocks.CRyjobxV.js";import{E as qe}from"./ErrorAlert.VXgRa8sz.js";import{C as Ze}from"./CardButton.Br5wRS_G.js";import{Q as Yt}from"./QueryBuilder.DvtNy6Ht.js";import{b as et,a as Jt,f as Ve,s as Kt}from"./configuration.CsqyQUvi.js";import{s as Zt}from"./dictionary.C4Dp8wEd.js";import{v as el}from"./v4.DvF23Exx.js";const me=Ot({current:0,total:0});function tt(o,e,t){const l=o.slice();return l[10]=e[t],l}function lt(o){let e,t,l,r,a=Ke(Array.from(Array(o[0].total).keys())),n=[];for(let s=0;s<a.length;s+=1)n[s]=rt(tt(o,a,s));return{c(){e=g("header");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=k(s,"HEADER",{class:!0});var i=E(e);for(let c=0;c<n.length;c+=1)n[c].l(i);i.forEach(p),this.h()},h(){b(e,"class","stepper-header flex items-center border-t mt-[15px] mb-7 border-surface-400-500-token gap-4")},m(s,i){I(s,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);r=!0},p(s,i){if(i&3){a=Ke(Array.from(Array(s[0].total).keys()));let c;for(c=0;c<a.length;c+=1){const d=tt(s,a,c);n[c]?n[c].p(d,i):(n[c]=rt(d),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=a.length}},i(s){r||(s&&dt(()=>{r&&(l&&l.end(1),t=pt(e,xe,{duration:100}),t.start())}),r=!0)},o(s){t&&t.invalidate(),s&&(l=_t(e,xe,{duration:100})),r=!1},d(s){s&&p(e),Bt(n,s),s&&l&&l.end()}}}function rt(o){let e,t,l=(o[1](o[10])?`Step ${o[10]+1}`:o[10]+1)+"",r,a,n;return{c(){e=g("div"),t=g("span"),r=U(l),n=T(),this.h()},l(s){e=k(s,"DIV",{class:!0});var i=E(e);t=k(i,"SPAN",{class:!0});var c=E(t);r=F(c,l),c.forEach(p),n=A(i),i.forEach(p),this.h()},h(){b(t,"class",a="badge text-sm "+(o[1](o[10])?"variant-filled-primary":"variant-filled-surface")),b(e,"class","stepper-header-step -mt-[15px] transition-all duration-300"),Ye(e,"flex-1",o[1](o[10]))},m(s,i){I(s,e,i),_(e,t),_(t,r),_(e,n)},p(s,i){i&3&&l!==(l=(s[1](s[10])?`Step ${s[10]+1}`:s[10]+1)+"")&&re(r,l),i&3&&a!==(a="badge text-sm "+(s[1](s[10])?"variant-filled-primary":"variant-filled-surface"))&&b(t,"class",a),i&3&&Ye(e,"flex-1",s[1](s[10]))},d(s){s&&p(e)}}}function tl(o){let e,t,l,r,a,n=o[0].total&&lt(o);const s=o[5].default,i=Ie(s,o,o[4],null);return{c(){e=g("div"),n&&n.c(),t=T(),l=g("div"),i&&i.c(),this.h()},l(c){e=k(c,"DIV",{class:!0,"data-testid":!0});var d=E(e);n&&n.l(d),t=A(d),l=k(d,"DIV",{class:!0});var f=E(l);i&&i.l(f),f.forEach(p),d.forEach(p),this.h()},h(){b(l,"class","stepper-content"),b(e,"class",r="stepper space-y-4 "+(o[2].class??"")),b(e,"data-testid","stepper")},m(c,d){I(c,e,d),n&&n.m(e,null),_(e,t),_(e,l),i&&i.m(l,null),a=!0},p(c,[d]){c[0].total?n?(n.p(c,d),d&1&&C(n,1)):(n=lt(c),n.c(),C(n,1),n.m(e,t)):n&&(ne(),D(n,1,1,()=>{n=null}),se()),i&&i.p&&(!a||d&16)&&Te(i,s,c,c[4],a?Pe(s,c[4],d,null):Ae(c[4]),null),(!a||d&4&&r!==(r="stepper space-y-4 "+(c[2].class??"")))&&b(e,"class",r)},i(c){a||(C(n),C(i,c),a=!0)},o(c){D(n),D(i,c),a=!1},d(c){c&&p(e),n&&n.d(),i&&i.d(c)}}}function ll(o,e,t){let l,r;fe(o,me,u=>t(0,r=u));let{$$slots:a={},$$scope:n}=e,{buttonCompleteLabel:s=""}=e;ke("buttonCompleteLabel",s),ke("state",me);const i=Lt();async function c(u){await new Promise(h=>setTimeout(h)),!u&&(i("next",{step:r.current,state:r}),be(me,r.current++,r))}function d(){i("back",{step:r.current,state:r}),be(me,r.current=r.current===1?0:r.current-1,r)}function f(u,h){h||i("complete",{step:u,state:r})}return ke("onBack",d),ke("onNext",c),ke("onComplete",f),o.$$set=u=>{t(2,e=We(We({},e),Xe(u))),"buttonCompleteLabel"in u&&t(3,s=u.buttonCompleteLabel),"$$scope"in u&&t(4,n=u.$$scope)},o.$$.update=()=>{o.$$.dirty&1&&t(1,l=u=>u===r.current)},e=Xe(e),[r,l,e,s,n,a]}class rl extends ye{constructor(e){super(),we(this,e,ll,tl,Ee,{buttonCompleteLabel:3})}}const al=o=>({}),at=o=>({}),nl=o=>({}),nt=o=>({});function st(o){let e,t,l,r,a,n;const s=o[9].header,i=Ie(s,o,o[13],nt),c=o[9].default,d=Ie(c,o,o[13],null),f=d||sl(o);let u=o[6].total>1&&ot(o);return{c(){e=g("div"),t=g("header"),i&&i.c(),l=T(),r=g("div"),f&&f.c(),a=T(),u&&u.c(),this.h()},l(h){e=k(h,"DIV",{class:!0,"data-testid":!0});var v=E(e);t=k(v,"HEADER",{class:!0});var w=E(t);i&&i.l(w),w.forEach(p),l=A(v),r=k(v,"DIV",{class:!0});var m=E(r);f&&f.l(m),m.forEach(p),a=A(v),u&&u.l(v),v.forEach(p),this.h()},h(){b(t,"class","step-header text-2xl font-bold"),b(r,"class","step-content space-y-4 px-2"),b(e,"class","step space-y-4"),b(e,"data-testid","step-"+(o[7]+1))},m(h,v){I(h,e,v),_(e,t),i&&i.m(t,null),_(e,l),_(e,r),f&&f.m(r,null),_(e,a),u&&u.m(e,null),n=!0},p(h,v){i&&i.p&&(!n||v&8192)&&Te(i,s,h,h[13],n?Pe(s,h[13],v,nl):Ae(h[13]),nt),d&&d.p&&(!n||v&8192)&&Te(d,c,h,h[13],n?Pe(c,h[13],v,null):Ae(h[13]),null),h[6].total>1?u?(u.p(h,v),v&64&&C(u,1)):(u=ot(h),u.c(),C(u,1),u.m(e,null)):u&&(ne(),D(u,1,1,()=>{u=null}),se())},i(h){n||(C(i,h),C(f,h),C(u),n=!0)},o(h){D(i,h),D(f,h),D(u),n=!1},d(h){h&&p(e),i&&i.d(h),f&&f.d(h),u&&u.d()}}}function sl(o){let e,t=o[7]+1+"",l,r;return{c(){e=U("(Step "),l=U(t),r=U(" Content)")},l(a){e=F(a,"(Step "),l=F(a,t),r=F(a," Content)")},m(a,n){I(a,e,n),I(a,l,n),I(a,r,n)},p:j,d(a){a&&(p(e),p(l),p(r))}}}function ot(o){let e,t,l,r,a,n,s,i,c;const d=[cl,il,ol],f=[];function u(m,$){return m[8].navigation?0:m[7]!==0?1:2}t=u(o),l=f[t]=d[t](o);const h=[dl,ul],v=[];function w(m,$){return m[7]<m[6].total-1?0:1}return a=w(o),n=v[a]=h[a](o),{c(){e=g("div"),l.c(),r=T(),n.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var $=E(e);l.l($),r=A($),n.l($),$.forEach(p),this.h()},h(){b(e,"class","step-navigation flex justify-between gap-4")},m(m,$){I(m,e,$),f[t].m(e,null),_(e,r),v[a].m(e,null),c=!0},p(m,$){let N=t;t=u(m),t===N?f[t].p(m,$):(ne(),D(f[N],1,1,()=>{f[N]=null}),se(),l=f[t],l?l.p(m,$):(l=f[t]=d[t](m),l.c()),C(l,1),l.m(e,r));let P=a;a=w(m),a===P?v[a].p(m,$):(ne(),D(v[P],1,1,()=>{v[P]=null}),se(),n=v[a],n?n.p(m,$):(n=v[a]=h[a](m),n.c()),C(n,1),n.m(e,null))},i(m){c||(C(l),C(n),m&&dt(()=>{c&&(i&&i.end(1),s=pt(e,xe,{duration:100}),s.start())}),c=!0)},o(m){D(l),D(n),s&&s.invalidate(),m&&(i=_t(e,xe,{duration:100})),c=!1},d(m){m&&p(e),f[t].d(),v[a].d(),m&&i&&i.end()}}}function ol(o){let e;return{c(){e=g("div")},l(t){e=k(t,"DIV",{}),E(e).forEach(p)},m(t,l){I(t,e,l)},p:j,i:j,o:j,d(t){t&&p(e)}}}function il(o){let e,t;return e=new Fe({props:{disabled:o[6].current===0,$$slots:{default:[fl]},$$scope:{ctx:o}}}),e.$on("click",o[10]),{c(){V(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const a={};r&64&&(a.disabled=l[6].current===0),r&8192&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function cl(o){let e,t;const l=o[9].navigation,r=Ie(l,o,o[13],at);return{c(){e=g("div"),r&&r.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var n=E(e);r&&r.l(n),n.forEach(p),this.h()},h(){b(e,"class","step-navigation-slot")},m(a,n){I(a,e,n),r&&r.m(e,null),t=!0},p(a,n){r&&r.p&&(!t||n&8192)&&Te(r,l,a,a[13],t?Pe(l,a[13],n,al):Ae(a[13]),at)},i(a){t||(C(r,a),t=!0)},o(a){D(r,a),t=!1},d(a){a&&p(e),r&&r.d(a)}}}function fl(o){let e;return{c(){e=U("Back")},l(t){e=F(t,"Back")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function ul(o){let e,t;return e=new Fe({props:{name:o[1]||"complete",angle:"right",variant:"filled",disabled:o[0],$$slots:{default:[ml]},$$scope:{ctx:o}}}),e.$on("click",o[12]),{c(){V(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const a={};r&2&&(a.name=l[1]||"complete"),r&1&&(a.disabled=l[0]),r&8194&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function dl(o){let e,t;return e=new Fe({props:{name:"next",angle:"right",variant:"filled",disabled:o[0],$$slots:{default:[pl]},$$scope:{ctx:o}}}),e.$on("click",o[11]),{c(){V(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const a={};r&1&&(a.disabled=l[0]),r&8192&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function ml(o){let e=(o[1]||"Complete")+"",t;return{c(){t=U(e)},l(l){t=F(l,e)},m(l,r){I(l,t,r)},p(l,r){r&2&&e!==(e=(l[1]||"Complete")+"")&&re(t,e)},d(l){l&&p(t)}}}function pl(o){let e;return{c(){e=U("Next")},l(t){e=F(t,"Next")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function _l(o){let e,t,l=o[7]===o[6].current&&st(o);return{c(){l&&l.c(),e=ae()},l(r){l&&l.l(r),e=ae()},m(r,a){l&&l.m(r,a),I(r,e,a),t=!0},p(r,[a]){r[7]===r[6].current?l?(l.p(r,a),a&64&&C(l,1)):(l=st(r),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(ne(),D(l,1,1,()=>{l=null}),se())},i(r){t||(C(l),t=!0)},o(r){D(l),t=!1},d(r){r&&p(e),l&&l.d(r)}}}function hl(o,e,t){let l,r=j,a=()=>(r(),r=Ut(f,P=>t(6,l=P)),f);o.$$.on_destroy.push(()=>r());let{$$slots:n={},$$scope:s}=e;const i=Mt(n);let{locked:c=!1}=e,{buttonCompleteLabel:d=$e("buttonCompleteLabel")}=e,{state:f=$e("state")}=e;a();let{onNext:u=$e("onNext")}=e,{onBack:h=$e("onBack")}=e,{onComplete:v=$e("onComplete")}=e;const w=l.total;be(f,l.total++,l),jt(()=>{be(f,l.total--,l)});const m=()=>h(),$=()=>u(c),N=()=>v(w,c);return o.$$set=P=>{"locked"in P&&t(0,c=P.locked),"buttonCompleteLabel"in P&&t(1,d=P.buttonCompleteLabel),"state"in P&&a(t(2,f=P.state)),"onNext"in P&&t(3,u=P.onNext),"onBack"in P&&t(4,h=P.onBack),"onComplete"in P&&t(5,v=P.onComplete),"$$scope"in P&&t(13,s=P.$$scope)},[c,d,f,u,h,v,l,w,i,n,m,$,N,s]}class Ce extends ye{constructor(e){super(),we(this,e,hl,_l,Ee,{locked:0,buttonCompleteLabel:1,state:2,onNext:3,onBack:4,onComplete:5})}}function vl(o){let e,t,l,r='<label for="summary" class="mr-8 font-bold">Summary:</label>',a,n,s,i,c,d,f="Participants",u,h,v,w,m,$,N="Variables",P,S,x,J,W,O,ee="Data Points";return{c(){e=g("div"),t=g("div"),l=g("div"),l.innerHTML=r,a=T(),n=g("div"),s=g("span"),i=U(o[1]),c=T(),d=g("label"),d.textContent=f,u=T(),h=g("div"),v=g("span"),w=U(o[0]),m=T(),$=g("label"),$.textContent=N,P=T(),S=g("div"),x=g("span"),J=U(o[2]),W=T(),O=g("label"),O.textContent=ee,this.h()},l(z){e=k(z,"DIV",{id:!0,class:!0});var K=E(e);t=k(K,"DIV",{id:!0,class:!0});var te=E(t);l=k(te,"DIV",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-1vd72fa"&&(l.innerHTML=r),a=A(te),n=k(te,"DIV",{class:!0});var M=E(n);s=k(M,"SPAN",{id:!0,class:!0});var q=E(s);i=F(q,o[1]),q.forEach(p),c=A(M),d=k(M,"LABEL",{for:!0,"data-svelte-h":!0}),H(d)!=="svelte-1te5h4m"&&(d.textContent=f),M.forEach(p),u=A(te),h=k(te,"DIV",{class:!0});var G=E(h);v=k(G,"SPAN",{id:!0,class:!0});var le=E(v);w=F(le,o[0]),le.forEach(p),m=A(G),$=k(G,"LABEL",{for:!0,"data-svelte-h":!0}),H($)!=="svelte-j0nyhs"&&($.textContent=N),G.forEach(p),P=A(te),S=k(te,"DIV",{class:!0});var ie=E(S);x=k(ie,"SPAN",{id:!0,class:!0});var ce=E(x);J=F(ce,o[2]),ce.forEach(p),W=A(ie),O=k(ie,"LABEL",{for:!0,"data-svelte-h":!0}),H(O)!=="svelte-kgfncs"&&(O.textContent=ee),ie.forEach(p),te.forEach(p),K.forEach(p),this.h()},h(){b(l,"class","text-xl"),b(s,"id","participants"),b(s,"class","mr-2"),b(d,"for","participants"),b(n,"class","flex justify-left text-xl font-light"),b(v,"id","variables"),b(v,"class","mr-2"),b($,"for","variables"),b(h,"class","flex justify-left text-xl font-light"),b(x,"id","dataPoints"),b(x,"class","mr-2"),b(O,"for","dataPoints"),b(S,"class","flex justify-left text-xl font-light"),b(t,"id","summary"),b(t,"class","w-full grid grid-flow-col auto-cols-auto"),b(e,"id","stats"),b(e,"class","w-full flex justify-evenly mb-5 pb-2 svelte-11yjabd")},m(z,K){I(z,e,K),_(e,t),_(t,l),_(t,a),_(t,n),_(n,s),_(s,i),_(n,c),_(n,d),_(t,u),_(t,h),_(h,v),_(v,w),_(h,m),_(h,$),_(t,P),_(t,S),_(S,x),_(x,J),_(S,W),_(S,O)},p(z,[K]){K&2&&re(i,z[1]),K&1&&re(w,z[0]),K&4&&re(J,z[2])},i:j,o:j,d(z){z&&p(e)}}}function bl(o,e,t){let l,r,a,n,s,i;fe(o,vt,d=>t(5,s=d)),fe(o,bt,d=>t(6,i=d));let{exports:c}=ht;return fe(o,c,d=>t(4,n=d)),o.$$.update=()=>{o.$$.dirty&64&&t(1,l=i),o.$$.dirty&48&&t(0,r=s.length+n.length),o.$$.dirty&3&&t(2,a=typeof l=="number"?l*r:0)},[r,l,a,c,n,s,i]}class Re extends ye{constructor(e){super(),we(this,e,bl,vl,Ee,{})}}async function gl(o,e){if(e===""&&e.trim()==="")throw"Please input a Dataset ID name";const t=/^[\w \-\\/?+=[\].():"']+$/g;if(!e.match(t))throw`Name can only contain letters, numbers, and these special symbols - ? + = [ ] . ( ) : ' "`;return await ve("picsure/dataset/named",{queryId:o,name:e})}function kl(o){let e,t,l,r,a,n,s,i,c,d,f,u;return{c(){e=g("div"),t=g("p"),l=U(o[0]),r=T(),a=g("div"),n=g("button"),s=U(o[3]),i=T(),c=g("button"),d=U(o[4]),this.h()},l(h){e=k(h,"DIV",{class:!0});var v=E(e);t=k(v,"P",{});var w=E(t);l=F(w,o[0]),w.forEach(p),r=A(v),a=k(v,"DIV",{class:!0});var m=E(a);n=k(m,"BUTTON",{class:!0});var $=E(n);s=F($,o[3]),$.forEach(p),i=A(m),c=k(m,"BUTTON",{class:!0});var N=E(c);d=F(N,o[4]),N.forEach(p),m.forEach(p),v.forEach(p),this.h()},h(){b(n,"class","btn variant-ghost-surface hover:variant-filled-surface mt-6"),b(c,"class","btn variant-filled hover:variant-filled-primary mt-6"),b(a,"class","flex justify-end gap-4"),b(e,"class","flex flex-col gap-4")},m(h,v){I(h,e,v),_(e,t),_(t,l),_(e,r),_(e,a),_(a,n),_(n,s),_(a,i),_(a,c),_(c,d),f||(u=[ue(n,"click",o[6]),ue(c,"click",o[7])],f=!0)},p(h,[v]){v&1&&re(l,h[0]),v&8&&re(s,h[3]),v&16&&re(d,h[4])},i:j,o:j,d(h){h&&p(e),f=!1,mt(u)}}}function $l(o,e,t){let l;const r=kt();fe(o,r,u=>t(8,l=u));let{message:a}=e,{onCancel:n=()=>r.close()}=e,{onConfirm:s}=e,{cancelText:i="Cancel"}=e,{confirmText:c="Accept"}=e;Ft(()=>{var u,h,v,w,m,$,N,P,S,x;(u=l[0])!=null&&u.meta.onCancel&&t(1,n=(h=l[0])==null?void 0:h.meta.onCancel),(v=l[0])!=null&&v.meta.onConfirm&&t(2,s=(w=l[0])==null?void 0:w.meta.onConfirm),(m=l[0])!=null&&m.meta.confirmText&&t(4,c=($=l[0])==null?void 0:$.meta.confirmText),(N=l[0])!=null&&N.meta.cancelText&&t(3,i=(P=l[0])==null?void 0:P.meta.cancelText),(S=l[0])!=null&&S.meta.message&&t(0,a=(x=l[0])==null?void 0:x.meta.message)});const d=()=>n(),f=()=>s();return o.$$set=u=>{"message"in u&&t(0,a=u.message),"onCancel"in u&&t(1,n=u.onCancel),"onConfirm"in u&&t(2,s=u.onConfirm),"cancelText"in u&&t(3,i=u.cancelText),"confirmText"in u&&t(4,c=u.confirmText)},[a,n,s,i,c,r,d,f]}class Cl extends ye{constructor(e){super(),we(this,e,$l,kl,Ee,{message:0,onCancel:1,onConfirm:2,cancelText:3,confirmText:4})}}function El(o){let e,t,l,r,a,n,s={ctx:o,current:null,token:null,hasCatch:!0,pending:Il,then:Dl,catch:wl,blocks:[,,,]};Se(e=o[5],s);const i=[Al,Tl],c=[];function d(f,u){return f[10]?1:0}return l=d(o),r=c[l]=i[l](o),{c(){s.block.c(),t=T(),r.c(),a=ae()},l(f){s.block.l(f),t=A(f),r.l(f),a=ae()},m(f,u){s.block.m(f,s.anchor=u),s.mount=()=>t.parentNode,s.anchor=t,I(f,t,u),c[l].m(f,u),I(f,a,u),n=!0},p(f,u){o=f,s.ctx=o,u[0]&32&&e!==(e=o[5])&&Se(e,s);let h=l;l=d(o),l===h?c[l].p(o,u):(ne(),D(c[h],1,1,()=>{c[h]=null}),se(),r=c[l],r?r.p(o,u):(r=c[l]=i[l](o),r.c()),C(r,1),r.m(a.parentNode,a))},i(f){n||(C(s.block),C(r),n=!0)},o(f){for(let u=0;u<3;u+=1){const h=s.blocks[u];D(h)}D(r),n=!1},d(f){f&&(p(t),p(a)),s.block.d(f),s.token=null,s=null,c[l].d(f)}}}function yl(o){let e,t,l='<i class="fa-solid fa-triangle-exclamation text-4xl"></i>',r,a,n=`<h3 class="h3">Warning</h3> <p>Warning: Your selected data exceeds 1,000,000 estimated data points, which is too
                large to export. Please reduce the data selection or the number of selected
                participants.</p>`,s,i,c,d="Back",f,u;return{c(){e=g("aside"),t=g("div"),t.innerHTML=l,r=T(),a=g("div"),a.innerHTML=n,s=T(),i=g("div"),c=g("button"),c.textContent=d,this.h()},l(h){e=k(h,"ASIDE",{class:!0});var v=E(e);t=k(v,"DIV",{"data-svelte-h":!0}),H(t)!=="svelte-1dz1fc7"&&(t.innerHTML=l),r=A(v),a=k(v,"DIV",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-e8x9nn"&&(a.innerHTML=n),s=A(v),i=k(v,"DIV",{class:!0});var w=E(i);c=k(w,"BUTTON",{class:!0,"data-svelte-h":!0}),H(c)!=="svelte-1datm77"&&(c.textContent=d),w.forEach(p),v.forEach(p),this.h()},h(){b(a,"class","alert-message"),b(c,"class","btn variant-filled"),b(i,"class","alert-actions dark"),b(e,"class","alert variant-filled-error")},m(h,v){I(h,e,v),_(e,t),_(e,r),_(e,a),_(e,s),_(e,i),_(i,c),f||(u=ue(c,"click",o[27]),f=!0)},p:j,i:j,o:j,d(h){h&&p(e),f=!1,u()}}}function wl(o){let e,t,l;return t=new qe({props:{title:`An error occurred while preparing your dataset. Please try again. If this problem persists, please
                  contact an administrator.`}}),{c(){e=g("div"),V(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var a=E(e);R(t.$$.fragment,a),a.forEach(p),this.h()},h(){b(e,"class","flex justify-center mb-4")},m(r,a){I(r,e,a),L(t,e,null),l=!0},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){D(t.$$.fragment,r),l=!1},d(r){r&&p(e),B(t)}}}function Dl(o){return{c:j,l:j,m:j,i:j,o:j,d:j}}function Il(o){let e,t,l,r="Preparing your dataset...",a;return e=new He({props:{width:"w-4"}}),{c(){V(e.$$.fragment),t=T(),l=g("div"),l.textContent=r},l(n){R(e.$$.fragment,n),t=A(n),l=k(n,"DIV",{"data-svelte-h":!0}),H(l)!=="svelte-1m53t1h"&&(l.textContent=r)},m(n,s){L(e,n,s),I(n,t,s),I(n,l,s),a=!0},i(n){a||(C(e.$$.fragment,n),a=!0)},o(n){D(e.$$.fragment,n),a=!1},d(n){n&&(p(t),p(l)),B(e,n)}}}function Tl(o){let e,t,l,r,a="Loading sample IDs...",n;return t=new He({props:{width:"w-4"}}),{c(){e=g("div"),V(t.$$.fragment),l=T(),r=g("div"),r.textContent=a,this.h()},l(s){e=k(s,"DIV",{class:!0});var i=E(e);R(t.$$.fragment,i),l=A(i),r=k(i,"DIV",{"data-svelte-h":!0}),H(r)!=="svelte-jeedzs"&&(r.textContent=a),i.forEach(p),this.h()},h(){b(e,"class","flex justify-center items-center")},m(s,i){I(s,e,i),L(t,e,null),_(e,l),_(e,r),n=!0},p:j,i(s){n||(C(t.$$.fragment,s),n=!0)},o(s){D(t.$$.fragment,s),n=!1},d(s){s&&p(e),B(t)}}}function Al(o){let e,t,l,r;e=new Gt({props:{tableName:"ExportSummary",data:o[1],columns:o[17]}});let a=Pl(o);return{c(){V(e.$$.fragment),t=T(),a&&a.c(),l=ae()},l(n){R(e.$$.fragment,n),t=A(n),a&&a.l(n),l=ae()},m(n,s){L(e,n,s),I(n,t,s),a&&a.m(n,s),I(n,l,s),r=!0},p(n,s){const i={};s[0]&2&&(i.data=n[1]),e.$set(i),a.p(n,s)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){D(e.$$.fragment,n),r=!1},d(n){n&&(p(t),p(l)),B(e,n),a&&a.d(n)}}}function Pl(o){let e,t,l,r,a,n="Include sample identifiers",s,i;return{c(){e=g("div"),t=g("label"),l=g("input"),r=T(),a=g("span"),a.textContent=n,this.h()},l(c){e=k(c,"DIV",{});var d=E(e);t=k(d,"LABEL",{for:!0,class:!0,"data-testid":!0});var f=E(t);l=k(f,"INPUT",{type:!0,class:!0,"data-testid":!0,id:!0}),r=A(f),a=k(f,"SPAN",{"data-svelte-h":!0}),H(a)!=="svelte-julkv0"&&(a.textContent=n),f.forEach(p),d.forEach(p),this.h()},h(){b(l,"type","checkbox"),b(l,"class","mr-1 &[aria-disabled=“true”]:opacity-75"),b(l,"data-testid","sample-ids-checkbox"),b(l,"id","sample-ids-checkbox"),b(t,"for","sample-ids-checkbox"),b(t,"class","flex items-center"),b(t,"data-testid","sample-ids-label")},m(c,d){I(c,e,d),_(e,t),_(t,l),l.checked=o[9],_(t,r),_(t,a),s||(i=[ue(l,"change",o[28]),ue(l,"change",o[25])],s=!0)},p(c,d){d[0]&512&&(l.checked=c[9])},d(c){c&&p(e),s=!1,mt(i)}}}function Sl(o){let e,t,l,r,a,n,s;t=new Re({});const i=[yl,El],c=[];function d(f,u){return f[24]()?0:1}return a=d(o),n=c[a]=i[a](o),{c(){e=g("div"),V(t.$$.fragment),l=T(),r=g("section"),n.c(),this.h()},l(f){e=k(f,"DIV",{id:!0,class:!0});var u=E(e);R(t.$$.fragment,u),l=A(u),r=k(u,"SECTION",{class:!0});var h=E(r);n.l(h),h.forEach(p),u.forEach(p),this.h()},h(){b(r,"class","w-full"),b(e,"id","first-step-container"),b(e,"class","flex flex-col w-full h-full items-center")},m(f,u){I(f,e,u),L(t,e,null),_(e,l),_(e,r),c[a].m(r,null),s=!0},p(f,u){n.p(f,u)},i(f){s||(C(t.$$.fragment,f),C(n),s=!0)},o(f){D(t.$$.fragment,f),D(n),s=!1},d(f){f&&p(e),B(t),c[a].d()}}}function xl(o){let e;return{c(){e=U("Review Cohort Details:")},l(t){e=F(t,"Review Cohort Details:")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function it(o){let e,t;return e=new Ce({props:{$$slots:{header:[Vl],default:[Nl]},$$scope:{ctx:o}}}),{c(){V(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function Nl(o){let e,t,l,r,a=`<header class="card-header">Select <strong>additional variables</strong> you would like to be included in your final
            data export.</header> <hr/> <div class="card-body p-4">Tree Component Here</div>`,n;return t=new Re({}),{c(){e=g("section"),V(t.$$.fragment),l=T(),r=g("div"),r.innerHTML=a,this.h()},l(s){e=k(s,"SECTION",{class:!0});var i=E(e);R(t.$$.fragment,i),l=A(i),r=k(i,"DIV",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-1l9s757"&&(r.innerHTML=a),i.forEach(p),this.h()},h(){b(r,"class","w-full h-full m-2 card p-4"),b(e,"class","flex flex-col w-full h-full items-center")},m(s,i){I(s,e,i),L(t,e,null),_(e,l),_(e,r),n=!0},p:j,i(s){n||(C(t.$$.fragment,s),n=!0)},o(s){D(t.$$.fragment,s),n=!1},d(s){s&&p(e),B(t)}}}function Vl(o){let e;return{c(){e=U("Finalize Data:")},l(t){e=F(t,"Finalize Data:")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function Rl(o){let e,t,l,r,a,n,s,i;return t=new Re({}),a=new Ze({props:{"data-testid":"csv-export-option",title:"Export as Data Frame or CSV",subtitle:"Export data as a Python or R data frame or a comma-separated values file",size:"other",class:"card variant-ringed-primary",active:o[2]==="DATAFRAME"}}),a.$on("click",o[29]),s=new Ze({props:{"data-testid":"csv-export-option",title:"Export as PFB",subtitle:"Export data in Portable Format for Biomedical Data file format",size:"other",class:"card variant-ringed-primary",active:o[2]==="DATAFRAME_PFB"}}),s.$on("click",o[30]),{c(){e=g("section"),V(t.$$.fragment),l=T(),r=g("div"),V(a.$$.fragment),n=T(),V(s.$$.fragment),this.h()},l(c){e=k(c,"SECTION",{class:!0});var d=E(e);R(t.$$.fragment,d),l=A(d),r=k(d,"DIV",{class:!0});var f=E(r);R(a.$$.fragment,f),n=A(f),R(s.$$.fragment,f),f.forEach(p),d.forEach(p),this.h()},h(){b(r,"class","grid gap-10 grid-cols-2"),b(e,"class","flex flex-col w-full h-full items-center")},m(c,d){I(c,e,d),L(t,e,null),_(e,l),_(e,r),L(a,r,null),_(r,n),L(s,r,null),i=!0},p(c,d){const f={};d[0]&4&&(f.active=c[2]==="DATAFRAME"),a.$set(f);const u={};d[0]&4&&(u.active=c[2]==="DATAFRAME_PFB"),s.$set(u)},i(c){i||(C(t.$$.fragment,c),C(a.$$.fragment,c),C(s.$$.fragment,c),i=!0)},o(c){D(t.$$.fragment,c),D(a.$$.fragment,c),D(s.$$.fragment,c),i=!1},d(c){c&&p(e),B(t),B(a),B(s)}}}function Ll(o){let e;return{c(){e=U("Review and Save Dataset:")},l(t){e=F(t,"Review and Save Dataset:")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function ct(o){let e,t,l;return t=new qe({props:{title:"Error",$$slots:{default:[Bl]},$$scope:{ctx:o}}}),{c(){e=g("div"),V(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var a=E(e);R(t.$$.fragment,a),a.forEach(p),this.h()},h(){b(e,"class","w-full h-full m-2")},m(r,a){I(r,e,a),L(t,e,null),l=!0},p(r,a){const n={};a[0]&256|a[1]&8388608&&(n.$$scope={dirty:a,ctx:r}),t.$set(n)},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){D(t.$$.fragment,r),l=!1},d(r){r&&p(e),B(t)}}}function Bl(o){let e;return{c(){e=U(o[8])},l(t){e=F(t,o[8])},m(t,l){I(t,e,l)},p(t,l){l[0]&256&&re(e,t[8])},d(t){t&&p(e)}}}function Ml(o){let e,t,l,r,a,n=`Save the information in your final data export by clicking the Save Dataset ID button.
          Navigate to the <a class="anchor" href="/dataset">Manage Datasets page</a> to view or manage
          your Dataset IDs.`,s,i,c,d,f,u,h,v,w="Dataset Name:",m,$,N,P,S,x,J="Dataset ID:",W,O,ee,z,K,te;t=new Re({});let M=o[8]&&ct(o);return{c(){e=g("section"),V(t.$$.fragment),l=T(),r=g("div"),a=g("header"),a.innerHTML=n,s=T(),i=g("hr"),c=T(),M&&M.c(),d=T(),f=g("div"),u=g("div"),h=g("div"),v=g("label"),v.textContent=w,m=T(),$=g("input"),N=T(),P=g("div"),S=g("div"),x=g("label"),x.textContent=J,W=T(),O=g("div"),ee=U(o[13]),this.h()},l(q){e=k(q,"SECTION",{class:!0});var G=E(e);R(t.$$.fragment,G),l=A(G),r=k(G,"DIV",{class:!0});var le=E(r);a=k(le,"HEADER",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-1l8cwjc"&&(a.innerHTML=n),s=A(le),i=k(le,"HR",{}),c=A(le),M&&M.l(le),d=A(le),f=k(le,"DIV",{class:!0});var ie=E(f);u=k(ie,"DIV",{});var ce=E(u);h=k(ce,"DIV",{class:!0});var pe=E(h);v=k(pe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(v)!=="svelte-1i4hx8x"&&(v.textContent=w),m=A(pe),$=k(pe,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),pe.forEach(p),N=A(ce),P=k(ce,"DIV",{class:!0});var De=E(P);S=k(De,"DIV",{class:!0});var _e=E(S);x=k(_e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(x)!=="svelte-vytwml"&&(x.textContent=J),W=A(_e),O=k(_e,"DIV",{id:!0});var he=E(O);ee=F(he,o[13]),he.forEach(p),_e.forEach(p),De.forEach(p),ce.forEach(p),ie.forEach(p),le.forEach(p),G.forEach(p),this.h()},h(){b(a,"class","card-header"),b(v,"for","dataset-name"),b(v,"class","font-bold mr-2"),b($,"type","text"),b($,"id","dataset-name"),b($,"class","w-80 svelte-1jplhoe"),b($,"placeholder","Enter a name"),$.required=!0,b(h,"class","flex items-center m-2"),b(x,"for","dataset-id"),b(x,"class","font-bold mr-2"),b(O,"id","dataset-id"),b(S,"class","flex items-center"),b(P,"class","flex items-center m-2"),b(f,"class","card-body p-4 flex flex-col justify-center items-center"),b(r,"class","w-full h-full m-2 card p-4"),b(e,"class","flex flex-col w-full h-full items-center")},m(q,G){I(q,e,G),L(t,e,null),_(e,l),_(e,r),_(r,a),_(r,s),_(r,i),_(r,c),M&&M.m(r,null),_(r,d),_(r,f),_(f,u),_(u,h),_(h,v),_(h,m),_(h,$),Je($,o[6]),_(u,N),_(u,P),_(P,S),_(S,x),_(S,W),_(S,O),_(O,ee),z=!0,K||(te=ue($,"input",o[31]),K=!0)},p(q,G){q[8]?M?(M.p(q,G),G[0]&256&&C(M,1)):(M=ct(q),M.c(),C(M,1),M.m(r,d)):M&&(ne(),D(M,1,1,()=>{M=null}),se()),G[0]&64&&$.value!==q[6]&&Je($,q[6]),(!z||G[0]&8192)&&re(ee,q[13])},i(q){z||(C(t.$$.fragment,q),C(M),z=!0)},o(q){D(t.$$.fragment,q),D(M),z=!1},d(q){q&&p(e),B(t),M&&M.d(),K=!1,te()}}}function jl(o){let e;return{c(){e=U("Save Dataset ID:")},l(t){e=F(t,"Save Dataset ID:")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function ft(o){let e,t,l,r={ctx:o,current:null,token:null,hasCatch:!0,pending:Zl,then:Fl,catch:Ul,error:53,blocks:[,,,]};return Se(t=o[4],r),{c(){e=ae(),r.block.c()},l(a){e=ae(),r.block.l(a)},m(a,n){I(a,e,n),r.block.m(a,r.anchor=n),r.mount=()=>e.parentNode,r.anchor=e,l=!0},p(a,n){o=a,r.ctx=o,n[0]&16&&t!==(t=o[4])&&Se(t,r)||Ht(r,o,n)},i(a){l||(C(r.block),l=!0)},o(a){for(let n=0;n<3;n+=1){const s=r.blocks[n];D(s)}l=!1},d(a){a&&p(e),r.block.d(a),r.token=null,r=null}}}function Ul(o){let e,t,l,r,a=o[53]+"",n,s;return t=new qe({props:{title:`An error occurred while preparing your dataset. Please try again. If this problem persists, please
                contact an administrator.`}}),{c(){e=g("div"),V(t.$$.fragment),l=T(),r=g("div"),n=U(a),this.h()},l(i){e=k(i,"DIV",{class:!0});var c=E(e);R(t.$$.fragment,c),l=A(c),r=k(c,"DIV",{class:!0});var d=E(r);n=F(d,a),d.forEach(p),c.forEach(p),this.h()},h(){b(r,"class","hidden"),b(e,"class","flex justify-center")},m(i,c){I(i,e,c),L(t,e,null),_(e,l),_(e,r),_(r,n),s=!0},p(i,c){(!s||c[0]&16)&&a!==(a=i[53]+"")&&re(n,a)},i(i){s||(C(t.$$.fragment,i),s=!0)},o(i){D(t.$$.fragment,i),s=!1},d(i){i&&p(e),B(t)}}}function Fl(o){let e,t,l,r;const a=[ql,Hl],n=[];function s(i,c){return i[0].query.expectedResultType==="DATAFRAME"?0:i[0].query.expectedResultType==="DATAFRAME_PFB"?1:-1}return~(e=s(o))&&(t=n[e]=a[e](o)),{c(){t&&t.c(),l=ae()},l(i){t&&t.l(i),l=ae()},m(i,c){~e&&n[e].m(i,c),I(i,l,c),r=!0},p(i,c){let d=e;e=s(i),e===d?~e&&n[e].p(i,c):(t&&(ne(),D(n[d],1,1,()=>{n[d]=null}),se()),~e?(t=n[e],t?t.p(i,c):(t=n[e]=a[e](i),t.c()),C(t,1),t.m(l.parentNode,l)):t=null)},i(i){r||(C(t),r=!0)},o(i){D(t),r=!1},d(i){i&&p(l),~e&&n[e].d(i)}}}function Hl(o){let e,t,l="Select an option below to export your selected data in PFB format.",r,a,n,s,i,c,d,f='<i class="fa-solid fa-download"></i>Download as PFB',u,h,v=Ve.explorer.enableTerraExport&&Ol(o);return{c(){e=g("section"),t=g("div"),t.textContent=l,r=T(),v&&v.c(),a=T(),n=g("div"),s=g("div"),i=T(),c=g("div"),d=g("button"),d.innerHTML=f,this.h()},l(w){e=k(w,"SECTION",{class:!0});var m=E(e);t=k(m,"DIV",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1e8jgjm"&&(t.textContent=l),r=A(m),v&&v.l(m),a=A(m),n=k(m,"DIV",{class:!0});var $=E(n);s=k($,"DIV",{}),E(s).forEach(p),i=A($),c=k($,"DIV",{});var N=E(c);d=k(N,"BUTTON",{class:!0,"data-svelte-h":!0}),H(d)!=="svelte-1o3nllj"&&(d.innerHTML=f),N.forEach(p),$.forEach(p),m.forEach(p),this.h()},h(){b(t,"class","flex justify-center mt-4"),b(d,"class","flex-initial w-64 btn variant-filled-primary"),b(n,"class","grid grid-cols-3"),b(e,"class","flex flex-col gap-8")},m(w,m){I(w,e,m),_(e,t),_(e,r),v&&v.m(e,null),_(e,a),_(e,n),_(n,s),_(n,i),_(n,c),_(c,d),u||(h=ue(d,"click",o[37]),u=!0)},p(w,m){Ve.explorer.enableTerraExport&&v.p(w,m)},i:j,o:j,d(w){w&&p(e),v&&v.d(),u=!1,h()}}}function ql(o){let e,t,l=`To export data and start your analysis, copy and paste the following code in an
                  analysis workspace, such as BioData Catalyst Powered by Seven Bridges or BioData
                  Catalyst Powered by Terra, to connect to PIC-SURE and save the data frame or
                  download the file. Note that you will need your personal access token to complete
                  the connection to PIC-SURE with code.`,r,a,n,s,i=`Copy your personal access token and save as a text file called “token.txt” in the
                  same working directory to execute the code above.`,c,d,f,u,h,v='<a class="btn variant-ghost-primary m-2 hover:variant-filled-primary" href="https://platform.sb.biodatacatalyst.nhlbi.nih.gov/u/biodatacatalyst/data-export-from-the-pic-sure-ui" target="_blank">Go to Seven Bridges</a> <a class="btn variant-ghost-primary m-2 hover:variant-filled-primary" href="https://terra.biodatacatalyst.nhlbi.nih.gov/" target="_blank">Go to Terra</a>',w;return a=new Xt({props:{class:"card p-4",$$slots:{panel:[Kl],default:[Wl]},$$scope:{ctx:o}}}),f=new gt({}),{c(){e=g("section"),t=g("p"),t.textContent=l,r=T(),V(a.$$.fragment),n=T(),s=g("p"),s.textContent=i,c=T(),d=g("div"),V(f.$$.fragment),u=T(),h=g("div"),h.innerHTML=v,this.h()},l(m){e=k(m,"SECTION",{class:!0});var $=E(e);t=k($,"P",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-hpr0ix"&&(t.textContent=l),r=A($),R(a.$$.fragment,$),n=A($),s=k($,"P",{"data-svelte-h":!0}),H(s)!=="svelte-104z5lh"&&(s.textContent=i),c=A($),d=k($,"DIV",{class:!0});var N=E(d);R(f.$$.fragment,N),N.forEach(p),u=A($),h=k($,"DIV",{class:!0,"data-svelte-h":!0}),H(h)!=="svelte-h1oinp"&&(h.innerHTML=v),$.forEach(p),this.h()},h(){b(t,"class","mt-4"),b(d,"class","flex justify-center"),b(h,"class","flex justify-center"),b(e,"class","flex flex-col gap-8")},m(m,$){I(m,e,$),_(e,t),_(e,r),L(a,e,null),_(e,n),_(e,s),_(e,c),_(e,d),L(f,d,null),_(e,u),_(e,h),w=!0},p(m,$){const N={};$[0]&10240|$[1]&8388608&&(N.$$scope={dirty:$,ctx:m}),a.$set(N)},i(m){w||(C(a.$$.fragment,m),C(f.$$.fragment,m),w=!0)},o(m){D(a.$$.fragment,m),D(f.$$.fragment,m),w=!1},d(m){m&&p(e),B(a),B(f)}}}function Ol(o){let e,t,l,r,a,n,s,i,c;return{c(){e=g("div"),t=g("div"),l=T(),r=g("div"),a=g("button"),n=g("i"),s=U("Export to Terra"),this.h()},l(d){e=k(d,"DIV",{class:!0});var f=E(e);t=k(f,"DIV",{}),E(t).forEach(p),l=A(f),r=k(f,"DIV",{});var u=E(r);a=k(u,"BUTTON",{class:!0});var h=E(a);n=k(h,"I",{class:!0}),E(n).forEach(p),s=F(h,"Export to Terra"),h.forEach(p),u.forEach(p),f.forEach(p),this.h()},h(){b(n,"class","fa-solid fa-arrow-up-right-from-square"),a.disabled=o[12],b(a,"class","flex-initial w-64 btn variant-filled-primary disabled:variant-ghost-primary"),b(e,"class","grid grid-cols-3")},m(d,f){I(d,e,f),_(e,t),_(e,l),_(e,r),_(r,a),_(a,n),_(a,s),i||(c=ue(a,"click",o[36]),i=!0)},p(d,f){f[0]&4096&&(a.disabled=d[12])},d(d){d&&p(e),i=!1,c()}}}function zl(o){let e;return{c(){e=U("Python")},l(t){e=F(t,"Python")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function Gl(o){let e;return{c(){e=U("R")},l(t){e=F(t,"R")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function Ql(o){let e;return{c(){e=U("Download")},l(t){e=F(t,"Download")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function Wl(o){let e,t,l,r,a,n,s,i,c;function d(m){o[33](m)}let f={name:"python",value:0,$$slots:{default:[zl]},$$scope:{ctx:o}};o[11]!==void 0&&(f.group=o[11]),e=new Ue({props:f}),Be.push(()=>je(e,"group",d));function u(m){o[34](m)}let h={name:"r",value:1,$$slots:{default:[Gl]},$$scope:{ctx:o}};o[11]!==void 0&&(h.group=o[11]),r=new Ue({props:h}),Be.push(()=>je(r,"group",u));function v(m){o[35](m)}let w={name:"download",value:2,$$slots:{default:[Ql]},$$scope:{ctx:o}};return o[11]!==void 0&&(w.group=o[11]),s=new Ue({props:w}),Be.push(()=>je(s,"group",v)),{c(){V(e.$$.fragment),l=T(),V(r.$$.fragment),n=T(),V(s.$$.fragment)},l(m){R(e.$$.fragment,m),l=A(m),R(r.$$.fragment,m),n=A(m),R(s.$$.fragment,m)},m(m,$){L(e,m,$),I(m,l,$),L(r,m,$),I(m,n,$),L(s,m,$),c=!0},p(m,$){const N={};$[1]&8388608&&(N.$$scope={dirty:$,ctx:m}),!t&&$[0]&2048&&(t=!0,N.group=m[11],Me(()=>t=!1)),e.$set(N);const P={};$[1]&8388608&&(P.$$scope={dirty:$,ctx:m}),!a&&$[0]&2048&&(a=!0,P.group=m[11],Me(()=>a=!1)),r.$set(P);const S={};$[1]&8388608&&(S.$$scope={dirty:$,ctx:m}),!i&&$[0]&2048&&(i=!0,S.group=m[11],Me(()=>i=!1)),s.$set(S)},i(m){c||(C(e.$$.fragment,m),C(r.$$.fragment,m),C(s.$$.fragment,m),c=!0)},o(m){D(e.$$.fragment,m),D(r.$$.fragment,m),D(s.$$.fragment,m),c=!1},d(m){m&&(p(l),p(n)),B(e,m),B(r,m),B(s,m)}}}function Xl(o){let e,t,l='<i class="fa-solid fa-download mr-1"></i>Download as CSV',r,a;return{c(){e=g("div"),t=g("button"),t.innerHTML=l,this.h()},l(n){e=k(n,"DIV",{});var s=E(e);t=k(s,"BUTTON",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1t3f70y"&&(t.innerHTML=l),s.forEach(p),this.h()},h(){b(t,"class","btn variant-filled-primary")},m(n,s){I(n,e,s),_(e,t),r||(a=ue(t,"click",o[32]),r=!0)},p:j,i:j,o:j,d(n){n&&p(e),r=!1,a()}}}function Yl(o){var l,r;let e,t;return e=new $t({props:{language:"r",lineNumbers:!0,code:((r=(l=Ne)==null?void 0:l.bdcRExport)==null?void 0:r.replace("{{queryId}}",o[13]))||"Code not set"}}),{c(){V(e.$$.fragment)},l(a){R(e.$$.fragment,a)},m(a,n){L(e,a,n),t=!0},p(a,n){var i,c;const s={};n[0]&8192&&(s.code=((c=(i=Ne)==null?void 0:i.bdcRExport)==null?void 0:c.replace("{{queryId}}",a[13]))||"Code not set"),e.$set(s)},i(a){t||(C(e.$$.fragment,a),t=!0)},o(a){D(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Jl(o){var l,r;let e,t;return e=new $t({props:{language:"python",lineNumbers:!0,buttonCopied:"Copied!",code:((r=(l=Ne)==null?void 0:l.bdcPythonExport)==null?void 0:r.replace("{{queryId}}",o[13]))||"Code not set"}}),{c(){V(e.$$.fragment)},l(a){R(e.$$.fragment,a)},m(a,n){L(e,a,n),t=!0},p(a,n){var i,c;const s={};n[0]&8192&&(s.code=((c=(i=Ne)==null?void 0:i.bdcPythonExport)==null?void 0:c.replace("{{queryId}}",a[13]))||"Code not set"),e.$set(s)},i(a){t||(C(e.$$.fragment,a),t=!0)},o(a){D(e.$$.fragment,a),t=!1},d(a){B(e,a)}}}function Kl(o){let e,t,l,r;const a=[Jl,Yl,Xl],n=[];function s(i,c){return i[11]===0?0:i[11]===1?1:i[11]===2?2:-1}return~(e=s(o))&&(t=n[e]=a[e](o)),{c(){t&&t.c(),l=ae()},l(i){t&&t.l(i),l=ae()},m(i,c){~e&&n[e].m(i,c),I(i,l,c),r=!0},p(i,c){let d=e;e=s(i),e===d?~e&&n[e].p(i,c):(t&&(ne(),D(n[d],1,1,()=>{n[d]=null}),se()),~e?(t=n[e],t?t.p(i,c):(t=n[e]=a[e](i),t.c()),C(t,1),t.m(l.parentNode,l)):t=null)},i(i){r||(C(t),r=!0)},o(i){D(t),r=!1},d(i){i&&p(l),~e&&n[e].d(i)}}}function Zl(o){let e,t,l,r,a="Preparing your dataset...",n;return t=new He({props:{width:"w-4"}}),{c(){e=g("div"),V(t.$$.fragment),l=T(),r=g("div"),r.textContent=a,this.h()},l(s){e=k(s,"DIV",{class:!0});var i=E(e);R(t.$$.fragment,i),l=A(i),r=k(i,"DIV",{"data-svelte-h":!0}),H(r)!=="svelte-1m53t1h"&&(r.textContent=a),i.forEach(p),this.h()},h(){b(e,"class","flex justify-center items-center")},m(s,i){I(s,e,i),L(t,e,null),_(e,l),_(e,r),n=!0},p:j,i(s){n||(C(t.$$.fragment,s),n=!0)},o(s){D(t.$$.fragment,s),n=!1},d(s){s&&p(e),B(t)}}}function ut(o){let e,t,l=`Use your personal access token and the dataset ID to export your participant-level
            cohort data using the PIC-SURE API.`,r,a,n,s,i,c,d="Dataset ID:",f,u,h,v,w,m,$,N=`Navigate to the <a class="anchor" href="/api">API page</a> to view examples and learn more
            about the PIC-SURE API.`,P;return a=new gt({}),w=new Qt({props:{itemToCopy:o[13]}}),{c(){e=g("div"),t=g("div"),t.textContent=l,r=T(),V(a.$$.fragment),n=T(),s=g("div"),i=g("div"),c=g("label"),c.textContent=d,f=T(),u=g("div"),h=U(o[13]),v=T(),V(w.$$.fragment),m=T(),$=g("p"),$.innerHTML=N,this.h()},l(S){e=k(S,"DIV",{class:!0});var x=E(e);t=k(x,"DIV",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1d55zu0"&&(t.textContent=l),r=A(x),R(a.$$.fragment,x),n=A(x),s=k(x,"DIV",{class:!0});var J=E(s);i=k(J,"DIV",{class:!0});var W=E(i);c=k(W,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(c)!=="svelte-10o6xpf"&&(c.textContent=d),f=A(W),u=k(W,"DIV",{id:!0,class:!0});var O=E(u);h=F(O,o[13]),O.forEach(p),v=A(W),R(w.$$.fragment,W),W.forEach(p),J.forEach(p),m=A(x),$=k(x,"P",{"data-svelte-h":!0}),H($)!=="svelte-188gcj5"&&($.innerHTML=N),x.forEach(p),this.h()},h(){b(t,"class","flex justify-center"),b(c,"for","dataset-id"),b(c,"class","font-bold ml-4 mr-2"),b(u,"id","dataset-id"),b(u,"class","mr-4"),b(i,"class","flex items-center"),b(s,"class","flex items-center m-4"),b(e,"class","flex flex-col justify-center items-center")},m(S,x){I(S,e,x),_(e,t),_(e,r),L(a,e,null),_(e,n),_(e,s),_(s,i),_(i,c),_(i,f),_(i,u),_(u,h),_(i,v),L(w,i,null),_(e,m),_(e,$),P=!0},p(S,x){(!P||x[0]&8192)&&re(h,S[13]);const J={};x[0]&8192&&(J.itemToCopy=S[13]),w.$set(J)},i(S){P||(C(a.$$.fragment,S),C(w.$$.fragment,S),P=!0)},o(S){D(a.$$.fragment,S),D(w.$$.fragment,S),P=!1},d(S){S&&p(e),B(a),B(w)}}}function er(o){let e,t,l,r,a=o[15]&&ft(o),n=o[14]&&ut(o);return{c(){e=g("section"),t=g("div"),a&&a.c(),l=T(),n&&n.c(),this.h()},l(s){e=k(s,"SECTION",{class:!0});var i=E(e);t=k(i,"DIV",{class:!0});var c=E(t);a&&a.l(c),c.forEach(p),l=A(i),n&&n.l(i),i.forEach(p),this.h()},h(){b(t,"class","flex justify-center"),b(e,"class","flex flex-col w-full h-full items-center")},m(s,i){I(s,e,i),_(e,t),a&&a.m(t,null),_(e,l),n&&n.m(e,null),r=!0},p(s,i){s[15]?a?(a.p(s,i),i[0]&32768&&C(a,1)):(a=ft(s),a.c(),C(a,1),a.m(t,null)):a&&(ne(),D(a,1,1,()=>{a=null}),se()),s[14]?n?(n.p(s,i),i[0]&16384&&C(n,1)):(n=ut(s),n.c(),C(n,1),n.m(e,null)):n&&(ne(),D(n,1,1,()=>{n=null}),se())},i(s){r||(C(a),C(n),r=!0)},o(s){D(a),D(n),r=!1},d(s){s&&p(e),a&&a.d(),n&&n.d()}}}function tr(o){let e;return{c(){e=U("Start Analysis:")},l(t){e=F(t,"Start Analysis:")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function lr(o){let e,t,l,r,a,n,s,i,c;e=new Ce({props:{locked:o[24](),$$slots:{header:[xl],default:[Sl]},$$scope:{ctx:o}}});let d=o[3]&&it(o);return r=new Ce({props:{locked:o[2]===void 0,$$slots:{header:[Ll],default:[Rl]},$$scope:{ctx:o}}}),n=new Ce({props:{locked:!o[6]||o[6].length<2,$$slots:{header:[jl],default:[Ml]},$$scope:{ctx:o}}}),i=new Ce({props:{locked:o[7],$$slots:{header:[tr],default:[er]},$$scope:{ctx:o}}}),{c(){V(e.$$.fragment),t=T(),d&&d.c(),l=T(),V(r.$$.fragment),a=T(),V(n.$$.fragment),s=T(),V(i.$$.fragment)},l(f){R(e.$$.fragment,f),t=A(f),d&&d.l(f),l=A(f),R(r.$$.fragment,f),a=A(f),R(n.$$.fragment,f),s=A(f),R(i.$$.fragment,f)},m(f,u){L(e,f,u),I(f,t,u),d&&d.m(f,u),I(f,l,u),L(r,f,u),I(f,a,u),L(n,f,u),I(f,s,u),L(i,f,u),c=!0},p(f,u){const h={};u[0]&1570|u[1]&8388608&&(h.$$scope={dirty:u,ctx:f}),e.$set(h),f[3]?d?u[0]&8&&C(d,1):(d=it(f),d.c(),C(d,1),d.m(l.parentNode,l)):d&&(ne(),D(d,1,1,()=>{d=null}),se());const v={};u[0]&4&&(v.locked=f[2]===void 0),u[0]&4|u[1]&8388608&&(v.$$scope={dirty:u,ctx:f}),r.$set(v);const w={};u[0]&64&&(w.locked=!f[6]||f[6].length<2),u[0]&8512|u[1]&8388608&&(w.$$scope={dirty:u,ctx:f}),n.$set(w);const m={};u[0]&128&&(m.locked=f[7]),u[0]&63505|u[1]&8388608&&(m.$$scope={dirty:u,ctx:f}),i.$set(m)},i(f){c||(C(e.$$.fragment,f),C(d),C(r.$$.fragment,f),C(n.$$.fragment,f),C(i.$$.fragment,f),c=!0)},o(f){D(e.$$.fragment,f),D(d),D(r.$$.fragment,f),D(n.$$.fragment,f),D(i.$$.fragment,f),c=!1},d(f){f&&(p(t),p(l),p(a),p(s)),B(e,f),d&&d.d(f),B(r,f),B(n,f),B(i,f)}}}function rr(o){let e,t;return e=new rl({props:{class:"w-full h-full m-8",buttonCompleteLabel:"Done",$$slots:{default:[lr]},$$scope:{ctx:o}}}),e.$on("complete",o[23]),e.$on("next",o[20]),e.$on("step",ar),e.$on("back",o[21]),{c(){V(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const a={};r[0]&65535|r[1]&8388608&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function ar(o){console.log("event:next",o)}function nr(o,e,t){let l,r,a,n,s,i,c,d;fe(o,vt,y=>t(41,i=y)),fe(o,bt,y=>t(42,c=y)),fe(o,me,y=>t(43,d=y));let{exports:f,addExports:u,removeExports:h}=ht;fe(o,f,y=>t(40,s=y));let{query:v}=e,{showTreeStep:w=!1}=e,{rows:m=[]}=e;const $=kt(),N=Wt();let P,S,x="",J="",W=!0,O="",ee=!1,z=[],K=!1;const te=[{dataElement:"variableName",label:"Variable Name",sort:!0},{dataElement:"description",label:"Variable Description",sort:!0},{dataElement:"type",label:"Type",sort:!0}],M=Kt.maxDataPointsForExport||1e6;function q(){const y=async()=>{await G(),$.close()},Q=()=>{$.close()},X={type:"component",title:et.explorePage.confirmDownloadTitle||"Are you sure you want to download data?",component:"modalWrapper",modalClasses:"bg-surface-100-800-token p-4 block",meta:{component:Cl,message:et.explorePage.confirmDownloadMessage||"This action will download the data to your local machine. Are you sure you want to proceed?",onConfirm:y,onCancel:Q,confirmText:"Download"},response:oe=>{console.log(oe)}};$.trigger(X)}async function G(){try{const y=await ve(`picsure/query/${l}/result`,{}),Q=URL.createObjectURL(new Blob([y],{type:"octet/stream"}));if(qt){const X=document.createElement("a");X.href=Q,v.query.expectedResultType==="DATAFRAME"?X.download="pic-sure-data.csv":v.query.expectedResultType==="DATAFRAME_PFB"&&(X.download="pic-sure-data.avro"),document.body.appendChild(X),X.click(),document.body.removeChild(X)}}catch(y){console.error("Error in onCompleteHandler",y)}}function le(y){y.detail.step===0&&!w||(y.detail.step===1&&w||(y.detail.step===1&&!w||w&&y.detail.step===2?t(5,S=ce()):(y.detail.step===2&&!w||w&&y.detail.step===3)&&pe()),y.detail.state.total-1===y.detail.step+1&&t(4,P=new Promise((Q,X)=>{const oe=setInterval(async()=>{const ge=await De(J);ge==="ERROR"?(t(7,W=!0),clearInterval(oe),X(ge)):["PENDING","RUNNING","QUEUED"].includes(ge)||(t(7,W=!1),clearInterval(oe),Q(ge))},2e3)})))}function ie(y){t(8,O=""),console.log("event:next",y)}async function ce(){try{t(0,v.query.fields=s.map(Q=>Q.conceptPath),v);const y=await ve("picsure/query",v);t(13,l=y.picsureResultId)}catch(y){throw be(me,d.current--,d),console.error("Error in handleFirstStep",y),y}}async function pe(){var y;try{await gl(l,x)}catch(Q){if(Q instanceof Object){const X=Q;t(8,O=((y=X==null?void 0:X.message)==null?void 0:y.message)||"Error Creating Named Dataset")}else t(8,O=String(Q)||"Error Creating Named Dataset");be(me,d.current--,d),console.error("Error in createNamedDataset",Q)}}async function De(y){const X="picsure/query/"+(y||l)+"/status";try{const oe=await ve(X,v);return J=oe.picsureResultId,oe.status}catch(oe){console.error("Error in checkExportStatus",oe)}return"ERROR"}async function _e(){const y="picsure/query/"+l+"/signed-url";try{return(await ve(y,v)).signedUrl}catch(Q){console.error("Error in getSignedUrl",Q)}}let{activeType:he}=e;function Le(y){t(0,v.query.expectedResultType=y,v),t(2,he=y)}function Oe(){zt("/explorer")}let de=0;function Ct(){return(typeof c=="number"?c:M+1)+i.length+s.length>M}async function Et(){try{if(t(10,K=!0),!ee){const Y=z==null?void 0:z.map(Z=>Z.ref);h(Y||[]),t(1,m=m.filter(Z=>!z.includes(Z)));return}const y=await Zt("",[{name:"data_source_genomic",category:"data_source",display:"Genomic",description:"Associated with genomic data",count:0}],{pageNumber:0,pageSize:1e4});if(y.content.length===0)return;const Q=new Yt(structuredClone(v.query));Q.expectedResultType="CROSS_COUNT";const X=y.content.map(Y=>Y.conceptPath);Q.setCrossCountFields(X);const oe=await ve("picsure/query/sync",{query:Q,resourceUUID:Jt.hpds}),Ge=Object.entries(oe).filter(([Y,Z])=>Z>0).map(([Y])=>Y).map(Y=>{const Z=y.content.find(Rt=>Rt.conceptPath===Y);return{id:el(),searchResult:Z,display:(Z==null?void 0:Z.display)||"",conceptPath:(Z==null?void 0:Z.conceptPath)||""}});u(Ge);const Qe=Ge.map(Y=>{var Z;return{ref:Y,variableId:Y.id,variableName:Y.display,description:(Z=Y==null?void 0:Y.searchResult)==null?void 0:Z.description,type:Y==null?void 0:Y.searchResult.type,selected:!0}});t(1,m=[...m,...Qe]),z=Qe}catch(y){console.error("Error in toggleSampleIds",y),N.trigger({message:"We were unable to fetch the sample IDs for your selected data. Please try again later.",background:"variant-ghost-error"}),t(9,ee=!1)}finally{t(10,K=!1)}}async function ze(){t(12,n=!0);let y=await _e();window.open("https://terra.biodatacatalyst.nhlbi.nih.gov/#import-data?format=pfb&url="+encodeURIComponent(y)),t(12,n=!1)}const yt=()=>Oe();function wt(){ee=this.checked,t(9,ee)}const Dt=()=>Le("DATAFRAME"),It=()=>Le("DATAFRAME_PFB");function Tt(){x=this.value,t(6,x)}const At=()=>Ve.confirmDownload?q():G();function Pt(y){de=y,t(11,de)}function St(y){de=y,t(11,de)}function xt(y){de=y,t(11,de)}const Nt=()=>ze(),Vt=()=>Ve.confirmDownload?q():G();return o.$$set=y=>{"query"in y&&t(0,v=y.query),"showTreeStep"in y&&t(3,w=y.showTreeStep),"rows"in y&&t(1,m=y.rows),"activeType"in y&&t(2,he=y.activeType)},t(13,l=""),t(15,r=!0),t(14,a=!1),t(12,n=!1),[v,m,he,w,P,S,x,W,O,ee,K,de,n,l,a,r,f,te,q,G,le,ie,Le,Oe,Ct,Et,ze,yt,wt,Dt,It,Tt,At,Pt,St,xt,Nt,Vt]}class Sr extends ye{constructor(e){super(),we(this,e,nr,rr,Ee,{query:0,showTreeStep:3,rows:1,activeType:2},null,[-1,-1])}}export{Sr as E,me as s};
