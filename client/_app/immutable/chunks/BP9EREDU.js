import{d as yt,p as wt,f as O,a as H,c as ae,t as ge}from"./DKNWTM-D.js";import{o as Ct}from"./DpyMT7OB.js";import{j as ie,k as Oe,z as Be,i as xt,E as _t,x as kt,aQ as Pt,Z as Tt,X as Et,v as Me,q as We,a3 as St,y as Lt,w as Ft,W as At,p as ne,g as w,h as Z,c as M,R as Qe,r as D,t as j,a as se,s as z,f as Q,d as ve,b as re,n as De,e as Rt}from"./KPVYLOSR.js";import{k as Bt,o as ze,d as Ce,s as pe}from"./NtGCh5xy.js";import{i as $}from"./CDCmQmr-.js";import{s as fe,a as K,b as Te}from"./B2Bg6RTa.js";import{p as et}from"./DjiALQWk.js";import{g as tt}from"./DNfOBMJV.js";import{b as Ht,f as Ge}from"./BD7x6Jnt.js";import{S as It,u as Vt,e as Ae,h as Nt,o as He,f as Dt,i as me,j as Ot,k as Ye,r as Mt,t as Ue,l as Wt,m as zt}from"./BPGq02fb.js";import{e as Pe,b as le,s as J,r as rt,d as Gt,g as Yt}from"./Be_LeCLl.js";import{p as Y,r as ot}from"./CfrH0FQi.js";import{s as Ut}from"./Dqw5Xd3-.js";import{E as qt,c as $t}from"./CtWAh19b.js";import{p as it}from"./5RoAwCU1.js";import{v as Kt}from"./oR7KrioB.js";import{R as jt}from"./BUF4LOIq.js";import{S as Zt}from"./CDV5rpmT.js";import{a as Xt}from"./DXJ436YI.js";import{e as be,i as ye}from"./B5lqQSsR.js";import{s as ue}from"./kg2g7Go4.js";import{d as Jt,e as Qt,D as er,a2 as tr,a3 as rr,a4 as or,a5 as ir,a6 as ar,a7 as nr,k as sr,a8 as lr,l as cr,j as de,a9 as dr,aa as ur,ab as pr}from"./DCY6c1ra.js";import{c as at,u as vr,n as fr}from"./CMFSw6mp.js";import{t as hr,s as mr}from"./nsQMHjqs.js";import{E as nt}from"./P3bGLiu7.js";import{c as gr}from"./BgGYXS0j.js";import{b as br}from"./BlQKM0Gb.js";import{L as st}from"./BW_ShK1N.js";import{h as yr}from"./Bu63eCiy.js";import{c as wr}from"./XQ4prG3n.js";import{M as Cr}from"./D3jF9FdZ.js";function xr(t,e,r,o,i,s){let v=ie;ie&&Oe();var C,d,b=null;ie&&Be.nodeType===1&&(b=Be,Oe());var p=ie?Be:t,y;xt(()=>{const a=e()||null;var n=a==="svg"?Pt:null;a!==C&&(y&&(a===null?Lt(y,()=>{y=null,d=null}):a===d?Ft(y):(At(y),ze(!1))),a&&a!==d&&(y=kt(()=>{if(b=ie?b:n?document.createElementNS(n,a):document.createElement(a),yt(b,b),o){ie&&Bt(a)&&b.append(document.createComment(""));var f=ie?Tt(b):b.appendChild(Et());ie&&(f===null?Me(!1):We(f)),o(b,f)}St.nodes_end=b,p.before(b)})),C=a,C&&(d=C),ze(!0))},_t),v&&(Me(!0),We(p))}var _r=sr("accordion").parts("root","item","itemTrigger","itemContent","itemIndicator"),he=_r.build(),Ee=t=>{var e;return((e=t.ids)==null?void 0:e.root)??`accordion:${t.id}`},kr=(t,e)=>{var r,o;return((o=(r=t.ids)==null?void 0:r.item)==null?void 0:o.call(r,e))??`accordion:${t.id}:item:${e}`},qe=(t,e)=>{var r,o;return((o=(r=t.ids)==null?void 0:r.itemContent)==null?void 0:o.call(r,e))??`accordion:${t.id}:content:${e}`},Se=(t,e)=>{var r,o;return((o=(r=t.ids)==null?void 0:r.itemTrigger)==null?void 0:o.call(r,e))??`accordion:${t.id}:trigger:${e}`},Pr=t=>t.getById(Ee(t)),Re=t=>{const r=`[aria-controls][data-ownedby='${CSS.escape(Ee(t))}']:not([disabled])`;return dr(Pr(t),r)},Tr=t=>ir(Re(t)),Er=t=>or(Re(t)),Sr=(t,e)=>rr(Re(t),Se(t,e)),Lr=(t,e)=>tr(Re(t),Se(t,e));function Fr(t,e){const{send:r,context:o,prop:i,scope:s,computed:v}=t,C=o.get("focusedValue"),d=o.get("value"),b=i("multiple");function p(a){let n=a;!b&&n.length>1&&(n=[n[0]]),r({type:"VALUE.SET",value:n})}function y(a){return{expanded:d.includes(a.value),focused:C===a.value,disabled:!!(a.disabled??i("disabled"))}}return{focusedValue:C,value:d,setValue:p,getItemState:y,getRootProps(){return e.element({...he.root.attrs,dir:i("dir"),id:Ee(s),"data-orientation":i("orientation")})},getItemProps(a){const n=y(a);return e.element({...he.item.attrs,dir:i("dir"),id:kr(s,a.value),"data-state":n.expanded?"open":"closed","data-focus":de(n.focused),"data-disabled":de(n.disabled),"data-orientation":i("orientation")})},getItemContentProps(a){const n=y(a);return e.element({...he.itemContent.attrs,dir:i("dir"),role:"region",id:qe(s,a.value),"aria-labelledby":Se(s,a.value),hidden:!n.expanded,"data-state":n.expanded?"open":"closed","data-disabled":de(n.disabled),"data-focus":de(n.focused),"data-orientation":i("orientation")})},getItemIndicatorProps(a){const n=y(a);return e.element({...he.itemIndicator.attrs,dir:i("dir"),"aria-hidden":!0,"data-state":n.expanded?"open":"closed","data-disabled":de(n.disabled),"data-focus":de(n.focused),"data-orientation":i("orientation")})},getItemTriggerProps(a){const{value:n}=a,f=y(a);return e.button({...he.itemTrigger.attrs,type:"button",dir:i("dir"),id:Se(s,n),"aria-controls":qe(s,n),"aria-expanded":f.expanded,disabled:f.disabled,"data-orientation":i("orientation"),"aria-disabled":f.disabled,"data-state":f.expanded?"open":"closed","data-ownedby":Ee(s),onFocus(){f.disabled||r({type:"TRIGGER.FOCUS",value:n})},onBlur(){f.disabled||r({type:"TRIGGER.BLUR"})},onClick(m){f.disabled||(cr()&&m.currentTarget.focus(),r({type:"TRIGGER.CLICK",value:n}))},onKeyDown(m){if(m.defaultPrevented||f.disabled)return;const u={ArrowDown(){v("isHorizontal")||r({type:"GOTO.NEXT",value:n})},ArrowUp(){v("isHorizontal")||r({type:"GOTO.PREV",value:n})},ArrowRight(){v("isHorizontal")&&r({type:"GOTO.NEXT",value:n})},ArrowLeft(){v("isHorizontal")&&r({type:"GOTO.PREV",value:n})},Home(){r({type:"GOTO.FIRST",value:n})},End(){r({type:"GOTO.LAST",value:n})}},P=lr(m,{dir:i("dir"),orientation:i("orientation")}),F=u[P];F&&(F(m),m.preventDefault())}})}}}var{and:Ar,not:Rr}=Qt(),Br=Jt({props({props:t}){return{collapsible:!1,multiple:!1,orientation:"vertical",defaultValue:[],...t}},initialState(){return"idle"},context({prop:t,bindable:e}){return{focusedValue:e(()=>({defaultValue:null,sync:!0,onChange(r){var o;(o=t("onFocusChange"))==null||o({value:r})}})),value:e(()=>({defaultValue:t("defaultValue"),value:t("value"),onChange(r){var o;(o=t("onValueChange"))==null||o({value:r})}}))}},computed:{isHorizontal:({prop:t})=>t("orientation")==="horizontal"},on:{"VALUE.SET":{actions:["setValue"]}},states:{idle:{on:{"TRIGGER.FOCUS":{target:"focused",actions:["setFocusedValue"]}}},focused:{on:{"GOTO.NEXT":{actions:["focusNextTrigger"]},"GOTO.PREV":{actions:["focusPrevTrigger"]},"TRIGGER.CLICK":[{guard:Ar("isExpanded","canToggle"),actions:["collapse"]},{guard:Rr("isExpanded"),actions:["expand"]}],"GOTO.FIRST":{actions:["focusFirstTrigger"]},"GOTO.LAST":{actions:["focusLastTrigger"]},"TRIGGER.BLUR":{target:"idle",actions:["clearFocusedValue"]}}}},implementations:{guards:{canToggle:({prop:t})=>!!t("collapsible")||!!t("multiple"),isExpanded:({context:t,event:e})=>t.get("value").includes(e.value)},actions:{collapse({context:t,prop:e,event:r}){const o=e("multiple")?nr(t.get("value"),r.value):[];t.set("value",o)},expand({context:t,prop:e,event:r}){const o=e("multiple")?ar(t.get("value"),r.value):[r.value];t.set("value",o)},focusFirstTrigger({scope:t}){var e;(e=Tr(t))==null||e.focus()},focusLastTrigger({scope:t}){var e;(e=Er(t))==null||e.focus()},focusNextTrigger({context:t,scope:e}){const r=t.get("focusedValue");if(!r)return;const o=Sr(e,r);o==null||o.focus()},focusPrevTrigger({context:t,scope:e}){const r=t.get("focusedValue");if(!r)return;const o=Lr(e,r);o==null||o.focus()},setFocusedValue({context:t,event:e}){t.set("focusedValue",e.value)},clearFocusedValue({context:t}){t.set("focusedValue",null)},setValue({context:t,event:e}){t.set("value",e.value)},coarseValue({context:t,prop:e}){!e("multiple")&&t.get("value").length>1&&(er("The value of accordion should be a single value when multiple is false."),t.set("value",[t.get("value")[0]]))}}}});at()(["collapsible","dir","disabled","getRootNode","id","ids","multiple","onFocusChange","onValueChange","orientation","value","defaultValue"]);at()(["value","disabled"]);var Hr=O("<div><!></div>");function Ir(t,e){const r=wt();ne(e,!0);const o=Y(e,"animationConfig",19,()=>({duration:200})),i=Y(e,"base",3,""),s=Y(e,"padding",3,""),v=Y(e,"spaceY",3,"space-y-2"),C=Y(e,"rounded",3,"rounded-base"),d=Y(e,"width",3,"w-full"),b=Y(e,"classes",3,""),p=ot(e,["$$slots","$$events","$$legacy","animationConfig","base","padding","spaceY","rounded","width","classes","children","iconOpen","iconClosed"]),y=vr(Br,()=>({id:r,...p})),a=Z(()=>Fr(y,fr));ur({get api(){return w(a)},get animationConfig(){return o()},get iconClosed(){return e.iconClosed},get iconOpen(){return e.iconOpen}});var n=Hr();let f;var m=M(n);ue(m,()=>e.children??Qe),D(n),j(u=>f=Pe(n,f,{class:`${i()??""} ${s()??""} ${v()??""} ${C()??""} ${d()??""} ${b()??""}`,...u,"data-testid":"accordion"}),[()=>w(a).getRootProps()]),H(t,n),se()}var Vr=O('<div data-testid="accordion-lead"><!></div>'),Nr=O('<button><!> <div data-testid="accordion-control"><!></div> <div data-testid="accordion-indicator"><!></div></button>'),Dr=O("<div><!></div>"),Or=O("<div><!> <!></div>");function Mr(t,e){ne(e,!0);const r=Y(e,"headingLevel",3,3),o=Y(e,"controlBase",3,"flex text-start items-center space-x-4 w-full"),i=Y(e,"controlHover",3,"hover:preset-tonal-primary"),s=Y(e,"controlPadding",3,"py-2 px-4"),v=Y(e,"controlRounded",3,"rounded-base"),C=Y(e,"leadBase",3,""),d=Y(e,"leadClasses",3,""),b=Y(e,"contentBase",3,"flex-1"),p=Y(e,"contentClasses",3,""),y=Y(e,"indicatorBase",3,""),a=Y(e,"indicatorClasses",3,""),n=Y(e,"panelPadding",3,"py-2 px-4"),f=ot(e,["$$slots","$$events","$$legacy","headingLevel","base","spaceY","classes","controlBase","controlHover","controlPadding","controlRounded","controlClasses","leadBase","leadClasses","contentBase","contentClasses","indicatorBase","indicatorClasses","panelBase","panelPadding","panelRounded","panelClasses","control","lead","panel"]),m=pr();var u=Or();let P;var F=M(u);xr(F,()=>`h${r()}`,!1,(x,l)=>{var h=Nr();let T;var A=M(h);{var W=R=>{var B=Vr(),G=M(B);ue(G,()=>e.lead),D(B),j(()=>le(B,1,`${C()??""} ${d()??""}`)),H(R,B)};$(A,R=>{e.lead&&R(W)})}var E=z(A,2),c=M(E);ue(c,()=>e.control),D(E);var g=z(E,2),I=M(g);{var V=R=>{var B=ae(),G=Q(B);{var te=X=>{var oe=ae(),xe=Q(oe);ue(xe,()=>m.iconOpen),H(X,oe)},U=X=>{var oe=ge("−");H(X,oe)};$(G,X=>{m.iconOpen?X(te):X(U,!1)})}H(R,B)},N=(R,B)=>{{var G=U=>{var X=ae(),oe=Q(X);ue(oe,()=>m.iconClosed),H(U,X)},te=U=>{var X=ge("+");H(U,X)};$(R,U=>{m.iconClosed?U(G):U(te,!1)},B)}};$(I,R=>{m.api.value.includes(e.value)?R(V):R(N,!1)})}D(g),D(h),j(R=>{T=Pe(h,T,{class:`${o()??""} ${i()??""} ${s()??""} ${v()??""} ${e.controlClasses??""}`,...R,"data-testid":"accordion-control"}),le(E,1,`${b()??""} ${p()??""}`),le(g,1,`${y()??""} ${a()??""}`)},[()=>m.api.getItemTriggerProps(f)]),H(l,h)});var L=z(F,2);{var k=x=>{var l=Dr();let h;var T=M(l);ue(T,()=>e.panel??Qe),D(l),j(A=>h=Pe(l,h,{class:`${e.panelBase??""} ${n()??""} ${e.panelRounded??""} ${e.panelClasses??""}`,...A,"data-testid":"accordion-panel"}),[()=>m.api.getItemContentProps(f)]),hr(3,l,()=>mr,()=>m.animationConfig),H(x,l)};$(L,x=>{m.api.value.includes(e.value)&&x(k)})}D(u),j(x=>P=Pe(u,P,{class:`${e.base??""} ${e.spaceY??""} ${e.classes??""}`,...x,"data-testid":"accordion-item"}),[()=>m.api.getItemProps(f)]),H(t,u),se()}const Ve=Object.assign(Ir,{Item:Mr});function Wr(t,e,r,o,i,s,v){t.stopPropagation(),e().includes(w(o))?i(w(o).id):(s(w(o)),Te(it,!0))}var zr=O('<button type="button" title="Data Hierarchy" class="btn-icon-color"><i class="fa-solid fa-sitemap fa-xl"></i> <span class="sr-only">View Data Hierarchy</span></button>'),Gr=O('<i class="fa-regular fa-square-check fa-xl"></i>'),Yr=O('<i class="fa-solid fa-right-from-bracket fa-xl"></i>'),Ur=O('<button type="button" class="btn-icon-color"><!></button>'),qr=O('<button type="button" title="Information" class="btn-icon-color"><i class="fa-solid fa-circle-info fa-xl"></i> <span class="sr-only">View Information</span></button> <button type="button" class="btn-icon-color"><i class="fa-solid fa-filter fa-xl"></i> <span class="sr-only"> </span></button> <!> <!>',1);function $r(t,e){ne(e,!0);const[r,o]=fe(),i=()=>K(C,"$exports",r),s=()=>K(it,"$panelOpen",r),v=()=>K(et,"$page",r);let{exports:C,addExport:d,removeExport:b}=qt,p=Y(e,"data",19,()=>({})),y=Z(()=>({id:Kt(),searchResult:p().row,display:p().row.display||p().row.name,conceptPath:p().row.conceptPath}));function a(c){return g=>{var I;g.stopPropagation(),Ut({row:p().row.conceptPath,component:c,table:(I=p())==null?void 0:I.tableName})}}const n=a("info"),f=a("filter"),m=a("hierarchy");let u=Z(()=>v().url.pathname.includes("/discover")),P=Z(()=>i().map(c=>c.conceptPath).includes(w(y).conceptPath)),F=Z(()=>w(u)&&!p().row.allowFiltering);var L=qr(),k=Q(L);k.__click=n;var x=z(k,2);x.__click=f;var l=z(M(x),2),h=M(l,!0);D(l),D(x);var T=z(x,2);{var A=c=>{var g=zr();g.__click=m,H(c,g)};$(T,c=>{c(A)})}var W=z(T,2);{var E=c=>{var g=Ur();g.__click=[Wr,i,C,y,b,d,s];var I=M(g);{var V=R=>{var B=Gr();H(R,B)},N=R=>{var B=Yr();H(R,B)};$(I,R=>{w(P)?R(V):R(N,!1)})}D(g),j(()=>J(g,"title",w(P)?"Remove from Analysis":"Add for Analysis")),H(c,g)};$(W,c=>{w(u)||c(E)})}j(()=>{J(x,"title",w(F)?"Filtering is not available for this variable":"Filter"),x.disabled=w(F),pe(h,w(F)?"Filtering is not available for this variable":"View Filter")}),H(t,L),se(),o()}Ce(["click"]);function Kr(t,e){re(e,!w(e))}function jr(t,e,r,o,i){var s,v,C;(s=e.facet)!=null&&s.children&&((C=(v=e.facet)==null?void 0:v.children)==null?void 0:C.length)>0?w(r)(e.facet.name)==="indeterminate"?o(i()):o(e.facet.children):o([e.facet])}var Zr=O('<button type="button" class="arrow-button svelte-15i2cro"><i></i></button>'),Xr=O('<div class="flex flex-col ml-4"></div>'),Jr=O('<label class="m-1"><!> <input type="checkbox"/> <span> </span></label> <!>',1);function lt(t,e){ne(e,!0);const[r,o]=fe(),i=()=>K(v,"$selectedFacets",r);let{updateFacets:s,selectedFacets:v}=It,C=ve(!1);function d(){var l;return((l=e.facet.children)==null?void 0:l.filter(h=>i().some(T=>T.name===h.name)))??[]}let b=Z(()=>l=>{var E;const h=e.facet.children&&e.facet.children.some(c=>i().some(g=>g.name===c.name));let T=!1;h&&(T=((E=e.facet.children)==null?void 0:E.every(c=>i().some(g=>g.name===c.name)))??!1);const A=h&&!T;return i().some(c=>c.name===l)||T?"true":A?"indeterminate":"false"}),p=Z(()=>w(b)(e.facet.name)==="true"),y=Z(()=>e.facet.children?[...e.facet.children.filter(l=>{var T;return(!e.textFilterValue||l.display.toLowerCase().includes(e.textFilterValue.toLowerCase())||l.name.toLowerCase().includes(e.textFilterValue.toLowerCase())||((T=l.description)==null?void 0:T.toLowerCase().includes(e.textFilterValue.toLowerCase())))&&i().some(A=>A.name===l.name)}).sort((l,h)=>(h.count||0)-(l.count||0)),...e.facet.children.filter(l=>{var T;return(!e.textFilterValue||l.display.toLowerCase().includes(e.textFilterValue.toLowerCase())||l.name.toLowerCase().includes(e.textFilterValue.toLowerCase())||((T=l.description)==null?void 0:T.toLowerCase().includes(e.textFilterValue.toLowerCase())))&&!i().some(A=>A.name===l.name)}).sort((l,h)=>(h.count||0)-(l.count||0))]:[]);var a=Jr(),n=Q(a),f=M(n);{var m=l=>{var h=Zr();h.__click=[Kr,C];var T=M(h);D(h),j(()=>{J(h,"aria-label",`Toggle Facet ${w(C)?"open":"closed"}`),J(h,"data-testid",`facet-${e.facet.name}-arrow`),le(T,1,`fa-solid ${w(C)?"fa-angle-down":"fa-angle-right"}`)}),H(l,h)};$(f,l=>{var h,T,A;((h=e.facet)==null?void 0:h.children)!==void 0&&((A=(T=e.facet)==null?void 0:T.children)==null?void 0:A.length)>0&&l(m)})}var u=z(f,2);rt(u),u.__click=[jr,e,b,s,d];var P=z(u,2);let F;var L=M(P,!0);D(P),D(n);var k=z(n,2);{var x=l=>{var h=Xr();be(h,21,()=>w(y),ye,(T,A)=>{lt(T,{get facet(){return w(A)},get facetCategory(){return e.facetCategory},get textFilterValue(){return e.textFilterValue}})}),D(h),j(()=>J(h,"data-testid",`facet-${e.facet.name}-children`)),H(l,h)};$(k,l=>{var h;w(C)&&w(y)!==void 0&&((h=w(y))==null?void 0:h.length)>0&&l(x)})}j((l,h,T)=>{J(n,"data-testid",`facet-${e.facet.name}-label`),J(n,"for",e.facet.name),le(u,1,l,"svelte-15i2cro"),J(u,"id",e.facet.name),J(u,"name",e.facet.name),Gt(u,e.facet),Yt(u,w(p)),u.disabled=e.facet.count===0&&!w(p),J(u,"aria-checked",w(p)),F=le(P,1,"",null,F,h),pe(L,T)},[()=>`&[aria-disabled=“true”]:opacity-75 ${w(b)(e.facet.name)}`,()=>({"opacity-75":e.facet.count===0}),()=>{var l;return`${e.facet.display} (${(l=e.facet.count)==null?void 0:l.toLocaleString()})`}]),H(t,a),se(),o()}Ce(["click"]);var Qr=O('<input class="text-sm" type="search" name="facet-fitler"/>'),eo=(t,e)=>re(e,!w(e)),to=O('<button data-testId="show-more-facets" class="show-more w-fit mx-auto my-1 svelte-ba0j3b"> <i></i></button>'),ro=O('<div class="flex flex-col"><!> <!> <!></div>'),oo=(t,e)=>Vt([w(e)]),io=O('<span class="badge relative z-10 preset-outlined-surface-500 my-1 py-2 flex items-center box-border w-full max-w-full overflow-hidden"><span class="overflow-hidden text-ellipsis whitespace-nowrap min-w-0"> </span> <button class="chip-close ml-1 shrink-0" aria-label="Remove Facet"><i class="fa-solid fa-times hover:text-secondary-500"></i></button></span>'),ao=O('<!> <div class="mb-2"></div>',1);function $e(t,e){ne(e,!0);const[r,o]=fe(),i=()=>K(Nt,"$hiddenFacets",r),s=()=>K(Ae,"$selectedFacets",r);let v=Y(e,"facets",19,()=>e.facetCategory.facets),C=Y(e,"numFacetsToShow",3,5),d=ve(""),b=ve(!1),p=Z(()=>v().filter(k=>!(i()[e.facetCategory.name]||[]).includes(k.name))),y=Z(()=>w(p).length>C()),a=Z(()=>(v()||w(d)||w(b)||s()||e.facetCategory)&&u()),n=Z(()=>s().filter(k=>{var x,l;return((x=k==null?void 0:k.categoryRef)==null?void 0:x.name)===((l=e.facetCategory)==null?void 0:l.name)}));function f(k){var h,T;const x=((h=k.children)==null?void 0:h.some(A=>s().some(W=>W.name===A.name)))??!1,l=(T=k.children)!=null&&T.length?k.children.every(A=>s().some(W=>W.name===A.name)):!1;return x&&!l}function m(k){return v().some(l=>{var h;return!l.children||((h=l==null?void 0:l.children)==null?void 0:h.length)===0?!1:l.children.every(T=>T.name===k||s().some(A=>A.name===T.name))})}function u(){let k=[...w(p)];const x=new Map(s().map(c=>[c.name,c])),l=k.filter(f),h=new Map(l.map(c=>[c.name,c])),T=c=>l.some(g=>{var I;return(I=g.children)==null?void 0:I.some(V=>V.name===c)});k=k.filter(c=>!x.has(c.name)&&!T(c.name)&&!h.has(c.name)&&!m(c.name));const A=s().filter(c=>c.category===e.facetCategory.name&&!T(c.name)&&!m(c.name));A.forEach(c=>{var g;c.count=((g=v().find(I=>I.name===c.name))==null?void 0:g.count)||0});const W=v().filter(c=>{var g;return((g=c.children)==null?void 0:g.length)&&c.children.every(I=>s().some(V=>V.name===I.name))});W.forEach(c=>{var g;c.count=((g=v().find(I=>I.name===c.name))==null?void 0:g.count)||0});const E=l.filter(c=>c.category===e.facetCategory.name);if(E.forEach(c=>{var g;c.count=((g=v().find(I=>I.name===c.name))==null?void 0:g.count)||0}),k.unshift(...A,...W,...E),w(d)){const c=w(d).toLowerCase();k=k.filter(g=>{var N,R;const I=g.display.toLowerCase().includes(c)||g.name.toLowerCase().includes(c)||((N=g.description)==null?void 0:N.toLowerCase().includes(c)),V=(R=g.children)==null?void 0:R.some(B=>{var G;return B.display.toLowerCase().includes(c)||B.name.toLowerCase().includes(c)||((G=B.description)==null?void 0:G.toLowerCase().includes(c))});return I||V})}else w(b)||(k=k.slice(0,C()));return k}var P=ao(),F=Q(P);gr(F,()=>Ve.Item,(k,x)=>{x(k,{get value(){return e.facetCategory.name},headingLevel:6,controlRounded:"rounded-t-xl aria-expanded:rounded-b-none rounded-b-xl",controlClasses:"h6 bg-primary-100-900 hover:bg-secondary-200-800",panelClasses:"bg-surface-100",panelRounded:"rounded-b-xl",control:T=>{De();var A=ge();j(()=>pe(A,e.facetCategory.display)),H(T,A)},panel:T=>{var A=ro(),W=M(A);{var E=V=>{var N=Qr();rt(N),j(()=>{J(N,"placeholder","Filter "+e.facetCategory.display),J(N,"id",e.facetCategory.name+"-filter")}),br(N,()=>w(d),R=>re(d,R)),H(V,N)};$(W,V=>{w(y)&&V(E)})}var c=z(W,2);be(c,17,()=>w(a),ye,(V,N)=>{lt(V,{get facet(){return w(N)},get facetCategory(){return e.facetCategory},get textFilterValue(){return w(d)}})});var g=z(c,2);{var I=V=>{var N=to();N.__click=[eo,b];var R=M(N),B=z(R);D(N),j(()=>{pe(R,`${w(b)?"Show Less":"Show More"} `),le(B,1,`ml-1 fa-solid fa-angle-${w(b)?"up":"down"}`)}),H(V,N)};$(g,V=>{w(y)&&!w(d)&&V(I)})}D(A),H(T,A)},$$slots:{control:!0,panel:!0}})});var L=z(F,2);be(L,21,()=>w(n),ye,(k,x)=>{var l=io(),h=M(l),T=M(h,!0);D(h);var A=z(h,2);A.__click=[oo,x],D(l),j(()=>{J(l,"id",w(x).name),pe(T,w(x).display)}),H(k,l)}),D(L),H(t,P),se(),o()}Ce(["click"]);var no=O('<i class="fa-solid fa-angle-up"></i>'),so=O('<i class="fa-solid fa-angle-down"></i>'),lo=O('<i class="fa-solid fa-angle-up"></i>'),co=O('<i class="fa-solid fa-angle-down"></i>');function uo(t,e){ne(e,!0);const[r,o]=fe(),i=()=>K(Ae,"$selectedFacets",r),s=()=>K(Dt,"$facetsPromise",r),v=()=>K(He,"$openFacets",r);function C(){let p=[];return i().forEach(y=>{var n,f;let a=p.find(m=>m.display===y.category);a?a.facets.push(y):p.push({display:((n=y==null?void 0:y.categoryRef)==null?void 0:n.display)||y.category,facets:[y],description:((f=y==null?void 0:y.categoryRef)==null?void 0:f.description)||"",name:y.category})}),p}var d=ae(),b=Q(d);Xt(b,s,p=>{st(p,{ring:!0,size:"medium"})},(p,y)=>{var a=ae(),n=Q(a);{var f=u=>{Ve(u,{multiple:!0,get value(){return v()},onValueChange:L=>Te(He,L.value),iconOpen:L=>{var k=no();H(L,k)},iconClosed:L=>{var k=so();H(L,k)},children:(L,k)=>{var x=ae(),l=Q(x);be(l,17,()=>w(y),ye,(h,T)=>{$e(h,{get facetCategory(){return w(T)}})}),H(L,x)},$$slots:{iconOpen:!0,iconClosed:!0,default:!0}})},m=u=>{Ve(u,{multiple:!0,get value(){return v()},onValueChange:L=>Te(He,L.value),iconOpen:L=>{var k=lo();H(L,k)},iconClosed:L=>{var k=co();H(L,k)},children:(L,k)=>{var x=ae(),l=Q(x);be(l,17,C,ye,(h,T)=>{$e(h,{get facetCategory(){return w(T)}})}),H(L,x)},$$slots:{iconOpen:!0,iconClosed:!0,default:!0}})};$(n,u=>{var P;((P=w(y))==null?void 0:P.length)>0?u(f):u(m,!1)})}H(p,a)},p=>{nt(p,{title:"Something went wrong loading your search options.",color:"secondary",children:(y,a)=>{De();var n=ge("Please wait a moment, refresh the page, and try again.");H(y,n)},$$slots:{default:!0}})}),H(t,d),se(),o()}let Ne={},ct;function Ie(t={}){Ne={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function _(t){return t?Ne[t]:Ne}function po(t){ct=t}function ee(){return ct}let Le={};function _e(t,e){Le[t]=e}function ce(t){var e;(e=Le[t])==null||e.call(Le)}function vo(){Le={}}function ke(t,e,r,o){return(t/=o/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e}function dt(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(r=>{const o=r.matches(e),i=Array.from(r.querySelectorAll(e));return[...o?[r]:[],...i]}).filter(r=>getComputedStyle(r).pointerEvents!=="none"&&mo(r))}function ut(t){if(!t||ho(t))return;const e=_("smoothScroll"),r=t.offsetHeight>window.innerHeight;t.scrollIntoView({behavior:!e||fo(t)?"auto":"smooth",inline:"center",block:r?"start":"center"})}function fo(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function ho(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function mo(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let Fe={};function q(t,e){Fe[t]=e}function S(t){return t?Fe[t]:Fe}function Ke(){Fe={}}function go(t,e,r,o){let i=S("__activeStagePosition");const s=i||r.getBoundingClientRect(),v=o.getBoundingClientRect(),C=ke(t,s.x,v.x-s.x,e),d=ke(t,s.y,v.y-s.y,e),b=ke(t,s.width,v.width-s.width,e),p=ke(t,s.height,v.height-s.height,e);i={x:C,y:d,width:b,height:p},vt(i),q("__activeStagePosition",i)}function pt(t){if(!t)return;const e=t.getBoundingClientRect(),r={x:e.x,y:e.y,width:e.width,height:e.height};q("__activeStagePosition",r),vt(r)}function bo(){const t=S("__activeStagePosition"),e=S("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const r=window.innerWidth,o=window.innerHeight;e.setAttribute("viewBox",`0 0 ${r} ${o}`)}function yo(t){const e=wo(t);document.body.appendChild(e),mt(e,r=>{r.target.tagName==="path"&&ce("overlayClick")}),q("__overlaySvg",e)}function vt(t){const e=S("__overlaySvg");if(!e){yo(t);return}const r=e.firstElementChild;if((r==null?void 0:r.tagName)!=="path")throw new Error("no path element found in stage svg");r.setAttribute("d",ft(t))}function wo(t){const e=window.innerWidth,r=window.innerHeight,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("driver-overlay","driver-overlay-animated"),o.setAttribute("viewBox",`0 0 ${e} ${r}`),o.setAttribute("xmlSpace","preserve"),o.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),o.setAttribute("version","1.1"),o.setAttribute("preserveAspectRatio","xMinYMin slice"),o.style.fillRule="evenodd",o.style.clipRule="evenodd",o.style.strokeLinejoin="round",o.style.strokeMiterlimit="2",o.style.zIndex="10000",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%";const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",ft(t)),i.style.fill=_("overlayColor")||"rgb(0,0,0)",i.style.opacity=`${_("overlayOpacity")}`,i.style.pointerEvents="auto",i.style.cursor="auto",o.appendChild(i),o}function ft(t){const e=window.innerWidth,r=window.innerHeight,o=_("stagePadding")||0,i=_("stageRadius")||0,s=t.width+o*2,v=t.height+o*2,C=Math.min(i,s/2,v/2),d=Math.floor(Math.max(C,0)),b=t.x-o+d,p=t.y-o,y=s-d*2,a=v-d*2;return`M${e},0L0,0L0,${r}L${e},${r}L${e},0Z
    M${b},${p} h${y} a${d},${d} 0 0 1 ${d},${d} v${a} a${d},${d} 0 0 1 -${d},${d} h-${y} a${d},${d} 0 0 1 -${d},-${d} v-${a} a${d},${d} 0 0 1 ${d},-${d} z`}function Co(){const t=S("__overlaySvg");t&&t.remove()}function xo(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function je(t){const{element:e}=t;let r=typeof e=="function"?e():typeof e=="string"?document.querySelector(e):e;r||(r=xo()),ko(r,t)}function _o(){const t=S("__activeElement"),e=S("__activeStep");t&&(pt(t),bo(),bt(t,e))}function ko(t,e){var r;const o=Date.now(),i=S("__activeStep"),s=S("__activeElement")||t,v=!s||s===t,C=t.id==="driver-dummy-element",d=s.id==="driver-dummy-element",b=_("animate"),p=e.onHighlightStarted||_("onHighlightStarted"),y=(e==null?void 0:e.onHighlighted)||_("onHighlighted"),a=(i==null?void 0:i.onDeselected)||_("onDeselected"),n=_(),f=S();!v&&a&&a(d?void 0:s,i,{config:n,state:f,driver:ee()}),p&&p(C?void 0:t,e,{config:n,state:f,driver:ee()});const m=!v&&b;let u=!1;Lo(),q("previousStep",i),q("previousElement",s),q("activeStep",e),q("activeElement",t);const P=()=>{if(S("__transitionCallback")!==P)return;const F=Date.now()-o,L=400-F<=400/2;e.popover&&L&&!u&&m&&(Ze(t,e),u=!0),_("animate")&&F<400?go(F,400,s,t):(pt(t),y&&y(C?void 0:t,e,{config:_(),state:S(),driver:ee()}),q("__transitionCallback",void 0),q("__previousStep",i),q("__previousElement",s),q("__activeStep",e),q("__activeElement",t)),window.requestAnimationFrame(P)};q("__transitionCallback",P),window.requestAnimationFrame(P),ut(t),!m&&e.popover&&Ze(t,e),s.classList.remove("driver-active-element","driver-no-interaction"),s.removeAttribute("aria-haspopup"),s.removeAttribute("aria-expanded"),s.removeAttribute("aria-controls"),((r=e.disableActiveInteraction)!=null?r:_("disableActiveInteraction"))&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function Po(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function we(){const t=S("__resizeTimeout");t&&window.cancelAnimationFrame(t),q("__resizeTimeout",window.requestAnimationFrame(_o))}function To(t){var e;if(!S("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const r=S("__activeElement"),o=(e=S("popover"))==null?void 0:e.wrapper,i=dt([...o?[o]:[],...r?[r]:[]]),s=i[0],v=i[i.length-1];if(t.preventDefault(),t.shiftKey){const C=i[i.indexOf(document.activeElement)-1]||v;C==null||C.focus()}else{const C=i[i.indexOf(document.activeElement)+1]||s;C==null||C.focus()}}function ht(t){var e;((e=_("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?ce("escapePress"):t.key==="ArrowRight"?ce("arrowRightPress"):t.key==="ArrowLeft"&&ce("arrowLeftPress"))}function mt(t,e,r){const o=(i,s)=>{const v=i.target;t.contains(v)&&((!r||r(v))&&(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()),s==null||s(i))};document.addEventListener("pointerdown",o,!0),document.addEventListener("mousedown",o,!0),document.addEventListener("pointerup",o,!0),document.addEventListener("mouseup",o,!0),document.addEventListener("click",i=>{o(i,e)},!0)}function Eo(){window.addEventListener("keyup",ht,!1),window.addEventListener("keydown",To,!1),window.addEventListener("resize",we),window.addEventListener("scroll",we)}function So(){window.removeEventListener("keyup",ht),window.removeEventListener("resize",we),window.removeEventListener("scroll",we)}function Lo(){const t=S("popover");t&&(t.wrapper.style.display="none")}function Ze(t,e){var r,o;let i=S("popover");i&&document.body.removeChild(i.wrapper),i=Ao(),document.body.appendChild(i.wrapper);const{title:s,description:v,showButtons:C,disableButtons:d,showProgress:b,nextBtnText:p=_("nextBtnText")||"Next &rarr;",prevBtnText:y=_("prevBtnText")||"&larr; Previous",progressText:a=_("progressText")||"{current} of {total}"}=e.popover||{};i.nextButton.innerHTML=p,i.previousButton.innerHTML=y,i.progress.innerHTML=a,s?(i.title.innerHTML=s,i.title.style.display="block"):i.title.style.display="none",v?(i.description.innerHTML=v,i.description.style.display="block"):i.description.style.display="none";const n=C||_("showButtons"),f=b||_("showProgress")||!1,m=(n==null?void 0:n.includes("next"))||(n==null?void 0:n.includes("previous"))||f;i.closeButton.style.display=n.includes("close")?"block":"none",m?(i.footer.style.display="flex",i.progress.style.display=f?"block":"none",i.nextButton.style.display=n.includes("next")?"block":"none",i.previousButton.style.display=n.includes("previous")?"block":"none"):i.footer.style.display="none";const u=d||_("disableButtons")||[];u!=null&&u.includes("next")&&(i.nextButton.disabled=!0,i.nextButton.classList.add("driver-popover-btn-disabled")),u!=null&&u.includes("previous")&&(i.previousButton.disabled=!0,i.previousButton.classList.add("driver-popover-btn-disabled")),u!=null&&u.includes("close")&&(i.closeButton.disabled=!0,i.closeButton.classList.add("driver-popover-btn-disabled"));const P=i.wrapper;P.style.display="block",P.style.left="",P.style.top="",P.style.bottom="",P.style.right="",P.id="driver-popover-content",P.setAttribute("role","dialog"),P.setAttribute("aria-labelledby","driver-popover-title"),P.setAttribute("aria-describedby","driver-popover-description");const F=i.arrow;F.className="driver-popover-arrow";const L=((r=e.popover)==null?void 0:r.popoverClass)||_("popoverClass")||"";P.className=`driver-popover ${L}`.trim(),mt(i.wrapper,h=>{var T,A,W;const E=h.target,c=((T=e.popover)==null?void 0:T.onNextClick)||_("onNextClick"),g=((A=e.popover)==null?void 0:A.onPrevClick)||_("onPrevClick"),I=((W=e.popover)==null?void 0:W.onCloseClick)||_("onCloseClick");if(E.closest(".driver-popover-next-btn"))return c?c(t,e,{config:_(),state:S(),driver:ee()}):ce("nextClick");if(E.closest(".driver-popover-prev-btn"))return g?g(t,e,{config:_(),state:S(),driver:ee()}):ce("prevClick");if(E.closest(".driver-popover-close-btn"))return I?I(t,e,{config:_(),state:S(),driver:ee()}):ce("closeClick")},h=>!(i!=null&&i.description.contains(h))&&!(i!=null&&i.title.contains(h))&&typeof h.className=="string"&&h.className.includes("driver-popover")),q("popover",i);const k=((o=e.popover)==null?void 0:o.onPopoverRender)||_("onPopoverRender");k&&k(i,{config:_(),state:S(),driver:ee()}),bt(t,e),ut(P);const x=t.classList.contains("driver-dummy-element"),l=dt([P,...x?[]:[t]]);l.length>0&&l[0].focus()}function gt(){const t=S("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),r=_("stagePadding")||0,o=_("popoverOffset")||0;return{width:e.width+r+o,height:e.height+r+o,realWidth:e.width,realHeight:e.height}}function Xe(t,e){const{elementDimensions:r,popoverDimensions:o,popoverPadding:i,popoverArrowDimensions:s}=e;return t==="start"?Math.max(Math.min(r.top-i,window.innerHeight-o.realHeight-s.width),s.width):t==="end"?Math.max(Math.min(r.top-(o==null?void 0:o.realHeight)+r.height+i,window.innerHeight-(o==null?void 0:o.realHeight)-s.width),s.width):t==="center"?Math.max(Math.min(r.top+r.height/2-(o==null?void 0:o.realHeight)/2,window.innerHeight-(o==null?void 0:o.realHeight)-s.width),s.width):0}function Je(t,e){const{elementDimensions:r,popoverDimensions:o,popoverPadding:i,popoverArrowDimensions:s}=e;return t==="start"?Math.max(Math.min(r.left-i,window.innerWidth-o.realWidth-s.width),s.width):t==="end"?Math.max(Math.min(r.left-(o==null?void 0:o.realWidth)+r.width+i,window.innerWidth-(o==null?void 0:o.realWidth)-s.width),s.width):t==="center"?Math.max(Math.min(r.left+r.width/2-(o==null?void 0:o.realWidth)/2,window.innerWidth-(o==null?void 0:o.realWidth)-s.width),s.width):0}function bt(t,e){const r=S("popover");if(!r)return;const{align:o="start",side:i="left"}=(e==null?void 0:e.popover)||{},s=o,v=t.id==="driver-dummy-element"?"over":i,C=_("stagePadding")||0,d=gt(),b=r.arrow.getBoundingClientRect(),p=t.getBoundingClientRect(),y=p.top-d.height;let a=y>=0;const n=window.innerHeight-(p.bottom+d.height);let f=n>=0;const m=p.left-d.width;let u=m>=0;const P=window.innerWidth-(p.right+d.width);let F=P>=0;const L=!a&&!f&&!u&&!F;let k=v;if(v==="top"&&a?F=u=f=!1:v==="bottom"&&f?F=u=a=!1:v==="left"&&u?F=a=f=!1:v==="right"&&F&&(u=a=f=!1),v==="over"){const x=window.innerWidth/2-d.realWidth/2,l=window.innerHeight/2-d.realHeight/2;r.wrapper.style.left=`${x}px`,r.wrapper.style.right="auto",r.wrapper.style.top=`${l}px`,r.wrapper.style.bottom="auto"}else if(L){const x=window.innerWidth/2-(d==null?void 0:d.realWidth)/2,l=10;r.wrapper.style.left=`${x}px`,r.wrapper.style.right="auto",r.wrapper.style.bottom=`${l}px`,r.wrapper.style.top="auto"}else if(u){const x=Math.min(m,window.innerWidth-(d==null?void 0:d.realWidth)-b.width),l=Xe(s,{elementDimensions:p,popoverDimensions:d,popoverPadding:C,popoverArrowDimensions:b});r.wrapper.style.left=`${x}px`,r.wrapper.style.top=`${l}px`,r.wrapper.style.bottom="auto",r.wrapper.style.right="auto",k="left"}else if(F){const x=Math.min(P,window.innerWidth-(d==null?void 0:d.realWidth)-b.width),l=Xe(s,{elementDimensions:p,popoverDimensions:d,popoverPadding:C,popoverArrowDimensions:b});r.wrapper.style.right=`${x}px`,r.wrapper.style.top=`${l}px`,r.wrapper.style.bottom="auto",r.wrapper.style.left="auto",k="right"}else if(a){const x=Math.min(y,window.innerHeight-d.realHeight-b.width);let l=Je(s,{elementDimensions:p,popoverDimensions:d,popoverPadding:C,popoverArrowDimensions:b});r.wrapper.style.top=`${x}px`,r.wrapper.style.left=`${l}px`,r.wrapper.style.bottom="auto",r.wrapper.style.right="auto",k="top"}else if(f){const x=Math.min(n,window.innerHeight-(d==null?void 0:d.realHeight)-b.width);let l=Je(s,{elementDimensions:p,popoverDimensions:d,popoverPadding:C,popoverArrowDimensions:b});r.wrapper.style.left=`${l}px`,r.wrapper.style.bottom=`${x}px`,r.wrapper.style.top="auto",r.wrapper.style.right="auto",k="bottom"}L?r.arrow.classList.add("driver-popover-arrow-none"):Fo(s,k,t)}function Fo(t,e,r){const o=S("popover");if(!o)return;const i=r.getBoundingClientRect(),s=gt(),v=o.arrow,C=s.width,d=window.innerWidth,b=i.width,p=i.left,y=s.height,a=window.innerHeight,n=i.top,f=i.height;v.className="driver-popover-arrow";let m=e,u=t;if(e==="top"?(p+b<=0?(m="right",u="end"):p+b-C<=0&&(m="top",u="start"),p>=d?(m="left",u="end"):p+C>=d&&(m="top",u="end")):e==="bottom"?(p+b<=0?(m="right",u="start"):p+b-C<=0&&(m="bottom",u="start"),p>=d?(m="left",u="start"):p+C>=d&&(m="bottom",u="end")):e==="left"?(n+f<=0?(m="bottom",u="end"):n+f-y<=0&&(m="left",u="start"),n>=a?(m="top",u="end"):n+y>=a&&(m="left",u="end")):e==="right"&&(n+f<=0?(m="bottom",u="start"):n+f-y<=0&&(m="right",u="start"),n>=a?(m="top",u="start"):n+y>=a&&(m="right",u="end")),!m)v.classList.add("driver-popover-arrow-none");else{v.classList.add(`driver-popover-arrow-side-${m}`),v.classList.add(`driver-popover-arrow-align-${u}`);const P=r.getBoundingClientRect(),F=v.getBoundingClientRect(),L=_("stagePadding")||0,k=P.left-L<window.innerWidth&&P.right+L>0&&P.top-L<window.innerHeight&&P.bottom+L>0;e==="bottom"&&k&&(F.x>P.x&&F.x+F.width<P.x+P.width?o.wrapper.style.transform="translateY(0)":(v.classList.remove(`driver-popover-arrow-align-${u}`),v.classList.add("driver-popover-arrow-none"),o.wrapper.style.transform=`translateY(-${L/2}px)`))}}function Ao(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const r=document.createElement("header");r.id="driver-popover-title",r.classList.add("driver-popover-title"),r.style.display="none",r.innerText="Popover Title";const o=document.createElement("div");o.id="driver-popover-description",o.classList.add("driver-popover-description"),o.style.display="none",o.innerText="Popover description is here";const i=document.createElement("button");i.type="button",i.classList.add("driver-popover-close-btn"),i.setAttribute("aria-label","Close"),i.innerHTML="&times;";const s=document.createElement("footer");s.classList.add("driver-popover-footer");const v=document.createElement("span");v.classList.add("driver-popover-progress-text"),v.innerText="";const C=document.createElement("span");C.classList.add("driver-popover-navigation-btns");const d=document.createElement("button");d.type="button",d.classList.add("driver-popover-prev-btn"),d.innerHTML="&larr; Previous";const b=document.createElement("button");return b.type="button",b.classList.add("driver-popover-next-btn"),b.innerHTML="Next &rarr;",C.appendChild(d),C.appendChild(b),s.appendChild(v),s.appendChild(C),t.appendChild(i),t.appendChild(e),t.appendChild(r),t.appendChild(o),t.appendChild(s),{wrapper:t,arrow:e,title:r,description:o,footer:s,previousButton:d,nextButton:b,closeButton:i,footerButtons:C,progress:v}}function Ro(){var t;const e=S("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function Bo(t={}){Ie(t);function e(){_("allowClose")&&p()}function r(){const a=_("overlayClickBehavior");if(_("allowClose")&&a==="close"){p();return}a==="nextStep"&&o()}function o(){const a=S("activeIndex"),n=_("steps")||[];if(typeof a>"u")return;const f=a+1;n[f]?b(f):p()}function i(){const a=S("activeIndex"),n=_("steps")||[];if(typeof a>"u")return;const f=a-1;n[f]?b(f):p()}function s(a){(_("steps")||[])[a]?b(a):p()}function v(){var a;if(S("__transitionCallback"))return;const n=S("activeIndex"),f=S("__activeStep"),m=S("__activeElement");if(typeof n>"u"||typeof f>"u"||typeof S("activeIndex")>"u")return;const u=((a=f.popover)==null?void 0:a.onPrevClick)||_("onPrevClick");if(u)return u(m,f,{config:_(),state:S(),driver:ee()});i()}function C(){var a;if(S("__transitionCallback"))return;const n=S("activeIndex"),f=S("__activeStep"),m=S("__activeElement");if(typeof n>"u"||typeof f>"u")return;const u=((a=f.popover)==null?void 0:a.onNextClick)||_("onNextClick");if(u)return u(m,f,{config:_(),state:S(),driver:ee()});o()}function d(){S("isInitialized")||(q("isInitialized",!0),document.body.classList.add("driver-active",_("animate")?"driver-fade":"driver-simple"),Eo(),_e("overlayClick",r),_e("escapePress",e),_e("arrowLeftPress",v),_e("arrowRightPress",C))}function b(a=0){var n,f,m,u,P,F,L,k;const x=_("steps");if(!x){console.error("No steps to drive through"),p();return}if(!x[a]){p();return}q("__activeOnDestroyed",document.activeElement),q("activeIndex",a);const l=x[a],h=x[a+1],T=x[a-1],A=((n=l.popover)==null?void 0:n.doneBtnText)||_("doneBtnText")||"Done",W=_("allowClose"),E=typeof((f=l.popover)==null?void 0:f.showProgress)<"u"?(m=l.popover)==null?void 0:m.showProgress:_("showProgress"),c=(((u=l.popover)==null?void 0:u.progressText)||_("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${a+1}`).replace("{{total}}",`${x.length}`),g=((P=l.popover)==null?void 0:P.showButtons)||_("showButtons"),I=["next","previous",...W?["close"]:[]].filter(B=>!(g!=null&&g.length)||g.includes(B)),V=((F=l.popover)==null?void 0:F.onNextClick)||_("onNextClick"),N=((L=l.popover)==null?void 0:L.onPrevClick)||_("onPrevClick"),R=((k=l.popover)==null?void 0:k.onCloseClick)||_("onCloseClick");je({...l,popover:{showButtons:I,nextBtnText:h?void 0:A,disableButtons:[...T?[]:["previous"]],showProgress:E,progressText:c,onNextClick:V||(()=>{h?b(a+1):p()}),onPrevClick:N||(()=>{b(a-1)}),onCloseClick:R||(()=>{p()}),...(l==null?void 0:l.popover)||{}}})}function p(a=!0){const n=S("__activeElement"),f=S("__activeStep"),m=S("__activeOnDestroyed"),u=_("onDestroyStarted");if(a&&u){const L=!n||(n==null?void 0:n.id)==="driver-dummy-element";u(L?void 0:n,f,{config:_(),state:S(),driver:ee()});return}const P=(f==null?void 0:f.onDeselected)||_("onDeselected"),F=_("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),So(),Ro(),Po(),Co(),vo(),Ke(),n&&f){const L=n.id==="driver-dummy-element";P&&P(L?void 0:n,f,{config:_(),state:S(),driver:ee()}),F&&F(L?void 0:n,f,{config:_(),state:S(),driver:ee()})}m&&m.focus()}const y={isActive:()=>S("isInitialized")||!1,refresh:we,drive:(a=0)=>{d(),b(a)},setConfig:Ie,setSteps:a=>{Ke(),Ie({..._(),steps:a})},getConfig:_,getState:S,getActiveIndex:()=>S("activeIndex"),isFirstStep:()=>S("activeIndex")===0,isLastStep:()=>{const a=_("steps")||[],n=S("activeIndex");return n!==void 0&&n===a.length-1},getActiveStep:()=>S("activeStep"),getActiveElement:()=>S("activeElement"),getPreviousElement:()=>S("previousElement"),getPreviousStep:()=>S("previousStep"),moveNext:o,movePrevious:i,moveTo:s,hasNextStep:()=>{const a=_("steps")||[],n=S("activeIndex");return n!==void 0&&!!a[n+1]},hasPreviousStep:()=>{const a=_("steps")||[],n=S("activeIndex");return n!==void 0&&!!a[n-1]},highlight:a=>{d(),je({...a,popover:a.popover?{showButtons:[],showProgress:!1,progressText:"",...a.popover}:void 0})},destroy:()=>{p(!1)}};return po(y),y}var Ho=(t,e)=>re(e,!1),Io=O('<p><!></p> <footer class="modal-footer flex justify-end space-x-2 mt-6"><button type="button" class="btn border preset-tonal-primary hover:preset-filled-primary-500">Cancel</button> <button type="button" class="btn preset-filled-primary-500">Start Tour</button></footer>',1),Vo=(t,e,r)=>{re(e,!1),re(r,!0)},No=O('<!> <button type="button" data-testid="explorer-tour-btn" id="tourBtn" class="btn preset-filled-secondary-500">Take a Tour</button>',1);function Do(t,e){ne(e,!0);const[r,o]=fe(),i=()=>K(Ot,"$searchPromise",r);let s=ve(!1),v=ve(!1);const C=()=>{},d=E=>{E==null||E.click()},b=E=>{E==null||E.click(),x.moveNext()},p=E=>c=>{E?c.classList.add("highlight"):c.classList.remove("highlight")};function y(){me.set(""),wr(),$t()}const a=E=>{document.querySelector(`#${E} [data-testid="add-filter"]`).click(),x.moveNext()},n=E=>{const c=document.querySelector(`#${E} #select-all`);c==null||c.click(),setTimeout(()=>{const g=document.querySelector(`#${E} [data-testid="add-filter"]`);g==null||g.click(),x.moveNext()},200)};function f(){document.querySelector("#results-panel-toggle").click()}const m=E=>{const c=E==null?void 0:E.id;(document.querySelector(`#${c} [data-testid="numerical-filter"]`)?"numerical":"categorical")==="numerical"?a(c):n(c)};function u(E,c){return E.replace(/\{\{searchTerm\}\}/g,c)}const P=()=>{const c=document.querySelector("#ExplorerTable-table").querySelectorAll("tr");for(let g=0;g<c.length;g++){const I=c[g];if(I.querySelector('button[title="Filter"]')){I.classList.add("non-stigmatized-row");break}}x.moveNext()},F={disablePrevious:C,clickElement:d,clickElementThenNext:b,addHighlightClass:p(!0),removeHighlightClass:p(!1),resetSearch:y,applyFilterThenNext:m,findAndSetFirstNonStigmatizedAvailableFilterThenNext:P};function L(E){return E.map(c=>{var N,R;const{popover:g,...I}=c,V={...I,popover:{...g,title:u(g.title,(N=e.tourConfig)==null?void 0:N.searchTerm),description:u(g.description,(R=e.tourConfig)==null?void 0:R.searchTerm)}};return g.onPrevClick&&(V.popover.onPrevClick=F[g.onPrevClick]),g.onNextClick&&(V.popover.onNextClick=F[g.onNextClick]),c.onHighlightStarted&&(V.onHighlightStarted=F[c.onHighlightStarted]),c.removeHighlightClass&&(V.removeHighlightClass=F[c.removeHighlightClass]),V})}const k=L(e.tourConfig.steps),x=Bo({showProgress:!0,popoverClass:"picsure-theme",overlayColor:"var(--color-surface-400)",nextBtnText:'Next <i class="fa-solid fa-arrow-right ml-1"></i>',showButtons:["next","close"],disableButtons:["previous"],steps:k,onDestroyed:()=>{var g;y(),Ae.set([]),document.querySelector("#side-panel").classList.contains("open-panel")&&((g=document.querySelector("#results-panel-toggle"))==null||g.click());const c=document.querySelector("#explorer-search-box");c.value="",c.focus()}});async function l(){re(s,!0),f(),y();const E=document.querySelector("#explorer-search-box");E.value=e.tourConfig.searchTerm,Te(me,e.tourConfig.searchTerm),await i().then(()=>x.drive()).catch(()=>console.error("API returned error during tour."))}var h=No(),T=Q(h);const A=Z(()=>{var E;return(E=e.tourConfig)==null?void 0:E.title});Cr(T,{get title(){return w(A)},confirmText:"Start Tour",onconfirm:l,withDefault:!1,width:"w-1/3",get open(){return w(v)},set open(E){re(v,E,!0)},children:(E,c)=>{var g=ae(),I=Q(g);{var V=R=>{st(R,{ring:!0,size:"large"})},N=R=>{var B=Io(),G=Q(B),te=M(G);yr(te,()=>{var xe;return(xe=e.tourConfig)==null?void 0:xe.description}),D(G);var U=z(G,2),X=M(U);X.__click=[Ho,v];var oe=z(X,2);oe.__click=l,D(U),H(R,B)};$(I,R=>{w(s)?R(V):R(N,!1)})}H(E,g)},$$slots:{default:!0}});var W=z(T,2);W.__click=[Vo,s,v],H(t,h),se(),o()}Ce(["click"]);function Oo(t,e,r){Mt(),re(e,""),tt(w(r))}var Mo=O('<a data-testid="genomic-filter-btn" class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500" href="/explorer/genome-filter">Genomic Filtering</a>'),Wo=O('<div id="explorer-tour" class="text-center mt-4"><!></div>'),zo=O('<section id="search-container" class="flex gap-9"><div id="facet-side-bar" class="flex-none flex-col items-center w-64"><!></div> <div id="search-results-col" class="flex-auto"><div id="search-bar" class="flex gap-2 mb-6"><div class="flex-auto"><!></div> <div class="flex-none"><!> <button type="button" class="btn preset-tonal-error border border-error-500 hover:preset-filled-error-500" aria-label="You are on the reset button">Reset</button></div></div> <!> <!></div></section>');function wi(t,e){ne(e,!0);const[r,o]=fe(),i=()=>K(et,"$page",r),s=()=>K(me,"$searchTerm",r),v=()=>K(Ye,"$error",r),C=()=>K(Ae,"$selectedFacets",r),d=()=>K(zt,"$isLoading",r),b=()=>K(Wt,"$tour",r);let p=ve(Rt(i().url.searchParams.get("search")||s()||""));const y="ExplorerTable",n=[...Ht.explorePage.columns||[],{dataElement:"id",label:"Actions",class:"w-36 text-center"}],f={id:$r};let m=Z(()=>i().url.pathname.includes("/discover")),u=Z(()=>w(m)?"/discover":"/explorer");function P(){v()&&Ye.set(""),me.set(w(p)),tt(w(p)?`${w(u)}?search=${w(p)}`:`${w(u)}`,{replaceState:!0})}Ct(()=>{w(p)&&w(p)!==s()?me.set(w(p)):Ue.invalidate()});var F=zo(),L=M(F),k=M(L);uo(k,{}),D(L);var x=z(L,2),l=M(x),h=M(l),T=M(h);Zt(T,{search:P,get searchTerm(){return w(p)},set searchTerm(B){re(p,B,!0)}}),D(h);var A=z(h,2),W=M(A);{var E=B=>{var G=Mo();H(B,G)};$(W,B=>{!w(m)&&Ge.enableGENEQuery&&B(E)})}var c=z(W,2);c.__click=[Oo,p,u],D(A),D(l);var g=z(l,2);{var I=B=>{nt(B,{title:"Sorry, we could not retrieve your search results.",color:"secondary",children:(G,te)=>{De();var U=ge();j(()=>pe(U,v())),H(G,U)},$$slots:{default:!0}})},V=(B,G)=>{{var te=U=>{jt(U,{isClickable:!0,tableName:y,handler:Ue,columns:n,cellOverides:f,get isLoading(){return d()},expandable:!0})};$(B,U=>{(s()||C().length>0)&&U(te)},G)}};$(g,B=>{v()?B(I):B(V,!1)})}var N=z(g,2);{var R=B=>{var G=Wo(),te=M(G);Do(te,{get tourConfig(){return e.tourConfig}}),D(G),H(B,G)};$(N,B=>{Ge.explorer.enableTour&&b()&&B(R)})}D(x),D(F),j(()=>c.disabled=!w(p)&&C().length===0),H(t,F),se(),o()}Ce(["click"]);const Ci={"NHANES-Auth":{searchTerm:"Age",title:"Welcome to PIC-SURE",description:"PIC-SURE allows you to explore variables, apply filters, and prepare data for analysis. When applying filters, participants are selected that meet those criteria. <br /><br />This tour demonstrates how to search, apply filters, and interpret results using PIC-SURE. <br /><br />Once the tour starts, you can click anywhere to go to the next step. You can press the escape key to stop the tour at any point. You may also use the arrow keys, enter key, or the spacebar to navigate the tour.",steps:[{element:"#explorer-search-box",popover:{title:"Search",description:'Search clinical variables of interest. Here, the term "{{searchTerm}}" was used to get all demographics-related results. Click anywhere to continue the tour.',onPrevClick:"disablePrevious"}},{element:"#facet-side-bar",popover:{title:"Refine Search",description:"Use the options displayed here to further refine your search results using facets.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table",popover:{title:"Search Results",description:"The search results are displayed in this area. Each row describes a different variable that matches your search term and/or facets.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table #row-0",onHighlightStarted:"clickElement",popover:{title:"Variable Details",description:"To learn more about a variable, click on the row or click the information icon.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table #active-row-0",popover:{title:"Variable Details",description:"This displays information about the variable, including dataset information and study information.",onPrevClick:"disablePrevious",onNextClick:"clickElementThenNext"}},{element:'#row-0 button[title="Filter"]',onHighlightStarted:"clickElement",popover:{title:"Apply Filters",description:"Click the filter icon to apply inclusion criteria to build your cohort.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table .expandable-row",popover:{title:"Apply Filters",description:"You can add filters by selecting different values or specifying a numeric range here, then clicking the “+” button.",onPrevClick:"disablePrevious",onNextClick:"applyFilterThenNext"}},{element:'#row-0 button[title="Data Hierarchy"]',onHighlightStarted:"clickElement",popover:{title:"Variable Hierarchy",description:"Click the Variable Hierarchy icon to filter at different levels of the variable path.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table .expandable-row",popover:{title:"Variable Hierarchy",description:"You can filter on different levels of the variable hierarchy by clicking a level here, then clicking the “+” button.",onPrevClick:"disablePrevious"}},{element:'#row-0 button[title="Add for Analysis"]',popover:{title:"Export Variable",description:"Click the export icon to add a variable to your export without applying a filter.",onPrevClick:"disablePrevious"}},{element:"#sidebar-right",popover:{title:"Cohort Summary",description:"You can view the summary of the filtered cohort based on the applied variable filters. Additionally, you can also view variable distributions and prepare your cohort for analysis.",onPrevClick:"disablePrevious"}},{element:"#nav-link-help",popover:{title:"Help Resources",description:"To learn more about PIC-SURE, please consult the <a href='https://pic-sure.gitbook.io/pic-sure' class='anchor' target='_blank'>user guide</a> and <a href='https://www.youtube.com/@pic-sure446/featured' class='anchor' target='_blank'>video</a> demonstrations. You can also find these resources on the help page.",onPrevClick:"disablePrevious"}}]},"BDC-Open":{searchTerm:"RECOVER",title:"Welcome to BioData Catalyst Powered by PIC-SURE",description:"BioData Catalyst Powered by PIC-SURE allows you to explore variables, apply filters, and prepare data for analysis. When applying filters, participants are selected that meet those criteria. <br /><br />This tour demonstrates how to search, apply filters, and interpret results using PIC-SURE. This tour uses the Researching COVID to Enhance Recovery (RECOVER) dataset as an example. The RECOVER initiative is focused on understanding, diagnosing, treating, and preventing Long COVID. <br /><br />Once the tour starts, you can click “Next” or use the arrow keys to navigate the tour. You can press any other key or click anywhere on the screen to escape the tour.",steps:[{element:"#explorer-search-box",popover:{title:"Search",description:'Search clinical variables of interest. Here, the term "{{searchTerm}}" was used to get all {{searchTerm}}-related results.',onPrevClick:"disablePrevious"}},{element:"#facet-side-bar",popover:{title:"Refine Search",description:"Use the options displayed here to further refine your search results using facets.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table",popover:{title:"Search Results",description:"The search results are displayed in this area. Each row describes a different variable that matches your search term and/or facets.",onPrevClick:"disablePrevious",onNextClick:"findAndSetFirstNonStigmatizedAvailableFilterThenNext"}},{element:"#ExplorerTable-table .non-stigmatized-row",onHighlightStarted:"clickElement",popover:{title:"Variable Details",description:"To learn more about a variable, click on the row or click the information icon.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table .expandable-row",popover:{title:"Variable Details",description:"This displays information about the variable, including dataset information and study information.",onPrevClick:"disablePrevious"}},{element:'#ExplorerTable-table .non-stigmatized-row button[title="Filter"]',onHighlightStarted:"clickElement",popover:{title:"Apply Filters",description:"Click the filter icon to apply inclusion criteria to build your cohort.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table .expandable-row",popover:{title:"Apply Filters",description:"You can add filters by selecting different values or specifying a numeric range here, then clicking the “+” button.",onPrevClick:"disablePrevious",onNextClick:"applyFilterThenNext"}},{element:"#sidebar-right",popover:{title:"Cohort Summary",description:"You can view the summary of the filtered cohort based on the applied variable filters. Additionally, you can also view variable distributions and counts per study. Note that this count is obfuscated to protect participant-level data.",onPrevClick:"disablePrevious"}},{element:"#nav-link-help",popover:{title:"Help Resources",description:"To learn more about PIC-SURE, please consult the <a href='https://pic-sure.gitbook.io/nhlbi-biodata-catalyst-powered-by-pic-sure' class='anchor' target='_blank'>user guide</a> and <a href='https://www.youtube.com/playlist?list=PLJ6YccH8TEufZ5L-ctxzFF7vuZRLVacKw' class='anchor' target='_blank'>video</a> demonstrations. You can also find these resources on the help page.",onPrevClick:"disablePrevious"}}]},"BDC-Auth":{searchTerm:"cardiac surgery",title:"Welcome to BioData Catalyst Powered by PIC-SURE",description:"BioData Catalyst Powered by PIC-SURE allows you to explore variables, apply filters, and prepare data for analysis. When applying filters, participants are selected that meet those criteria. <br /><br />This tour demonstrates how to search, apply filters, and interpret results using PIC-SURE. <br /><br />Once the tour starts, you can click “Next” or use the arrow keys to navigate the tour. You can press any other key or click anywhere on the screen to escape the tour.",steps:[{element:"#explorer-search-box",popover:{title:"Search",description:'Search clinical variables of interest. Here, the term "{{searchTerm}}" was used to get all results related to {{searchTerm}}.',onPrevClick:"disablePrevious"}},{element:"#facet-side-bar",popover:{title:"Refine Search",description:"Use the options displayed here to further refine your search results using facets.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table",popover:{title:"Search Results",description:"The search results are displayed in this area. Each row describes a different variable that matches your search term and/or facets.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table #row-0",onHighlightStarted:"clickElement",popover:{title:"Variable Details",description:"To learn more about a variable, click on the row or click the information icon.",onPrevClick:"disablePrevious"}},{element:"#ExplorerTable-table #active-row-0",popover:{title:"Variable Details",description:"This displays information about the variable, including dataset information and study information.",onPrevClick:"disablePrevious",onNextClick:"clickElementThenNext"}},{element:'#row-0 button[title="Filter"]',onHighlightStarted:"clickElement",popover:{title:"Apply Filters",description:"Click the filter icon to apply inclusion criteria to build your cohort.",onPrevClick:"disablePrevious"}},{element:"#active-row-0",popover:{title:"Apply Filters",description:"You can add filters by selecting different values or specifying a numeric range here, then clicking the “+” button.",onPrevClick:"disablePrevious",onNextClick:"applyFilterThenNext"}},{element:'#row-0 button[title="Add for Analysis"]',popover:{title:"Export Variable",description:"Click the export icon to add a variable to your export without applying a filter.",onPrevClick:"disablePrevious"}},{element:"#sidebar-right",popover:{title:"Cohort Summary",description:"You can view the summary of the filtered cohort based on the applied variable filters. Additionally, you can also view variable distributions and prepare your cohort for analysis.",onPrevClick:"disablePrevious"}},{element:"#nav-link-help",popover:{title:"Help Resources",description:"To learn more about PIC-SURE, please consult the <a href='https://pic-sure.gitbook.io/nhlbi-biodata-catalyst-powered-by-pic-sure' class='anchor' target='_blank'>user guide</a> and <a href='https://www.youtube.com/playlist?list=PLJ6YccH8TEufZ5L-ctxzFF7vuZRLVacKw' class='anchor' target='_blank'>video</a> demonstrations. You can also find these resources on the help page.",onPrevClick:"disablePrevious"}}]}};export{wi as E,Ci as T};
