import{s as se,e as v,a as N,t as ae,c as d,b as T,l as U,g as w,f as L,d as ne,m as p,U as O,P as re,i as ie,h as s,V as Y,O as j,W as oe,n as Z,R as ue,w as pe,j as ce,X as he}from"./scheduler.bui7uCNy.js";import{e as $}from"./each.Ct-HShz-.js";import{S as fe,i as _e}from"./index.Divvo4fc.js";import{g as ve}from"./entry.D9nKiiu7.js";import{g as de}from"./stores.ClIv_1MU.js";import"./ProgressBar.svelte_svelte_type_style_lang.B7SkmbeT.js";import{t as ee}from"./Validation.CZHOOfu3.js";import{P as me}from"./Privileges.BH2-7eHy.js";function te(a,e,n){const o=a.slice();return o[4]=e[n][0],o[12]=e[n][1],o}function le(a){let e,n=a[4]+"",o,E,C;return{c(){e=v("option"),o=ae(n),this.h()},l(t){e=d(t,"OPTION",{});var h=T(e);o=ne(h,n),h.forEach(L),this.h()},h(){e.__value=E=a[12],O(e,e.__value),e.selected=C=a[0]&&a[0].application===a[12]},m(t,h){ie(t,e,h),s(e,o)},p(t,h){h&2&&n!==(n=t[4]+"")&&ce(o,n),h&2&&E!==(E=t[12])&&(e.__value=E,O(e,e.__value)),h&3&&C!==(C=t[0]&&t[0].application===t[12])&&(e.selected=C)},d(t){t&&L(e)}}}function ge(a){let e,n,o,E="Name:",C,t,h,f,g,y="Description:",I,_,B,P,u,z="Application:",x,m,b,D,F,M,S,H="Save",V,q,J="Cancel",W,K,k=$(a[1]),c=[];for(let l=0;l<k.length;l+=1)c[l]=le(te(a,k,l));return{c(){e=v("form"),n=v("label"),o=v("span"),o.textContent=E,C=N(),t=v("input"),h=N(),f=v("label"),g=v("span"),g.textContent=y,I=N(),_=v("input"),B=N(),P=v("label"),u=v("span"),u.textContent=z,x=N(),m=v("select"),b=v("option"),D=ae("none");for(let l=0;l<c.length;l+=1)c[l].c();M=N(),S=v("button"),S.textContent=H,V=N(),q=v("a"),q.textContent=J,this.h()},l(l){e=d(l,"FORM",{});var r=T(e);n=d(r,"LABEL",{class:!0});var i=T(n);o=d(i,"SPAN",{"data-svelte-h":!0}),U(o)!=="svelte-m2peuz"&&(o.textContent=E),C=w(i),t=d(i,"INPUT",{type:!0,class:!0,pattern:!0,minlength:!0,maxlength:!0}),i.forEach(L),h=w(r),f=d(r,"LABEL",{class:!0});var A=T(f);g=d(A,"SPAN",{"data-svelte-h":!0}),U(g)!=="svelte-n5lbfe"&&(g.textContent=y),I=w(A),_=d(A,"INPUT",{type:!0,class:!0,pattern:!0,minlength:!0,maxlength:!0}),A.forEach(L),B=w(r),P=d(r,"LABEL",{class:!0});var R=T(P);u=d(R,"SPAN",{"data-svelte-h":!0}),U(u)!=="svelte-u1sl8e"&&(u.textContent=z),x=w(R),m=d(R,"SELECT",{class:!0});var X=T(m);b=d(X,"OPTION",{});var Q=T(b);D=ne(Q,"none"),Q.forEach(L);for(let G=0;G<c.length;G+=1)c[G].l(X);X.forEach(L),R.forEach(L),M=w(r),S=d(r,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),U(S)!=="svelte-uo67us"&&(S.textContent=H),V=w(r),q=d(r,"A",{href:!0,class:!0,"data-svelte-h":!0}),U(q)!=="svelte-muwtns"&&(q.textContent=J),r.forEach(L),this.h()},h(){p(t,"type","text"),p(t,"class","input"),t.required=!0,p(t,"pattern",ee),p(t,"minlength","1"),p(t,"maxlength","255"),p(n,"class","label required svelte-1pdeqr"),p(_,"type","text"),p(_,"class","input"),_.required=!0,p(_,"pattern",ee),p(_,"minlength","1"),p(_,"maxlength","255"),p(f,"class","label required svelte-1pdeqr"),b.selected=F=!a[0]||!a[0].application,b.disabled=!0,b.__value="",O(b,b.__value),p(m,"class","select"),m.required=!0,a[3]===void 0&&re(()=>a[8].call(m)),p(P,"class","label required svelte-1pdeqr"),p(S,"type","submit"),p(S,"class","btn variant-ghost-primary hover:variant-filled-primary"),p(q,"href","/admin/authorization"),p(q,"class","btn variant-ghost-secondary hover:variant-filled-secondary")},m(l,r){ie(l,e,r),s(e,n),s(n,o),s(n,C),s(n,t),O(t,a[4]),s(e,h),s(e,f),s(f,g),s(f,I),s(f,_),O(_,a[2]),s(e,B),s(e,P),s(P,u),s(P,x),s(P,m),s(m,b),s(b,D);for(let i=0;i<c.length;i+=1)c[i]&&c[i].m(m,null);Y(m,a[3],!0),s(e,M),s(e,S),s(e,V),s(e,q),W||(K=[j(t,"input",a[6]),j(_,"input",a[7]),j(m,"change",a[8]),j(e,"submit",oe(a[5]))],W=!0)},p(l,[r]){if(r&16&&t.value!==l[4]&&O(t,l[4]),r&4&&_.value!==l[2]&&O(_,l[2]),r&1&&F!==(F=!l[0]||!l[0].application)&&(b.selected=F),r&3){k=$(l[1]);let i;for(i=0;i<k.length;i+=1){const A=te(l,k,i);c[i]?c[i].p(A,r):(c[i]=le(A),c[i].c(),c[i].m(m,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=k.length}r&10&&Y(m,l[3])},i:Z,o:Z,d(l){l&&L(e),ue(c,l),W=!1,pe(K)}}}function be(a,e,n){const o=de(),{addPrivilege:E,updatePrivilege:C}=me;let{privilege:t=void 0}=e,{applicationList:h}=e,f=t?t.name:"",g=t?t.description:"",y=t?t.application:"";async function I(){let u={name:f,description:g,application:y};try{t?(u={...u,uuid:t.uuid},await C(u)):await E(u),o.trigger({message:`Successfully saved ${u?"new privilege":"privilege"} '${f}'`,background:"variant-filled-success"}),ve("/admin/authorization")}catch(z){console.error(z),o.trigger({message:`An error occured while saving ${u?"new privilege":"privilege"} '${f}'`,background:"variant-filled-error"})}}function _(){f=this.value,n(4,f)}function B(){g=this.value,n(2,g)}function P(){y=he(this),n(3,y),n(1,h)}return a.$$set=u=>{"privilege"in u&&n(0,t=u.privilege),"applicationList"in u&&n(1,h=u.applicationList)},[t,h,g,y,f,I,_,B,P]}class Ne extends fe{constructor(e){super(),_e(this,e,be,ge,se,{privilege:0,applicationList:1})}}export{Ne as P};
