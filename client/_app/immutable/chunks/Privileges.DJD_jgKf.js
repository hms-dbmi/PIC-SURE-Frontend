import{d as f,w as u}from"./entry.DxzR7bMM.js";import{m as c}from"./configuration.CsqyQUvi.js";import{g as d,p as v,a as m,d as g}from"./User.C8JF3DW-.js";import{r as o}from"./scheduler.bui7uCNy.js";const a="psama/privilege",p=u(!1),n=u([]),P=f(n,e=>e.map(t=>[t.name,t.uuid||""]),[]);async function w(){if(o(p))return;const e=await d(a);n.set(e.map(c)),p.set(!0)}async function b(e){const i=o(n).find(r=>r.uuid===e);if(i)return i;const s=await d(`${a}/${e}`);return c(s)}async function x(e){const t=await v(a,[{...e,application:{uuid:e.application}}]),i=c(t.content[0]),s=o(n);s.push(i),n.set(s)}async function y(e){const t=await m(a,[{...e,application:{uuid:e.application}}]),i=c(t.content[0]),s=o(n),r=s.findIndex(l=>l.uuid===i.uuid);r===-1?s.push(i):s[r]=i,n.set(s)}async function I(e){await g(`${a}/${e}`);const t=o(n),i=t.findIndex(s=>s.uuid===e);i>-1&&(t.splice(i,1),n.set(t))}const H={subscribe:n.subscribe,privileges:n,privilegeList:P,loadPrivileges:w,getPrivilege:b,addPrivilege:x,updatePrivilege:y,deletePrivilege:I};export{H as P};
