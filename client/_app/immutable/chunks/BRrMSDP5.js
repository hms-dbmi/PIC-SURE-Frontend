import{w as oe,g as ie,d as ae}from"./DlIBaGjY.js";import{e as yt}from"./PD1Wq3xD.js";import{B as Re,P as we,r as De,f as Et}from"./CHRSknKA.js";import{g as Le}from"./BNhMDwfB.js";import{p as Je}from"./McouLZAx.js";import"./CtfeAAbw.js";import{aO as vt,aP as bt}from"./B4GrenNm.js";import{d as Tt}from"./D7VV4X-8.js";import{b as wt}from"./Bt-Xh7oU.js";var ee=(e,t=[])=>({parts:(...r)=>{if(St(t))return ee(e,r);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...r)=>ee(e,[...t,...r]),rename:r=>ee(r,t),keys:()=>t,build:()=>[...new Set(t)].reduce((r,n)=>Object.assign(r,{[n]:{selector:[`&[data-scope="${G(e)}"][data-part="${G(n)}"]`,`& [data-scope="${G(e)}"][data-part="${G(n)}"]`].join(", "),attrs:{"data-scope":G(e),"data-part":G(n)}}}),{})}),G=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),St=e=>e.length===0,ge=(...e)=>t=>e.reduce((r,n)=>n(r),t),q=()=>{},ce=e=>typeof e=="object"&&e!==null,kt=2147483647,j=e=>e?"":void 0,It=1,xt=9,At=11,k=e=>ce(e)&&e.nodeType===It&&typeof e.nodeName=="string",_e=e=>ce(e)&&e.nodeType===xt,Pt=e=>ce(e)&&e===e.window,et=e=>k(e)?e.localName||"":"#document";function Ot(e){return["html","body","#document"].includes(et(e))}var Rt=e=>ce(e)&&e.nodeType!==void 0,Y=e=>Rt(e)&&e.nodeType===At&&"host"in e,Dt=e=>k(e)&&e.localName==="input",Pn=e=>!!(e!=null&&e.matches("a[href]")),Lt=e=>k(e)?e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0:!1,Ct=/(textarea|select)/;function Nt(e){if(e==null||!k(e))return!1;try{return Dt(e)&&e.selectionStart!=null||Ct.test(e.localName)||e.isContentEditable||e.getAttribute("contenteditable")==="true"||e.getAttribute("contenteditable")===""}catch{return!1}}function V(e,t){var n;if(!e||!t||!k(e)||!k(t))return!1;const r=(n=t.getRootNode)==null?void 0:n.call(t);if(e===t||e.contains(t))return!0;if(r&&Y(r)){let s=t;for(;s;){if(e===s)return!0;s=s.parentNode||s.host}}return!1}function H(e){return _e(e)?e:Pt(e)?e.document:(e==null?void 0:e.ownerDocument)??document}function Ft(e){return H(e).documentElement}function N(e){var t;return Y(e)?N(e.host):_e(e)?e.defaultView??window:k(e)?((t=e.ownerDocument)==null?void 0:t.defaultView)??window:window}function Mt(e){let t=e.activeElement;for(;t!=null&&t.shadowRoot;){const r=t.shadowRoot.activeElement;if(r===t)break;t=r}return t}function Bt(e){if(et(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Y(e)&&e.host||Ft(e);return Y(t)?t.host:t}var pe=new WeakMap;function On(e){return pe.has(e)||pe.set(e,N(e).getComputedStyle(e)),pe.get(e)}var ue=()=>typeof document<"u";function $t(){const e=navigator.userAgentData;return(e==null?void 0:e.platform)??navigator.platform}function Ut(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:r})=>`${t}/${r}`).join(" "):navigator.userAgent}var Se=e=>ue()&&e.test($t()),tt=e=>ue()&&e.test(Ut()),Vt=e=>ue()&&e.test(navigator.vendor),Ce=()=>ue()&&!!navigator.maxTouchPoints,Ht=()=>Se(/^iPhone/i),Gt=()=>Se(/^iPad/i)||ke()&&navigator.maxTouchPoints>1,jt=()=>Ht()||Gt(),Wt=()=>ke()||jt(),ke=()=>Se(/^Mac/i),Rn=()=>Wt()&&Vt(/apple/i),qt=()=>tt(/Firefox/i),Kt=()=>tt(/Android/i);function Xt(e){var t,r,n;return((t=e.composedPath)==null?void 0:t.call(e))??((n=(r=e.nativeEvent)==null?void 0:r.composedPath)==null?void 0:n.call(r))}function K(e){const t=Xt(e);return(t==null?void 0:t[0])??e.target}var Dn=e=>V(e.currentTarget,K(e));function Ln(e){return Zt(e).isComposing||e.keyCode===229}function Cn(e){return e.mozInputSource===0&&e.isTrusted?!0:Kt()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}var Yt=e=>e.button===2||ke()&&e.ctrlKey&&e.button===0,zt=e=>"touches"in e&&e.touches.length>0,Qt={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},Ne={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function Nn(e,t={}){const{dir:r="ltr",orientation:n="horizontal"}=t;let s=e.key;return s=Qt[s]??s,r==="rtl"&&n==="horizontal"&&s in Ne&&(s=Ne[s]),s}function Zt(e){return e.nativeEvent??e}function Jt(e,t="client"){const r=zt(e)?e.touches[0]||e.changedTouches[0]:e;return{x:r[`${t}X`],y:r[`${t}Y`]}}var P=(e,t,r,n)=>{const s=typeof e=="function"?e():e;return s==null||s.addEventListener(t,r,n),()=>{s==null||s.removeEventListener(t,r,n)}};function _t(e,t){const{type:r="HTMLInputElement",property:n="value"}=t,s=N(e)[r].prototype;return Object.getOwnPropertyDescriptor(s,n)??{}}function er(e,t){var n;if(!e)return;(n=_t(e,{type:"HTMLInputElement",property:"checked"}).set)==null||n.call(e,t),t?e.setAttribute("checked",""):e.removeAttribute("checked")}function Fn(e,t){const{checked:r,bubbles:n=!0}=t;if(!e)return;const s=N(e);e instanceof s.HTMLInputElement&&(er(e,r),e.dispatchEvent(new s.Event("click",{bubbles:n})))}function tr(e){return rr(e)?e.form:e.closest("form")}function rr(e){return e.matches("textarea, input, select, button")}function nr(e,t){if(!e)return;const r=tr(e),n=s=>{s.defaultPrevented||t()};return r==null||r.addEventListener("reset",n,{passive:!0}),()=>r==null?void 0:r.removeEventListener("reset",n)}function sr(e,t){const r=e==null?void 0:e.closest("fieldset");if(!r)return;t(r.disabled);const n=N(r),s=new n.MutationObserver(()=>t(r.disabled));return s.observe(r,{attributes:!0,attributeFilter:["disabled"]}),()=>s.disconnect()}function Mn(e,t){if(!e)return;const{onFieldsetDisabledChange:r,onFormReset:n}=t,s=[nr(e,n),sr(e,r)];return()=>s.forEach(o=>o==null?void 0:o())}var rt=e=>k(e)&&e.tagName==="IFRAME",or=e=>!Number.isNaN(parseInt(e.getAttribute("tabindex")||"0",10)),ir=e=>parseInt(e.getAttribute("tabindex")||"0",10)<0,Ie="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",ar=(e,t=!1)=>{if(!e)return[];const r=Array.from(e.querySelectorAll(Ie));(t==!0||t=="if-empty"&&r.length===0)&&k(e)&&z(e)&&r.unshift(e);const s=r.filter(z);return s.forEach((o,c)=>{if(rt(o)&&o.contentDocument){const i=o.contentDocument.body;s.splice(c,1,...ar(i))}}),s};function z(e){return!e||e.closest("[inert]")?!1:e.matches(Ie)&&Lt(e)}function cr(e,t){if(!e)return[];const n=Array.from(e.querySelectorAll(Ie)).filter(ur);return n.forEach((s,o)=>{if(rt(s)&&s.contentDocument){const c=s.contentDocument.body,i=cr(c);n.splice(o,1,...i)}}),n.length,n}function ur(e){return e!=null&&e.tabIndex>0?!0:z(e)&&!ir(e)}function Bn(e){return e.tabIndex<0&&(/^(audio|video|details)$/.test(e.localName)||Nt(e))&&!or(e)?0:e.tabIndex}function $n(e){const t=new Set;function r(n){const s=globalThis.requestAnimationFrame(n);t.add(()=>globalThis.cancelAnimationFrame(s))}return r(()=>r(e)),function(){t.forEach(s=>s())}}function L(e){let t;const r=globalThis.requestAnimationFrame(()=>{t=e()});return()=>{globalThis.cancelAnimationFrame(r),t==null||t()}}function lr(e,t,r){const n=L(()=>{e.removeEventListener(t,s,!0),r()}),s=()=>{n(),r()};return e.addEventListener(t,s,{once:!0,capture:!0}),n}function dr(e,t){if(!e)return;const{attributes:r,callback:n}=t,s=e.ownerDocument.defaultView||window,o=new s.MutationObserver(c=>{for(const i of c)i.type==="attributes"&&i.attributeName&&r.includes(i.attributeName)&&n(i)});return o.observe(e,{attributes:!0,attributeFilter:r}),()=>o.disconnect()}function Un(e,t){const{defer:r}=t,n=r?L:o=>o(),s=[];return s.push(n(()=>{const o=typeof e=="function"?e():e;s.push(dr(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function fr(e,t){const{callback:r}=t;if(!e)return;const n=e.ownerDocument.defaultView||window,s=new n.MutationObserver(r);return s.observe(e,{childList:!0,subtree:!0}),()=>s.disconnect()}function Vn(e,t){const{defer:r}=t,n=r?L:o=>o(),s=[];return s.push(n(()=>{const o=typeof e=="function"?e():e;s.push(fr(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function Hn(e){const t=()=>e.click();qt()?lr(e,"keyup",t):queueMicrotask(t)}function ve(e){const t=Bt(e);return Ot(t)?H(t).body:k(t)&&pr(t)?t:ve(t)}var gr=/auto|scroll|overlay|hidden|clip/;function pr(e){const t=N(e),{overflow:r,overflowX:n,overflowY:s,display:o}=t.getComputedStyle(e);return gr.test(r+s+n)&&!["inline","contents"].includes(o)}function Gn(e){const{pointerNode:t,keyboardNode:r=t,onPress:n,onPressStart:s,onPressEnd:o,isValidKey:c=h=>h.key==="Enter"}=e;if(!t)return q;const i=N(t),f=H(t);let m=q,d=q,y=q;const b=h=>({point:Jt(h),event:h});function l(h){s==null||s(b(h))}function p(h){o==null||o(b(h))}const T=P(t,"pointerdown",h=>{d();const I=P(i,"pointerup",D=>{const B=K(D);V(t,B)?n==null||n(b(D)):o==null||o(b(D))},{passive:!n,once:!0}),S=P(i,"pointercancel",p,{passive:!o,once:!0});d=ge(I,S),f.activeElement===r&&h.pointerType==="mouse"&&h.preventDefault(),l(h)},{passive:!s}),w=P(r,"focus",v);m=ge(T,w);function v(){const h=D=>{if(!c(D))return;const B=Q=>{if(!c(Q))return;const Oe=new i.PointerEvent("pointerup"),a=b(Oe);n==null||n(a),o==null||o(a)};d(),d=P(r,"keyup",B);const $=new i.PointerEvent("pointerdown");l($)},g=()=>{const D=new i.PointerEvent("pointercancel");p(D)},I=P(r,"keydown",h),S=P(r,"blur",g);y=ge(I,S)}return()=>{m(),d(),y()}}function jn(e,t){return Array.from((e==null?void 0:e.querySelectorAll(t))??[])}var nt=e=>e.id;function mr(e,t,r=nt){return e.find(n=>r(n)===t)}function st(e,t,r=nt){const n=mr(e,t,r);return n?e.indexOf(n):-1}function Wn(e,t,r=!0){let n=st(e,t);return n=r?(n+1)%e.length:Math.min(n+1,e.length-1),e[n]}function qn(e,t,r=!0){let n=st(e,t);return n===-1?r?e[e.length-1]:null:(n=r?(n-1+e.length)%e.length:Math.max(0,n-1),e[n])}function Kn(e,t){const{onEntry:r,measure:n,box:s="border-box"}=t,o=(Array.isArray(e)?e:[e]).filter(k),c=N(o[0]),i=m=>{const d=o.map(y=>n(y));r({rects:d,entries:m})};i([]);const f=new c.ResizeObserver(i);return o.forEach(m=>f.observe(m,{box:s})),()=>f.disconnect()}function hr(e,t){if(!e)return q;const r=Object.keys(t).reduce((n,s)=>(n[s]=e.style.getPropertyValue(s),n),{});return Object.assign(e.style,t),()=>{Object.assign(e.style,r),e.style.length===0&&e.removeAttribute("style")}}function Xn(e,t,r){if(!e)return q;const n=e.style.getPropertyValue(t);return e.style.setProperty(t,r),()=>{e.style.setProperty(t,n),e.style.length===0&&e.removeAttribute("style")}}var Yn={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"},yr=1e3/60;function Er(e,t){const r=e();if(k(r)&&r.isConnected)return t(r),()=>{};{const n=setInterval(()=>{const s=e();k(s)&&s.isConnected&&(t(s),clearInterval(n))},yr);return()=>clearInterval(n)}}function vr(e,t){const r=[];return e==null||e.forEach(n=>{const s=Er(n,t);r.push(s)}),()=>{r.forEach(n=>n())}}function zn(e){return e?Array.isArray(e)?e:[e]:[]}var Qn=e=>e[0],Zn=e=>e[e.length-1],Jn=(e,...t)=>e.concat(t),_n=(e,...t)=>e.filter(r=>!t.includes(r)),Fe=e=>(e==null?void 0:e.constructor.name)==="Array",br=(e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!xe(e[r],t[r]))return!1;return!0},xe=(e,t)=>{if(Object.is(e,t))return!0;if(e==null&&t!=null||e!=null&&t==null)return!1;if(typeof(e==null?void 0:e.isEqual)=="function"&&typeof(t==null?void 0:t.isEqual)=="function")return e.isEqual(t);if(typeof e=="function"&&typeof t=="function")return e.toString()===t.toString();if(Fe(e)&&Fe(t))return br(Array.from(e),Array.from(t));if(typeof e!="object"||typeof t!="object")return!1;const r=Object.keys(t??Object.create(null)),n=r.length;for(let s=0;s<n;s++)if(!Reflect.has(e,r[s]))return!1;for(let s=0;s<n;s++){const o=r[s];if(!xe(e[o],t[o]))return!1}return!0},es=e=>typeof e=="number"&&!Number.isNaN(e),me=e=>typeof e=="string",ot=e=>typeof e=="function",Tr=Function.prototype.toString;Tr.call(Object);var J=(e,...t)=>(typeof e=="function"?e(...t):e)??void 0,ts=e=>e(),be=(...e)=>(...t)=>{e.forEach(function(r){r==null||r(...t)})},it=(()=>{let e=0;return()=>(e++,e.toString(36))})(),wr=e=>Number.isNaN(e),Sr=e=>wr(e)?0:e,rs=(e,t,r)=>(Sr(e)-t)/(r-t);function at(e){if(!kr(e)||e===void 0)return e;const t=Reflect.ownKeys(e).filter(n=>typeof n=="string"),r={};for(const n of t){const s=e[n];s!==void 0&&(r[n]=at(s))}return r}var kr=e=>e&&typeof e=="object"&&e.constructor===Object;function he(e,t){const r=performance.now();let n;function s(o){n=requestAnimationFrame(s),o-r>=t&&e()}return n=requestAnimationFrame(s),()=>cancelAnimationFrame(n)}function ct(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function ns(e,t){if(e==null)throw new Error(t())}function Ir(e,t,r){let n=[];for(const s of t)e[s]==null&&n.push(s);if(n.length>0)throw new Error(`[zag-js${` > ${r}`}] missing required props: ${n.join(", ")}`)}var xr=(...e)=>e.map(t=>{var r;return(r=t==null?void 0:t.trim)==null?void 0:r.call(t)}).filter(Boolean).join(" "),Ar=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,Me=e=>{const t={};let r;for(;r=Ar.exec(e);)t[r[1]]=r[2];return t},Pr=(e,t)=>{if(me(e)){if(me(t))return`${e};${t}`;e=Me(e)}else me(t)&&(t=Me(t));return Object.assign({},e??{},t??{})};function ss(...e){let t={};for(let r of e){for(let n in t){if(n.startsWith("on")&&typeof t[n]=="function"&&typeof r[n]=="function"){t[n]=be(r[n],t[n]);continue}if(n==="className"||n==="class"){t[n]=xr(t[n],r[n]);continue}if(n==="style"){t[n]=Pr(t[n],r[n]);continue}t[n]=r[n]!==void 0?r[n]:t[n]}for(let n in r)t[n]===void 0&&(t[n]=r[n])}return t}function os(e,t,r){let n=[],s;return o=>{const c=e(o);return(c.length!==n.length||c.some((f,m)=>!xe(n[m],f)))&&(n=c,s=t(...c)),s}}function Or(){return{and:(...e)=>function(r){return e.every(n=>r.guard(n))},or:(...e)=>function(r){return e.some(n=>r.guard(n))},not:e=>function(r){return!r.guard(e)}}}function is(e){return e}var Rr=(e=>(e.NotStarted="Not Started",e.Started="Started",e.Stopped="Stopped",e))(Rr||{}),as="__init__";function cs(e){const t=()=>{var i;return((i=e.getRootNode)==null?void 0:i.call(e))??document},r=()=>H(t()),n=()=>r().defaultView??window,s=()=>Mt(t());return{...e,getRootNode:t,getDoc:r,getWin:n,getActiveElement:s,isActiveElement:i=>i===s(),getById:i=>t().getElementById(i)}}function le(e){var t=Symbol(),r=function(s){return vt(t,s)},n=function(){var s;return(s=bt(t))!==null&&s!==void 0?s:e};return[r,n,t]}var te,us=(te=le(),te[0]),ls=te[1];te[2];Tt(["click"]);var re;re=le({parent:"none",value:"",expanded:!1}),re[0];re[1];re[2];var ne;ne=le({api:{},indicatorText:""}),ne[0];ne[1];ne[2];var se,ds=(se=le({fluid:!1,api:{}}),se[0]),fs=se[1];se[2];function Dr(e){const t={each(r){var n;for(let s=0;s<((n=e.frames)==null?void 0:n.length);s+=1){const o=e.frames[s];o&&r(o)}},addEventListener(r,n,s){return t.each(o=>{try{o.document.addEventListener(r,n,s)}catch{}}),()=>{try{t.removeEventListener(r,n,s)}catch{}}},removeEventListener(r,n,s){t.each(o=>{try{o.document.removeEventListener(r,n,s)}catch{}})}};return t}function Lr(e){const t=e.frameElement!=null?e.parent:null;return{addEventListener:(r,n,s)=>{try{t==null||t.addEventListener(r,n,s)}catch{}return()=>{try{t==null||t.removeEventListener(r,n,s)}catch{}}},removeEventListener:(r,n,s)=>{try{t==null||t.removeEventListener(r,n,s)}catch{}}}}var Be="pointerdown.outside",$e="focus.outside";function Cr(e){for(const t of e)if(k(t)&&z(t))return!0;return!1}var ut=e=>"clientY"in e;function Nr(e,t){if(!ut(t)||!e)return!1;const r=e.getBoundingClientRect();return r.width===0||r.height===0?!1:r.top<=t.clientY&&t.clientY<=r.top+r.height&&r.left<=t.clientX&&t.clientX<=r.left+r.width}function Fr(e,t){return e.y<=t.y&&t.y<=e.y+e.height&&e.x<=t.x&&t.x<=e.x+e.width}function Ue(e,t){if(!t||!ut(e))return!1;const r=t.scrollHeight>t.clientHeight,n=r&&e.clientX>t.offsetLeft+t.clientWidth,s=t.scrollWidth>t.clientWidth,o=s&&e.clientY>t.offsetTop+t.clientHeight,c={x:t.offsetLeft,y:t.offsetTop,width:t.clientWidth+(r?16:0),height:t.clientHeight+(s?16:0)},i={x:e.clientX,y:e.clientY};return Fr(c,i)?n||o:!1}function Mr(e,t){const{exclude:r,onFocusOutside:n,onPointerDownOutside:s,onInteractOutside:o,defer:c}=t;if(!e)return;const i=H(e),f=N(e),m=Dr(f),d=Lr(f);function y(v,h){if(!k(h)||!h.isConnected||V(e,h)||Nr(e,v))return!1;const g=i.querySelector(`[aria-controls="${e.id}"]`);if(g){const S=ve(g);if(Ue(v,S))return!1}const I=ve(e);return Ue(v,I)?!1:!(r!=null&&r(h))}const b=new Set,l=Y(e==null?void 0:e.getRootNode());function p(v){function h(g){var B;const I=c&&!Ce()?L:$=>$(),S=g??v,D=((B=S==null?void 0:S.composedPath)==null?void 0:B.call(S))??[S==null?void 0:S.target];I(()=>{const $=l?D[0]:K(v);if(!(!e||!y(v,$))){if(s||o){const Q=be(s,o);e.addEventListener(Be,Q,{once:!0})}Ve(e,Be,{bubbles:!1,cancelable:!0,detail:{originalEvent:S,contextmenu:Yt(S),focusable:Cr(D),target:$}})}})}v.pointerType==="touch"?(b.forEach(g=>g()),b.add(P(i,"click",h,{once:!0})),b.add(d.addEventListener("click",h,{once:!0})),b.add(m.addEventListener("click",h,{once:!0}))):h()}const E=new Set,T=setTimeout(()=>{E.add(P(i,"pointerdown",p,!0)),E.add(d.addEventListener("pointerdown",p,!0)),E.add(m.addEventListener("pointerdown",p,!0))},0);function w(v){(c?L:g=>g())(()=>{const g=K(v);if(!(!e||!y(v,g))){if(n||o){const I=be(n,o);e.addEventListener($e,I,{once:!0})}Ve(e,$e,{bubbles:!1,cancelable:!0,detail:{originalEvent:v,contextmenu:!1,focusable:z(g),target:g}})}})}return Ce()||(E.add(P(i,"focusin",w,!0)),E.add(d.addEventListener("focusin",w,!0)),E.add(m.addEventListener("focusin",w,!0))),()=>{clearTimeout(T),b.forEach(v=>v()),E.forEach(v=>v())}}function Br(e,t){const{defer:r}=t,n=r?L:o=>o(),s=[];return s.push(n(()=>{const o=typeof e=="function"?e():e;s.push(Mr(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function Ve(e,t,r){const n=e.ownerDocument.defaultView||window,s=new n.CustomEvent(t,r);return e.dispatchEvent(s)}function $r(e,t){const r=n=>{n.key==="Escape"&&(n.isComposing||t==null||t(n))};return P(H(e),"keydown",r,{capture:!0})}var O={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){var n;const t=this.indexOf(e),r=this.topMostPointerBlockingLayer()?this.indexOf((n=this.topMostPointerBlockingLayer())==null?void 0:n.node):-1;return t<r},isTopMost(e){const t=this.layers[this.count()-1];return(t==null?void 0:t.node)===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},isInNestedLayer(e,t){return this.getNestedLayers(e).some(r=>V(r.node,t))},isInBranch(e){return Array.from(this.branches).some(t=>V(t,e))},add(e){const t=this.layers.push(e);e.node.style.setProperty("--layer-index",`${t}`)},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);t<0||(t<this.count()-1&&this.getNestedLayers(e).forEach(n=>n.dismiss()),this.layers.splice(t,1),e.style.removeProperty("--layer-index"))},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e){var t;(t=this.layers[this.indexOf(e)])==null||t.dismiss()},clear(){this.remove(this.layers[0].node)}},He;function Ge(){O.layers.forEach(({node:e})=>{e.style.pointerEvents=O.isBelowPointerBlockingLayer(e)?"none":"auto"})}function Ur(e){e.style.pointerEvents=""}function Vr(e,t){const r=H(e),n=[];if(O.hasPointerBlockingLayer()&&!r.body.hasAttribute("data-inert")&&(He=document.body.style.pointerEvents,queueMicrotask(()=>{r.body.style.pointerEvents="none",r.body.setAttribute("data-inert","")})),t){const s=vr(t,o=>{n.push(hr(o,{pointerEvents:"auto"}))});n.push(s)}return()=>{O.hasPointerBlockingLayer()||(queueMicrotask(()=>{r.body.style.pointerEvents=He,r.body.removeAttribute("data-inert"),r.body.style.length===0&&r.body.removeAttribute("style")}),n.forEach(s=>s()))}}function Hr(e,t){const{warnOnMissingNode:r=!0}=t;if(r&&!e){ct("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!e)return;const{onDismiss:n,pointerBlocking:s,exclude:o,debug:c}=t,i={dismiss:n,node:e,pointerBlocking:s};O.add(i),Ge();function f(l){var E,T;const p=K(l.detail.originalEvent);O.isBelowPointerBlockingLayer(e)||O.isInBranch(p)||((E=t.onPointerDownOutside)==null||E.call(t,l),(T=t.onInteractOutside)==null||T.call(t,l),!l.defaultPrevented&&(c&&console.log("onPointerDownOutside:",l.detail.originalEvent),n==null||n()))}function m(l){var E,T;const p=K(l.detail.originalEvent);O.isInBranch(p)||((E=t.onFocusOutside)==null||E.call(t,l),(T=t.onInteractOutside)==null||T.call(t,l),!l.defaultPrevented&&(c&&console.log("onFocusOutside:",l.detail.originalEvent),n==null||n()))}function d(l){var p;O.isTopMost(e)&&((p=t.onEscapeKeyDown)==null||p.call(t,l),!l.defaultPrevented&&n&&(l.preventDefault(),n()))}function y(l){var w;if(!e)return!1;const p=typeof o=="function"?o():o,E=Array.isArray(p)?p:[p],T=(w=t.persistentElements)==null?void 0:w.map(v=>v()).filter(k);return T&&E.push(...T),E.some(v=>V(v,l))||O.isInNestedLayer(e,l)}const b=[s?Vr(e,t.persistentElements):void 0,$r(e,d),Br(e,{exclude:y,onFocusOutside:m,onPointerDownOutside:f,defer:t.defer})];return()=>{O.remove(e),Ge(),Ur(e),b.forEach(l=>l==null?void 0:l())}}function gs(e,t){const{defer:r}=t,n=r?L:o=>o(),s=[];return s.push(n(()=>{const o=ot(e)?e():e;s.push(Hr(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function Gr(e,t={}){const{defer:r}=t,n=r?L:o=>o(),s=[];return s.push(n(()=>{const o=ot(e)?e():e;if(!o){ct("[@zag-js/dismissable] branch node is `null` or `undefined`");return}O.addBranch(o),s.push(()=>{O.removeBranch(o)})})),()=>{s.forEach(o=>o==null?void 0:o())}}var jr=ee("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),W=jr.build(),Wr=e=>`toast-group:${e}`,je=(e,t)=>e.getById(`toast-group:${t}`),lt=e=>`toast:${e.id}`,We=e=>e.getById(lt(e)),qe=e=>`toast:${e.id}:title`,Ke=e=>`toast:${e.id}:description`,qr=e=>`toast${e.id}:close`,Xe={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function ye(e,t){return e??Xe[t]??Xe.DEFAULT}var Kr=e=>typeof e=="string"?{left:e,right:e,bottom:e,top:e}:e;function Xr(e,t){var E;const{prop:r,computed:n,context:s}=e,{offsets:o,gap:c}=r("store").attrs,i=s.get("heights"),f=Kr(o),m=r("dir")==="rtl",d=t.replace("-start",m?"-right":"-left").replace("-end",m?"-left":"-right"),y=d.includes("right"),b=d.includes("left"),l={position:"fixed",pointerEvents:n("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${c}px`,"--first-height":`${((E=i[0])==null?void 0:E.height)||0}px`,zIndex:kt};let p="center";if(y&&(p="flex-end"),b&&(p="flex-start"),l.alignItems=p,d.includes("top")){const T=f.top;l.top=`max(env(safe-area-inset-top, 0px), ${T})`}if(d.includes("bottom")){const T=f.bottom;l.bottom=`max(env(safe-area-inset-bottom, 0px), ${T})`}if(!d.includes("left")){const T=f.right;l.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${T})`}if(!d.includes("right")){const T=f.left;l.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${T})`}return l}function Yr(e,t){const{prop:r,context:n,computed:s}=e,o=r("parent"),c=o.computed("placement"),{gap:i}=o.prop("store").attrs,[f]=c.split("-"),m=n.get("mounted"),d=n.get("remainingTime"),y=s("height"),b=s("frontmost"),l=!b,p=!r("stacked"),E=r("stacked"),w=r("type")==="loading"?Number.MAX_SAFE_INTEGER:d,v=s("heightIndex")*i+s("heightBefore"),h={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${r("removeDelay")}ms`,"--duration":`${w}ms`,"--initial-height":`${y}px`,"--offset":`${v}px`,"--index":r("index"),"--z-index":s("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},g=I=>Object.assign(h,I);return f==="top"?g({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):f==="bottom"&&g({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),m&&(g({"--y":"0","--opacity":"1"}),E&&g({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),t||g({"--opacity":"0",pointerEvents:"none"}),l&&p&&(g({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),t||g({"--y":"calc(var(--sign) * 40%)"})),l&&E&&!t&&g({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),b&&!t&&g({"--y":"calc(var(--lift) * -100%)"}),h}function zr(e,t){const{computed:r}=e,n={position:"absolute",inset:"0",scale:"1 2",pointerEvents:t?"none":"auto"},s=o=>Object.assign(n,o);return r("frontmost")&&!t&&s({height:"calc(var(--initial-height) + 80%)"}),n}function Qr(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function Zr(e,t){const{context:r,prop:n,send:s,refs:o,computed:c}=e;return{getCount(){return r.get("toasts").length},getToasts(){return r.get("toasts")},getGroupProps(i={}){const{label:f="Notifications"}=i,{hotkey:m}=n("store").attrs,d=m.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=c("placement"),[b,l="center"]=y.split("-");return t.element({...W.group.attrs,dir:n("dir"),tabIndex:-1,"aria-label":`${y} ${f} ${d}`,id:Wr(y),"data-placement":y,"data-side":b,"data-align":l,"aria-live":"polite",role:"region",style:Xr(e,y),onMouseMove(){s({type:"REGION.POINTER_ENTER",placement:y})},onMouseLeave(){s({type:"REGION.POINTER_LEAVE",placement:y})},onFocus(p){s({type:"REGION.FOCUS",target:p.relatedTarget})},onBlur(p){o.get("isFocusWithin")&&!V(p.currentTarget,p.relatedTarget)&&queueMicrotask(()=>s({type:"REGION.BLUR"}))}})},subscribe(i){return n("store").subscribe(()=>i(r.get("toasts")))}}}var Jr={props({props:e}){return{dir:"ltr",id:it(),...e,store:e.store}},initialState({prop:e}){return e("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,dismissableCleanup:void 0}},context({bindable:e}){return{toasts:e(()=>({defaultValue:[],sync:!0,hash:t=>t.map(r=>r.id).join(",")})),heights:e(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:e})=>e.get("toasts").length,overlap:({prop:e})=>e("store").attrs.overlap,placement:({prop:e})=>e("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:e,context:t,action:r}){e([()=>t.hash("toasts")],()=>{queueMicrotask(()=>{r(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["collapseToasts","resumeToasts","restoreLastFocusedEl"]},{target:"stack",actions:["resumeToasts","restoreLastFocusedEl"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","collapseToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:e})=>e("overlap")},effects:{subscribeToStore({context:e,prop:t}){return t("store").subscribe(r=>{if(r.dismiss){e.set("toasts",n=>n.filter(s=>s.id!==r.id));return}e.set("toasts",n=>{const s=n.findIndex(o=>o.id===r.id);return s!==-1?[...n.slice(0,s),{...n[s],...r},...n.slice(s+1)]:[r,...n]})})},trackHotKeyPress({prop:e,send:t}){return P(document,"keydown",n=>{const{hotkey:s}=e("store").attrs;s.every(c=>n[c]||n.code===c)&&t({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:e,send:t,scope:r}){const{pauseOnPageIdle:n}=e("store").attrs;if(!n)return;const s=r.getDoc();return P(s,"visibilitychange",()=>{const o=s.visibilityState==="hidden";t({type:o?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:e,context:t,computed:r,scope:n}){var m;const s=t.get("toasts"),o=r("placement"),c=s.length>0;if(!c){(m=e.get("dismissableCleanup"))==null||m();return}if(c&&e.get("dismissableCleanup"))return;const f=Gr(()=>je(n,o),{defer:!0});e.set("dismissableCleanup",f)},clearDismissableBranch({refs:e}){var t;(t=e.get("dismissableCleanup"))==null||t()},focusRegionEl({scope:e,computed:t}){queueMicrotask(()=>{var r;(r=je(e,t("placement")))==null||r.focus()})},pauseToasts({prop:e}){e("store").pause()},resumeToasts({prop:e}){e("store").resume()},expandToasts({prop:e}){e("store").expand()},collapseToasts({prop:e}){e("store").collapse()},removeToast({prop:e,event:t}){e("store").remove(t.id)},removeHeight({event:e,context:t}){(e==null?void 0:e.id)!=null&&queueMicrotask(()=>{t.set("heights",r=>r.filter(n=>n.id!==e.id))})},collapsedIfEmpty({send:e,computed:t}){!t("overlap")||t("count")>1||e({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:e,event:t}){e.get("isFocusWithin")||!t.target||(e.set("isFocusWithin",!0),e.set("lastFocusedEl",t.target))},restoreLastFocusedEl({refs:e}){var t;e.get("lastFocusedEl")&&((t=e.get("lastFocusedEl"))==null||t.focus({preventScroll:!0}),e.set("lastFocusedEl",null),e.set("isFocusWithin",!1))},clearLastFocusedEl({refs:e}){var t;e.get("lastFocusedEl")&&((t=e.get("lastFocusedEl"))==null||t.focus({preventScroll:!0}),e.set("lastFocusedEl",null),e.set("isFocusWithin",!1))}}}};function ps(e,t){const{state:r,send:n,prop:s,scope:o,context:c,computed:i}=e,f=r.hasTag("visible"),m=r.hasTag("paused"),d=c.get("mounted"),y=i("frontmost"),b=s("parent").computed("placement"),l=s("type"),p=s("stacked"),E=s("title"),T=s("description"),w=s("action"),[v,h="center"]=b.split("-");return{type:l,title:E,description:T,placement:b,visible:f,paused:m,closable:!!s("closable"),pause(){n({type:"PAUSE"})},resume(){n({type:"RESUME"})},dismiss(){n({type:"DISMISS",src:"programmatic"})},getRootProps(){return t.element({...W.root.attrs,dir:s("dir"),id:lt(o),"data-state":f?"open":"closed","data-type":l,"data-placement":b,"data-align":h,"data-side":v,"data-mounted":j(d),"data-paused":j(m),"data-first":j(y),"data-sibling":j(!y),"data-stack":j(p),"data-overlap":j(!p),role:"status","aria-atomic":"true","aria-describedby":T?Ke(o):void 0,"aria-labelledby":E?qe(o):void 0,tabIndex:0,style:Yr(e,f),onKeyDown(g){g.defaultPrevented||g.key=="Escape"&&(n({type:"DISMISS",src:"keyboard"}),g.preventDefault())}})},getGhostBeforeProps(){return t.element({"data-ghost":"before",style:zr(e,f)})},getGhostAfterProps(){return t.element({"data-ghost":"after",style:Qr()})},getTitleProps(){return t.element({...W.title.attrs,id:qe(o)})},getDescriptionProps(){return t.element({...W.description.attrs,id:Ke(o)})},getActionTriggerProps(){return t.button({...W.actionTrigger.attrs,type:"button",onClick(g){var I;g.defaultPrevented||((I=w==null?void 0:w.onClick)==null||I.call(w),n({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return t.button({id:qr(o),...W.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(g){g.defaultPrevented||n({type:"DISMISS",src:"user"})}})}}}var{not:_r}=Or(),ms={props({props:e}){return Ir(e,["id","type","parent","removeDelay"],"toast"),{closable:!0,...e,duration:ye(e.duration,e.type)}},initialState({prop:e}){return e("type")==="loading"||e("duration")===1/0?"visible:persist":"visible"},context({prop:e,bindable:t}){return{remainingTime:t(()=>({defaultValue:ye(e("duration"),e("type"))})),createdAt:t(()=>({defaultValue:Date.now()})),mounted:t(()=>({defaultValue:!1})),initialHeight:t(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:e})=>{const t=e("parent").context.get("toasts"),r=t.findIndex(n=>n.id===e("id"));return t.length-r},height:({prop:e})=>{const r=e("parent").context.get("heights").find(n=>n.id===e("id"));return(r==null?void 0:r.height)??0},heightIndex:({prop:e})=>e("parent").context.get("heights").findIndex(r=>r.id===e("id")),frontmost:({prop:e})=>e("index")===0,heightBefore:({prop:e})=>{const t=e("parent").context.get("heights"),r=t.findIndex(n=>n.id===e("id"));return t.reduce((n,s,o)=>o>=r?n:n+s.height,0)},shouldPersist:({prop:e})=>e("type")==="loading"||e("duration")===1/0},watch({track:e,prop:t,send:r}){e([()=>t("message")],()=>{const n=t("message");n&&r({type:n,src:"programmatic"})}),e([()=>t("type"),()=>t("duration")],()=>{r({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:_r("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:e,send:t}){return he(()=>{t({type:"REMOVE",src:"timer"})},e("removeDelay"))},waitForDuration({send:e,context:t,computed:r}){if(!r("shouldPersist"))return he(()=>{e({type:"DISMISS",src:"timer"})},t.get("remainingTime"))},waitForNextTick({send:e}){return he(()=>{e({type:"SHOW",src:"timer"})},0)},trackHeight({scope:e,prop:t}){let r;return L(()=>{const n=We(e);if(!n)return;const s=()=>{const i=n.style.height;n.style.height="auto";const f=n.getBoundingClientRect().height;n.style.height=i;const m={id:t("id"),height:f};Ye(t("parent"),m)},o=e.getWin(),c=new o.MutationObserver(s);c.observe(n,{childList:!0,subtree:!0,characterData:!0}),r=()=>c.disconnect()}),()=>r==null?void 0:r()}},guards:{isLoadingType:({prop:e})=>e("type")==="loading",shouldPersist:({computed:e})=>e("shouldPersist")},actions:{setMounted({context:e}){L(()=>{e.set("mounted",!0)})},measureHeight({scope:e,prop:t,context:r}){queueMicrotask(()=>{const n=We(e);if(!n)return;const s=n.style.height;n.style.height="auto";const o=n.getBoundingClientRect().height;n.style.height=s,r.set("initialHeight",o);const c={id:t("id"),height:o};Ye(t("parent"),c)})},setCloseTimer({refs:e}){e.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:e,refs:t,prop:r}){t.set("closeTimerStartTime",Date.now()),e.set("remainingTime",ye(r("duration"),r("type")))},syncRemainingTime({context:e,refs:t}){e.set("remainingTime",r=>{const n=t.get("closeTimerStartTime"),s=Date.now()-n;return t.set("lastCloseStartTimerStartTime",Date.now()),r-s})},notifyParentToRemove({prop:e}){e("parent").send({type:"TOAST.REMOVE",id:e("id")})},invokeOnDismiss({prop:e,event:t}){var r;(r=e("onStatusChange"))==null||r({status:"dismissing",src:t.src})},invokeOnUnmount({prop:e}){var t;(t=e("onStatusChange"))==null||t({status:"unmounted"})},invokeOnVisible({prop:e}){var t;(t=e("onStatusChange"))==null||t({status:"visible"})}}}};function Ye(e,t){const{id:r,height:n}=t;e.context.set("heights",s=>s.find(c=>c.id===r)?s.map(c=>c.id===r?{...c,height:n}:c):[{id:r,height:n},...s])}var en=(e,t)=>({...t,...at(e)});function tn(e){const t=en(e,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let r=[],n=[],s=new Set,o=[];const c=a=>(r.push(a),()=>{const u=r.indexOf(a);r.splice(u,1)}),i=a=>(r.forEach(u=>u(a)),a),f=a=>{if(n.length>=t.max){o.push(a);return}i(a),n.unshift(a)},m=()=>{for(;o.length>0&&n.length<t.max;){const a=o.shift();a&&(i(a),n.unshift(a))}},d=a=>{const u=a.id??`toast:${it()}`,F=n.find(x=>x.id===u);return s.has(u)&&s.delete(u),F?n=n.map(x=>x.id===u?i({...x,...a,id:u}):x):f({id:u,duration:t.duration,removeDelay:t.removeDelay,type:"info",...a,stacked:!t.overlap,gap:t.gap}),u},y=a=>(s.add(a),a?(r.forEach(u=>u({id:a,dismiss:!0})),n=n.filter(u=>u.id!==a),m()):(n.forEach(u=>{r.forEach(F=>F({id:u.id,dismiss:!0}))}),n=[],o=[]),a);return{attrs:t,subscribe:c,create:d,update:(a,u)=>d({id:a,...u}),remove:y,dismiss:a=>{a!=null?n=n.map(u=>u.id===a?i({...u,message:"DISMISS"}):u):n=n.map(u=>i({...u,message:"DISMISS"}))},error:a=>d({...a,type:"error"}),success:a=>d({...a,type:"success"}),info:a=>d({...a,type:"info"}),warning:a=>d({...a,type:"warning"}),loading:a=>d({...a,type:"loading"}),getVisibleToasts:()=>n.filter(a=>!s.has(a.id)),getCount:()=>n.length,promise:(a,u,F={})=>{if(!u)return;let x;u.loading!==void 0&&(x=d({...F,...u.loading,promise:a,type:"loading"}));let Z=x!==void 0,X;const ht=J(a).then(async A=>{if(X=["resolve",A],rn(A)&&!A.ok){Z=!1;const M=J(u.error,`HTTP Error! status: ${A.status}`);d({...F,...M,id:x,type:"error"})}else if(u.success!==void 0){Z=!1;const M=J(u.success,A);d({...F,...M,id:x,type:"success"})}}).catch(async A=>{if(X=["reject",A],u.error!==void 0){Z=!1;const M=J(u.error,A);d({...F,...M,id:x,type:"error"})}}).finally(()=>{var A;Z&&(y(x),x=void 0),(A=u.finally)==null||A.call(u)});return{id:x,unwrap:()=>new Promise((A,M)=>ht.then(()=>X[0]==="reject"?M(X[1]):A(X[1])).catch(M))}},pause:a=>{a!=null?n=n.map(u=>u.id===a?i({...u,message:"PAUSE"}):u):n=n.map(u=>i({...u,message:"PAUSE"}))},resume:a=>{a!=null?n=n.map(u=>u.id===a?i({...u,message:"RESUME"}):u):n=n.map(u=>i({...u,message:"RESUME"}))},isVisible:a=>!s.has(a)&&!!n.find(u=>u.id===a),isDismissed:a=>s.has(a),expand:()=>{n=n.map(a=>i({...a,stacked:!0}))},collapse:()=>{n=n.map(a=>i({...a,stacked:!1}))}}}var rn=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",hs={connect:Zr,machine:Jr};function nn(e){return e===void 0&&(e={}),tn(e)}const sn=nn({placement:"top"}),dt="Bearer ";async function de({method:e,path:t,data:r,headers:n,authenticate:s=!0}){const o={method:e,headers:{}};if(r&&(o.headers["Content-Type"]="application/json",o.body=typeof r=="string"?r:JSON.stringify(r)),n&&(o.headers={...o.headers,...n}),s&&wt){const i=localStorage.getItem("token");i&&(o.headers.Authorization=`${dt}${i}`,o.headers["request-source"]="Authorized"),Je.url.pathname.includes("/discover")&&(o.headers["request-source"]="Open")}const c=await fetch(`${window.location.origin}/${t}`,o);return await on(c)}function fe(e,t,r){return de({method:"GET",path:e,headers:t,authenticate:r})}function ys(e,t,r){return de({method:"DELETE",path:e,headers:t,authenticate:r})}function Es(e,t,r,n){return de({method:"POST",path:e,data:t,headers:r,authenticate:n})}function vs(e,t,r,n){return de({method:"PUT",path:e,data:t,headers:r,authenticate:n})}async function on(e){if(e.ok||e.status===422){if(an(e),(e.headers.get("Content-Type")||"").includes("application/octet-stream"))return await e.arrayBuffer();const r=await e.text();try{return JSON.parse(r)}catch{return r}}else if(e.status===401){sessionStorage.setItem("logout-reason","Your session has timed out. Please log in."),Qe(void 0,!0);return}else e.status===403&&(sessionStorage.removeItem("logout-reason"),sessionStorage.removeItem("filters"),Qe(void 0,!1));yt(e.status,await e.text())}function an(e){let t=e.headers.get("Authorization");t&&(t=t.replace(dt,""),hn(t))}const U="picsure/proxy/dictionary-api",ze="picsure/query",Ee="picsure/proxy/uploader",cn={Concepts:`${U}/concepts`,Concept:{Detail:`${U}/concepts/detail`,Tree:`${U}/concepts/tree`},Dashboard:`${U}/dashboard`,DashboardDrawer:`${U}/dashboard-drawer`,NamedDataSet:"picsure/dataset/named",Dictionary:U,Facets:`${U}/facets`,Search:"picsure/search",Resources:"picsure/resource",Query:ze,QuerySync:`${ze}/sync`,Uploader:{Upload:`${Ee}/upload`,Sites:`${Ee}/sites`,Status:`${Ee}/status`}},_="psama/user",Ae={Application:"psama/application",Auth:"psama/authentication",Connection:"psama/connection",Priviege:"psama/privilege",StudyAccess:"psama/studyAccess",Role:"psama/role",TOS:"psama/tos",Users:_,User:{Logout:`${_}/logout`,Me:`${_}/me`,Refresh:`${_}/me/refresh_long_term_token`}},R={},ft={visualization:(R==null?void 0:R.VITE_RESOURCE_VIZ)||"",application:(R==null?void 0:R.VITE_RESOURCE_APP)||"",aggregate:(R==null?void 0:R.VITE_RESOURCE_AGGREGATE)||"",search:(R==null?void 0:R.VITE_RESOURCE_SEARCH)||"23ec804c-31c1-49eb-bbb0-a0be4eda59fa",hpdsOpen:"23ec804c-31c1-49eb-bbb0-a0be4eda59fa",hpdsAuth:"23ec804c-31c1-49eb-bbb0-a0be4eda59fa",queryable:[]},un=oe(Promise.resolve()),Te=oe(ft);function bs(e=!1){return ie(Te).queryable}async function ln(){if(ie(Te).queryable.length>0)return;const e=ft;await fe(cn.Resources).then(t=>{e.queryable=t.filter(({hidden:r,resourceRSPath:n})=>!r&&n.includes("passthru")).map(({name:r,uuid:n})=>({name:r,uuid:n}))}).catch(()=>sn.error({description:"Failed to load remote resource list."})),Te.set(e),console.debug("Resources",e)}async function Ts(){un.set(ln())}function dn(e,t){const r=oe(!!localStorage.getItem(e));return window.addEventListener("storage",n=>{n.key===e&&r.set(!!n.newValue)}),r}const Pe=dn("token"),C=oe(pn()),ws=ae(C,e=>{var t;return(t=e==null?void 0:e.privileges)==null?void 0:t.includes(we.SUPER)}),Ss=ae(C,e=>{var t;return(t=e==null?void 0:e.privileges)==null?void 0:t.includes(we.ADMIN)}),fn=ae(Pe,e=>e);C.subscribe(e=>{{pt();const t={...e};t.token=void 0,localStorage.setItem("user",JSON.stringify(t))}});function gn(e){localStorage.setItem("token",e),Pe.set(!0)}function ks(){return localStorage.getItem("token")||""}function gt(){localStorage.removeItem("token"),Pe.set(!1)}function pn(){if(localStorage.getItem("user")){pt();try{const e=JSON.parse(localStorage.getItem("user")||"{}");return!e||Object.keys(e).length===0?{}:(console.log("Restored user from local storage: ",e),e)}catch(e){return console.error("Error reading user from local storage:  "+e),{}}}return{}}function Is(){return!!localStorage.getItem("token")}function pt(){{const e=localStorage.getItem("token");e&&yn(e)&&(console.log("Clearing expired token from local storage."),gt())}}const xs=ae([C,fn],([e,t])=>{const r=(e==null?void 0:e.privileges)||[];if(r.length===0||!t)return De.filter(c=>!c.privilege);function n(c){return c.filter(i=>i.feature?!!Et[i.feature]:!0).map(i=>i.children?{...i,children:n(i.children)}:i)}const s=n(De);if(r.includes(we.SUPER))return s;function o(c){return c.filter(i=>i.privilege?i.privilege.some(f=>r.includes(f)):!0).map(i=>i.children?{...i,children:o(i.children)}:i)}return o(s)});async function mn(e,t=!1){{const r=await fe(`${Ae.User.Me}${t?"?hasToken":""}`);if(r.privileges&&r.token){for(const n of r.privileges)if(n.includes(Re.PRIV_MANAGED)){r.privileges.push(Re.AUTHORIZED_ACCESS);break}}C.set({...ie(C),...r})}}function As(){return fe(Ae.User.Refresh).then(e=>{if(!e.userLongTermToken)throw new Error("No user token was returned.");return C.set({...ie(C),token:e.userLongTermToken}),e.userLongTermToken})}async function hn(e){e&&(gn(e),await mn(!0,!1))}async function Qe(e,t=!1){function r(n){console.error("Error logging out: "+n),Ze(t)}localStorage.getItem("token")&&(await fe(Ae.User.Logout).catch(r),gt()),e?await e.logout().then(n=>{typeof n=="string"?(C.set({}),location.replace(n)):r(n)}).catch(r):Ze(t)}function Ze(e){C.set({}),e?Le(`/login?redirectTo=${encodeURIComponent(Je.url.pathname)}`):Le("/login")}function yn(e){try{return mt(e)<new Date().getTime()}catch(t){return console.error("Error checking token expiration: "+t),!0}}function mt(e){if(!e)throw new Error("No token provided.");try{return JSON.parse(atob(e.split(".")[1])).exp*1e3}catch(t){throw new Error("Error parsing token: "+t)}}function Ps(e){try{return new Date(mt(e))}catch(t){console.error("Error getting token expiration as date: "+t);return}}export{Zn as $,fn as A,N as B,H as C,Cn as D,K as E,ke as F,is as G,Or as H,Fn as I,er as J,Mn as K,Gn as L,j as M,Yn as N,ee as O,Ae as P,Rn as Q,Pn as R,Kn as S,$n as T,L as U,qn as V,Wn as W,Hn as X,mr as Y,jn as Z,ar as _,ws as a,Qn as a0,Dn as a1,Ln as a2,Nn as a3,ds as a4,fs as a5,ss as a6,cr as a7,ur as a8,Bn as a9,Jn as aA,_n as aB,us as aC,ls as aD,P as aa,_e as ab,z as ac,Mt as ad,Xn as ae,hr as af,jt as ag,On as ah,gs as ai,ts as aj,ot as ak,xe as al,ns as am,Rr as an,zn as ao,me as ap,ct as aq,as as ar,cs as as,at,os as au,es as av,rs as aw,Un as ax,Vn as ay,xs as az,Ss as b,Es as c,ys as d,Ts as e,un as f,fe as g,bs as h,yn as i,cn as j,Ps as k,hn as l,mn as m,As as n,mt as o,vs as p,Is as q,Te as r,gn as s,sn as t,C as u,ms as v,ps as w,hs as x,Qe as y,ks as z};
