import{g}from"./Drejzb63.js";import"./Bzak7iHL.js";import{p as Te,i as Z,o as ke,l as y,k as r,u as m,h as x,f as T,d as f,s as u,r as p,t as A,b as S,c as Oe}from"./pV5yBOfK.js";import{d as Le,s as $,e as R}from"./D3FUfhzK.js";import{i as z}from"./BAa5cEXk.js";import{e as ee,i as Fe}from"./CFqqwPkz.js";import{r as D,s as te,d as ae}from"./B3YVaWvx.js";import{b as He}from"./CMMNa4Y8.js";import{b as ie}from"./D25vQSLz.js";import{p as v}from"./C2caA9Pm.js";import{L as re}from"./BK-nQ0m1.js";var Ae=(e=>(e.None="none",e.Genomic="genomic",e.SNP="snp",e))(Ae||{}),ze=(e=>(e.Heterozygous="0/1",e.Homozygous="1/1",e.HeterozygousOrHomozygous="1/1,0/1",e.Neither="0/0",e))(ze||{});const Ce={"0/1":"Heterozygous","1/1":"Homozygous","1/1,0/1":"Heterozygous or Homozygous","0/1,1/1":"Heterozygous or Homozygous"};class oe extends Error{constructor(t){super(t)}}function $e(e,t){return{uuid:g(),id:e.conceptPath,filterType:"Categorical",displayType:t&&(t==null?void 0:t.length)>0?"restrict":"anyRecordOf",searchResult:e,categoryValues:t||[],variableName:e.display||e.name,description:e.description,allowFiltering:e.allowFiltering,dataset:e.dataset}}function Re(e){return{uuid:g(),id:e.conceptPath,filterType:"Categorical",displayType:"any",searchResult:e,variableName:e.display||e.name,description:e.description,categoryValues:[],allowFiltering:e.allowFiltering,dataset:e.dataset}}function le(e){return e.flatMap(t=>[t.conceptPath,...(t.children||[]).flatMap(i=>le([i]))])}function et(e,t){const i=le((t==null?void 0:t.children)||[]);if(i.length===0)throw new oe("No concept paths found");if(i.length>9500)throw new oe("Too many concept paths found");return{uuid:g(),id:e.conceptPath,concepts:i,filterType:"AnyRecordOf",displayType:"anyRecordOf",searchResult:e,variableName:e.name||e.display||e.conceptPath,description:e.description,allowFiltering:e.allowFiltering,dataset:e.dataset}}function tt(e,t,i){return{uuid:g(),id:e.conceptPath,filterType:"numeric",displayType:t!==void 0&&i!==void 0?"between":t!==void 0?"greaterThan":i!==void 0?"lessThan":"any",searchResult:e,min:t!==void 0?t.toLocaleString():void 0,max:i!==void 0?i.toLocaleString():void 0,variableName:e.display||e.name,description:e.description,allowFiltering:e.allowFiltering,dataset:e.dataset}}function at(e){const t=(n,s)=>s&&s.length>0?`${n}: ${s.join(", ")}`:void 0,i=[t("Gene with variant",e.Gene_with_variant),t("Variant frequency",e.Variant_frequency_as_text),t("Consequence Group by severity",e.Variant_consequence_calculated)].filter(n=>n).join("; ");return{uuid:g(),id:"genomic",filterType:"genomic",displayType:"any",variableName:"Genomic Filter",description:i,Gene_with_variant:e.Gene_with_variant,Variant_consequence_calculated:e.Variant_consequence_calculated,Variant_frequency_as_text:e.Variant_frequency_as_text,allowFiltering:!0,dataset:""}}function it(e){const t=e.map(o=>`${o.search}: ${o.constraint.split(",").map(n=>Ce[n]).join(", ")}`).join("; ");return{uuid:g(),id:"snp-variant",filterType:"snp",displayType:"any",snpValues:e,variableName:"Variant Filter",description:t,allowFiltering:!0,dataset:""}}function Ne(e,t,i,o){t()(r(i)),r(o).scrollTop=0}function Ve(e,t,i,o){t([...t(),...i()].sort()),i([]),o(20)}function qe(e,t,i,o,n){var s;t()&&((s=t())==null?void 0:s.length)!==0?(i(t()),o([]),n(20)):(i([...i(),...o()]),o([]),n(20))}var Pe=T('<button id="select-all" class="btn preset-outlined-surface-500 hover:preset-filled-primary-500 ml-2 text-sm">Select All</button>'),Ge=T('<label class="p-1 m-1 block cursor-pointer hover:preset-tonal-surface hover:rounded-md" role="listitem"><input type="checkbox" class="mr-1 float-left"/> </label>'),je=T('<button id="clear" class="btn preset-outlined-surface-500 hover:preset-filled-primary-500 ml-2 text-sm">Clear</button>'),Me=T('<label class="p-1 m-1 block hover:preset-tonal-surface hover:rounded-md cursor-pointer" role="listitem"><input type="checkbox" class="mr-1" checked/> </label>'),De=T('<div data-testid="optional-selection-list" class="flex w-full"><div class="flex flex-1 flex-col h-full p-3 m-1 card bg-surface-100 rounded-xl"><header class="flex pb-1"><input class="input text-sm" type="search" name="search" placeholder="Search..."/> <!></header> <section class="card-body"><div id="options-container" class="overflow-scroll scrollbar-color h-25vh svelte-11wlxkk"><!> <!></div></section></div> <div class="flex flex-1 flex-col h-full p-3 m-1 card bg-surface-100 rounded-xl"><header class="flex justify-between pb-1"><div class="py-2">Selected:</div> <!></header> <section class="card-body"><div id="selected-options-container" class="overflow-scroll scrollbar-color h-25vh svelte-11wlxkk"><!> <!></div></section></div></div>');function rt(e,t){Te(t,!0);let i=x(""),o=v(t,"unselectedOptions",31,()=>Z([])),n=v(t,"selectedOptions",31,()=>Z([])),s=v(t,"selectedOptionEndLocation",15,20),I=v(t,"currentlyLoading",11,!1),ne=v(t,"showClearAll",3,!0),ce=v(t,"showSelectAll",3,!0),se=v(t,"allOptionsLoaded",3,!1),C=v(t,"allOptions",3,void 0),U=v(t,"onscroll",3,()=>{}),N=x(!1),h=x(void 0),k=x(void 0),V=x(!1);function E(a,l){const c=a.scrollTop,d=a.clientHeight,b=a.scrollHeight;return!l&&b-(c+d)<=30}function de(){r(h)&&!I()&&E(r(h),r(_e))&&U()(r(i))}function fe(){r(k)&&(y(N,!0),E(r(k),r(V))&&s(s()+20),y(N,!1))}function pe(a){return l=>{l.preventDefault(),o(o().filter(c=>c!==a)),n([...n(),a].sort())}}function ue(a){return l=>{l.preventDefault(),n(n().filter(c=>c!==a)),o([a,...o()])}}function B(a){return a.replaceAll(" ","-").toLowerCase()}let q=m(()=>C()===void 0),ve=m(()=>{var a;return r(q)?1/0:(((a=C())==null?void 0:a.length)||0)-n().length}),_e=m(()=>r(q)?se():o().length>=r(ve)),J=m(()=>n().slice(0,s()));ke(()=>{y(V,r(q)?r(V):r(J).length>=n().length,!0)});var P=De(),G=f(P),j=f(G),O=f(j);D(O),O.__input=[Ne,U,i,h];var ye=u(O,2);{var me=a=>{var l=Pe();l.__click=[qe,C,n,o,s],A(()=>l.disabled=o().length===0),S(a,l)};z(ye,a=>{ce()&&a(me)})}p(j);var K=u(j,2),L=f(K),Q=f(L);ee(Q,17,o,Fe,(a,l)=>{var c=Ge(),d=f(c);D(d);var b=m(()=>pe(r(l)));d.__click=function(..._){var w;(w=r(b))==null||w.apply(this,_)};var H=u(d);p(c),A(_=>{te(c,"id",`option-${_??""}`),ae(d,r(l)),$(H,` ${r(l)??""}`)},[()=>B(r(l))]),S(a,c)});var ge=u(Q,2);{var he=a=>{re(a,{ring:!0,size:"small"})};z(ge,a=>{I()&&a(he)})}p(L),ie(L,a=>y(h,a),()=>r(h)),p(K),p(G);var W=u(G,2),M=f(W),be=u(f(M),2);{var we=a=>{var l=je();l.__click=[Ve,o,n,s],A(()=>l.disabled=n().length===0),S(a,l)};z(be,a=>{ne()&&a(we)})}p(M);var X=u(M,2),F=f(X),Y=f(F);ee(Y,16,()=>r(J),a=>a,(a,l)=>{var c=Me(),d=f(c);D(d);var b=m(()=>ue(l));d.__click=function(..._){var w;(w=r(b))==null||w.apply(this,_)};var H=u(d);p(c),A(_=>{te(c,"id",`option-${_??""}`),ae(d,l),$(H,` ${l??""}`)},[()=>B(l)]),S(a,c)});var xe=u(Y,2);{var Se=a=>{re(a,{})};z(xe,a=>{r(N)&&a(Se)})}p(F),ie(F,a=>y(k,a),()=>r(k)),p(X),p(W),p(P),He(O,()=>r(i),a=>y(i,a)),R("scroll",L,de),R("scroll",F,fe),S(e,P),Oe()}Le(["input","click"]);export{oe as A,ze as G,rt as O,it as a,et as b,at as c,Re as d,$e as e,tt as f,Ae as g,Ce as h};
