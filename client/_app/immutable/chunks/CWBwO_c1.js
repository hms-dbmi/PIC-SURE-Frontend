import"./Bzak7iHL.js";import{p as K,h as x,i as h,f as A,d as i,s,r as l,n as M,t as $,l as q,k as t,b as w,c as Q,u as R,m as V}from"./pV5yBOfK.js";import{e as W,s as X}from"./D3FUfhzK.js";import{i as Y}from"./BAa5cEXk.js";import{e as Z,i as ee}from"./CFqqwPkz.js";import{r as P,e as ae,d as te}from"./B3YVaWvx.js";import{b as I}from"./CMMNa4Y8.js";import{p as re,a as ie,s as se}from"./C2caA9Pm.js";import{g as le}from"./BLfKYx2_.js";import{u as ne,a as oe}from"./BOOtCoKZ.js";import{a as pe,t as L}from"./tvkVmxlD.js";var de=A('<label class="label svelte-1xpnd24"><span>UUID:</span> <input type="text" class="input"/></label>'),ue=A("<option> </option>"),ve=A('<form><fieldset data-testid="privilege-form" class="grid gap-4 my-3"><!> <label class="label required svelte-1xpnd24"><span>Name:</span> <input type="text" class="input" required minlength="1" maxlength="255"/></label> <label class="label required svelte-1xpnd24"><span>Description:</span> <input type="text" class="input" required minlength="1" maxlength="255"/></label> <label class="label required svelte-1xpnd24"><span>Application:</span> <select required><option disabled>Select an application</option><!></select></label> <div class="mt-2"><button type="submit" data-testid="privilege-save-btn" class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500">Save</button> <a href="/admin/configuration" data-testid="privilege-cancel-btn" class="btn preset-tonal-secondary border border-secondary-500 hover:preset-filled-secondary-500">Cancel</a></div></fieldset></form>');function we(N,u){K(u,!0);const O=()=>ie(pe,"$isTopAdmin",j),[j,z]=se();let r=re(u,"privilege",3,void 0),o=x(h(r()?r().name:"")),v=x(h(r()?r().description:"")),c=x(h(r()?r().application:""));async function B(a){a.preventDefault();let e={name:t(o),description:t(v),application:t(c)};try{r()?(e={...e,uuid:r().uuid},await ne(e)):await oe(e),L.success({title:`Successfully saved ${e&&"new "}privilege '${t(o)}'`}),le("/admin/configuration")}catch(n){console.error(n),L.error({title:`An error occured while saving ${e&&"new "}privilege '${t(o)}'`})}}var d=ve(),m=i(d),D=i(m);{var E=a=>{var e=de(),n=s(i(e),2);P(n),n.readOnly=!0,l(e),$(()=>{var y;return te(n,(y=r())==null?void 0:y.uuid)}),w(a,e)};Y(D,a=>{var e;(e=r())!=null&&e.uuid&&a(E)})}var b=s(D,2),S=s(i(b),2);P(S),l(b);var f=s(b,2),T=s(i(f),2);P(T),l(f);var k=s(f,2),_=s(i(k),2),g=i(_);g.value=g.__value="";var G=s(g);Z(G,17,()=>u.applicationList,ee,(a,e,n,y)=>{var U=R(()=>V(t(e),2));let H=()=>t(U)[0],C=()=>t(U)[1];var p=ue(),J=i(p,!0);l(p);var F={};$(()=>{X(J,H()),F!==(F=C())&&(p.value=(p.__value=C())??"")}),w(a,p)}),l(_),l(k),M(2),l(m),l(d),$(()=>m.disabled=!O()),W("submit",d,B),I(S,()=>t(o),a=>q(o,a)),I(T,()=>t(v),a=>q(v,a)),ae(_,()=>t(c),a=>q(c,a)),w(N,d),Q(),z()}export{we as P};
