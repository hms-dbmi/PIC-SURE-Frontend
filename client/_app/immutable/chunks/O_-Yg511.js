import{s as ye,e as p,c as m,b as _,f as v,r as s,i as oe,k as Ee,n as ke,a as w,t as $,q as X,g as A,d as H,h as o,z as ve,j as q,C as Te}from"./CDvIr29H.js";import{h as Ce,u as we}from"./BJ-g7xSB.js";import{S as Ae,i as je,t as Y,a as Z,d as se,e as le,m as ue,f as ie}from"./ByE-_V18.js";import{g as Se}from"./DYMkpHtv.js";import{g as De}from"./BpCLhCzN.js";import"./4MwYNI-R.js";import{P as Le}from"./Bq_4NOFD.js";import{C as Be}from"./DOV-xyFJ.js";import{E as Ie}from"./CjJvbZ1d.js";import{c as Pe,u as Re,e as Ue,r as Ne,f as be}from"./BEf3cR2P.js";function Oe(n){let e,a;return e=new Ie({props:{title:`An error occured while to retrieving your account. If this problem persists, please
    contact an administrator.`}}),{c(){se(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ue(e,t,l),a=!0},p:ke,i(t){a||(Y(e.$$.fragment,t),a=!0)},o(t){Z(e.$$.fragment,t),a=!1},d(t){ie(e,t)}}}function $e(n){var fe,de,pe;let e,a,t="<h4>Personal Access Token</h4>",l,r,u,h="Account:",x,k,I,j,b,U="Token:",M,S,N,V,y,g="Expires:",z,D,P,F=((pe=(de=be(((fe=n[0])==null?void 0:fe.token)||""))==null?void 0:de.toString())==null?void 0:pe.substring(0,24))+"",K,ee,te,E,L,re,T,Q,ae,B,W,C,ne,ce,f=n[4]&&_e(n);return L=new Be({props:{itemToCopy:n[0].token||"",class:"variant-ghost-primary hover:variant-filled-primary"}}),{c(){e=p("div"),a=p("header"),a.innerHTML=t,l=w(),r=p("section"),u=p("label"),u.textContent=h,x=w(),k=p("span"),I=$(n[1]),j=w(),b=p("label"),b.textContent=U,M=w(),S=p("div"),N=$(n[6]),V=w(),y=p("label"),y.textContent=g,z=w(),D=p("div"),P=p("span"),K=$(F),ee=w(),f&&f.c(),te=w(),E=p("footer"),se(L.$$.fragment),re=w(),T=p("button"),Q=$(n[3]),ae=w(),B=p("button"),W=$(n[5]),this.h()},l(i){e=m(i,"DIV",{id:!0,class:!0});var c=_(e);a=m(c,"HEADER",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-2fmcqd"&&(a.innerHTML=t),l=A(c),r=m(c,"SECTION",{class:!0});var d=_(r);u=m(d,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),X(u)!=="svelte-17ludeq"&&(u.textContent=h),x=A(d),k=m(d,"SPAN",{id:!0,class:!0});var G=_(k);I=H(G,n[1]),G.forEach(v),j=A(d),b=m(d,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),X(b)!=="svelte-ttagsa"&&(b.textContent=U),M=A(d),S=m(d,"DIV",{id:!0});var J=_(S);N=H(J,n[6]),J.forEach(v),V=A(d),y=m(d,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),X(y)!=="svelte-1bwcbvc"&&(y.textContent=g),z=A(d),D=m(d,"DIV",{});var R=_(D);P=m(R,"SPAN",{id:!0,class:!0});var me=_(P);K=H(me,F),me.forEach(v),ee=A(R),f&&f.l(R),R.forEach(v),d.forEach(v),te=A(c),E=m(c,"FOOTER",{class:!0});var O=_(E);le(L.$$.fragment,O),re=A(O),T=m(O,"BUTTON",{id:!0,class:!0});var he=_(T);Q=H(he,n[3]),he.forEach(v),ae=A(O),B=m(O,"BUTTON",{id:!0,class:!0});var ge=_(B);W=H(ge,n[5]),ge.forEach(v),O.forEach(v),c.forEach(v),this.h()},h(){s(a,"class","card-header"),s(u,"for","account"),s(u,"class","svelte-15nvjbj"),s(k,"id","account"),s(k,"class","w-full"),s(b,"for","token"),s(b,"class","svelte-15nvjbj"),s(S,"id","token"),s(y,"for","expires"),s(y,"class","svelte-15nvjbj"),s(P,"id","expires"),s(P,"class","w-1/3 mr-2"),s(r,"class","p-4 grid grid-cols-2 gap-y-2 items-center svelte-15nvjbj"),s(T,"id","refresh-button"),s(T,"class","btn variant-ghost-primary hover:variant-filled-primary"),T.disabled=n[2],s(B,"id","reveal-button"),s(B,"class","btn variant-ghost-primary hover:variant-filled-primary"),s(E,"class","card-footer mt-2"),s(e,"id","user-token"),s(e,"class","card variant-filled-sureface svelte-15nvjbj")},m(i,c){oe(i,e,c),o(e,a),o(e,l),o(e,r),o(r,u),o(r,x),o(r,k),o(k,I),o(r,j),o(r,b),o(r,M),o(r,S),o(S,N),o(r,V),o(r,y),o(r,z),o(r,D),o(D,P),o(P,K),o(D,ee),f&&f.m(D,null),o(e,te),o(e,E),ue(L,E,null),o(E,re),o(E,T),o(T,Q),o(E,ae),o(E,B),o(B,W),C=!0,ne||(ce=[ve(T,"click",n[7]),ve(B,"click",n[8])],ne=!0)},p(i,c){var G,J,R;(!C||c&2)&&q(I,i[1]),(!C||c&64)&&q(N,i[6]),(!C||c&1)&&F!==(F=((R=(J=be(((G=i[0])==null?void 0:G.token)||""))==null?void 0:J.toString())==null?void 0:R.substring(0,24))+"")&&q(K,F),i[4]?f?f.p(i,c):(f=_e(i),f.c(),f.m(D,null)):f&&(f.d(1),f=null);const d={};c&1&&(d.itemToCopy=i[0].token||""),L.$set(d),(!C||c&8)&&q(Q,i[3]),(!C||c&4)&&(T.disabled=i[2]),(!C||c&32)&&q(W,i[5])},i(i){C||(Y(L.$$.fragment,i),C=!0)},o(i){Z(L.$$.fragment,i),C=!1},d(i){i&&v(e),f&&f.d(),ie(L),ne=!1,Te(ce)}}}function _e(n){let e,a=n[4].toUpperCase()+"",t,l;return{c(){e=p("span"),t=$(a),this.h()},l(r){e=m(r,"SPAN",{id:!0,class:!0,"data-testid":!0});var u=_(e);t=H(u,a),u.forEach(v),this.h()},h(){s(e,"id","expires-badge"),s(e,"class",l="badge "+n[4]),s(e,"data-testid","expires-badge")},m(r,u){oe(r,e,u),o(e,t)},p(r,u){u&16&&a!==(a=r[4].toUpperCase()+"")&&q(t,a),u&16&&l!==(l="badge "+r[4])&&s(e,"class",l)},d(r){r&&v(e)}}}function He(n){let e,a;return e=new Le({props:{width:"w-10",value:void 0}}),{c(){se(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,l){ue(e,t,l),a=!0},p:ke,i(t){a||(Y(e.$$.fragment,t),a=!0)},o(t){Z(e.$$.fragment,t),a=!1},d(t){ie(e,t)}}}function qe(n){let e,a,t={ctx:n,current:null,token:null,hasCatch:!0,pending:He,then:$e,catch:Oe,blocks:[,,,]};return Ce(Pe(!0,!0),t),{c(){e=p("div"),t.block.c(),this.h()},l(l){e=m(l,"DIV",{id:!0,class:!0});var r=_(e);t.block.l(r),r.forEach(v),this.h()},h(){s(e,"id","user-token-container"),s(e,"class","svelte-15nvjbj")},m(l,r){oe(l,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,a=!0},p(l,[r]){n=l,we(t,n,r)},i(l){a||(Y(t.block),a=!0)},o(l){for(let r=0;r<3;r+=1){const u=t.blocks[r];Z(u)}a=!1},d(l){l&&v(e),t.block.d(),t.token=null,t=null}}}let xe="••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••";function Me(n,e,a){let t,l,r,u,h;Ee(n,Re,g=>a(0,h=g));const x=Se(),k=De();let I="",j=!1,b=!1,U="Refresh";function M(){if(!r||r===0)return"unknown";const g=Math.floor((r-Date.now())/(1e3*60*60*24));return r<Date.now()?"expired":g<7?"expiring soon":"valid for "+g+" more days"}function S(){x.trigger({type:"confirm",title:"Please Confirm",body:"Are you sure you wish to invalidate your old token and create a new one?",response:g=>g&&V()})}function N(g){if(!g)return 0;try{return Ue(g)}catch(z){return console.error(z),k.trigger({message:"An error occured while parsing your token. Please try again later. If this problem persists, please contact an administrator.",background:"variant-filled-error"}),0}}async function V(){await Ne().catch(g=>{console.log("Error: ",g),k.trigger({message:"An error occured while refreshing your token. Please try again later. If this problem persists, please contact an administrator.",background:"variant-filled-error"}),a(3,U="Error")}),a(3,U="Refreshed!"),a(2,b=!0)}function y(){a(9,j=!j)}return n.$$.update=()=>{n.$$.dirty&513&&a(6,t=j?h==null?void 0:h.token:xe),n.$$.dirty&512&&a(5,l=j?"Hide":"Reveal"),n.$$.dirty&1&&a(10,r=h&&h.token?N(h.token):0),n.$$.dirty&1024&&a(4,u=r&&M()),n.$$.dirty&1&&a(1,I=(h==null?void 0:h.email)||"There was an error retrieving your account.")},[h,I,b,U,u,l,t,S,y,j,r]}class Ze extends Ae{constructor(e){super(),je(this,e,Me,qe,ye,{})}}export{Ze as U};
