import{s as Ue,e as E,a as D,c as S,b as U,g as H,f as g,l as Ae,m as c,i as G,h as p,U as ue,O as z,R as De,w as He,N as Ne,t as re,d as oe,W as Ee,j as Se,Y as de}from"./scheduler.bui7uCNy.js";import{S as qe,i as ze,t as q,g as fe,a as Y,b as he,d as Le,e as Te,m as Ve,f as Ie}from"./index.CNwEczq-.js";import{e as le,u as Fe,d as je}from"./each.VHlBgARd.js";import"./ProgressBar.svelte_svelte_type_style_lang.BKgxDQCH.js";import{P as Ce}from"./ProgressRadial.CbTPnjvT.js";var Pe=(t=>(t.None="none",t.Genomic="genomic",t.SNP="snp",t))(Pe||{}),Ge=(t=>(t.Heterozygous="0/1",t.Homozygous="1/1",t.HeterozygousOrHomozygous="1/1,0/1",t.Neither="0/0",t))(Ge||{});const Be={"0/1":"Heterozygous","1/1":"Homozygous","1/1,0/1":"Heterozygous or Homozygous","0/1,1/1":"Heterozygous or Homozygous","0/0":"Excluded"};var I=[];for(var ae=0;ae<256;++ae)I.push((ae+256).toString(16).slice(1));function Me(t,e=0){return(I[t[e+0]]+I[t[e+1]]+I[t[e+2]]+I[t[e+3]]+"-"+I[t[e+4]]+I[t[e+5]]+"-"+I[t[e+6]]+I[t[e+7]]+"-"+I[t[e+8]]+I[t[e+9]]+"-"+I[t[e+10]]+I[t[e+11]]+I[t[e+12]]+I[t[e+13]]+I[t[e+14]]+I[t[e+15]]).toLowerCase()}var ne,Je=new Uint8Array(16);function We(){if(!ne&&(ne=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ne))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ne(Je)}var Ye=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const _e={randomUUID:Ye};function Z(t,e,l){if(_e.randomUUID&&!e&&!t)return _e.randomUUID();t=t||{};var i=t.random||(t.rng||We)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Me(i)}function et(t,e){return{uuid:Z(),id:t.conceptPath,filterType:"Categorical",displayType:e&&(e==null?void 0:e.length)>0?"restrict":"anyRecordOf",searchResult:t,categoryValues:e||[],variableName:t.display,description:t.description,allowFiltering:t.allowFiltering,dataset:t.dataset}}function tt(t){return{uuid:Z(),id:t.conceptPath,filterType:"Categorical",displayType:"any",searchResult:t,variableName:t.display,description:t.description,categoryValues:[],allowFiltering:t.allowFiltering,dataset:t.dataset}}function lt(t,e,l){return{uuid:Z(),id:t.conceptPath,filterType:"numeric",displayType:e!==void 0&&l!==void 0?"between":e!==void 0?"greaterThan":l!==void 0?"lessThan":"any",searchResult:t,min:e!==void 0?e.toLocaleString():void 0,max:l!==void 0?l.toLocaleString():void 0,variableName:t.display,description:t.description,allowFiltering:t.allowFiltering,dataset:t.dataset}}function nt(t){const e=(r,o)=>o&&o.length>0?`${r}: ${o.join(", ")}`:void 0,l=[e("Gene with variant",t.Gene_with_variant),e("Variant frequency",t.Variant_frequency_as_text),e("Consequence Group by severity",t.Variant_consequence_calculated)].filter(r=>r).join("; ");return{uuid:Z(),id:"genomic",filterType:"genomic",displayType:"any",variableName:"Genomic Filter",description:l,Gene_with_variant:t.Gene_with_variant,Variant_consequence_calculated:t.Variant_consequence_calculated,Variant_frequency_as_text:t.Variant_frequency_as_text,allowFiltering:!0,dataset:""}}function it(t){const e=t.map(i=>`${i.search}: ${i.constraint.split(",").map(r=>Be[r]).join(", ")}`).join("; ");return{uuid:Z(),id:"snp-variant",filterType:"snp",displayType:"any",snpValues:t,variableName:"Variant Filter",description:e,allowFiltering:!0,dataset:""}}function pe(t,e,l){const i=t.slice();return i[30]=e[l],i}function me(t,e,l){const i=t.slice();return i[30]=e[l],i}function ge(t){let e,l,i,r,o;return{c(){e=E("button"),l=re("Select All"),this.h()},l(u){e=S(u,"BUTTON",{id:!0,class:!0});var a=U(e);l=oe(a,"Select All"),a.forEach(g),this.h()},h(){c(e,"id","select-all"),c(e,"class","btn variant-ringed-surface hover:variant-filled-primary ml-2 text-sm"),e.disabled=i=t[0].length===0},m(u,a){G(u,e,a),p(e,l),r||(o=z(e,"click",t[16]),r=!0)},p(u,a){a[0]&1&&i!==(i=u[0].length===0)&&(e.disabled=i)},d(u){u&&g(e),r=!1,o()}}}function ye(t){let e,l,i,r,o=t[30]+"",u,a,s,_;function T(){return t[24](t[30])}return{c(){e=E("label"),l=E("input"),r=D(),u=re(o),this.h()},l(m){e=S(m,"LABEL",{id:!0,class:!0,role:!0});var d=U(e);l=S(d,"INPUT",{type:!0,class:!0}),r=H(d),u=oe(d,o),d.forEach(g),this.h()},h(){c(l,"type","checkbox"),l.value=i=t[30],c(l,"class","mr-1 float-left"),c(e,"id",a="option-"+ie(t[30])),c(e,"class","p-1 m-1 cursor-pointer hover:variant-soft-surface hover:rounded-md"),c(e,"role","listitem")},m(m,d){G(m,e,d),p(e,l),p(e,r),p(e,u),s||(_=z(l,"click",Ee(T)),s=!0)},p(m,d){t=m,d[0]&1&&i!==(i=t[30])&&(l.value=i),d[0]&1&&o!==(o=t[30]+"")&&Se(u,o),d[0]&1&&a!==(a="option-"+ie(t[30]))&&c(e,"id",a)},d(m){m&&g(e),s=!1,_()}}}function ve(t){let e,l,i;return l=new Ce({props:{width:"w-5",meter:"stroke-primary-500",track:"stroke-primary-500/30"}}),{c(){e=E("div"),Le(l.$$.fragment),this.h()},l(r){e=S(r,"DIV",{class:!0});var o=U(e);Te(l.$$.fragment,o),o.forEach(g),this.h()},h(){c(e,"class","flex justify-center")},m(r,o){G(r,e,o),Ve(l,e,null),i=!0},i(r){i||(q(l.$$.fragment,r),i=!0)},o(r){Y(l.$$.fragment,r),i=!1},d(r){r&&g(e),Ie(l)}}}function be(t){let e,l,i,r,o;return{c(){e=E("button"),l=re("Clear"),this.h()},l(u){e=S(u,"BUTTON",{id:!0,class:!0});var a=U(e);l=oe(a,"Clear"),a.forEach(g),this.h()},h(){c(e,"id","clear"),c(e,"class","btn variant-ringed-surface hover:variant-filled-primary ml-2 text-sm"),e.disabled=i=t[1].length===0},m(u,a){G(u,e,a),p(e,l),r||(o=z(e,"click",t[15]),r=!0)},p(u,a){a[0]&2&&i!==(i=u[1].length===0)&&(e.disabled=i)},d(u){u&&g(e),r=!1,o()}}}function ke(t,e){let l,i,r,o,u=e[30]+"",a,s,_,T;function m(){return e[26](e[30])}return{key:t,first:null,c(){l=E("label"),i=E("input"),o=D(),a=re(u),this.h()},l(d){l=S(d,"LABEL",{id:!0,class:!0,role:!0});var y=U(l);i=S(y,"INPUT",{type:!0,class:!0}),o=H(y),a=oe(y,u),y.forEach(g),this.h()},h(){c(i,"type","checkbox"),c(i,"class","mr-1"),i.value=r=e[30],i.checked=!0,c(l,"id",s="option-"+ie(e[30])),c(l,"class","p-1 m-1 hover:variant-soft-surface hover:rounded-md cursor-pointer"),c(l,"role","listitem"),this.first=l},m(d,y){G(d,l,y),p(l,i),p(l,o),p(l,a),_||(T=z(i,"click",Ee(m)),_=!0)},p(d,y){e=d,y[0]&32&&r!==(r=e[30])&&(i.value=r),y[0]&32&&u!==(u=e[30]+"")&&Se(a,u),y[0]&32&&s!==(s="option-"+ie(e[30]))&&c(l,"id",s)},d(d){d&&g(l),_=!1,T()}}}function we(t){let e,l,i;return l=new Ce({props:{width:"w-5",meter:"stroke-primary-500",track:"stroke-primary-500/30"}}),{c(){e=E("div"),Le(l.$$.fragment),this.h()},l(r){e=S(r,"DIV",{class:!0});var o=U(e);Te(l.$$.fragment,o),o.forEach(g),this.h()},h(){c(e,"class","flex justify-center")},m(r,o){G(r,e,o),Ve(l,e,null),i=!0},i(r){i||(q(l.$$.fragment,r),i=!0)},o(r){Y(l.$$.fragment,r),i=!1},d(r){r&&g(e),Ie(l)}}}function Ke(t){let e,l,i,r,o,u,a,s,_,T,m,d,y,B="Selected:",C,F,A,k,V=[],K=new Map,M,J,Q,X,w=t[4]&&ge(t),N=le(t[0]),O=[];for(let n=0;n<N.length;n+=1)O[n]=ye(me(t,N,n));let v=t[2]&&ve(),L=t[3]&&be(t),W=le(t[5]);const R=n=>n[30];for(let n=0;n<W.length;n+=1){let h=pe(t,W,n),f=R(h);K.set(f,V[n]=ke(f,h))}let b=t[7]&&we();return{c(){e=E("div"),l=E("div"),i=E("header"),r=E("input"),o=D(),w&&w.c(),u=D(),a=E("section"),s=E("div");for(let n=0;n<O.length;n+=1)O[n].c();_=D(),v&&v.c(),T=D(),m=E("div"),d=E("header"),y=E("div"),y.textContent=B,C=D(),L&&L.c(),F=D(),A=E("section"),k=E("div");for(let n=0;n<V.length;n+=1)V[n].c();M=D(),b&&b.c(),this.h()},l(n){e=S(n,"DIV",{"data-testid":!0,class:!0});var h=U(e);l=S(h,"DIV",{class:!0});var f=U(l);i=S(f,"HEADER",{class:!0});var j=U(i);r=S(j,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),o=H(j),w&&w.l(j),j.forEach(g),u=H(f),a=S(f,"SECTION",{class:!0});var se=U(a);s=S(se,"DIV",{id:!0,class:!0});var x=U(s);for(let P=0;P<O.length;P+=1)O[P].l(x);_=H(x),v&&v.l(x),x.forEach(g),se.forEach(g),f.forEach(g),T=H(h),m=S(h,"DIV",{class:!0});var $=U(m);d=S($,"HEADER",{class:!0});var ee=U(d);y=S(ee,"DIV",{class:!0,"data-svelte-h":!0}),Ae(y)!=="svelte-1eal34y"&&(y.textContent=B),C=H(ee),L&&L.l(ee),ee.forEach(g),F=H($),A=S($,"SECTION",{class:!0});var ce=U(A);k=S(ce,"DIV",{id:!0,class:!0});var te=U(k);for(let P=0;P<V.length;P+=1)V[P].l(te);M=H(te),b&&b.l(te),te.forEach(g),ce.forEach(g),$.forEach(g),h.forEach(g),this.h()},h(){c(r,"class","input text-sm"),c(r,"type","search"),c(r,"name","search"),c(r,"placeholder","Search..."),c(i,"class","flex pb-1"),c(s,"id","options-container"),c(s,"class","overflow-scroll scrollbar-color h-25vh svelte-c314iq"),c(a,"class","card-body"),c(l,"class","flex flex-1 flex-col h-full p-3 m-1 card"),c(y,"class","py-2"),c(d,"class","flex justify-between pb-1"),c(k,"id","selected-options-container"),c(k,"class","overflow-scroll scrollbar-color h-25vh svelte-c314iq"),c(A,"class","card-body"),c(m,"class","flex flex-1 flex-col h-full p-3 m-1 card"),c(e,"data-testid","optional-selection-list"),c(e,"class","flex w-full")},m(n,h){G(n,e,h),p(e,l),p(l,i),p(i,r),ue(r,t[6]),p(i,o),w&&w.m(i,null),p(l,u),p(l,a),p(a,s);for(let f=0;f<O.length;f+=1)O[f]&&O[f].m(s,null);p(s,_),v&&v.m(s,null),t[25](s),p(e,T),p(e,m),p(m,d),p(d,y),p(d,C),L&&L.m(d,null),p(m,F),p(m,A),p(A,k);for(let f=0;f<V.length;f+=1)V[f]&&V[f].m(k,null);p(k,M),b&&b.m(k,null),t[27](k),J=!0,Q||(X=[z(r,"input",t[23]),z(r,"input",t[12]),z(s,"scroll",t[10]),z(k,"scroll",t[11])],Q=!0)},p(n,h){if(h[0]&64&&r.value!==n[6]&&ue(r,n[6]),n[4]?w?w.p(n,h):(w=ge(n),w.c(),w.m(i,null)):w&&(w.d(1),w=null),h[0]&8193){N=le(n[0]);let f;for(f=0;f<N.length;f+=1){const j=me(n,N,f);O[f]?O[f].p(j,h):(O[f]=ye(j),O[f].c(),O[f].m(s,_))}for(;f<O.length;f+=1)O[f].d(1);O.length=N.length}n[2]?v?h[0]&4&&q(v,1):(v=ve(),v.c(),q(v,1),v.m(s,null)):v&&(fe(),Y(v,1,1,()=>{v=null}),he()),n[3]?L?L.p(n,h):(L=be(n),L.c(),L.m(d,null)):L&&(L.d(1),L=null),h[0]&16416&&(W=le(n[5]),V=Fe(V,h,R,1,n,W,K,k,je,ke,M,pe)),n[7]?b?h[0]&128&&q(b,1):(b=we(),b.c(),q(b,1),b.m(k,null)):b&&(fe(),Y(b,1,1,()=>{b=null}),he())},i(n){J||(q(v),q(b),J=!0)},o(n){Y(v),Y(b),J=!1},d(n){n&&g(e),w&&w.d(),De(O,n),v&&v.d(),t[25](null),L&&L.d();for(let h=0;h<V.length;h+=1)V[h].d();b&&b.d(),t[27](null),Q=!1,He(X)}}}function Oe(t,e){const l=t.scrollTop,i=t.clientHeight,r=t.scrollHeight;return!e&&r-(l+i)<=30}function ie(t){return t.replaceAll(" ","-").toLowerCase()}function Qe(t,e,l){let i,r,o,u,a="",{unselectedOptions:s=[]}=e,{selectedOptions:_=[]}=e,{selectedOptionEndLocation:T=20}=e,{currentlyLoading:m=!1}=e,{showClearAll:d=!0}=e,{showSelectAll:y=!0}=e,{allOptionsLoaded:B=!1}=e,{allOptions:C=void 0}=e,F=!1,A,k,V=!1;const K=Ne();function M(){A&&!m&&Oe(A,o)&&K("scroll",{search:a})}function J(){k&&(l(7,F=!0),Oe(k,V)&&l(17,T=T+20),l(7,F=!1))}function Q(){K("scroll",{search:a}),l(8,A.scrollTop=0,A)}function X(n){l(0,s=s.filter(h=>h!==n)),l(1,_=[..._,n].sort())}function w(n){l(1,_=_.filter(h=>h!==n)),l(0,s=[n,...s])}function N(){l(0,s=[...s,..._].sort()),l(1,_=[]),l(17,T=20)}function O(){C&&(C==null?void 0:C.length)!==0?(l(1,_=C),l(0,s=[]),l(17,T=20)):(l(1,_=[..._,...s]),l(0,s=[]),l(17,T=20))}function v(){a=this.value,l(6,a)}const L=n=>X(n);function W(n){de[n?"unshift":"push"](()=>{A=n,l(8,A)})}const R=n=>w(n);function b(n){de[n?"unshift":"push"](()=>{k=n,l(9,k)})}return t.$$set=n=>{"unselectedOptions"in n&&l(0,s=n.unselectedOptions),"selectedOptions"in n&&l(1,_=n.selectedOptions),"selectedOptionEndLocation"in n&&l(17,T=n.selectedOptionEndLocation),"currentlyLoading"in n&&l(2,m=n.currentlyLoading),"showClearAll"in n&&l(3,d=n.showClearAll),"showSelectAll"in n&&l(4,y=n.showSelectAll),"allOptionsLoaded"in n&&l(18,B=n.allOptionsLoaded),"allOptions"in n&&l(19,C=n.allOptions)},t.$$.update=()=>{t.$$.dirty[0]&524288&&l(21,i=C===void 0),t.$$.dirty[0]&2621442&&l(22,r=i?1/0:((C==null?void 0:C.length)||0)-_.length),t.$$.dirty[0]&6553601&&(o=i?B:s.length>=r),t.$$.dirty[0]&131074&&l(5,u=_.slice(0,T)),t.$$.dirty[0]&3145762&&l(20,V=i?V:u.length>=_.length)},[s,_,m,d,y,u,a,F,A,k,M,J,Q,X,w,N,O,T,B,C,V,i,r,v,L,W,R,b]}class rt extends qe{constructor(e){super(),ze(this,e,Qe,Ke,Ue,{unselectedOptions:0,selectedOptions:1,selectedOptionEndLocation:17,currentlyLoading:2,showClearAll:3,showSelectAll:4,allOptionsLoaded:18,allOptions:19},null,[-1,-1])}}export{Ge as G,rt as O,et as a,lt as b,tt as c,nt as d,it as e,Pe as f,Be as g,Z as v};
