import{f as A,a as h}from"./DKNWTM-D.js";import{p as J,d as x,e as w,c as i,s,r as l,n as K,t as $,b as q,g as r,a as M}from"./KPVYLOSR.js";import{e as Q,s as R}from"./NtGCh5xy.js";import{i as V}from"./CDCmQmr-.js";import{e as W,i as X}from"./B5lqQSsR.js";import{r as P,d as Y}from"./Be_LeCLl.js";import{b as F}from"./BlQKM0Gb.js";import{b as Z}from"./BwVKHEJU.js";import{p as ee}from"./CfrH0FQi.js";import{a as ae,s as te}from"./B2Bg6RTa.js";import{g as re}from"./DNfOBMJV.js";import{u as ie,a as se}from"./DfbyNPg_.js";import{a as le}from"./BpV1Tt4c.js";import{t as I}from"./CWjZNTTC.js";var oe=A('<label class="label svelte-1s684wv"><span>UUID:</span> <input type="text" class="input"/></label>'),ne=A("<option> </option>"),pe=A('<form><fieldset data-testid="privilege-form" class="grid gap-4 my-3"><!> <label class="label required svelte-1s684wv"><span>Name:</span> <input type="text" class="input" required minlength="1" maxlength="255"/></label> <label class="label required svelte-1s684wv"><span>Description:</span> <input type="text" class="input" required minlength="1" maxlength="255"/></label> <label class="label required svelte-1s684wv"><span>Application:</span> <select class="select" required><option disabled>Select an application</option><!></select></label> <div class="mt-2"><button type="submit" data-testid="privilege-save-btn" class="btn preset-tonal-primary border border-primary-500 hover:preset-filled-primary-500">Save</button> <a href="/admin/configuration" data-testid="privilege-cancel-btn" class="btn preset-tonal-secondary border border-secondary-500 hover:preset-filled-secondary-500">Cancel</a></div></fieldset></form>');function qe(L,v){J(v,!0);const[N,O]=te(),j=()=>ae(le,"$isTopAdmin",N);let t=ee(v,"privilege",3,void 0),n=x(w(t()?t().name:"")),m=x(w(t()?t().description:"")),u=x(w(t()?t().application:""));async function z(a){a.preventDefault();let e={name:r(n),description:r(m),application:r(u)};try{t()?(e={...e,uuid:t().uuid},await ie(e)):await se(e),I.success({title:`Successfully saved ${e&&"new "}privilege '${r(n)}'`}),re("/admin/configuration")}catch(o){console.error(o),I.error({title:`An error occured while saving ${e&&"new "}privilege '${r(n)}'`})}}var d=pe(),c=i(d),D=i(c);{var B=a=>{var e=oe(),o=s(i(e),2);P(o),o.readOnly=!0,l(e),$(()=>{var y;return Y(o,(y=t())==null?void 0:y.uuid)}),h(a,e)};V(D,a=>{var e;(e=t())!=null&&e.uuid&&a(B)})}var f=s(D,2),S=s(i(f),2);P(S),l(f);var b=s(f,2),T=s(i(b),2);P(T),l(b);var U=s(b,2),g=s(i(U),2),_=i(g);_.value=_.__value="";var E=s(_);W(E,17,()=>v.applicationList,X,(a,e,o,y)=>{let G=()=>r(e)[0],k=()=>r(e)[1];var p=ne(),C={},H=i(p,!0);l(p),$(()=>{C!==(C=k())&&(p.value=(p.__value=k())??""),R(H,G())}),h(a,p)}),l(g),l(U),K(2),l(c),l(d),$(()=>c.disabled=!j()),Q("submit",d,z),F(S,()=>r(n),a=>q(n,a)),F(T,()=>r(m),a=>q(m,a)),Z(g,()=>r(u),a=>q(u,a)),h(L,d),M(),O()}export{qe as P};
