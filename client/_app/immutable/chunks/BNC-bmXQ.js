import{w as ae,g as W,d as ce}from"./xU7jw7XU.js";import{e as Tt}from"./hUONLBj8.js";import{f as _,B as Ae,P as Se,r as Re}from"./BZHGrlEE.js";import{g as De}from"./BPde4ukL.js";import{p as Ze}from"./CftmxiRQ.js";import"./Bzak7iHL.js";import{d as wt}from"./DVtHS8ol.js";import{b as St}from"./Bt-Xh7oU.js";const _e="Bearer ";async function ue({method:e,path:t,data:r,headers:n,authenticate:s=!0}){const o={method:e,headers:{}};if(r&&(o.headers["Content-Type"]="application/json",o.body=typeof r=="string"?r:JSON.stringify(r)),n&&(o.headers={...o.headers,...n}),s&&St){const i=localStorage.getItem("token");i&&(o.headers.Authorization=`${_e}${i}`,o.headers["request-source"]="Authorized"),Ze.url.pathname.includes("/discover")&&(o.headers["request-source"]="Open")}const a=await fetch(`${window.location.origin}/${t}`,o);return await kt(a)}function ee(e,t,r){return ue({method:"GET",path:e,headers:t,authenticate:r})}function Mn(e,t,r){return ue({method:"DELETE",path:e,headers:t,authenticate:r})}function Fn(e,t,r,n){return ue({method:"POST",path:e,data:t,headers:r,authenticate:n})}function $n(e,t,r,n){return ue({method:"PUT",path:e,data:t,headers:r,authenticate:n})}async function kt(e){if(e.ok||e.status===422){if(It(e),(e.headers.get("Content-Type")||"").includes("application/octet-stream"))return await e.arrayBuffer();const r=await e.text();try{return JSON.parse(r)}catch{return r}}else if(e.status===401){sessionStorage.setItem("logout-reason","Your session has timed out. Please log in."),ze(void 0,!0);return}else e.status===403&&(sessionStorage.removeItem("logout-reason"),sessionStorage.removeItem("filters"),ze(void 0,!1));Tt(e.status,await e.text())}function It(e){let t=e.headers.get("Authorization");t&&(t=t.replace(_e,""),kn(t))}const Le=_.explorer.enableOrQueries,N="picsure",$=`${N}/proxy/dictionary-api`,ne=`${N}/query`,he=`${N}/proxy/uploader`,Ot={Concepts:`${$}/concepts`,Concept:{Detail:`${$}/concepts/detail`,Tree:`${$}/concepts/tree`,Hierarchy:`${$}/concepts/hierarchy`},Dashboard:`${$}/dashboard`,DashboardDrawer:`${$}/dashboard-drawer`,NamedDataSet:`${N}/dataset/named`,Dictionary:$,Facets:`${$}/facets`,Search:`${N}/search`,Resources:`${N}/resource`,Query:Le?`${N}/v3/query`:ne,QuerySync:Le?`${N}/v3/query/sync`:`${ne}/sync`,QueryV2:ne,QueryV2Sync:`${ne}/sync`,QueryV3:`${N}/v3/query`,QueryV3Sync:`${N}/v3/query/sync`,Uploader:{Upload:`${he}/upload`,Sites:`${he}/sites`,Status:`${he}/status`}},se="psama/user",le={Application:"psama/application",Auth:"psama/authentication",Connection:"psama/connection",Priviege:"psama/privilege",StudyAccess:"psama/studyAccess",Role:"psama/role",TOS:"psama/tos",Users:se,User:{Logout:"psama/logout",Me:`${se}/me`,Template:`${se}/me/queryTemplate`,Refresh:`${se}/me/refresh_long_term_token`}};var Y=(e,t=[])=>({parts:(...r)=>{if(xt(t))return Y(e,r);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...r)=>Y(e,[...t,...r]),omit:(...r)=>Y(e,t.filter(n=>!r.includes(n))),rename:r=>Y(r,t),keys:()=>t,build:()=>[...new Set(t)].reduce((r,n)=>Object.assign(r,{[n]:{selector:[`&[data-scope="${q(e)}"][data-part="${q(n)}"]`,`& [data-scope="${q(e)}"][data-part="${q(n)}"]`].join(", "),attrs:{"data-scope":q(e),"data-part":q(n)}}}),{})}),q=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),xt=e=>e.length===0,me=(...e)=>t=>e.reduce((r,n)=>n(r),t),G=()=>{},de=e=>typeof e=="object"&&e!==null,Pt=2147483647,H=e=>e?"":void 0,At=1,Rt=9,Dt=11,O=e=>de(e)&&e.nodeType===At&&typeof e.nodeName=="string",et=e=>de(e)&&e.nodeType===Rt,Lt=e=>de(e)&&e===e.window,tt=e=>O(e)?e.localName||"":"#document";function Nt(e){return["html","body","#document"].includes(tt(e))}var Ct=e=>de(e)&&e.nodeType!==void 0,z=e=>Ct(e)&&e.nodeType===Dt&&"host"in e,Mt=e=>O(e)&&e.localName==="input",Bn=e=>!!(e!=null&&e.matches("a[href]")),Ft=e=>O(e)?e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0:!1;function rt(e){if(!e)return!1;const t=e.getRootNode();return nt(t)===e}var $t=/(textarea|select)/;function Bt(e){if(e==null||!O(e))return!1;try{return Mt(e)&&e.selectionStart!=null||$t.test(e.localName)||e.isContentEditable||e.getAttribute("contenteditable")==="true"||e.getAttribute("contenteditable")===""}catch{return!1}}function K(e,t){var n;if(!e||!t||!O(e)||!O(t))return!1;const r=(n=t.getRootNode)==null?void 0:n.call(t);if(e===t||e.contains(t))return!0;if(r&&z(r)){let s=t;for(;s;){if(e===s)return!0;s=s.parentNode||s.host}}return!1}function U(e){return et(e)?e:Lt(e)?e.document:(e==null?void 0:e.ownerDocument)??document}function Vt(e){return U(e).documentElement}function L(e){var t;return z(e)?L(e.host):et(e)?e.defaultView??window:O(e)?((t=e.ownerDocument)==null?void 0:t.defaultView)??window:window}function nt(e){let t=e.activeElement;for(;t!=null&&t.shadowRoot;){const r=t.shadowRoot.activeElement;if(!r||r===t)break;t=r}return t}function Ut(e){if(tt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||z(e)&&e.host||Vt(e);return z(t)?t.host:t}var ye=new WeakMap;function Vn(e){return ye.has(e)||ye.set(e,L(e).getComputedStyle(e)),ye.get(e)}var fe=()=>typeof document<"u";function qt(){const e=navigator.userAgentData;return(e==null?void 0:e.platform)??navigator.platform}function Ht(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:r})=>`${t}/${r}`).join(" "):navigator.userAgent}var ke=e=>fe()&&e.test(qt()),st=e=>fe()&&e.test(Ht()),jt=e=>fe()&&e.test(navigator.vendor),Ne=()=>fe()&&!!navigator.maxTouchPoints,Gt=()=>ke(/^iPhone/i),Kt=()=>ke(/^iPad/i)||ge()&&navigator.maxTouchPoints>1,Wt=()=>Gt()||Kt(),Qt=()=>ge()||Wt(),ge=()=>ke(/^Mac/i),Un=()=>Qt()&&jt(/apple/i),Xt=()=>st(/Firefox/i),Yt=()=>st(/Android/i);function zt(e){var t,r,n;return((t=e.composedPath)==null?void 0:t.call(e))??((n=(r=e.nativeEvent)==null?void 0:r.composedPath)==null?void 0:n.call(r))}function J(e){const t=zt(e);return(t==null?void 0:t[0])??e.target}function qn(e){const t=e.currentTarget;if(!t||!t.matches("a[href], button[type='submit'], input[type='submit']"))return!1;const n=e.button===1,s=Jt(e);return n||s}function Hn(e){return tr(e).isComposing||e.keyCode===229}function Jt(e){return ge()?e.metaKey:e.ctrlKey}function jn(e){return e.pointerType===""&&e.isTrusted?!0:Yt()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}var Zt=e=>e.button===2||ge()&&e.ctrlKey&&e.button===0,_t=e=>"touches"in e&&e.touches.length>0,er={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},Ce={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function Gn(e,t={}){const{dir:r="ltr",orientation:n="horizontal"}=t;let s=e.key;return s=er[s]??s,r==="rtl"&&n==="horizontal"&&s in Ce&&(s=Ce[s]),s}function tr(e){return e.nativeEvent??e}function rr(e,t="client"){const r=_t(e)?e.touches[0]||e.changedTouches[0]:e;return{x:r[`${t}X`],y:r[`${t}Y`]}}var A=(e,t,r,n)=>{const s=typeof e=="function"?e():e;return s==null||s.addEventListener(t,r,n),()=>{s==null||s.removeEventListener(t,r,n)}};function nr(e,t){const{type:r="HTMLInputElement",property:n="value"}=t,s=L(e)[r].prototype;return Object.getOwnPropertyDescriptor(s,n)??{}}function sr(e,t){var n;if(!e)return;(n=nr(e,{type:"HTMLInputElement",property:"checked"}).set)==null||n.call(e,t),t?e.setAttribute("checked",""):e.removeAttribute("checked")}function Kn(e,t){const{checked:r,bubbles:n=!0}=t;if(!e)return;const s=L(e);e instanceof s.HTMLInputElement&&(sr(e,r),e.dispatchEvent(new s.Event("click",{bubbles:n})))}function or(e){return ir(e)?e.form:e.closest("form")}function ir(e){return e.matches("textarea, input, select, button")}function ar(e,t){if(!e)return;const r=or(e),n=s=>{s.defaultPrevented||t()};return r==null||r.addEventListener("reset",n,{passive:!0}),()=>r==null?void 0:r.removeEventListener("reset",n)}function cr(e,t){const r=e==null?void 0:e.closest("fieldset");if(!r)return;t(r.disabled);const n=L(r),s=new n.MutationObserver(()=>t(r.disabled));return s.observe(r,{attributes:!0,attributeFilter:["disabled"]}),()=>s.disconnect()}function Wn(e,t){if(!e)return;const{onFieldsetDisabledChange:r,onFormReset:n}=t,s=[ar(e,n),cr(e,r)];return()=>s.forEach(o=>o==null?void 0:o())}var ot=e=>O(e)&&e.tagName==="IFRAME",ur=e=>!Number.isNaN(parseInt(e.getAttribute("tabindex")||"0",10)),lr=e=>parseInt(e.getAttribute("tabindex")||"0",10)<0,Ie="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",dr=(e,t=!1)=>{if(!e)return[];const r=Array.from(e.querySelectorAll(Ie));(t==!0||t=="if-empty"&&r.length===0)&&O(e)&&Z(e)&&r.unshift(e);const s=r.filter(Z);return s.forEach((o,a)=>{if(ot(o)&&o.contentDocument){const i=o.contentDocument.body;s.splice(a,1,...dr(i))}}),s};function Z(e){return!e||e.closest("[inert]")?!1:e.matches(Ie)&&Ft(e)}function fr(e,t){if(!e)return[];const n=Array.from(e.querySelectorAll(Ie)).filter(gr);return n.forEach((s,o)=>{if(ot(s)&&s.contentDocument){const a=s.contentDocument.body,i=fr(a);n.splice(o,1,...i)}}),n.length,n}function gr(e){return e!=null&&e.tabIndex>0?!0:Z(e)&&!lr(e)}function Qn(e){return e.tabIndex<0&&(/^(audio|video|details)$/.test(e.localName)||Bt(e))&&!ur(e)?0:e.tabIndex}function Xn(e){const t=new Set;function r(n){const s=globalThis.requestAnimationFrame(n);t.add(()=>globalThis.cancelAnimationFrame(s))}return r(()=>r(e)),function(){t.forEach(s=>s())}}function C(e){let t;const r=globalThis.requestAnimationFrame(()=>{t=e()});return()=>{globalThis.cancelAnimationFrame(r),t==null||t()}}function pr(e,t,r){const n=C(()=>{e.removeEventListener(t,s,!0),r()}),s=()=>{n(),r()};return e.addEventListener(t,s,{once:!0,capture:!0}),n}function hr(e,t){if(!e)return;const{attributes:r,callback:n}=t,s=e.ownerDocument.defaultView||window,o=new s.MutationObserver(a=>{for(const i of a)i.type==="attributes"&&i.attributeName&&r.includes(i.attributeName)&&n(i)});return o.observe(e,{attributes:!0,attributeFilter:r}),()=>o.disconnect()}function Yn(e,t){const{defer:r}=t,n=r?C:o=>o(),s=[];return s.push(n(()=>{const o=typeof e=="function"?e():e;s.push(hr(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function mr(e,t){const{callback:r}=t;if(!e)return;const n=e.ownerDocument.defaultView||window,s=new n.MutationObserver(r);return s.observe(e,{childList:!0,subtree:!0}),()=>s.disconnect()}function zn(e,t){const{defer:r}=t,n=r?C:o=>o(),s=[];return s.push(n(()=>{const o=typeof e=="function"?e():e;s.push(mr(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function Jn(e){const t=()=>{const r=L(e);e.dispatchEvent(new r.MouseEvent("click"))};Xt()?pr(e,"keyup",t):queueMicrotask(t)}function Te(e){const t=Ut(e);return Nt(t)?U(t).body:O(t)&&br(t)?t:Te(t)}var yr=/auto|scroll|overlay|hidden|clip/,Er=new Set(["inline","contents"]);function br(e){const t=L(e),{overflow:r,overflowX:n,overflowY:s,display:o}=t.getComputedStyle(e);return yr.test(r+s+n)&&!Er.has(o)}function Zn(e){const{pointerNode:t,keyboardNode:r=t,onPress:n,onPressStart:s,onPressEnd:o,isValidKey:a=l=>l.key==="Enter"}=e;if(!t)return G;const i=L(t);let d=G,g=G,p=G;const m=l=>({point:rr(l),event:l});function v(l){s==null||s(m(l))}function T(l){o==null||o(m(l))}const f=A(t,"pointerdown",l=>{g();const h=A(i,"pointerup",k=>{const B=J(k);K(t,B)?n==null||n(m(k)):o==null||o(m(k))},{passive:!n,once:!0}),I=A(i,"pointercancel",T,{passive:!o,once:!0});g=me(h,I),rt(r)&&l.pointerType==="mouse"&&l.preventDefault(),v(l)},{passive:!s}),y=A(r,"focus",b);d=me(f,y);function b(){const l=k=>{if(!a(k))return;const B=V=>{if(!a(V))return;const te=new i.PointerEvent("pointerup"),pe=m(te);n==null||n(pe),o==null||o(pe)};g(),g=A(r,"keyup",B);const Q=new i.PointerEvent("pointerdown");v(Q)},w=()=>{const k=new i.PointerEvent("pointercancel");T(k)},h=A(r,"keydown",l),I=A(r,"blur",w);p=me(h,I)}return()=>{d(),g(),p()}}function _n(e,t){return Array.from((e==null?void 0:e.querySelectorAll(t))??[])}var it=e=>e.id;function vr(e,t,r=it){return e.find(n=>r(n)===t)}function at(e,t,r=it){const n=vr(e,t,r);return n?e.indexOf(n):-1}function es(e,t,r=!0){let n=at(e,t);return n=r?(n+1)%e.length:Math.min(n+1,e.length-1),e[n]}function ts(e,t,r=!0){let n=at(e,t);return n===-1?r?e[e.length-1]:null:(n=r?(n-1+e.length)%e.length:Math.max(0,n-1),e[n])}function rs(e,t){const{onEntry:r,measure:n,box:s="border-box"}=t,o=(Array.isArray(e)?e:[e]).filter(O),a=L(o[0]),i=g=>{const p=o.map(m=>n(m));r({rects:p,entries:g})};i([]);const d=new a.ResizeObserver(i);return o.forEach(g=>d.observe(g,{box:s})),()=>d.disconnect()}function Tr(e,t){if(!e)return G;const r=Object.keys(t).reduce((n,s)=>(n[s]=e.style.getPropertyValue(s),n),{});return Object.assign(e.style,t),()=>{Object.assign(e.style,r),e.style.length===0&&e.removeAttribute("style")}}function ns(e,t,r){if(!e)return G;const n=e.style.getPropertyValue(t);return e.style.setProperty(t,r),()=>{e.style.setProperty(t,n),e.style.length===0&&e.removeAttribute("style")}}var ss={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"};function wr(e,t,r){const{signal:n}=t;return[new Promise((a,i)=>{const d=setTimeout(()=>{i(new Error(`Timeout of ${r}ms exceeded`))},r);n.addEventListener("abort",()=>{clearTimeout(d),i(new Error("Promise aborted"))}),e.then(g=>{n.aborted||(clearTimeout(d),a(g))}).catch(g=>{n.aborted||(clearTimeout(d),i(g))})}),()=>t.abort()]}function Sr(e,t){const{timeout:r,rootNode:n}=t,s=L(n),o=U(n),a=new s.AbortController;return wr(new Promise(i=>{const d=e();if(d){i(d);return}const g=new s.MutationObserver(()=>{const p=e();p&&p.isConnected&&(g.disconnect(),i(p))});g.observe(o.body,{childList:!0,subtree:!0})}),a,r)}function os(e){return e==null?[]:Array.isArray(e)?e:[e]}var is=e=>e[0],as=e=>e[e.length-1],cs=(e,...t)=>e.concat(t),us=(e,...t)=>e.filter(r=>!t.includes(r)),Me=e=>(e==null?void 0:e.constructor.name)==="Array",kr=(e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Oe(e[r],t[r]))return!1;return!0},Oe=(e,t)=>{if(Object.is(e,t))return!0;if(e==null&&t!=null||e!=null&&t==null)return!1;if(typeof(e==null?void 0:e.isEqual)=="function"&&typeof(t==null?void 0:t.isEqual)=="function")return e.isEqual(t);if(typeof e=="function"&&typeof t=="function")return e.toString()===t.toString();if(Me(e)&&Me(t))return kr(Array.from(e),Array.from(t));if(typeof e!="object"||typeof t!="object")return!1;const r=Object.keys(t??Object.create(null)),n=r.length;for(let s=0;s<n;s++)if(!Reflect.has(e,r[s]))return!1;for(let s=0;s<n;s++){const o=r[s];if(!Oe(e[o],t[o]))return!1}return!0},Ir=e=>e!=null&&typeof e=="object",ls=e=>typeof e=="number"&&!Number.isNaN(e),Ee=e=>typeof e=="string",ct=e=>typeof e=="function",Or=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),xr=e=>Object.prototype.toString.call(e),ut=Function.prototype.toString,Pr=ut.call(Object),Ar=e=>{if(!Ir(e)||xr(e)!="[object Object]"||Lr(e))return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const r=Or(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ut.call(r)==Pr},Rr=e=>typeof e=="object"&&e!==null&&"$$typeof"in e&&"props"in e,Dr=e=>typeof e=="object"&&e!==null&&"__v_isVNode"in e,Lr=e=>Rr(e)||Dr(e),oe=(e,...t)=>(typeof e=="function"?e(...t):e)??void 0,ds=e=>e(),we=(...e)=>(...t)=>{e.forEach(function(r){r==null||r(...t)})},lt=(()=>{let e=0;return()=>(e++,e.toString(36))})(),Nr=e=>Number.isNaN(e),Cr=e=>Nr(e)?0:e,fs=(e,t,r)=>(Cr(e)-t)/(r-t);function dt(e){if(!Ar(e)||e===void 0)return e;const t=Reflect.ownKeys(e).filter(n=>typeof n=="string"),r={};for(const n of t){const s=e[n];s!==void 0&&(r[n]=dt(s))}return r}function be(e,t){const r=performance.now();let n;function s(o){if(o-r>=t){e();return}n=requestAnimationFrame(s)}return n=requestAnimationFrame(s),()=>cancelAnimationFrame(n)}function xe(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function gs(e,t){if(e==null)throw new Error(t())}function Mr(e,t,r){let n=[];for(const s of t)e[s]==null&&n.push(s);if(n.length>0)throw new Error(`[zag-js${` > ${r}`}] missing required props: ${n.join(", ")}`)}var Fr=(...e)=>e.map(t=>{var r;return(r=t==null?void 0:t.trim)==null?void 0:r.call(t)}).filter(Boolean).join(" "),$r=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,Fe=e=>{const t={};let r;for(;r=$r.exec(e);)t[r[1]]=r[2];return t},Br=(e,t)=>{if(Ee(e)){if(Ee(t))return`${e};${t}`;e=Fe(e)}else Ee(t)&&(t=Fe(t));return Object.assign({},e??{},t??{})};function ps(...e){let t={};for(let r of e){if(!r)continue;for(let s in t){if(s.startsWith("on")&&typeof t[s]=="function"&&typeof r[s]=="function"){t[s]=we(r[s],t[s]);continue}if(s==="className"||s==="class"){t[s]=Fr(t[s],r[s]);continue}if(s==="style"){t[s]=Br(t[s],r[s]);continue}t[s]=r[s]!==void 0?r[s]:t[s]}for(let s in r)t[s]===void 0&&(t[s]=r[s]);const n=Object.getOwnPropertySymbols(r);for(let s of n)t[s]=r[s]}return t}function hs(e,t,r){let n=[],s;return o=>{const a=e(o);return(a.length!==n.length||a.some((d,g)=>!Oe(n[g],d)))&&(n=a,s=t(a,o)),s}}function ft(){return{and:(...e)=>function(r){return e.every(n=>r.guard(n))},or:(...e)=>function(r){return e.some(n=>r.guard(n))},not:e=>function(r){return!r.guard(e)}}}function ms(e){return e}function ys(){return{guards:ft(),createMachine:e=>e,choose:e=>function({choose:r}){var n;return(n=r(e))==null?void 0:n.actions}}}var Vr=(e=>(e.NotStarted="Not Started",e.Started="Started",e.Stopped="Stopped",e))(Vr||{}),Es="__init__";function bs(e){const t=()=>{var a;return((a=e.getRootNode)==null?void 0:a.call(e))??document},r=()=>U(t());return{...e,getRootNode:t,getDoc:r,getWin:()=>r().defaultView??window,getActiveElement:()=>nt(t()),isActiveElement:rt,getById:a=>t().getElementById(a)}}wt(["click"]);function Ur(e){const t={each(r){var n;for(let s=0;s<((n=e.frames)==null?void 0:n.length);s+=1){const o=e.frames[s];o&&r(o)}},addEventListener(r,n,s){return t.each(o=>{try{o.document.addEventListener(r,n,s)}catch{}}),()=>{try{t.removeEventListener(r,n,s)}catch{}}},removeEventListener(r,n,s){t.each(o=>{try{o.document.removeEventListener(r,n,s)}catch{}})}};return t}function qr(e){const t=e.frameElement!=null?e.parent:null;return{addEventListener:(r,n,s)=>{try{t==null||t.addEventListener(r,n,s)}catch{}return()=>{try{t==null||t.removeEventListener(r,n,s)}catch{}}},removeEventListener:(r,n,s)=>{try{t==null||t.removeEventListener(r,n,s)}catch{}}}}var $e="pointerdown.outside",Be="focus.outside";function Hr(e){for(const t of e)if(O(t)&&Z(t))return!0;return!1}var gt=e=>"clientY"in e;function jr(e,t){if(!gt(t)||!e)return!1;const r=e.getBoundingClientRect();return r.width===0||r.height===0?!1:r.top<=t.clientY&&t.clientY<=r.top+r.height&&r.left<=t.clientX&&t.clientX<=r.left+r.width}function Gr(e,t){return e.y<=t.y&&t.y<=e.y+e.height&&e.x<=t.x&&t.x<=e.x+e.width}function Ve(e,t){if(!t||!gt(e))return!1;const r=t.scrollHeight>t.clientHeight,n=r&&e.clientX>t.offsetLeft+t.clientWidth,s=t.scrollWidth>t.clientWidth,o=s&&e.clientY>t.offsetTop+t.clientHeight,a={x:t.offsetLeft,y:t.offsetTop,width:t.clientWidth+(r?16:0),height:t.clientHeight+(s?16:0)},i={x:e.clientX,y:e.clientY};return Gr(a,i)?n||o:!1}function Kr(e,t){const{exclude:r,onFocusOutside:n,onPointerDownOutside:s,onInteractOutside:o,defer:a}=t;if(!e)return;const i=U(e),d=L(e),g=Ur(d),p=qr(d);function m(l,w){if(!O(w)||!w.isConnected||K(e,w)||jr(e,l))return!1;const h=i.querySelector(`[aria-controls="${e.id}"]`);if(h){const k=Te(h);if(Ve(l,k))return!1}const I=Te(e);return Ve(l,I)?!1:!(r!=null&&r(w))}const v=new Set,T=z(e==null?void 0:e.getRootNode());function S(l){function w(h){var Q;const I=a&&!Ne()?C:V=>V(),k=h??l,B=((Q=k==null?void 0:k.composedPath)==null?void 0:Q.call(k))??[k==null?void 0:k.target];I(()=>{const V=T?B[0]:J(l);if(!(!e||!m(l,V))){if(s||o){const te=we(s,o);e.addEventListener($e,te,{once:!0})}Ue(e,$e,{bubbles:!1,cancelable:!0,detail:{originalEvent:k,contextmenu:Zt(k),focusable:Hr(B),target:V}})}})}l.pointerType==="touch"?(v.forEach(h=>h()),v.add(A(i,"click",w,{once:!0})),v.add(p.addEventListener("click",w,{once:!0})),v.add(g.addEventListener("click",w,{once:!0}))):w()}const f=new Set,y=setTimeout(()=>{f.add(A(i,"pointerdown",S,!0)),f.add(p.addEventListener("pointerdown",S,!0)),f.add(g.addEventListener("pointerdown",S,!0))},0);function b(l){(a?C:h=>h())(()=>{const h=J(l);if(!(!e||!m(l,h))){if(n||o){const I=we(n,o);e.addEventListener(Be,I,{once:!0})}Ue(e,Be,{bubbles:!1,cancelable:!0,detail:{originalEvent:l,contextmenu:!1,focusable:Z(h),target:h}})}})}return Ne()||(f.add(A(i,"focusin",b,!0)),f.add(p.addEventListener("focusin",b,!0)),f.add(g.addEventListener("focusin",b,!0))),()=>{clearTimeout(y),v.forEach(l=>l()),f.forEach(l=>l())}}function Wr(e,t){const{defer:r}=t,n=r?C:o=>o(),s=[];return s.push(n(()=>{const o=typeof e=="function"?e():e;s.push(Kr(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function Ue(e,t,r){const n=e.ownerDocument.defaultView||window,s=new n.CustomEvent(t,r);return e.dispatchEvent(s)}function Qr(e,t){const r=n=>{n.key==="Escape"&&(n.isComposing||t==null||t(n))};return A(U(e),"keydown",r,{capture:!0})}var qe="layer:request-dismiss",x={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){var n;const t=this.indexOf(e),r=this.topMostPointerBlockingLayer()?this.indexOf((n=this.topMostPointerBlockingLayer())==null?void 0:n.node):-1;return t<r},isTopMost(e){const t=this.layers[this.count()-1];return(t==null?void 0:t.node)===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},getLayersByType(e){return this.layers.filter(t=>t.type===e)},getNestedLayersByType(e,t){const r=this.indexOf(e);return r===-1?[]:this.layers.slice(r+1).filter(n=>n.type===t)},getParentLayerOfType(e,t){const r=this.indexOf(e);if(!(r<=0))return this.layers.slice(0,r).reverse().find(n=>n.type===t)},countNestedLayersOfType(e,t){return this.getNestedLayersByType(e,t).length},isInNestedLayer(e,t){return this.getNestedLayers(e).some(r=>K(r.node,t))},isInBranch(e){return Array.from(this.branches).some(t=>K(t,e))},add(e){this.layers.push(e),this.syncLayers()},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);t<0||(t<this.count()-1&&this.getNestedLayers(e).forEach(n=>x.dismiss(n.node,e)),this.layers.splice(t,1),this.syncLayers())},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},syncLayers(){this.layers.forEach((e,t)=>{e.node.style.setProperty("--layer-index",`${t}`),e.node.removeAttribute("data-nested"),e.node.removeAttribute("data-has-nested"),this.getParentLayerOfType(e.node,e.type)&&e.node.setAttribute("data-nested",e.type);const n=this.countNestedLayersOfType(e.node,e.type);n>0&&e.node.setAttribute("data-has-nested",e.type),e.node.style.setProperty("--nested-layer-count",`${n}`)})},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e,t){const r=this.indexOf(e);if(r===-1)return;const n=this.layers[r];Yr(e,qe,s=>{var o;(o=n.requestDismiss)==null||o.call(n,s),s.defaultPrevented||n==null||n.dismiss()}),Xr(e,qe,{originalLayer:e,targetLayer:t,originalIndex:r,targetIndex:t?this.indexOf(t):-1}),this.syncLayers()},clear(){this.remove(this.layers[0].node)}};function Xr(e,t,r){const n=e.ownerDocument.defaultView||window,s=new n.CustomEvent(t,{cancelable:!0,bubbles:!0,detail:r});return e.dispatchEvent(s)}function Yr(e,t,r){e.addEventListener(t,r,{once:!0})}var He;function je(){x.layers.forEach(({node:e})=>{e.style.pointerEvents=x.isBelowPointerBlockingLayer(e)?"none":"auto"})}function zr(e){e.style.pointerEvents=""}function Jr(e,t){const r=U(e),n=[];return x.hasPointerBlockingLayer()&&!r.body.hasAttribute("data-inert")&&(He=document.body.style.pointerEvents,queueMicrotask(()=>{r.body.style.pointerEvents="none",r.body.setAttribute("data-inert","")})),t==null||t.forEach(s=>{const[o,a]=Sr(()=>{const i=s();return O(i)?i:null},{timeout:1e3});o.then(i=>n.push(Tr(i,{pointerEvents:"auto"}))),n.push(a)}),()=>{x.hasPointerBlockingLayer()||(queueMicrotask(()=>{r.body.style.pointerEvents=He,r.body.removeAttribute("data-inert"),r.body.style.length===0&&r.body.removeAttribute("style")}),n.forEach(s=>s()))}}function Zr(e,t){const{warnOnMissingNode:r=!0}=t;if(r&&!e){xe("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!e)return;const{onDismiss:n,onRequestDismiss:s,pointerBlocking:o,exclude:a,debug:i,type:d="dialog"}=t,g={dismiss:n,node:e,type:d,pointerBlocking:o,requestDismiss:s};x.add(g),je();function p(f){var b,l;const y=J(f.detail.originalEvent);x.isBelowPointerBlockingLayer(e)||x.isInBranch(y)||((b=t.onPointerDownOutside)==null||b.call(t,f),(l=t.onInteractOutside)==null||l.call(t,f),!f.defaultPrevented&&(i&&console.log("onPointerDownOutside:",f.detail.originalEvent),n==null||n()))}function m(f){var b,l;const y=J(f.detail.originalEvent);x.isInBranch(y)||((b=t.onFocusOutside)==null||b.call(t,f),(l=t.onInteractOutside)==null||l.call(t,f),!f.defaultPrevented&&(i&&console.log("onFocusOutside:",f.detail.originalEvent),n==null||n()))}function v(f){var y;x.isTopMost(e)&&((y=t.onEscapeKeyDown)==null||y.call(t,f),!f.defaultPrevented&&n&&(f.preventDefault(),n()))}function T(f){var w;if(!e)return!1;const y=typeof a=="function"?a():a,b=Array.isArray(y)?y:[y],l=(w=t.persistentElements)==null?void 0:w.map(h=>h()).filter(O);return l&&b.push(...l),b.some(h=>K(h,f))||x.isInNestedLayer(e,f)}const S=[o?Jr(e,t.persistentElements):void 0,Qr(e,v),Wr(e,{exclude:T,onFocusOutside:m,onPointerDownOutside:p,defer:t.defer})];return()=>{x.remove(e),je(),zr(e),S.forEach(f=>f==null?void 0:f())}}function vs(e,t){const{defer:r}=t,n=r?C:o=>o(),s=[];return s.push(n(()=>{const o=ct(e)?e():e;s.push(Zr(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function _r(e,t={}){const{defer:r}=t,n=r?C:o=>o(),s=[];return s.push(n(()=>{const o=ct(e)?e():e;if(!o){xe("[@zag-js/dismissable] branch node is `null` or `undefined`");return}x.addBranch(o),s.push(()=>{x.removeBranch(o)})})),()=>{s.forEach(o=>o==null?void 0:o())}}var en=Y("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),j=en.build(),tn=e=>`toast-group:${e}`,Ge=(e,t)=>e.getById(`toast-group:${t}`),pt=e=>`toast:${e.id}`,Ke=e=>e.getById(pt(e)),We=e=>`toast:${e.id}:title`,Qe=e=>`toast:${e.id}:description`,rn=e=>`toast${e.id}:close`,Xe={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function ve(e,t){return e??Xe[t]??Xe.DEFAULT}var nn=e=>typeof e=="string"?{left:e,right:e,bottom:e,top:e}:e;function sn(e,t){var f;const{prop:r,computed:n,context:s}=e,{offsets:o,gap:a}=r("store").attrs,i=s.get("heights"),d=nn(o),g=r("dir")==="rtl",p=t.replace("-start",g?"-right":"-left").replace("-end",g?"-left":"-right"),m=p.includes("right"),v=p.includes("left"),T={position:"fixed",pointerEvents:n("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${a}px`,"--first-height":`${((f=i[0])==null?void 0:f.height)||0}px`,zIndex:Pt};let S="center";if(m&&(S="flex-end"),v&&(S="flex-start"),T.alignItems=S,p.includes("top")){const y=d.top;T.top=`max(env(safe-area-inset-top, 0px), ${y})`}if(p.includes("bottom")){const y=d.bottom;T.bottom=`max(env(safe-area-inset-bottom, 0px), ${y})`}if(!p.includes("left")){const y=d.right;T.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${y})`}if(!p.includes("right")){const y=d.left;T.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${y})`}return T}function on(e,t){const{prop:r,context:n,computed:s}=e,o=r("parent"),a=o.computed("placement"),{gap:i}=o.prop("store").attrs,[d]=a.split("-"),g=n.get("mounted"),p=n.get("remainingTime"),m=s("height"),v=s("frontmost"),T=!v,S=!r("stacked"),f=r("stacked"),b=r("type")==="loading"?Number.MAX_SAFE_INTEGER:p,l=s("heightIndex")*i+s("heightBefore"),w={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${r("removeDelay")}ms`,"--duration":`${b}ms`,"--initial-height":`${m}px`,"--offset":`${l}px`,"--index":r("index"),"--z-index":s("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},h=I=>Object.assign(w,I);return d==="top"?h({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):d==="bottom"&&h({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),g&&(h({"--y":"0","--opacity":"1"}),f&&h({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),t||h({"--opacity":"0",pointerEvents:"none"}),T&&S&&(h({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),t||h({"--y":"calc(var(--sign) * 40%)"})),T&&f&&!t&&h({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),v&&!t&&h({"--y":"calc(var(--lift) * -100%)"}),w}function an(e,t){const{computed:r}=e,n={position:"absolute",inset:"0",scale:"1 2",pointerEvents:t?"none":"auto"},s=o=>Object.assign(n,o);return r("frontmost")&&!t&&s({height:"calc(var(--initial-height) + 80%)"}),n}function cn(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function un(e,t){const{context:r,prop:n,send:s,refs:o,computed:a}=e;return{getCount(){return r.get("toasts").length},getToasts(){return r.get("toasts")},getGroupProps(i={}){const{label:d="Notifications"}=i,{hotkey:g}=n("store").attrs,p=g.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=a("placement"),[v,T="center"]=m.split("-");return t.element({...j.group.attrs,dir:n("dir"),tabIndex:-1,"aria-label":`${m} ${d} ${p}`,id:tn(m),"data-placement":m,"data-side":v,"data-align":T,"aria-live":"polite",role:"region",style:sn(e,m),onMouseMove(){s({type:"REGION.POINTER_ENTER",placement:m})},onMouseLeave(){s({type:"REGION.POINTER_LEAVE",placement:m})},onFocus(S){s({type:"REGION.FOCUS",target:S.relatedTarget})},onBlur(S){o.get("isFocusWithin")&&!K(S.currentTarget,S.relatedTarget)&&queueMicrotask(()=>s({type:"REGION.BLUR"}))}})},subscribe(i){return n("store").subscribe(()=>i(r.get("toasts")))}}}var ln={props({props:e}){return{dir:"ltr",id:lt(),...e,store:e.store}},initialState({prop:e}){return e("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,dismissableCleanup:void 0}},context({bindable:e}){return{toasts:e(()=>({defaultValue:[],sync:!0,hash:t=>t.map(r=>r.id).join(",")})),heights:e(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:e})=>e.get("toasts").length,overlap:({prop:e})=>e("store").attrs.overlap,placement:({prop:e})=>e("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:e,context:t,action:r}){e([()=>t.hash("toasts")],()=>{queueMicrotask(()=>{r(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["collapseToasts","resumeToasts","restoreLastFocusedEl"]},{target:"stack",actions:["resumeToasts","restoreLastFocusedEl"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","collapseToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:e})=>e("overlap")},effects:{subscribeToStore({context:e,prop:t}){return t("store").subscribe(r=>{if(r.dismiss){e.set("toasts",n=>n.filter(s=>s.id!==r.id));return}e.set("toasts",n=>{const s=n.findIndex(o=>o.id===r.id);return s!==-1?[...n.slice(0,s),{...n[s],...r},...n.slice(s+1)]:[r,...n]})})},trackHotKeyPress({prop:e,send:t}){return A(document,"keydown",n=>{const{hotkey:s}=e("store").attrs;s.every(a=>n[a]||n.code===a)&&t({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:e,send:t,scope:r}){const{pauseOnPageIdle:n}=e("store").attrs;if(!n)return;const s=r.getDoc();return A(s,"visibilitychange",()=>{const o=s.visibilityState==="hidden";t({type:o?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:e,context:t,computed:r,scope:n}){var g;const s=t.get("toasts"),o=r("placement"),a=s.length>0;if(!a){(g=e.get("dismissableCleanup"))==null||g();return}if(a&&e.get("dismissableCleanup"))return;const d=_r(()=>Ge(n,o),{defer:!0});e.set("dismissableCleanup",d)},clearDismissableBranch({refs:e}){var t;(t=e.get("dismissableCleanup"))==null||t()},focusRegionEl({scope:e,computed:t}){queueMicrotask(()=>{var r;(r=Ge(e,t("placement")))==null||r.focus()})},pauseToasts({prop:e}){e("store").pause()},resumeToasts({prop:e}){e("store").resume()},expandToasts({prop:e}){e("store").expand()},collapseToasts({prop:e}){e("store").collapse()},removeToast({prop:e,event:t}){e("store").remove(t.id)},removeHeight({event:e,context:t}){(e==null?void 0:e.id)!=null&&queueMicrotask(()=>{t.set("heights",r=>r.filter(n=>n.id!==e.id))})},collapsedIfEmpty({send:e,computed:t}){!t("overlap")||t("count")>1||e({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:e,event:t}){e.get("isFocusWithin")||!t.target||(e.set("isFocusWithin",!0),e.set("lastFocusedEl",t.target))},restoreLastFocusedEl({refs:e}){var t;e.get("lastFocusedEl")&&((t=e.get("lastFocusedEl"))==null||t.focus({preventScroll:!0}),e.set("lastFocusedEl",null),e.set("isFocusWithin",!1))},clearLastFocusedEl({refs:e}){var t;e.get("lastFocusedEl")&&((t=e.get("lastFocusedEl"))==null||t.focus({preventScroll:!0}),e.set("lastFocusedEl",null),e.set("isFocusWithin",!1))}}}};function Ts(e,t){const{state:r,send:n,prop:s,scope:o,context:a,computed:i}=e,d=r.hasTag("visible"),g=r.hasTag("paused"),p=a.get("mounted"),m=i("frontmost"),v=s("parent").computed("placement"),T=s("type"),S=s("stacked"),f=s("title"),y=s("description"),b=s("action"),[l,w="center"]=v.split("-");return{type:T,title:f,description:y,placement:v,visible:d,paused:g,closable:!!s("closable"),pause(){n({type:"PAUSE"})},resume(){n({type:"RESUME"})},dismiss(){n({type:"DISMISS",src:"programmatic"})},getRootProps(){return t.element({...j.root.attrs,dir:s("dir"),id:pt(o),"data-state":d?"open":"closed","data-type":T,"data-placement":v,"data-align":w,"data-side":l,"data-mounted":H(p),"data-paused":H(g),"data-first":H(m),"data-sibling":H(!m),"data-stack":H(S),"data-overlap":H(!S),role:"status","aria-atomic":"true","aria-describedby":y?Qe(o):void 0,"aria-labelledby":f?We(o):void 0,tabIndex:0,style:on(e,d),onKeyDown(h){h.defaultPrevented||h.key=="Escape"&&(n({type:"DISMISS",src:"keyboard"}),h.preventDefault())}})},getGhostBeforeProps(){return t.element({"data-ghost":"before",style:an(e,d)})},getGhostAfterProps(){return t.element({"data-ghost":"after",style:cn()})},getTitleProps(){return t.element({...j.title.attrs,id:We(o)})},getDescriptionProps(){return t.element({...j.description.attrs,id:Qe(o)})},getActionTriggerProps(){return t.button({...j.actionTrigger.attrs,type:"button",onClick(h){var I;h.defaultPrevented||((I=b==null?void 0:b.onClick)==null||I.call(b),n({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return t.button({id:rn(o),...j.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(h){h.defaultPrevented||n({type:"DISMISS",src:"user"})}})}}}var{not:dn}=ft(),ws={props({props:e}){return Mr(e,["id","type","parent","removeDelay"],"toast"),{closable:!0,...e,duration:ve(e.duration,e.type)}},initialState({prop:e}){return e("type")==="loading"||e("duration")===1/0?"visible:persist":"visible"},context({prop:e,bindable:t}){return{remainingTime:t(()=>({defaultValue:ve(e("duration"),e("type"))})),createdAt:t(()=>({defaultValue:Date.now()})),mounted:t(()=>({defaultValue:!1})),initialHeight:t(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:e})=>{const t=e("parent").context.get("toasts"),r=t.findIndex(n=>n.id===e("id"));return t.length-r},height:({prop:e})=>{const r=e("parent").context.get("heights").find(n=>n.id===e("id"));return(r==null?void 0:r.height)??0},heightIndex:({prop:e})=>e("parent").context.get("heights").findIndex(r=>r.id===e("id")),frontmost:({prop:e})=>e("index")===0,heightBefore:({prop:e})=>{const t=e("parent").context.get("heights"),r=t.findIndex(n=>n.id===e("id"));return t.reduce((n,s,o)=>o>=r?n:n+s.height,0)},shouldPersist:({prop:e})=>e("type")==="loading"||e("duration")===1/0},watch({track:e,prop:t,send:r}){e([()=>t("message")],()=>{const n=t("message");n&&r({type:n,src:"programmatic"})}),e([()=>t("type"),()=>t("duration")],()=>{r({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:dn("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:e,send:t}){return be(()=>{t({type:"REMOVE",src:"timer"})},e("removeDelay"))},waitForDuration({send:e,context:t,computed:r}){if(!r("shouldPersist"))return be(()=>{e({type:"DISMISS",src:"timer"})},t.get("remainingTime"))},waitForNextTick({send:e}){return be(()=>{e({type:"SHOW",src:"timer"})},0)},trackHeight({scope:e,prop:t}){let r;return C(()=>{const n=Ke(e);if(!n)return;const s=()=>{const i=n.style.height;n.style.height="auto";const d=n.getBoundingClientRect().height;n.style.height=i;const g={id:t("id"),height:d};Ye(t("parent"),g)},o=e.getWin(),a=new o.MutationObserver(s);a.observe(n,{childList:!0,subtree:!0,characterData:!0}),r=()=>a.disconnect()}),()=>r==null?void 0:r()}},guards:{isLoadingType:({prop:e})=>e("type")==="loading",shouldPersist:({computed:e})=>e("shouldPersist")},actions:{setMounted({context:e}){C(()=>{e.set("mounted",!0)})},measureHeight({scope:e,prop:t,context:r}){queueMicrotask(()=>{const n=Ke(e);if(!n)return;const s=n.style.height;n.style.height="auto";const o=n.getBoundingClientRect().height;n.style.height=s,r.set("initialHeight",o);const a={id:t("id"),height:o};Ye(t("parent"),a)})},setCloseTimer({refs:e}){e.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:e,refs:t,prop:r}){t.set("closeTimerStartTime",Date.now()),e.set("remainingTime",ve(r("duration"),r("type")))},syncRemainingTime({context:e,refs:t}){e.set("remainingTime",r=>{const n=t.get("closeTimerStartTime"),s=Date.now()-n;return t.set("lastCloseStartTimerStartTime",Date.now()),r-s})},notifyParentToRemove({prop:e}){e("parent").send({type:"TOAST.REMOVE",id:e("id")})},invokeOnDismiss({prop:e,event:t}){var r;(r=e("onStatusChange"))==null||r({status:"dismissing",src:t.src})},invokeOnUnmount({prop:e}){var t;(t=e("onStatusChange"))==null||t({status:"unmounted"})},invokeOnVisible({prop:e}){var t;(t=e("onStatusChange"))==null||t({status:"visible"})}}}};function Ye(e,t){const{id:r,height:n}=t;e.context.set("heights",s=>s.find(a=>a.id===r)?s.map(a=>a.id===r?{...a,height:n}:a):[{id:r,height:n},...s])}var fn=(e,t)=>({...t,...dt(e)});function gn(e={}){const t=fn(e,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let r=[],n=[],s=new Set,o=[];const a=c=>(r.push(c),()=>{const u=r.indexOf(c);r.splice(u,1)}),i=c=>(r.forEach(u=>u(c)),c),d=c=>{if(n.length>=t.max){o.push(c);return}i(c),n.unshift(c)},g=()=>{for(;o.length>0&&n.length<t.max;){const c=o.shift();c&&(i(c),n.unshift(c))}},p=c=>{const u=c.id??`toast:${lt()}`,M=n.find(D=>D.id===u);return s.has(u)&&s.delete(u),M?n=n.map(D=>D.id===u?i({...D,...c,id:u}):D):d({id:u,duration:t.duration,removeDelay:t.removeDelay,type:"info",...c,stacked:!t.overlap,gap:t.gap}),u},m=c=>(s.add(c),c?(r.forEach(u=>u({id:c,dismiss:!0})),n=n.filter(u=>u.id!==c),g()):(n.forEach(u=>{r.forEach(M=>M({id:u.id,dismiss:!0}))}),n=[],o=[]),c);return{attrs:t,subscribe:a,create:p,update:(c,u)=>p({id:c,...u}),remove:m,dismiss:c=>{c!=null?n=n.map(u=>u.id===c?i({...u,message:"DISMISS"}):u):n=n.map(u=>i({...u,message:"DISMISS"}))},error:c=>p({...c,type:"error"}),success:c=>p({...c,type:"success"}),info:c=>p({...c,type:"info"}),warning:c=>p({...c,type:"warning"}),loading:c=>p({...c,type:"loading"}),getVisibleToasts:()=>n.filter(c=>!s.has(c.id)),getCount:()=>n.length,promise:(c,u,M={})=>{if(!u||!u.loading){xe("[zag-js > toast] toaster.promise() requires at least a 'loading' option to be specified");return}const D=p({...M,...u.loading,promise:c,type:"loading"});let re=!0,X;const vt=oe(c).then(async P=>{if(X=["resolve",P],pn(P)&&!P.ok){re=!1;const F=oe(u.error,`HTTP Error! status: ${P.status}`);p({...M,...F,id:D,type:"error"})}else if(u.success!==void 0){re=!1;const F=oe(u.success,P);p({...M,...F,id:D,type:"success"})}}).catch(async P=>{if(X=["reject",P],u.error!==void 0){re=!1;const F=oe(u.error,P);p({...M,...F,id:D,type:"error"})}}).finally(()=>{var P;re&&m(D),(P=u.finally)==null||P.call(u)});return{id:D,unwrap:()=>new Promise((P,F)=>vt.then(()=>X[0]==="reject"?F(X[1]):P(X[1])).catch(F))}},pause:c=>{c!=null?n=n.map(u=>u.id===c?i({...u,message:"PAUSE"}):u):n=n.map(u=>i({...u,message:"PAUSE"}))},resume:c=>{c!=null?n=n.map(u=>u.id===c?i({...u,message:"RESUME"}):u):n=n.map(u=>i({...u,message:"RESUME"}))},isVisible:c=>!s.has(c)&&!!n.find(u=>u.id===c),isDismissed:c=>s.has(c),expand:()=>{n=n.map(c=>i({...c,stacked:!0}))},collapse:()=>{n=n.map(c=>i({...c,stacked:!1}))}}}var pn=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Ss={connect:un,machine:ln};function hn(e={}){return gn(e)}const ht=hn({placement:"top"});function ks(e){return ht.getVisibleToasts().find(t=>t.id===e)!==void 0}const E={},mt={visualization:(E==null?void 0:E.VITE_RESOURCE_VIZ)||"",application:(E==null?void 0:E.VITE_RESOURCE_APP)||"",aggregate:(E==null?void 0:E.VITE_RESOURCE_AGGREGATE)||"",search:(E==null?void 0:E.VITE_RESOURCE_SEARCH)||(E==null?void 0:E.VITE_RESOURCE_HPDS)||"",hpdsOpen:(E==null?void 0:E.VITE_RESOURCE_OPEN_HPDS)||"",hpdsAuth:(E==null?void 0:E.VITE_RESOURCE_HPDS)||"",hpdsOpenV3:(E==null?void 0:E.VITE_RESOURCE_OPEN_V3_HPDS)||"",queryIdGen:(E==null?void 0:E.VITE_RESOURCE_QUERY_ID_GEN)||"",queryable:[]},mn=ae(Promise.resolve()),ie=ae(mt);function Is(e=!1){const t=W(ie);return _.federated?t.queryable:[e?{name:"hpdsOpen",uuid:t.hpdsOpen}:{name:"hpds",uuid:t.hpdsAuth}]}async function yn(){if(W(ie).queryable.length>0)return;const e=mt;_.federated&&await ee(Ot.Resources).then(t=>{e.queryable=t.filter(({hidden:r,resourceRSPath:n})=>!r&&n.includes("passthru")).map(({name:r,uuid:n})=>({name:r,uuid:n}))}).catch(()=>ht.error({description:"Failed to load remote resource list."})),ie.set(e),console.debug("Resources",e)}async function Os(){mn.set(yn())}function En(e,t){const r=ae(!!localStorage.getItem(e));return window.addEventListener("storage",n=>{n.key===e&&r.set(!!n.newValue)}),r}const Pe=En("token"),R=ae(Tn()),xs=ce(R,e=>{var t;return(t=e==null?void 0:e.privileges)==null?void 0:t.includes(Se.SUPER)}),Ps=ce(R,e=>{var t;return(t=e==null?void 0:e.privileges)==null?void 0:t.includes(Se.ADMIN)}),bn=ce(Pe,e=>e);R.subscribe(e=>{{Et();const t={...e};t.token=void 0,localStorage.setItem("user",JSON.stringify(t))}});function vn(e){localStorage.setItem("token",e),Pe.set(!0)}function As(){return localStorage.getItem("token")||""}function yt(){localStorage.removeItem("token"),Pe.set(!1)}function Tn(){if(localStorage.getItem("user")){Et();try{const e=JSON.parse(localStorage.getItem("user")||"{}");return!e||Object.keys(e).length===0?{}:(console.log("Restored user from local storage: ",e),e)}catch(e){return console.error("Error reading user from local storage:  "+e),{}}}return{}}function Rs(){return!!localStorage.getItem("token")}function Et(){{const e=localStorage.getItem("token");e&&In(e)&&(console.log("Clearing expired token from local storage."),yt())}}const Ds=ce([R,bn],([e,t])=>{const r=(e==null?void 0:e.privileges)||[];if(r.length===0||!t)return Re.filter(a=>!a.privilege);function n(a){return a.filter(i=>i.feature?!!_[i.feature]:!0).map(i=>i.children?{...i,children:n(i.children)}:i)}const s=n(Re);if(r.includes(Se.SUPER))return s;function o(a){return a.filter(i=>i.privilege?i.privilege.some(d=>r.includes(d)):!0).map(i=>i.children?{...i,children:o(i.children)}:i)}return o(s)});async function wn(e,t=!1){{const r=await ee(`${le.User.Me}${t?"?hasToken":""}`);if(r.privileges&&r.token){for(const n of r.privileges)if(n.includes(Ae.PRIV_MANAGED)){r.privileges.push(Ae.AUTHORIZED_ACCESS);break}}R.set({...W(R),...r})}}function Ls(){return ee(le.User.Refresh).then(e=>{if(!e.userLongTermToken)throw new Error("No user token was returned.");return R.set({...W(R),token:e.userLongTermToken}),e.userLongTermToken})}async function Sn(){try{const e=await ee(le.User.Template+"/"+W(ie).application);return JSON.parse(e.queryTemplate)}catch(e){return console.error("Error parsing query template: "+e),{}}}async function kn(e){if(e&&(vn(e),await wn(!0,!1),_.useQueryTemplate)){const t=await Sn();t&&R.set({...W(R),queryTemplate:t})}}async function ze(e,t=!1){function r(n){console.error("Error logging out: "+n),Je(t)}localStorage.getItem("token")&&(await ee(le.User.Logout).catch(r),yt()),e?await e.logout().then(n=>{typeof n=="string"?(R.set({}),location.replace(n)):r(n)}).catch(r):Je(t)}function Je(e){R.set({}),e?De(`/login?redirectTo=${encodeURIComponent(Ze.url.pathname)}`):De("/login")}function In(e){try{return bt(e)<new Date().getTime()}catch(t){return console.error("Error checking token expiration: "+t),!0}}function bt(e){if(!e)throw new Error("No token provided.");try{return JSON.parse(atob(e.split(".")[1])).exp*1e3}catch(t){throw new Error("Error parsing token: "+t)}}function Ns(e){try{return new Date(bt(e))}catch(t){console.error("Error getting token expiration as date: "+t);return}}export{_n as $,ms as A,ft as B,Kn as C,sr as D,Wn as E,Zn as F,H as G,ss as H,Y as I,Un as J,Rs as K,ws as L,Ts as M,Ss as N,ze as O,le as P,As as Q,bn as R,ys as S,Bn as T,rs as U,Xn as V,C as W,ts as X,es as Y,Jn as Z,vr as _,xs as a,dr as a0,as as a1,is as a2,qn as a3,Hn as a4,K as a5,Gn as a6,ps as a7,fr as a8,gr as a9,Yn as aA,zn as aB,Ds as aC,Qn as aa,A as ab,nt as ac,et as ad,Z as ae,ns as af,Tr as ag,Wt as ah,Vn as ai,vs as aj,ds as ak,ct as al,Oe as am,gs as an,Vr as ao,os as ap,Ee as aq,xe as ar,Es as as,bs as at,dt as au,hs as av,ls as aw,fs as ax,cs as ay,us as az,Ps as b,Fn as c,Mn as d,Os as e,mn as f,ee as g,ks as h,In as i,Is as j,Ot as k,kn as l,Ns as m,wn as n,Ls as o,$n as p,bt as q,ie as r,vn as s,ht as t,R as u,L as v,U as w,jn as x,J as y,ge as z};
