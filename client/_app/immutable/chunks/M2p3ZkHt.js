import{w as ne,g as re,d as se}from"./xU7jw7XU.js";import{e as Tt}from"./hUONLBj8.js";import{f as oe,B as Pe,P as we,r as Re}from"./BOAiLg0g.js";import{g as Le}from"./Dkbkn6HV.js";import{p as Ze}from"./Jem-ehAR.js";import"./Bzak7iHL.js";import{d as wt}from"./DVtHS8ol.js";import{b as St}from"./Bt-Xh7oU.js";const _e="Bearer ";async function ie({method:e,path:t,data:n,headers:r,authenticate:s=!0}){const o={method:e,headers:{}};if(n&&(o.headers["Content-Type"]="application/json",o.body=typeof n=="string"?n:JSON.stringify(n)),r&&(o.headers={...o.headers,...r}),s&&St){const i=localStorage.getItem("token");i&&(o.headers.Authorization=`${_e}${i}`,o.headers["request-source"]="Authorized"),Ze.url.pathname.includes("/discover")&&(o.headers["request-source"]="Open")}const a=await fetch(`${window.location.origin}/${t}`,o);return await kt(a)}function ae(e,t,n){return ie({method:"GET",path:e,headers:t,authenticate:n})}function Cr(e,t,n){return ie({method:"DELETE",path:e,headers:t,authenticate:n})}function Mr(e,t,n,r){return ie({method:"POST",path:e,data:t,headers:n,authenticate:r})}function Fr(e,t,n,r){return ie({method:"PUT",path:e,data:t,headers:n,authenticate:r})}async function kt(e){if(e.ok||e.status===422){if(It(e),(e.headers.get("Content-Type")||"").includes("application/octet-stream"))return await e.arrayBuffer();const n=await e.text();try{return JSON.parse(n)}catch{return n}}else if(e.status===401){sessionStorage.setItem("logout-reason","Your session has timed out. Please log in."),ze(void 0,!0);return}else e.status===403&&(sessionStorage.removeItem("logout-reason"),sessionStorage.removeItem("filters"),ze(void 0,!1));Tt(e.status,await e.text())}function It(e){let t=e.headers.get("Authorization");t&&(t=t.replace(_e,""),Sr(t))}const De=oe.explorer.enableOrQueries,D="picsure",V=`${D}/proxy/dictionary-api`,ee=`${D}/query`,fe=`${D}/proxy/uploader`,Ot={Concepts:`${V}/concepts`,Concept:{Detail:`${V}/concepts/detail`,Tree:`${V}/concepts/tree`},Dashboard:`${V}/dashboard`,DashboardDrawer:`${V}/dashboard-drawer`,NamedDataSet:`${D}/dataset/named`,Dictionary:V,Facets:`${V}/facets`,Search:`${D}/search`,Resources:`${D}/resource`,Query:De?`${D}/v3/query`:ee,QuerySync:De?`${D}/v3/query/sync`:`${ee}/sync`,QueryV2:ee,QueryV2Sync:`${ee}/sync`,QueryV3:`${D}/v3/query`,QueryV3Sync:`${D}/v3/query/sync`,Uploader:{Upload:`${fe}/upload`,Sites:`${fe}/sites`,Status:`${fe}/status`}},ge="psama/user",Se={Application:"psama/application",Auth:"psama/authentication",Connection:"psama/connection",Priviege:"psama/privilege",StudyAccess:"psama/studyAccess",Role:"psama/role",TOS:"psama/tos",Users:ge,User:{Logout:"psama/logout",Me:`${ge}/me`,Refresh:`${ge}/me/refresh_long_term_token`}};var Y=(e,t=[])=>({parts:(...n)=>{if(xt(t))return Y(e,n);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...n)=>Y(e,[...t,...n]),omit:(...n)=>Y(e,t.filter(r=>!n.includes(r))),rename:n=>Y(n,t),keys:()=>t,build:()=>[...new Set(t)].reduce((n,r)=>Object.assign(n,{[r]:{selector:[`&[data-scope="${q(e)}"][data-part="${q(r)}"]`,`& [data-scope="${q(e)}"][data-part="${q(r)}"]`].join(", "),attrs:{"data-scope":q(e),"data-part":q(r)}}}),{})}),q=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),xt=e=>e.length===0,pe=(...e)=>t=>e.reduce((n,r)=>r(n),t),G=()=>{},ce=e=>typeof e=="object"&&e!==null,At=2147483647,j=e=>e?"":void 0,Pt=1,Rt=9,Lt=11,O=e=>ce(e)&&e.nodeType===Pt&&typeof e.nodeName=="string",et=e=>ce(e)&&e.nodeType===Rt,Dt=e=>ce(e)&&e===e.window,tt=e=>O(e)?e.localName||"":"#document";function Nt(e){return["html","body","#document"].includes(tt(e))}var Ct=e=>ce(e)&&e.nodeType!==void 0,Q=e=>Ct(e)&&e.nodeType===Lt&&"host"in e,Mt=e=>O(e)&&e.localName==="input",$r=e=>!!(e!=null&&e.matches("a[href]")),Ft=e=>O(e)?e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0:!1;function nt(e){if(!e)return!1;const t=e.getRootNode();return rt(t)===e}var $t=/(textarea|select)/;function Bt(e){if(e==null||!O(e))return!1;try{return Mt(e)&&e.selectionStart!=null||$t.test(e.localName)||e.isContentEditable||e.getAttribute("contenteditable")==="true"||e.getAttribute("contenteditable")===""}catch{return!1}}function K(e,t){var r;if(!e||!t||!O(e)||!O(t))return!1;const n=(r=t.getRootNode)==null?void 0:r.call(t);if(e===t||e.contains(t))return!0;if(n&&Q(n)){let s=t;for(;s;){if(e===s)return!0;s=s.parentNode||s.host}}return!1}function U(e){return et(e)?e:Dt(e)?e.document:(e==null?void 0:e.ownerDocument)??document}function Vt(e){return U(e).documentElement}function L(e){var t;return Q(e)?L(e.host):et(e)?e.defaultView??window:O(e)?((t=e.ownerDocument)==null?void 0:t.defaultView)??window:window}function rt(e){let t=e.activeElement;for(;t!=null&&t.shadowRoot;){const n=t.shadowRoot.activeElement;if(!n||n===t)break;t=n}return t}function Ut(e){if(tt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Q(e)&&e.host||Vt(e);return Q(t)?t.host:t}var he=new WeakMap;function Br(e){return he.has(e)||he.set(e,L(e).getComputedStyle(e)),he.get(e)}var ue=()=>typeof document<"u";function qt(){const e=navigator.userAgentData;return(e==null?void 0:e.platform)??navigator.platform}function jt(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}var ke=e=>ue()&&e.test(qt()),st=e=>ue()&&e.test(jt()),Ht=e=>ue()&&e.test(navigator.vendor),Ne=()=>ue()&&!!navigator.maxTouchPoints,Gt=()=>ke(/^iPhone/i),Kt=()=>ke(/^iPad/i)||le()&&navigator.maxTouchPoints>1,Wt=()=>Gt()||Kt(),Xt=()=>le()||Wt(),le=()=>ke(/^Mac/i),Vr=()=>Xt()&&Ht(/apple/i),Yt=()=>st(/Firefox/i),Qt=()=>st(/Android/i);function zt(e){var t,n,r;return((t=e.composedPath)==null?void 0:t.call(e))??((r=(n=e.nativeEvent)==null?void 0:n.composedPath)==null?void 0:r.call(n))}function z(e){const t=zt(e);return(t==null?void 0:t[0])??e.target}function Ur(e){const t=e.currentTarget;if(!t||!t.matches("a[href], button[type='submit'], input[type='submit']"))return!1;const r=e.button===1,s=Jt(e);return r||s}function qr(e){return tn(e).isComposing||e.keyCode===229}function Jt(e){return le()?e.metaKey:e.ctrlKey}function jr(e){return e.pointerType===""&&e.isTrusted?!0:Qt()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}var Zt=e=>e.button===2||le()&&e.ctrlKey&&e.button===0,_t=e=>"touches"in e&&e.touches.length>0,en={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},Ce={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function Hr(e,t={}){const{dir:n="ltr",orientation:r="horizontal"}=t;let s=e.key;return s=en[s]??s,n==="rtl"&&r==="horizontal"&&s in Ce&&(s=Ce[s]),s}function tn(e){return e.nativeEvent??e}function nn(e,t="client"){const n=_t(e)?e.touches[0]||e.changedTouches[0]:e;return{x:n[`${t}X`],y:n[`${t}Y`]}}var P=(e,t,n,r)=>{const s=typeof e=="function"?e():e;return s==null||s.addEventListener(t,n,r),()=>{s==null||s.removeEventListener(t,n,r)}};function rn(e,t){const{type:n="HTMLInputElement",property:r="value"}=t,s=L(e)[n].prototype;return Object.getOwnPropertyDescriptor(s,r)??{}}function sn(e,t){var r;if(!e)return;(r=rn(e,{type:"HTMLInputElement",property:"checked"}).set)==null||r.call(e,t),t?e.setAttribute("checked",""):e.removeAttribute("checked")}function Gr(e,t){const{checked:n,bubbles:r=!0}=t;if(!e)return;const s=L(e);e instanceof s.HTMLInputElement&&(sn(e,n),e.dispatchEvent(new s.Event("click",{bubbles:r})))}function on(e){return an(e)?e.form:e.closest("form")}function an(e){return e.matches("textarea, input, select, button")}function cn(e,t){if(!e)return;const n=on(e),r=s=>{s.defaultPrevented||t()};return n==null||n.addEventListener("reset",r,{passive:!0}),()=>n==null?void 0:n.removeEventListener("reset",r)}function un(e,t){const n=e==null?void 0:e.closest("fieldset");if(!n)return;t(n.disabled);const r=L(n),s=new r.MutationObserver(()=>t(n.disabled));return s.observe(n,{attributes:!0,attributeFilter:["disabled"]}),()=>s.disconnect()}function Kr(e,t){if(!e)return;const{onFieldsetDisabledChange:n,onFormReset:r}=t,s=[cn(e,r),un(e,n)];return()=>s.forEach(o=>o==null?void 0:o())}var ot=e=>O(e)&&e.tagName==="IFRAME",ln=e=>!Number.isNaN(parseInt(e.getAttribute("tabindex")||"0",10)),dn=e=>parseInt(e.getAttribute("tabindex")||"0",10)<0,Ie="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",fn=(e,t=!1)=>{if(!e)return[];const n=Array.from(e.querySelectorAll(Ie));(t==!0||t=="if-empty"&&n.length===0)&&O(e)&&J(e)&&n.unshift(e);const s=n.filter(J);return s.forEach((o,a)=>{if(ot(o)&&o.contentDocument){const i=o.contentDocument.body;s.splice(a,1,...fn(i))}}),s};function J(e){return!e||e.closest("[inert]")?!1:e.matches(Ie)&&Ft(e)}function gn(e,t){if(!e)return[];const r=Array.from(e.querySelectorAll(Ie)).filter(pn);return r.forEach((s,o)=>{if(ot(s)&&s.contentDocument){const a=s.contentDocument.body,i=gn(a);r.splice(o,1,...i)}}),r.length,r}function pn(e){return e!=null&&e.tabIndex>0?!0:J(e)&&!dn(e)}function Wr(e){return e.tabIndex<0&&(/^(audio|video|details)$/.test(e.localName)||Bt(e))&&!ln(e)?0:e.tabIndex}function Xr(e){const t=new Set;function n(r){const s=globalThis.requestAnimationFrame(r);t.add(()=>globalThis.cancelAnimationFrame(s))}return n(()=>n(e)),function(){t.forEach(s=>s())}}function N(e){let t;const n=globalThis.requestAnimationFrame(()=>{t=e()});return()=>{globalThis.cancelAnimationFrame(n),t==null||t()}}function hn(e,t,n){const r=N(()=>{e.removeEventListener(t,s,!0),n()}),s=()=>{r(),n()};return e.addEventListener(t,s,{once:!0,capture:!0}),r}function mn(e,t){if(!e)return;const{attributes:n,callback:r}=t,s=e.ownerDocument.defaultView||window,o=new s.MutationObserver(a=>{for(const i of a)i.type==="attributes"&&i.attributeName&&n.includes(i.attributeName)&&r(i)});return o.observe(e,{attributes:!0,attributeFilter:n}),()=>o.disconnect()}function Yr(e,t){const{defer:n}=t,r=n?N:o=>o(),s=[];return s.push(r(()=>{const o=typeof e=="function"?e():e;s.push(mn(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function yn(e,t){const{callback:n}=t;if(!e)return;const r=e.ownerDocument.defaultView||window,s=new r.MutationObserver(n);return s.observe(e,{childList:!0,subtree:!0}),()=>s.disconnect()}function Qr(e,t){const{defer:n}=t,r=n?N:o=>o(),s=[];return s.push(r(()=>{const o=typeof e=="function"?e():e;s.push(yn(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function zr(e){const t=()=>{const n=L(e);e.dispatchEvent(new n.MouseEvent("click"))};Yt()?hn(e,"keyup",t):queueMicrotask(t)}function be(e){const t=Ut(e);return Nt(t)?U(t).body:O(t)&&vn(t)?t:be(t)}var En=/auto|scroll|overlay|hidden|clip/,bn=new Set(["inline","contents"]);function vn(e){const t=L(e),{overflow:n,overflowX:r,overflowY:s,display:o}=t.getComputedStyle(e);return En.test(n+s+r)&&!bn.has(o)}function Jr(e){const{pointerNode:t,keyboardNode:n=t,onPress:r,onPressStart:s,onPressEnd:o,isValidKey:a=l=>l.key==="Enter"}=e;if(!t)return G;const i=L(t);let d=G,g=G,p=G;const m=l=>({point:nn(l),event:l});function b(l){s==null||s(m(l))}function v(l){o==null||o(m(l))}const f=P(t,"pointerdown",l=>{g();const h=P(i,"pointerup",S=>{const $=z(S);K(t,$)?r==null||r(m(S)):o==null||o(m(S))},{passive:!r,once:!0}),k=P(i,"pointercancel",v,{passive:!o,once:!0});g=pe(h,k),nt(n)&&l.pointerType==="mouse"&&l.preventDefault(),b(l)},{passive:!s}),y=P(n,"focus",E);d=pe(f,y);function E(){const l=S=>{if(!a(S))return;const $=B=>{if(!a(B))return;const Z=new i.PointerEvent("pointerup"),de=m(Z);r==null||r(de),o==null||o(de)};g(),g=P(n,"keyup",$);const W=new i.PointerEvent("pointerdown");b(W)},T=()=>{const S=new i.PointerEvent("pointercancel");v(S)},h=P(n,"keydown",l),k=P(n,"blur",T);p=pe(h,k)}return()=>{d(),g(),p()}}function Zr(e,t){return Array.from((e==null?void 0:e.querySelectorAll(t))??[])}var it=e=>e.id;function Tn(e,t,n=it){return e.find(r=>n(r)===t)}function at(e,t,n=it){const r=Tn(e,t,n);return r?e.indexOf(r):-1}function _r(e,t,n=!0){let r=at(e,t);return r=n?(r+1)%e.length:Math.min(r+1,e.length-1),e[r]}function es(e,t,n=!0){let r=at(e,t);return r===-1?n?e[e.length-1]:null:(r=n?(r-1+e.length)%e.length:Math.max(0,r-1),e[r])}function ts(e,t){const{onEntry:n,measure:r,box:s="border-box"}=t,o=(Array.isArray(e)?e:[e]).filter(O),a=L(o[0]),i=g=>{const p=o.map(m=>r(m));n({rects:p,entries:g})};i([]);const d=new a.ResizeObserver(i);return o.forEach(g=>d.observe(g,{box:s})),()=>d.disconnect()}function wn(e,t){if(!e)return G;const n=Object.keys(t).reduce((r,s)=>(r[s]=e.style.getPropertyValue(s),r),{});return Object.assign(e.style,t),()=>{Object.assign(e.style,n),e.style.length===0&&e.removeAttribute("style")}}function ns(e,t,n){if(!e)return G;const r=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{e.style.setProperty(t,r),e.style.length===0&&e.removeAttribute("style")}}var rs={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"};function Sn(e,t,n){const{signal:r}=t;return[new Promise((a,i)=>{const d=setTimeout(()=>{i(new Error(`Timeout of ${n}ms exceeded`))},n);r.addEventListener("abort",()=>{clearTimeout(d),i(new Error("Promise aborted"))}),e.then(g=>{r.aborted||(clearTimeout(d),a(g))}).catch(g=>{r.aborted||(clearTimeout(d),i(g))})}),()=>t.abort()]}function kn(e,t){const{timeout:n,rootNode:r}=t,s=L(r),o=U(r),a=new s.AbortController;return Sn(new Promise(i=>{const d=e();if(d){i(d);return}const g=new s.MutationObserver(()=>{const p=e();p&&p.isConnected&&(g.disconnect(),i(p))});g.observe(o.body,{childList:!0,subtree:!0})}),a,n)}function ss(e){return e==null?[]:Array.isArray(e)?e:[e]}var os=e=>e[0],is=e=>e[e.length-1],as=(e,...t)=>e.concat(t),cs=(e,...t)=>e.filter(n=>!t.includes(n)),Me=e=>(e==null?void 0:e.constructor.name)==="Array",In=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Oe(e[n],t[n]))return!1;return!0},Oe=(e,t)=>{if(Object.is(e,t))return!0;if(e==null&&t!=null||e!=null&&t==null)return!1;if(typeof(e==null?void 0:e.isEqual)=="function"&&typeof(t==null?void 0:t.isEqual)=="function")return e.isEqual(t);if(typeof e=="function"&&typeof t=="function")return e.toString()===t.toString();if(Me(e)&&Me(t))return In(Array.from(e),Array.from(t));if(typeof e!="object"||typeof t!="object")return!1;const n=Object.keys(t??Object.create(null)),r=n.length;for(let s=0;s<r;s++)if(!Reflect.has(e,n[s]))return!1;for(let s=0;s<r;s++){const o=n[s];if(!Oe(e[o],t[o]))return!1}return!0},On=e=>e!=null&&typeof e=="object",us=e=>typeof e=="number"&&!Number.isNaN(e),me=e=>typeof e=="string",ct=e=>typeof e=="function",xn=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),An=e=>Object.prototype.toString.call(e),ut=Function.prototype.toString,Pn=ut.call(Object),Rn=e=>{if(!On(e)||An(e)!="[object Object]"||Nn(e))return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const n=xn(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&ut.call(n)==Pn},Ln=e=>typeof e=="object"&&e!==null&&"$$typeof"in e&&"props"in e,Dn=e=>typeof e=="object"&&e!==null&&"__v_isVNode"in e,Nn=e=>Ln(e)||Dn(e),te=(e,...t)=>(typeof e=="function"?e(...t):e)??void 0,ls=e=>e(),ve=(...e)=>(...t)=>{e.forEach(function(n){n==null||n(...t)})},lt=(()=>{let e=0;return()=>(e++,e.toString(36))})(),Cn=e=>Number.isNaN(e),Mn=e=>Cn(e)?0:e,ds=(e,t,n)=>(Mn(e)-t)/(n-t);function dt(e){if(!Rn(e)||e===void 0)return e;const t=Reflect.ownKeys(e).filter(r=>typeof r=="string"),n={};for(const r of t){const s=e[r];s!==void 0&&(n[r]=dt(s))}return n}function ye(e,t){const n=performance.now();let r;function s(o){if(o-n>=t){e();return}r=requestAnimationFrame(s)}return r=requestAnimationFrame(s),()=>cancelAnimationFrame(r)}function xe(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function fs(e,t){if(e==null)throw new Error(t())}function Fn(e,t,n){let r=[];for(const s of t)e[s]==null&&r.push(s);if(r.length>0)throw new Error(`[zag-js${` > ${n}`}] missing required props: ${r.join(", ")}`)}var $n=(...e)=>e.map(t=>{var n;return(n=t==null?void 0:t.trim)==null?void 0:n.call(t)}).filter(Boolean).join(" "),Bn=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,Fe=e=>{const t={};let n;for(;n=Bn.exec(e);)t[n[1]]=n[2];return t},Vn=(e,t)=>{if(me(e)){if(me(t))return`${e};${t}`;e=Fe(e)}else me(t)&&(t=Fe(t));return Object.assign({},e??{},t??{})};function gs(...e){let t={};for(let n of e){if(!n)continue;for(let s in t){if(s.startsWith("on")&&typeof t[s]=="function"&&typeof n[s]=="function"){t[s]=ve(n[s],t[s]);continue}if(s==="className"||s==="class"){t[s]=$n(t[s],n[s]);continue}if(s==="style"){t[s]=Vn(t[s],n[s]);continue}t[s]=n[s]!==void 0?n[s]:t[s]}for(let s in n)t[s]===void 0&&(t[s]=n[s]);const r=Object.getOwnPropertySymbols(n);for(let s of r)t[s]=n[s]}return t}function ps(e,t,n){let r=[],s;return o=>{const a=e(o);return(a.length!==r.length||a.some((d,g)=>!Oe(r[g],d)))&&(r=a,s=t(a,o)),s}}function ft(){return{and:(...e)=>function(n){return e.every(r=>n.guard(r))},or:(...e)=>function(n){return e.some(r=>n.guard(r))},not:e=>function(n){return!n.guard(e)}}}function hs(e){return e}function ms(){return{guards:ft(),createMachine:e=>e,choose:e=>function({choose:n}){var r;return(r=n(e))==null?void 0:r.actions}}}var Un=(e=>(e.NotStarted="Not Started",e.Started="Started",e.Stopped="Stopped",e))(Un||{}),ys="__init__";function Es(e){const t=()=>{var a;return((a=e.getRootNode)==null?void 0:a.call(e))??document},n=()=>U(t());return{...e,getRootNode:t,getDoc:n,getWin:()=>n().defaultView??window,getActiveElement:()=>rt(t()),isActiveElement:nt,getById:a=>t().getElementById(a)}}wt(["click"]);function qn(e){const t={each(n){var r;for(let s=0;s<((r=e.frames)==null?void 0:r.length);s+=1){const o=e.frames[s];o&&n(o)}},addEventListener(n,r,s){return t.each(o=>{try{o.document.addEventListener(n,r,s)}catch{}}),()=>{try{t.removeEventListener(n,r,s)}catch{}}},removeEventListener(n,r,s){t.each(o=>{try{o.document.removeEventListener(n,r,s)}catch{}})}};return t}function jn(e){const t=e.frameElement!=null?e.parent:null;return{addEventListener:(n,r,s)=>{try{t==null||t.addEventListener(n,r,s)}catch{}return()=>{try{t==null||t.removeEventListener(n,r,s)}catch{}}},removeEventListener:(n,r,s)=>{try{t==null||t.removeEventListener(n,r,s)}catch{}}}}var $e="pointerdown.outside",Be="focus.outside";function Hn(e){for(const t of e)if(O(t)&&J(t))return!0;return!1}var gt=e=>"clientY"in e;function Gn(e,t){if(!gt(t)||!e)return!1;const n=e.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=t.clientY&&t.clientY<=n.top+n.height&&n.left<=t.clientX&&t.clientX<=n.left+n.width}function Kn(e,t){return e.y<=t.y&&t.y<=e.y+e.height&&e.x<=t.x&&t.x<=e.x+e.width}function Ve(e,t){if(!t||!gt(e))return!1;const n=t.scrollHeight>t.clientHeight,r=n&&e.clientX>t.offsetLeft+t.clientWidth,s=t.scrollWidth>t.clientWidth,o=s&&e.clientY>t.offsetTop+t.clientHeight,a={x:t.offsetLeft,y:t.offsetTop,width:t.clientWidth+(n?16:0),height:t.clientHeight+(s?16:0)},i={x:e.clientX,y:e.clientY};return Kn(a,i)?r||o:!1}function Wn(e,t){const{exclude:n,onFocusOutside:r,onPointerDownOutside:s,onInteractOutside:o,defer:a}=t;if(!e)return;const i=U(e),d=L(e),g=qn(d),p=jn(d);function m(l,T){if(!O(T)||!T.isConnected||K(e,T)||Gn(e,l))return!1;const h=i.querySelector(`[aria-controls="${e.id}"]`);if(h){const S=be(h);if(Ve(l,S))return!1}const k=be(e);return Ve(l,k)?!1:!(n!=null&&n(T))}const b=new Set,v=Q(e==null?void 0:e.getRootNode());function w(l){function T(h){var W;const k=a&&!Ne()?N:B=>B(),S=h??l,$=((W=S==null?void 0:S.composedPath)==null?void 0:W.call(S))??[S==null?void 0:S.target];k(()=>{const B=v?$[0]:z(l);if(!(!e||!m(l,B))){if(s||o){const Z=ve(s,o);e.addEventListener($e,Z,{once:!0})}Ue(e,$e,{bubbles:!1,cancelable:!0,detail:{originalEvent:S,contextmenu:Zt(S),focusable:Hn($),target:B}})}})}l.pointerType==="touch"?(b.forEach(h=>h()),b.add(P(i,"click",T,{once:!0})),b.add(p.addEventListener("click",T,{once:!0})),b.add(g.addEventListener("click",T,{once:!0}))):T()}const f=new Set,y=setTimeout(()=>{f.add(P(i,"pointerdown",w,!0)),f.add(p.addEventListener("pointerdown",w,!0)),f.add(g.addEventListener("pointerdown",w,!0))},0);function E(l){(a?N:h=>h())(()=>{const h=z(l);if(!(!e||!m(l,h))){if(r||o){const k=ve(r,o);e.addEventListener(Be,k,{once:!0})}Ue(e,Be,{bubbles:!1,cancelable:!0,detail:{originalEvent:l,contextmenu:!1,focusable:J(h),target:h}})}})}return Ne()||(f.add(P(i,"focusin",E,!0)),f.add(p.addEventListener("focusin",E,!0)),f.add(g.addEventListener("focusin",E,!0))),()=>{clearTimeout(y),b.forEach(l=>l()),f.forEach(l=>l())}}function Xn(e,t){const{defer:n}=t,r=n?N:o=>o(),s=[];return s.push(r(()=>{const o=typeof e=="function"?e():e;s.push(Wn(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function Ue(e,t,n){const r=e.ownerDocument.defaultView||window,s=new r.CustomEvent(t,n);return e.dispatchEvent(s)}function Yn(e,t){const n=r=>{r.key==="Escape"&&(r.isComposing||t==null||t(r))};return P(U(e),"keydown",n,{capture:!0})}var qe="layer:request-dismiss",x={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){var r;const t=this.indexOf(e),n=this.topMostPointerBlockingLayer()?this.indexOf((r=this.topMostPointerBlockingLayer())==null?void 0:r.node):-1;return t<n},isTopMost(e){const t=this.layers[this.count()-1];return(t==null?void 0:t.node)===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},getLayersByType(e){return this.layers.filter(t=>t.type===e)},getNestedLayersByType(e,t){const n=this.indexOf(e);return n===-1?[]:this.layers.slice(n+1).filter(r=>r.type===t)},getParentLayerOfType(e,t){const n=this.indexOf(e);if(!(n<=0))return this.layers.slice(0,n).reverse().find(r=>r.type===t)},countNestedLayersOfType(e,t){return this.getNestedLayersByType(e,t).length},isInNestedLayer(e,t){return this.getNestedLayers(e).some(n=>K(n.node,t))},isInBranch(e){return Array.from(this.branches).some(t=>K(t,e))},add(e){this.layers.push(e),this.syncLayers()},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);t<0||(t<this.count()-1&&this.getNestedLayers(e).forEach(r=>x.dismiss(r.node,e)),this.layers.splice(t,1),this.syncLayers())},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},syncLayers(){this.layers.forEach((e,t)=>{e.node.style.setProperty("--layer-index",`${t}`),e.node.removeAttribute("data-nested"),e.node.removeAttribute("data-has-nested"),this.getParentLayerOfType(e.node,e.type)&&e.node.setAttribute("data-nested",e.type);const r=this.countNestedLayersOfType(e.node,e.type);r>0&&e.node.setAttribute("data-has-nested",e.type),e.node.style.setProperty("--nested-layer-count",`${r}`)})},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e,t){const n=this.indexOf(e);if(n===-1)return;const r=this.layers[n];zn(e,qe,s=>{var o;(o=r.requestDismiss)==null||o.call(r,s),s.defaultPrevented||r==null||r.dismiss()}),Qn(e,qe,{originalLayer:e,targetLayer:t,originalIndex:n,targetIndex:t?this.indexOf(t):-1}),this.syncLayers()},clear(){this.remove(this.layers[0].node)}};function Qn(e,t,n){const r=e.ownerDocument.defaultView||window,s=new r.CustomEvent(t,{cancelable:!0,bubbles:!0,detail:n});return e.dispatchEvent(s)}function zn(e,t,n){e.addEventListener(t,n,{once:!0})}var je;function He(){x.layers.forEach(({node:e})=>{e.style.pointerEvents=x.isBelowPointerBlockingLayer(e)?"none":"auto"})}function Jn(e){e.style.pointerEvents=""}function Zn(e,t){const n=U(e),r=[];return x.hasPointerBlockingLayer()&&!n.body.hasAttribute("data-inert")&&(je=document.body.style.pointerEvents,queueMicrotask(()=>{n.body.style.pointerEvents="none",n.body.setAttribute("data-inert","")})),t==null||t.forEach(s=>{const[o,a]=kn(()=>{const i=s();return O(i)?i:null},{timeout:1e3});o.then(i=>r.push(wn(i,{pointerEvents:"auto"}))),r.push(a)}),()=>{x.hasPointerBlockingLayer()||(queueMicrotask(()=>{n.body.style.pointerEvents=je,n.body.removeAttribute("data-inert"),n.body.style.length===0&&n.body.removeAttribute("style")}),r.forEach(s=>s()))}}function _n(e,t){const{warnOnMissingNode:n=!0}=t;if(n&&!e){xe("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!e)return;const{onDismiss:r,onRequestDismiss:s,pointerBlocking:o,exclude:a,debug:i,type:d="dialog"}=t,g={dismiss:r,node:e,type:d,pointerBlocking:o,requestDismiss:s};x.add(g),He();function p(f){var E,l;const y=z(f.detail.originalEvent);x.isBelowPointerBlockingLayer(e)||x.isInBranch(y)||((E=t.onPointerDownOutside)==null||E.call(t,f),(l=t.onInteractOutside)==null||l.call(t,f),!f.defaultPrevented&&(i&&console.log("onPointerDownOutside:",f.detail.originalEvent),r==null||r()))}function m(f){var E,l;const y=z(f.detail.originalEvent);x.isInBranch(y)||((E=t.onFocusOutside)==null||E.call(t,f),(l=t.onInteractOutside)==null||l.call(t,f),!f.defaultPrevented&&(i&&console.log("onFocusOutside:",f.detail.originalEvent),r==null||r()))}function b(f){var y;x.isTopMost(e)&&((y=t.onEscapeKeyDown)==null||y.call(t,f),!f.defaultPrevented&&r&&(f.preventDefault(),r()))}function v(f){var T;if(!e)return!1;const y=typeof a=="function"?a():a,E=Array.isArray(y)?y:[y],l=(T=t.persistentElements)==null?void 0:T.map(h=>h()).filter(O);return l&&E.push(...l),E.some(h=>K(h,f))||x.isInNestedLayer(e,f)}const w=[o?Zn(e,t.persistentElements):void 0,Yn(e,b),Xn(e,{exclude:v,onFocusOutside:m,onPointerDownOutside:p,defer:t.defer})];return()=>{x.remove(e),He(),Jn(e),w.forEach(f=>f==null?void 0:f())}}function bs(e,t){const{defer:n}=t,r=n?N:o=>o(),s=[];return s.push(r(()=>{const o=ct(e)?e():e;s.push(_n(o,t))})),()=>{s.forEach(o=>o==null?void 0:o())}}function er(e,t={}){const{defer:n}=t,r=n?N:o=>o(),s=[];return s.push(r(()=>{const o=ct(e)?e():e;if(!o){xe("[@zag-js/dismissable] branch node is `null` or `undefined`");return}x.addBranch(o),s.push(()=>{x.removeBranch(o)})})),()=>{s.forEach(o=>o==null?void 0:o())}}var tr=Y("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),H=tr.build(),nr=e=>`toast-group:${e}`,Ge=(e,t)=>e.getById(`toast-group:${t}`),pt=e=>`toast:${e.id}`,Ke=e=>e.getById(pt(e)),We=e=>`toast:${e.id}:title`,Xe=e=>`toast:${e.id}:description`,rr=e=>`toast${e.id}:close`,Ye={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function Ee(e,t){return e??Ye[t]??Ye.DEFAULT}var sr=e=>typeof e=="string"?{left:e,right:e,bottom:e,top:e}:e;function or(e,t){var f;const{prop:n,computed:r,context:s}=e,{offsets:o,gap:a}=n("store").attrs,i=s.get("heights"),d=sr(o),g=n("dir")==="rtl",p=t.replace("-start",g?"-right":"-left").replace("-end",g?"-left":"-right"),m=p.includes("right"),b=p.includes("left"),v={position:"fixed",pointerEvents:r("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${a}px`,"--first-height":`${((f=i[0])==null?void 0:f.height)||0}px`,zIndex:At};let w="center";if(m&&(w="flex-end"),b&&(w="flex-start"),v.alignItems=w,p.includes("top")){const y=d.top;v.top=`max(env(safe-area-inset-top, 0px), ${y})`}if(p.includes("bottom")){const y=d.bottom;v.bottom=`max(env(safe-area-inset-bottom, 0px), ${y})`}if(!p.includes("left")){const y=d.right;v.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${y})`}if(!p.includes("right")){const y=d.left;v.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${y})`}return v}function ir(e,t){const{prop:n,context:r,computed:s}=e,o=n("parent"),a=o.computed("placement"),{gap:i}=o.prop("store").attrs,[d]=a.split("-"),g=r.get("mounted"),p=r.get("remainingTime"),m=s("height"),b=s("frontmost"),v=!b,w=!n("stacked"),f=n("stacked"),E=n("type")==="loading"?Number.MAX_SAFE_INTEGER:p,l=s("heightIndex")*i+s("heightBefore"),T={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${n("removeDelay")}ms`,"--duration":`${E}ms`,"--initial-height":`${m}px`,"--offset":`${l}px`,"--index":n("index"),"--z-index":s("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},h=k=>Object.assign(T,k);return d==="top"?h({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):d==="bottom"&&h({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),g&&(h({"--y":"0","--opacity":"1"}),f&&h({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),t||h({"--opacity":"0",pointerEvents:"none"}),v&&w&&(h({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),t||h({"--y":"calc(var(--sign) * 40%)"})),v&&f&&!t&&h({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),b&&!t&&h({"--y":"calc(var(--lift) * -100%)"}),T}function ar(e,t){const{computed:n}=e,r={position:"absolute",inset:"0",scale:"1 2",pointerEvents:t?"none":"auto"},s=o=>Object.assign(r,o);return n("frontmost")&&!t&&s({height:"calc(var(--initial-height) + 80%)"}),r}function cr(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function ur(e,t){const{context:n,prop:r,send:s,refs:o,computed:a}=e;return{getCount(){return n.get("toasts").length},getToasts(){return n.get("toasts")},getGroupProps(i={}){const{label:d="Notifications"}=i,{hotkey:g}=r("store").attrs,p=g.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=a("placement"),[b,v="center"]=m.split("-");return t.element({...H.group.attrs,dir:r("dir"),tabIndex:-1,"aria-label":`${m} ${d} ${p}`,id:nr(m),"data-placement":m,"data-side":b,"data-align":v,"aria-live":"polite",role:"region",style:or(e,m),onMouseMove(){s({type:"REGION.POINTER_ENTER",placement:m})},onMouseLeave(){s({type:"REGION.POINTER_LEAVE",placement:m})},onFocus(w){s({type:"REGION.FOCUS",target:w.relatedTarget})},onBlur(w){o.get("isFocusWithin")&&!K(w.currentTarget,w.relatedTarget)&&queueMicrotask(()=>s({type:"REGION.BLUR"}))}})},subscribe(i){return r("store").subscribe(()=>i(n.get("toasts")))}}}var lr={props({props:e}){return{dir:"ltr",id:lt(),...e,store:e.store}},initialState({prop:e}){return e("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,dismissableCleanup:void 0}},context({bindable:e}){return{toasts:e(()=>({defaultValue:[],sync:!0,hash:t=>t.map(n=>n.id).join(",")})),heights:e(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:e})=>e.get("toasts").length,overlap:({prop:e})=>e("store").attrs.overlap,placement:({prop:e})=>e("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:e,context:t,action:n}){e([()=>t.hash("toasts")],()=>{queueMicrotask(()=>{n(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["collapseToasts","resumeToasts","restoreLastFocusedEl"]},{target:"stack",actions:["resumeToasts","restoreLastFocusedEl"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","collapseToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:e})=>e("overlap")},effects:{subscribeToStore({context:e,prop:t}){return t("store").subscribe(n=>{if(n.dismiss){e.set("toasts",r=>r.filter(s=>s.id!==n.id));return}e.set("toasts",r=>{const s=r.findIndex(o=>o.id===n.id);return s!==-1?[...r.slice(0,s),{...r[s],...n},...r.slice(s+1)]:[n,...r]})})},trackHotKeyPress({prop:e,send:t}){return P(document,"keydown",r=>{const{hotkey:s}=e("store").attrs;s.every(a=>r[a]||r.code===a)&&t({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:e,send:t,scope:n}){const{pauseOnPageIdle:r}=e("store").attrs;if(!r)return;const s=n.getDoc();return P(s,"visibilitychange",()=>{const o=s.visibilityState==="hidden";t({type:o?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:e,context:t,computed:n,scope:r}){var g;const s=t.get("toasts"),o=n("placement"),a=s.length>0;if(!a){(g=e.get("dismissableCleanup"))==null||g();return}if(a&&e.get("dismissableCleanup"))return;const d=er(()=>Ge(r,o),{defer:!0});e.set("dismissableCleanup",d)},clearDismissableBranch({refs:e}){var t;(t=e.get("dismissableCleanup"))==null||t()},focusRegionEl({scope:e,computed:t}){queueMicrotask(()=>{var n;(n=Ge(e,t("placement")))==null||n.focus()})},pauseToasts({prop:e}){e("store").pause()},resumeToasts({prop:e}){e("store").resume()},expandToasts({prop:e}){e("store").expand()},collapseToasts({prop:e}){e("store").collapse()},removeToast({prop:e,event:t}){e("store").remove(t.id)},removeHeight({event:e,context:t}){(e==null?void 0:e.id)!=null&&queueMicrotask(()=>{t.set("heights",n=>n.filter(r=>r.id!==e.id))})},collapsedIfEmpty({send:e,computed:t}){!t("overlap")||t("count")>1||e({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:e,event:t}){e.get("isFocusWithin")||!t.target||(e.set("isFocusWithin",!0),e.set("lastFocusedEl",t.target))},restoreLastFocusedEl({refs:e}){var t;e.get("lastFocusedEl")&&((t=e.get("lastFocusedEl"))==null||t.focus({preventScroll:!0}),e.set("lastFocusedEl",null),e.set("isFocusWithin",!1))},clearLastFocusedEl({refs:e}){var t;e.get("lastFocusedEl")&&((t=e.get("lastFocusedEl"))==null||t.focus({preventScroll:!0}),e.set("lastFocusedEl",null),e.set("isFocusWithin",!1))}}}};function vs(e,t){const{state:n,send:r,prop:s,scope:o,context:a,computed:i}=e,d=n.hasTag("visible"),g=n.hasTag("paused"),p=a.get("mounted"),m=i("frontmost"),b=s("parent").computed("placement"),v=s("type"),w=s("stacked"),f=s("title"),y=s("description"),E=s("action"),[l,T="center"]=b.split("-");return{type:v,title:f,description:y,placement:b,visible:d,paused:g,closable:!!s("closable"),pause(){r({type:"PAUSE"})},resume(){r({type:"RESUME"})},dismiss(){r({type:"DISMISS",src:"programmatic"})},getRootProps(){return t.element({...H.root.attrs,dir:s("dir"),id:pt(o),"data-state":d?"open":"closed","data-type":v,"data-placement":b,"data-align":T,"data-side":l,"data-mounted":j(p),"data-paused":j(g),"data-first":j(m),"data-sibling":j(!m),"data-stack":j(w),"data-overlap":j(!w),role:"status","aria-atomic":"true","aria-describedby":y?Xe(o):void 0,"aria-labelledby":f?We(o):void 0,tabIndex:0,style:ir(e,d),onKeyDown(h){h.defaultPrevented||h.key=="Escape"&&(r({type:"DISMISS",src:"keyboard"}),h.preventDefault())}})},getGhostBeforeProps(){return t.element({"data-ghost":"before",style:ar(e,d)})},getGhostAfterProps(){return t.element({"data-ghost":"after",style:cr()})},getTitleProps(){return t.element({...H.title.attrs,id:We(o)})},getDescriptionProps(){return t.element({...H.description.attrs,id:Xe(o)})},getActionTriggerProps(){return t.button({...H.actionTrigger.attrs,type:"button",onClick(h){var k;h.defaultPrevented||((k=E==null?void 0:E.onClick)==null||k.call(E),r({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return t.button({id:rr(o),...H.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(h){h.defaultPrevented||r({type:"DISMISS",src:"user"})}})}}}var{not:dr}=ft(),Ts={props({props:e}){return Fn(e,["id","type","parent","removeDelay"],"toast"),{closable:!0,...e,duration:Ee(e.duration,e.type)}},initialState({prop:e}){return e("type")==="loading"||e("duration")===1/0?"visible:persist":"visible"},context({prop:e,bindable:t}){return{remainingTime:t(()=>({defaultValue:Ee(e("duration"),e("type"))})),createdAt:t(()=>({defaultValue:Date.now()})),mounted:t(()=>({defaultValue:!1})),initialHeight:t(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:e})=>{const t=e("parent").context.get("toasts"),n=t.findIndex(r=>r.id===e("id"));return t.length-n},height:({prop:e})=>{const n=e("parent").context.get("heights").find(r=>r.id===e("id"));return(n==null?void 0:n.height)??0},heightIndex:({prop:e})=>e("parent").context.get("heights").findIndex(n=>n.id===e("id")),frontmost:({prop:e})=>e("index")===0,heightBefore:({prop:e})=>{const t=e("parent").context.get("heights"),n=t.findIndex(r=>r.id===e("id"));return t.reduce((r,s,o)=>o>=n?r:r+s.height,0)},shouldPersist:({prop:e})=>e("type")==="loading"||e("duration")===1/0},watch({track:e,prop:t,send:n}){e([()=>t("message")],()=>{const r=t("message");r&&n({type:r,src:"programmatic"})}),e([()=>t("type"),()=>t("duration")],()=>{n({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:dr("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:e,send:t}){return ye(()=>{t({type:"REMOVE",src:"timer"})},e("removeDelay"))},waitForDuration({send:e,context:t,computed:n}){if(!n("shouldPersist"))return ye(()=>{e({type:"DISMISS",src:"timer"})},t.get("remainingTime"))},waitForNextTick({send:e}){return ye(()=>{e({type:"SHOW",src:"timer"})},0)},trackHeight({scope:e,prop:t}){let n;return N(()=>{const r=Ke(e);if(!r)return;const s=()=>{const i=r.style.height;r.style.height="auto";const d=r.getBoundingClientRect().height;r.style.height=i;const g={id:t("id"),height:d};Qe(t("parent"),g)},o=e.getWin(),a=new o.MutationObserver(s);a.observe(r,{childList:!0,subtree:!0,characterData:!0}),n=()=>a.disconnect()}),()=>n==null?void 0:n()}},guards:{isLoadingType:({prop:e})=>e("type")==="loading",shouldPersist:({computed:e})=>e("shouldPersist")},actions:{setMounted({context:e}){N(()=>{e.set("mounted",!0)})},measureHeight({scope:e,prop:t,context:n}){queueMicrotask(()=>{const r=Ke(e);if(!r)return;const s=r.style.height;r.style.height="auto";const o=r.getBoundingClientRect().height;r.style.height=s,n.set("initialHeight",o);const a={id:t("id"),height:o};Qe(t("parent"),a)})},setCloseTimer({refs:e}){e.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:e,refs:t,prop:n}){t.set("closeTimerStartTime",Date.now()),e.set("remainingTime",Ee(n("duration"),n("type")))},syncRemainingTime({context:e,refs:t}){e.set("remainingTime",n=>{const r=t.get("closeTimerStartTime"),s=Date.now()-r;return t.set("lastCloseStartTimerStartTime",Date.now()),n-s})},notifyParentToRemove({prop:e}){e("parent").send({type:"TOAST.REMOVE",id:e("id")})},invokeOnDismiss({prop:e,event:t}){var n;(n=e("onStatusChange"))==null||n({status:"dismissing",src:t.src})},invokeOnUnmount({prop:e}){var t;(t=e("onStatusChange"))==null||t({status:"unmounted"})},invokeOnVisible({prop:e}){var t;(t=e("onStatusChange"))==null||t({status:"visible"})}}}};function Qe(e,t){const{id:n,height:r}=t;e.context.set("heights",s=>s.find(a=>a.id===n)?s.map(a=>a.id===n?{...a,height:r}:a):[{id:n,height:r},...s])}var fr=(e,t)=>({...t,...dt(e)});function gr(e={}){const t=fr(e,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let n=[],r=[],s=new Set,o=[];const a=c=>(n.push(c),()=>{const u=n.indexOf(c);n.splice(u,1)}),i=c=>(n.forEach(u=>u(c)),c),d=c=>{if(r.length>=t.max){o.push(c);return}i(c),r.unshift(c)},g=()=>{for(;o.length>0&&r.length<t.max;){const c=o.shift();c&&(i(c),r.unshift(c))}},p=c=>{const u=c.id??`toast:${lt()}`,M=r.find(R=>R.id===u);return s.has(u)&&s.delete(u),M?r=r.map(R=>R.id===u?i({...R,...c,id:u}):R):d({id:u,duration:t.duration,removeDelay:t.removeDelay,type:"info",...c,stacked:!t.overlap,gap:t.gap}),u},m=c=>(s.add(c),c?(n.forEach(u=>u({id:c,dismiss:!0})),r=r.filter(u=>u.id!==c),g()):(r.forEach(u=>{n.forEach(M=>M({id:u.id,dismiss:!0}))}),r=[],o=[]),c);return{attrs:t,subscribe:a,create:p,update:(c,u)=>p({id:c,...u}),remove:m,dismiss:c=>{c!=null?r=r.map(u=>u.id===c?i({...u,message:"DISMISS"}):u):r=r.map(u=>i({...u,message:"DISMISS"}))},error:c=>p({...c,type:"error"}),success:c=>p({...c,type:"success"}),info:c=>p({...c,type:"info"}),warning:c=>p({...c,type:"warning"}),loading:c=>p({...c,type:"loading"}),getVisibleToasts:()=>r.filter(c=>!s.has(c.id)),getCount:()=>r.length,promise:(c,u,M={})=>{if(!u||!u.loading){xe("[zag-js > toast] toaster.promise() requires at least a 'loading' option to be specified");return}const R=p({...M,...u.loading,promise:c,type:"loading"});let _=!0,X;const vt=te(c).then(async A=>{if(X=["resolve",A],pr(A)&&!A.ok){_=!1;const F=te(u.error,`HTTP Error! status: ${A.status}`);p({...M,...F,id:R,type:"error"})}else if(u.success!==void 0){_=!1;const F=te(u.success,A);p({...M,...F,id:R,type:"success"})}}).catch(async A=>{if(X=["reject",A],u.error!==void 0){_=!1;const F=te(u.error,A);p({...M,...F,id:R,type:"error"})}}).finally(()=>{var A;_&&m(R),(A=u.finally)==null||A.call(u)});return{id:R,unwrap:()=>new Promise((A,F)=>vt.then(()=>X[0]==="reject"?F(X[1]):A(X[1])).catch(F))}},pause:c=>{c!=null?r=r.map(u=>u.id===c?i({...u,message:"PAUSE"}):u):r=r.map(u=>i({...u,message:"PAUSE"}))},resume:c=>{c!=null?r=r.map(u=>u.id===c?i({...u,message:"RESUME"}):u):r=r.map(u=>i({...u,message:"RESUME"}))},isVisible:c=>!s.has(c)&&!!r.find(u=>u.id===c),isDismissed:c=>s.has(c),expand:()=>{r=r.map(c=>i({...c,stacked:!0}))},collapse:()=>{r=r.map(c=>i({...c,stacked:!1}))}}}var pr=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",ws={connect:ur,machine:lr};function hr(e={}){return gr(e)}const ht=hr({placement:"top"});function Ss(e){return ht.getVisibleToasts().find(t=>t.id===e)!==void 0}const I={},mt={visualization:"",application:(I==null?void 0:I.VITE_RESOURCE_APP)||"",aggregate:(I==null?void 0:I.VITE_RESOURCE_AGGREGATE)||"",search:(I==null?void 0:I.VITE_RESOURCE_SEARCH)||"355be0bb-94bb-4652-a731-8866e8bc76a4",hpdsOpen:"",hpdsAuth:"355be0bb-94bb-4652-a731-8866e8bc76a4",hpdsOpenV3:(I==null?void 0:I.VITE_RESOURCE_OPEN_V3_HPDS)||"",queryIdGen:(I==null?void 0:I.VITE_RESOURCE_QUERY_ID_GEN)||"",queryable:[]},mr=ne(Promise.resolve()),Te=ne(mt);function ks(e=!1){const t=re(Te);return oe.federated?t.queryable:[e?{name:"hpdsOpen",uuid:t.hpdsOpen}:{name:"hpds",uuid:t.hpdsAuth}]}async function yr(){if(re(Te).queryable.length>0)return;const e=mt;oe.federated&&await ae(Ot.Resources).then(t=>{e.queryable=t.filter(({hidden:n,resourceRSPath:r})=>!n&&r.includes("passthru")).map(({name:n,uuid:r})=>({name:n,uuid:r}))}).catch(()=>ht.error({description:"Failed to load remote resource list."})),Te.set(e),console.debug("Resources",e)}async function Is(){mr.set(yr())}function Er(e,t){const n=ne(!!localStorage.getItem(e));return window.addEventListener("storage",r=>{r.key===e&&n.set(!!r.newValue)}),n}const Ae=Er("token"),C=ne(Tr()),Os=se(C,e=>{var t;return(t=e==null?void 0:e.privileges)==null?void 0:t.includes(we.SUPER)}),xs=se(C,e=>{var t;return(t=e==null?void 0:e.privileges)==null?void 0:t.includes(we.ADMIN)}),br=se(Ae,e=>e);C.subscribe(e=>{{Et();const t={...e};t.token=void 0,localStorage.setItem("user",JSON.stringify(t))}});function vr(e){localStorage.setItem("token",e),Ae.set(!0)}function As(){return localStorage.getItem("token")||""}function yt(){localStorage.removeItem("token"),Ae.set(!1)}function Tr(){if(localStorage.getItem("user")){Et();try{const e=JSON.parse(localStorage.getItem("user")||"{}");return!e||Object.keys(e).length===0?{}:(console.log("Restored user from local storage: ",e),e)}catch(e){return console.error("Error reading user from local storage:  "+e),{}}}return{}}function Ps(){return!!localStorage.getItem("token")}function Et(){{const e=localStorage.getItem("token");e&&kr(e)&&(console.log("Clearing expired token from local storage."),yt())}}const Rs=se([C,br],([e,t])=>{const n=(e==null?void 0:e.privileges)||[];if(n.length===0||!t)return Re.filter(a=>!a.privilege);function r(a){return a.filter(i=>i.feature?!!oe[i.feature]:!0).map(i=>i.children?{...i,children:r(i.children)}:i)}const s=r(Re);if(n.includes(we.SUPER))return s;function o(a){return a.filter(i=>i.privilege?i.privilege.some(d=>n.includes(d)):!0).map(i=>i.children?{...i,children:o(i.children)}:i)}return o(s)});async function wr(e,t=!1){{const n=await ae(`${Se.User.Me}${t?"?hasToken":""}`);if(n.privileges&&n.token){for(const r of n.privileges)if(r.includes(Pe.PRIV_MANAGED)){n.privileges.push(Pe.AUTHORIZED_ACCESS);break}}C.set({...re(C),...n})}}function Ls(){return ae(Se.User.Refresh).then(e=>{if(!e.userLongTermToken)throw new Error("No user token was returned.");return C.set({...re(C),token:e.userLongTermToken}),e.userLongTermToken})}async function Sr(e){e&&(vr(e),await wr(!0,!1))}async function ze(e,t=!1){function n(r){console.error("Error logging out: "+r),Je(t)}localStorage.getItem("token")&&(await ae(Se.User.Logout).catch(n),yt()),e?await e.logout().then(r=>{typeof r=="string"?(C.set({}),location.replace(r)):n(r)}).catch(n):Je(t)}function Je(e){C.set({}),e?Le(`/login?redirectTo=${encodeURIComponent(Ze.url.pathname)}`):Le("/login")}function kr(e){try{return bt(e)<new Date().getTime()}catch(t){return console.error("Error checking token expiration: "+t),!0}}function bt(e){if(!e)throw new Error("No token provided.");try{return JSON.parse(atob(e.split(".")[1])).exp*1e3}catch(t){throw new Error("Error parsing token: "+t)}}function Ds(e){try{return new Date(bt(e))}catch(t){console.error("Error getting token expiration as date: "+t);return}}export{Zr as $,hs as A,ft as B,Gr as C,sn as D,Kr as E,Jr as F,j as G,rs as H,Y as I,Vr as J,Ps as K,Ts as L,vs as M,ws as N,ze as O,Se as P,As as Q,br as R,ms as S,$r as T,ts as U,Xr as V,N as W,es as X,_r as Y,zr as Z,Tn as _,Os as a,fn as a0,is as a1,os as a2,Ur as a3,qr as a4,K as a5,Hr as a6,gs as a7,gn as a8,pn as a9,Yr as aA,Qr as aB,Rs as aC,Wr as aa,P as ab,rt as ac,et as ad,J as ae,ns as af,wn as ag,Wt as ah,Br as ai,bs as aj,ls as ak,ct as al,Oe as am,fs as an,Un as ao,ss as ap,me as aq,xe as ar,ys as as,Es as at,dt as au,ps as av,us as aw,ds as ax,as as ay,cs as az,xs as b,Mr as c,Cr as d,Is as e,mr as f,ae as g,Ss as h,kr as i,ks as j,Ot as k,Sr as l,Ds as m,wr as n,Ls as o,Fr as p,bt as q,Te as r,vr as s,ht as t,C as u,L as v,U as w,jr as x,z as y,le as z};
