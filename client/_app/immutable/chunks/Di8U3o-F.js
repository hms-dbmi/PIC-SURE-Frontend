var V=Object.defineProperty;var v=(e,t,a)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var r=(e,t,a)=>v(e,typeof t!="symbol"?t+"":t,a);import{a as n}from"./DOzTaxCY.js";import{r as p}from"./CseAM1pm.js";import"./C0bL_-nh.js";import{f as q,h as I}from"./BMqPqffq.js";class u{constructor(t){r(this,"categoryFilters");r(this,"numericFilters");r(this,"requiredFields");r(this,"anyRecordOf");r(this,"fields");r(this,"crossCountFields");r(this,"variantInfoFilters");r(this,"expectedResultType");var s;this.categoryFilters=(t==null?void 0:t.categoryFilters)||{},this.numericFilters=(t==null?void 0:t.numericFilters)||{},this.requiredFields=(t==null?void 0:t.requiredFields)||[],this.anyRecordOf=(t==null?void 0:t.anyRecordOf)||[],this.crossCountFields=(t==null?void 0:t.crossCountFields)||void 0,this.fields=(t==null?void 0:t.fields)||[];const a=((s=t==null?void 0:t.variantInfoFilters)==null?void 0:s[0])||{categoryVariantInfoFilters:{},numericVariantInfoFilters:{}};this.variantInfoFilters=[a],this.expectedResultType=(t==null?void 0:t.expectedResultType)||"COUNT"}addCategoryFilter(t,a){this.categoryFilters[t]=a}removeCategoryFilter(t){delete this.categoryFilters[t]}addNumericFilter(t,a,s){this.numericFilters[t]={min:a.toString(),max:s.toString()}}addCategoryVariantInfoFilters(t){this.variantInfoFilters[0].categoryVariantInfoFilters={Gene_with_variant:t.Gene_with_variant,Variant_consequence_calculated:t.Variant_consequence_calculated,Variant_frequency_as_text:t.Variant_frequency_as_text}}setCrossCountFields(t){this.crossCountFields=t}addSnpFilter(t){t.forEach(a=>{this.categoryFilters[a.search]=a.constraint.split(",")})}addRequiredField(t){this.requiredFields.push(t)}addAnyRecordOf(t){this.anyRecordOf.push(t)}hasFilter(){var i,o,c,l,d,h,F,_,f;const t=((c=(o=(i=this.variantInfoFilters[0])==null?void 0:i.categoryVariantInfoFilters)==null?void 0:o.Gene_with_variant)==null?void 0:c.length)||0,a=((h=(d=(l=this.variantInfoFilters[0])==null?void 0:l.categoryVariantInfoFilters)==null?void 0:d.Variant_consequence_calculated)==null?void 0:h.length)||0,s=((f=(_=(F=this.variantInfoFilters[0])==null?void 0:F.categoryVariantInfoFilters)==null?void 0:_.Variant_frequency_as_text)==null?void 0:f.length)||0;return Object.keys(this.categoryFilters).length+Object.keys(this.numericFilters).length+t+a+s+this.requiredFields.length+this.anyRecordOf.length}}const C="\\DCC Harmonized data set",R="\\_harmonized_consent\\",x="\\_topmed_consents\\";function P(e=!0,t=n.hpds,a="COUNT"){let s=new u;return p(q).forEach(i=>{i.filterType==="Categorical"?i.displayType==="restrict"?s.addCategoryFilter(i.id,i.categoryValues):s.addRequiredField(i.id):i.filterType==="numeric"?s.addNumericFilter(i.id,i.min||"",i.max||""):i.filterType==="genomic"?s.addCategoryVariantInfoFilters({Gene_with_variant:i.Gene_with_variant,Variant_consequence_calculated:i.Variant_consequence_calculated,Variant_frequency_as_text:i.Variant_frequency_as_text}):i.filterType==="snp"&&s.addSnpFilter(i.snpValues)}),s.expectedResultType=a,{query:s,resourceUUID:t}}function N(e=!1,t="COUNT"){const a=e?n.openHPDS:n.hpds;let s=new u;return s.expectedResultType=t,{query:s,resourceUUID:a}}const S=e=>(!g(e.categoryFilters)&&!g(e.numericFilters)&&!m(e.fields)&&!m(e.requiredFields)&&e.removeCategoryFilter(R),p(I)||e.removeCategoryFilter(x),e),g=e=>Object.keys(e).some(t=>t.includes(C)),m=e=>e.some(t=>t.includes(C));export{u as Q,N as a,P as g,S as u};
