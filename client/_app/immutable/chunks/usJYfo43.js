import{s as Ce,O as Ie,e as g,a as T,c as k,b as w,g as S,f as p,m as v,i as I,h,P as Te,Q as Se,R as Pe,k as ce,B as ge,S as Lt,M as We,N as Xe,T as dt,y as Bt,t as H,d as q,J as Je,j as ne,z as be,q as se,K as Mt,A as ke,a6 as jt,n as U,a5 as Ut,l as z,u as fe,w as mt,o as pt,r as Ke,_ as Me,$ as je}from"./DfqJWsAP.js";import{h as Ae,u as Ft}from"./Cn0d3STq.js";import{S as ye,i as Ee,t as C,g as re,a as E,b as ae,h as _t,c as ht,d as R,e as L,m as B,f as M,j as Ue}from"./B9sU1H0B.js";import{p as he}from"./BB8gGrUk.js";import{b as Ht}from"./Bt-Xh7oU.js";import{e as Ye}from"./CnUKkpeB.js";import{a as xe}from"./BuTMWYot.js";import{w as qt,g as Ot}from"./DA0IzwqI.js";import{A as He}from"./Ds32ilcv.js";import{T as zt}from"./BOL4pBGU.js";import{E as bt}from"./ccPytXEo.js";import{f as vt,t as gt}from"./BxMVHhPd.js";import{U as kt}from"./CHNvKs8V.js";import{C as Gt}from"./UvObm0y6.js";import{g as $t}from"./BWY6sm7c.js";import{g as Qt}from"./D4yaORjf.js";import"./8fc_wYz-.js";import{P as Ve}from"./hZi8C6Ly.js";import{T as Wt,a as Fe,C as Ct,c as Ne}from"./Bs3A0dnl.js";import{E as qe}from"./P0CHC8Ln.js";import{C as Ze}from"./C3MdgBKm.js";import{Q as Xt}from"./DJE4AZMh.js";import{a as Jt,b as et,f as ve,s as Kt}from"./DXXfEZPn.js";import{s as Yt}from"./CWplMVgD.js";import{v as Zt}from"./DvF23Exx.js";const me=qt({current:0,total:0});function tt(s,e,t){const l=s.slice();return l[10]=e[t],l}function lt(s){let e,t,l,r,a=Ye(Array.from(Array(s[0].total).keys())),n=[];for(let o=0;o<a.length;o+=1)n[o]=rt(tt(s,a,o));return{c(){e=g("header");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=k(o,"HEADER",{class:!0});var i=w(e);for(let c=0;c<n.length;c+=1)n[c].l(i);i.forEach(p),this.h()},h(){v(e,"class","stepper-header flex items-center border-t mt-[15px] mb-7 border-surface-400-500-token gap-4")},m(o,i){I(o,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);r=!0},p(o,i){if(i&3){a=Ye(Array.from(Array(o[0].total).keys()));let c;for(c=0;c<a.length;c+=1){const d=tt(o,a,c);n[c]?n[c].p(d,i):(n[c]=rt(d),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=a.length}},i(o){r||(o&&dt(()=>{r&&(l&&l.end(1),t=_t(e,xe,{duration:100}),t.start())}),r=!0)},o(o){t&&t.invalidate(),o&&(l=ht(e,xe,{duration:100})),r=!1},d(o){o&&p(e),Bt(n,o),o&&l&&l.end()}}}function rt(s){let e,t,l=(s[1](s[10])?`Step ${s[10]+1}`:s[10]+1)+"",r,a,n;return{c(){e=g("div"),t=g("span"),r=H(l),n=T(),this.h()},l(o){e=k(o,"DIV",{class:!0});var i=w(e);t=k(i,"SPAN",{class:!0});var c=w(t);r=q(c,l),c.forEach(p),n=S(i),i.forEach(p),this.h()},h(){v(t,"class",a="badge text-sm "+(s[1](s[10])?"variant-filled-primary":"variant-filled-surface")),v(e,"class","stepper-header-step -mt-[15px] transition-all duration-300"),Je(e,"flex-1",s[1](s[10]))},m(o,i){I(o,e,i),h(e,t),h(t,r),h(e,n)},p(o,i){i&3&&l!==(l=(o[1](o[10])?`Step ${o[10]+1}`:o[10]+1)+"")&&ne(r,l),i&3&&a!==(a="badge text-sm "+(o[1](o[10])?"variant-filled-primary":"variant-filled-surface"))&&v(t,"class",a),i&3&&Je(e,"flex-1",o[1](o[10]))},d(o){o&&p(e)}}}function el(s){let e,t,l,r,a,n=s[0].total&&lt(s);const o=s[5].default,i=Ie(o,s,s[4],null);return{c(){e=g("div"),n&&n.c(),t=T(),l=g("div"),i&&i.c(),this.h()},l(c){e=k(c,"DIV",{class:!0,"data-testid":!0});var d=w(e);n&&n.l(d),t=S(d),l=k(d,"DIV",{class:!0});var f=w(l);i&&i.l(f),f.forEach(p),d.forEach(p),this.h()},h(){v(l,"class","stepper-content"),v(e,"class",r="stepper space-y-4 "+(s[2].class??"")),v(e,"data-testid","stepper")},m(c,d){I(c,e,d),n&&n.m(e,null),h(e,t),h(e,l),i&&i.m(l,null),a=!0},p(c,[d]){c[0].total?n?(n.p(c,d),d&1&&C(n,1)):(n=lt(c),n.c(),C(n,1),n.m(e,t)):n&&(re(),E(n,1,1,()=>{n=null}),ae()),i&&i.p&&(!a||d&16)&&Te(i,o,c,c[4],a?Pe(o,c[4],d,null):Se(c[4]),null),(!a||d&4&&r!==(r="stepper space-y-4 "+(c[2].class??"")))&&v(e,"class",r)},i(c){a||(C(n),C(i,c),a=!0)},o(c){E(n),E(i,c),a=!1},d(c){c&&p(e),n&&n.d(),i&&i.d(c)}}}function tl(s,e,t){let l,r;ce(s,me,u=>t(0,r=u));let{$$slots:a={},$$scope:n}=e,{buttonCompleteLabel:o=""}=e;ge("buttonCompleteLabel",o),ge("state",me);const i=Lt();async function c(u){await new Promise(_=>setTimeout(_)),!u&&(i("next",{step:r.current,state:r}),be(me,r.current++,r))}function d(){i("back",{step:r.current,state:r}),be(me,r.current=r.current===1?0:r.current-1,r)}function f(u,_){_||i("complete",{step:u,state:r})}return ge("onBack",d),ge("onNext",c),ge("onComplete",f),s.$$set=u=>{t(2,e=We(We({},e),Xe(u))),"buttonCompleteLabel"in u&&t(3,o=u.buttonCompleteLabel),"$$scope"in u&&t(4,n=u.$$scope)},s.$$.update=()=>{s.$$.dirty&1&&t(1,l=u=>u===r.current)},e=Xe(e),[r,l,e,o,n,a]}class ll extends ye{constructor(e){super(),Ee(this,e,tl,el,Ce,{buttonCompleteLabel:3})}}const rl=s=>({}),at=s=>({}),al=s=>({}),nt=s=>({});function st(s){let e,t,l,r,a,n;const o=s[9].header,i=Ie(o,s,s[13],nt),c=s[9].default,d=Ie(c,s,s[13],null),f=d||nl(s);let u=s[6].total>1&&ot(s);return{c(){e=g("div"),t=g("header"),i&&i.c(),l=T(),r=g("div"),f&&f.c(),a=T(),u&&u.c(),this.h()},l(_){e=k(_,"DIV",{class:!0,"data-testid":!0});var b=w(e);t=k(b,"HEADER",{class:!0});var D=w(t);i&&i.l(D),D.forEach(p),l=S(b),r=k(b,"DIV",{class:!0});var m=w(r);f&&f.l(m),m.forEach(p),a=S(b),u&&u.l(b),b.forEach(p),this.h()},h(){v(t,"class","step-header text-2xl font-bold"),v(r,"class","step-content space-y-4 px-2"),v(e,"class","step space-y-4"),v(e,"data-testid","step-"+(s[7]+1))},m(_,b){I(_,e,b),h(e,t),i&&i.m(t,null),h(e,l),h(e,r),f&&f.m(r,null),h(e,a),u&&u.m(e,null),n=!0},p(_,b){i&&i.p&&(!n||b&8192)&&Te(i,o,_,_[13],n?Pe(o,_[13],b,al):Se(_[13]),nt),d&&d.p&&(!n||b&8192)&&Te(d,c,_,_[13],n?Pe(c,_[13],b,null):Se(_[13]),null),_[6].total>1?u?(u.p(_,b),b&64&&C(u,1)):(u=ot(_),u.c(),C(u,1),u.m(e,null)):u&&(re(),E(u,1,1,()=>{u=null}),ae())},i(_){n||(C(i,_),C(f,_),C(u),n=!0)},o(_){E(i,_),E(f,_),E(u),n=!1},d(_){_&&p(e),i&&i.d(_),f&&f.d(_),u&&u.d()}}}function nl(s){let e,t=s[7]+1+"",l,r;return{c(){e=H("(Step "),l=H(t),r=H(" Content)")},l(a){e=q(a,"(Step "),l=q(a,t),r=q(a," Content)")},m(a,n){I(a,e,n),I(a,l,n),I(a,r,n)},p:U,d(a){a&&(p(e),p(l),p(r))}}}function ot(s){let e,t,l,r,a,n,o,i,c;const d=[il,ol,sl],f=[];function u(m,$){return m[8].navigation?0:m[7]!==0?1:2}t=u(s),l=f[t]=d[t](s);const _=[ul,fl],b=[];function D(m,$){return m[7]<m[6].total-1?0:1}return a=D(s),n=b[a]=_[a](s),{c(){e=g("div"),l.c(),r=T(),n.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var $=w(e);l.l($),r=S($),n.l($),$.forEach(p),this.h()},h(){v(e,"class","step-navigation flex justify-between gap-4")},m(m,$){I(m,e,$),f[t].m(e,null),h(e,r),b[a].m(e,null),c=!0},p(m,$){let V=t;t=u(m),t===V?f[t].p(m,$):(re(),E(f[V],1,1,()=>{f[V]=null}),ae(),l=f[t],l?l.p(m,$):(l=f[t]=d[t](m),l.c()),C(l,1),l.m(e,r));let P=a;a=D(m),a===P?b[a].p(m,$):(re(),E(b[P],1,1,()=>{b[P]=null}),ae(),n=b[a],n?n.p(m,$):(n=b[a]=_[a](m),n.c()),C(n,1),n.m(e,null))},i(m){c||(C(l),C(n),m&&dt(()=>{c&&(i&&i.end(1),o=_t(e,xe,{duration:100}),o.start())}),c=!0)},o(m){E(l),E(n),o&&o.invalidate(),m&&(i=ht(e,xe,{duration:100})),c=!1},d(m){m&&p(e),f[t].d(),b[a].d(),m&&i&&i.end()}}}function sl(s){let e;return{c(){e=g("div")},l(t){e=k(t,"DIV",{}),w(e).forEach(p)},m(t,l){I(t,e,l)},p:U,i:U,o:U,d(t){t&&p(e)}}}function ol(s){let e,t;return e=new He({props:{disabled:s[6].current===0,$$slots:{default:[cl]},$$scope:{ctx:s}}}),e.$on("click",s[10]),{c(){R(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){B(e,l,r),t=!0},p(l,r){const a={};r&64&&(a.disabled=l[6].current===0),r&8192&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function il(s){let e,t;const l=s[9].navigation,r=Ie(l,s,s[13],at);return{c(){e=g("div"),r&&r.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var n=w(e);r&&r.l(n),n.forEach(p),this.h()},h(){v(e,"class","step-navigation-slot")},m(a,n){I(a,e,n),r&&r.m(e,null),t=!0},p(a,n){r&&r.p&&(!t||n&8192)&&Te(r,l,a,a[13],t?Pe(l,a[13],n,rl):Se(a[13]),at)},i(a){t||(C(r,a),t=!0)},o(a){E(r,a),t=!1},d(a){a&&p(e),r&&r.d(a)}}}function cl(s){let e;return{c(){e=H("Back")},l(t){e=q(t,"Back")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function fl(s){let e,t;return e=new He({props:{name:s[1]||"complete",angle:"right",variant:"filled",disabled:s[0],$$slots:{default:[dl]},$$scope:{ctx:s}}}),e.$on("click",s[12]),{c(){R(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){B(e,l,r),t=!0},p(l,r){const a={};r&2&&(a.name=l[1]||"complete"),r&1&&(a.disabled=l[0]),r&8194&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function ul(s){let e,t;return e=new He({props:{name:"next",angle:"right",variant:"filled",disabled:s[0],$$slots:{default:[ml]},$$scope:{ctx:s}}}),e.$on("click",s[11]),{c(){R(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){B(e,l,r),t=!0},p(l,r){const a={};r&1&&(a.disabled=l[0]),r&8192&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function dl(s){let e=(s[1]||"Complete")+"",t;return{c(){t=H(e)},l(l){t=q(l,e)},m(l,r){I(l,t,r)},p(l,r){r&2&&e!==(e=(l[1]||"Complete")+"")&&ne(t,e)},d(l){l&&p(t)}}}function ml(s){let e;return{c(){e=H("Next")},l(t){e=q(t,"Next")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function pl(s){let e,t,l=s[7]===s[6].current&&st(s);return{c(){l&&l.c(),e=se()},l(r){l&&l.l(r),e=se()},m(r,a){l&&l.m(r,a),I(r,e,a),t=!0},p(r,[a]){r[7]===r[6].current?l?(l.p(r,a),a&64&&C(l,1)):(l=st(r),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(re(),E(l,1,1,()=>{l=null}),ae())},i(r){t||(C(l),t=!0)},o(r){E(l),t=!1},d(r){r&&p(e),l&&l.d(r)}}}function _l(s,e,t){let l,r=U,a=()=>(r(),r=Ut(f,P=>t(6,l=P)),f);s.$$.on_destroy.push(()=>r());let{$$slots:n={},$$scope:o}=e;const i=Mt(n);let{locked:c=!1}=e,{buttonCompleteLabel:d=ke("buttonCompleteLabel")}=e,{state:f=ke("state")}=e;a();let{onNext:u=ke("onNext")}=e,{onBack:_=ke("onBack")}=e,{onComplete:b=ke("onComplete")}=e;const D=l.total;be(f,l.total++,l),jt(()=>{be(f,l.total--,l)});const m=()=>_(),$=()=>u(c),V=()=>b(D,c);return s.$$set=P=>{"locked"in P&&t(0,c=P.locked),"buttonCompleteLabel"in P&&t(1,d=P.buttonCompleteLabel),"state"in P&&a(t(2,f=P.state)),"onNext"in P&&t(3,u=P.onNext),"onBack"in P&&t(4,_=P.onBack),"onComplete"in P&&t(5,b=P.onComplete),"$$scope"in P&&t(13,o=P.$$scope)},[c,d,f,u,_,b,l,D,i,n,m,$,V,o]}class $e extends ye{constructor(e){super(),Ee(this,e,_l,pl,Ce,{locked:0,buttonCompleteLabel:1,state:2,onNext:3,onBack:4,onComplete:5})}}function hl(s){let e,t,l,r='<label for="summary" class="mr-8 font-bold">Summary:</label>',a,n,o,i,c,d,f="Participants",u,_,b,D,m,$,V="Variables",P,x,N,Z,K,Q,Y="Data Points";return{c(){e=g("div"),t=g("div"),l=g("div"),l.innerHTML=r,a=T(),n=g("div"),o=g("span"),i=H(s[1]),c=T(),d=g("label"),d.textContent=f,u=T(),_=g("div"),b=g("span"),D=H(s[0]),m=T(),$=g("label"),$.textContent=V,P=T(),x=g("div"),N=g("span"),Z=H(s[2]),K=T(),Q=g("label"),Q.textContent=Y,this.h()},l(W){e=k(W,"DIV",{id:!0,class:!0});var ee=w(e);t=k(ee,"DIV",{id:!0,class:!0});var te=w(t);l=k(te,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-1vd72fa"&&(l.innerHTML=r),a=S(te),n=k(te,"DIV",{class:!0});var F=w(n);o=k(F,"SPAN",{id:!0,class:!0});var X=w(o);i=q(X,s[1]),X.forEach(p),c=S(F),d=k(F,"LABEL",{for:!0,"data-svelte-h":!0}),z(d)!=="svelte-1te5h4m"&&(d.textContent=f),F.forEach(p),u=S(te),_=k(te,"DIV",{class:!0});var J=w(_);b=k(J,"SPAN",{id:!0,class:!0});var le=w(b);D=q(le,s[0]),le.forEach(p),m=S(J),$=k(J,"LABEL",{for:!0,"data-svelte-h":!0}),z($)!=="svelte-j0nyhs"&&($.textContent=V),J.forEach(p),P=S(te),x=k(te,"DIV",{class:!0});var oe=w(x);N=k(oe,"SPAN",{id:!0,class:!0});var ie=w(N);Z=q(ie,s[2]),ie.forEach(p),K=S(oe),Q=k(oe,"LABEL",{for:!0,"data-svelte-h":!0}),z(Q)!=="svelte-kgfncs"&&(Q.textContent=Y),oe.forEach(p),te.forEach(p),ee.forEach(p),this.h()},h(){v(l,"class","text-xl"),v(o,"id","participants"),v(o,"class","mr-2"),v(d,"for","participants"),v(n,"class","flex justify-left text-xl font-light"),v(b,"id","variables"),v(b,"class","mr-2"),v($,"for","variables"),v(_,"class","flex justify-left text-xl font-light"),v(N,"id","dataPoints"),v(N,"class","mr-2"),v(Q,"for","dataPoints"),v(x,"class","flex justify-left text-xl font-light"),v(t,"id","summary"),v(t,"class","w-full grid grid-flow-col auto-cols-auto"),v(e,"id","stats"),v(e,"class","w-full flex justify-evenly mb-5 pb-2 svelte-11yjabd")},m(W,ee){I(W,e,ee),h(e,t),h(t,l),h(t,a),h(t,n),h(n,o),h(o,i),h(n,c),h(n,d),h(t,u),h(t,_),h(_,b),h(b,D),h(_,m),h(_,$),h(t,P),h(t,x),h(x,N),h(N,Z),h(x,K),h(x,Q)},p(W,[ee]){ee&2&&ne(i,W[1]),ee&1&&ne(D,W[0]),ee&4&&ne(Z,W[2])},i:U,o:U,d(W){W&&p(e)}}}function bl(s,e,t){let l,r,a,n,o,i;ce(s,vt,d=>t(5,o=d)),ce(s,gt,d=>t(6,i=d));let{exports:c}=bt;return ce(s,c,d=>t(4,n=d)),s.$$.update=()=>{s.$$.dirty&64&&t(1,l=i),s.$$.dirty&48&&t(0,r=o.length+n.length),s.$$.dirty&3&&t(2,a=typeof l=="number"?l*r:0)},[r,l,a,c,n,o,i]}class Re extends ye{constructor(e){super(),Ee(this,e,bl,hl,Ce,{})}}async function vl(s,e){if(e===""&&e.trim()==="")throw"Please input a Dataset ID name";const t=/^[\w \-\\/?+=[\].():"']+$/g;if(!e.match(t))throw`Name can only contain letters, numbers, and these special symbols - ? + = [ ] . ( ) : ' "`;return await he("picsure/dataset/named",{queryId:s,name:e})}function gl(s){let e,t,l,r,a,n,o,i,c,d,f,u;return{c(){e=g("div"),t=g("p"),l=H(s[0]),r=T(),a=g("div"),n=g("button"),o=H(s[3]),i=T(),c=g("button"),d=H(s[4]),this.h()},l(_){e=k(_,"DIV",{class:!0});var b=w(e);t=k(b,"P",{});var D=w(t);l=q(D,s[0]),D.forEach(p),r=S(b),a=k(b,"DIV",{class:!0});var m=w(a);n=k(m,"BUTTON",{class:!0});var $=w(n);o=q($,s[3]),$.forEach(p),i=S(m),c=k(m,"BUTTON",{class:!0});var V=w(c);d=q(V,s[4]),V.forEach(p),m.forEach(p),b.forEach(p),this.h()},h(){v(n,"class","btn variant-ghost-surface hover:variant-filled-surface mt-6"),v(c,"class","btn variant-filled hover:variant-filled-primary mt-6"),v(a,"class","flex justify-end gap-4"),v(e,"class","flex flex-col gap-4")},m(_,b){I(_,e,b),h(e,t),h(t,l),h(e,r),h(e,a),h(a,n),h(n,o),h(a,i),h(a,c),h(c,d),f||(u=[fe(n,"click",s[6]),fe(c,"click",s[7])],f=!0)},p(_,[b]){b&1&&ne(l,_[0]),b&8&&ne(o,_[3]),b&16&&ne(d,_[4])},i:U,o:U,d(_){_&&p(e),f=!1,mt(u)}}}function kl(s,e,t){let l;const r=$t();ce(s,r,u=>t(8,l=u));let{message:a}=e,{onCancel:n=()=>r.close()}=e,{onConfirm:o}=e,{cancelText:i="Cancel"}=e,{confirmText:c="Accept"}=e;pt(()=>{var u,_,b,D,m,$,V,P,x,N;(u=l[0])!=null&&u.meta.onCancel&&t(1,n=(_=l[0])==null?void 0:_.meta.onCancel),(b=l[0])!=null&&b.meta.onConfirm&&t(2,o=(D=l[0])==null?void 0:D.meta.onConfirm),(m=l[0])!=null&&m.meta.confirmText&&t(4,c=($=l[0])==null?void 0:$.meta.confirmText),(V=l[0])!=null&&V.meta.cancelText&&t(3,i=(P=l[0])==null?void 0:P.meta.cancelText),(x=l[0])!=null&&x.meta.message&&t(0,a=(N=l[0])==null?void 0:N.meta.message)});const d=()=>n(),f=()=>o();return s.$$set=u=>{"message"in u&&t(0,a=u.message),"onCancel"in u&&t(1,n=u.onCancel),"onConfirm"in u&&t(2,o=u.onConfirm),"cancelText"in u&&t(3,i=u.cancelText),"confirmText"in u&&t(4,c=u.confirmText)},[a,n,o,i,c,r,d,f]}class $l extends ye{constructor(e){super(),Ee(this,e,kl,gl,Ce,{message:0,onCancel:1,onConfirm:2,cancelText:3,confirmText:4})}}function Cl(s){let e,t,l,r,a,n,o={ctx:s,current:null,token:null,hasCatch:!0,pending:Dl,then:wl,catch:El,blocks:[,,,]};Ae(e=s[5],o);const i=[Tl,Il],c=[];function d(f,u){return f[10]?1:0}return l=d(s),r=c[l]=i[l](s),{c(){o.block.c(),t=T(),r.c(),a=se()},l(f){o.block.l(f),t=S(f),r.l(f),a=se()},m(f,u){o.block.m(f,o.anchor=u),o.mount=()=>t.parentNode,o.anchor=t,I(f,t,u),c[l].m(f,u),I(f,a,u),n=!0},p(f,u){s=f,o.ctx=s,u[0]&32&&e!==(e=s[5])&&Ae(e,o);let _=l;l=d(s),l===_?c[l].p(s,u):(re(),E(c[_],1,1,()=>{c[_]=null}),ae(),r=c[l],r?r.p(s,u):(r=c[l]=i[l](s),r.c()),C(r,1),r.m(a.parentNode,a))},i(f){n||(C(o.block),C(r),n=!0)},o(f){for(let u=0;u<3;u+=1){const _=o.blocks[u];E(_)}E(r),n=!1},d(f){f&&(p(t),p(a)),o.block.d(f),o.token=null,o=null,c[l].d(f)}}}function yl(s){let e,t,l='<i class="fa-solid fa-triangle-exclamation text-4xl"></i>',r,a,n=`<h3 class="h3">Warning</h3> <p>Warning: Your selected data exceeds 1,000,000 estimated data points, which is too
                large to export. Please reduce the data selection or the number of selected
                participants.</p>`,o,i,c,d="Back",f,u;return{c(){e=g("aside"),t=g("div"),t.innerHTML=l,r=T(),a=g("div"),a.innerHTML=n,o=T(),i=g("div"),c=g("button"),c.textContent=d,this.h()},l(_){e=k(_,"ASIDE",{class:!0});var b=w(e);t=k(b,"DIV",{"data-svelte-h":!0}),z(t)!=="svelte-1dz1fc7"&&(t.innerHTML=l),r=S(b),a=k(b,"DIV",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-e8x9nn"&&(a.innerHTML=n),o=S(b),i=k(b,"DIV",{class:!0});var D=w(i);c=k(D,"BUTTON",{class:!0,"data-svelte-h":!0}),z(c)!=="svelte-1datm77"&&(c.textContent=d),D.forEach(p),b.forEach(p),this.h()},h(){v(a,"class","alert-message"),v(c,"class","btn variant-filled"),v(i,"class","alert-actions dark"),v(e,"class","alert variant-filled-error")},m(_,b){I(_,e,b),h(e,t),h(e,r),h(e,a),h(e,o),h(e,i),h(i,c),f||(u=fe(c,"click",s[28]),f=!0)},p:U,i:U,o:U,d(_){_&&p(e),f=!1,u()}}}function El(s){let e,t,l;return t=new qe({props:{title:`An error occurred while preparing your dataset. Please try again. If this problem persists, please
                  contact an administrator.`}}),{c(){e=g("div"),R(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var a=w(e);L(t.$$.fragment,a),a.forEach(p),this.h()},h(){v(e,"class","flex justify-center mb-4")},m(r,a){I(r,e,a),B(t,e,null),l=!0},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){E(t.$$.fragment,r),l=!1},d(r){r&&p(e),M(t)}}}function wl(s){return{c:U,l:U,m:U,i:U,o:U,d:U}}function Dl(s){let e,t,l,r="Preparing your dataset...",a;return e=new Ve({props:{width:"w-4"}}),{c(){R(e.$$.fragment),t=T(),l=g("div"),l.textContent=r},l(n){L(e.$$.fragment,n),t=S(n),l=k(n,"DIV",{"data-svelte-h":!0}),z(l)!=="svelte-1m53t1h"&&(l.textContent=r)},m(n,o){B(e,n,o),I(n,t,o),I(n,l,o),a=!0},i(n){a||(C(e.$$.fragment,n),a=!0)},o(n){E(e.$$.fragment,n),a=!1},d(n){n&&(p(t),p(l)),M(e,n)}}}function Il(s){let e,t,l,r,a="Loading sample IDs...",n;return t=new Ve({props:{width:"w-4"}}),{c(){e=g("div"),R(t.$$.fragment),l=T(),r=g("div"),r.textContent=a,this.h()},l(o){e=k(o,"DIV",{class:!0});var i=w(e);L(t.$$.fragment,i),l=S(i),r=k(i,"DIV",{"data-svelte-h":!0}),z(r)!=="svelte-jeedzs"&&(r.textContent=a),i.forEach(p),this.h()},h(){v(e,"class","flex justify-center items-center")},m(o,i){I(o,e,i),B(t,e,null),h(e,l),h(e,r),n=!0},p:U,i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){E(t.$$.fragment,o),n=!1},d(o){o&&p(e),M(t)}}}function Tl(s){let e,t,l,r;e=new zt({props:{tableName:"ExportSummary",data:s[1],columns:s[18]}});let a=ve.explorer.enableSampleIdCheckbox&&Sl(s);return{c(){R(e.$$.fragment),t=T(),a&&a.c(),l=se()},l(n){L(e.$$.fragment,n),t=S(n),a&&a.l(n),l=se()},m(n,o){B(e,n,o),I(n,t,o),a&&a.m(n,o),I(n,l,o),r=!0},p(n,o){const i={};o[0]&2&&(i.data=n[1]),e.$set(i),ve.explorer.enableSampleIdCheckbox&&a.p(n,o)},i(n){r||(C(e.$$.fragment,n),C(a),r=!0)},o(n){E(e.$$.fragment,n),E(a),r=!1},d(n){n&&(p(t),p(l)),M(e,n),a&&a.d(n)}}}function Sl(s){let e,t,l,r,a,n,o="Include sample identifiers",i;const c=[Al,Pl],d=[];function f(u,_){return u[11]?0:1}return l=f(s),r=d[l]=c[l](s),{c(){e=g("div"),t=g("label"),r.c(),a=T(),n=g("span"),n.textContent=o,this.h()},l(u){e=k(u,"DIV",{});var _=w(e);t=k(_,"LABEL",{for:!0,class:!0,"data-testid":!0});var b=w(t);r.l(b),a=S(b),n=k(b,"SPAN",{"data-svelte-h":!0}),z(n)!=="svelte-julkv0"&&(n.textContent=o),b.forEach(p),_.forEach(p),this.h()},h(){v(t,"for","sample-ids-checkbox"),v(t,"class","flex items-center"),v(t,"data-testid","sample-ids-label")},m(u,_){I(u,e,_),h(e,t),d[l].m(t,null),h(t,a),h(t,n),i=!0},p(u,_){let b=l;l=f(u),l===b?d[l].p(u,_):(re(),E(d[b],1,1,()=>{d[b]=null}),ae(),r=d[l],r?r.p(u,_):(r=d[l]=c[l](u),r.c()),C(r,1),r.m(t,a))},i(u){i||(C(r),i=!0)},o(u){E(r),i=!1},d(u){u&&p(e),d[l].d()}}}function Pl(s){let e,t,l;return{c(){e=g("input"),this.h()},l(r){e=k(r,"INPUT",{type:!0,class:!0,"data-testid":!0,id:!0}),this.h()},h(){v(e,"type","checkbox"),v(e,"class","mr-1 &[aria-disabled=“true”]:opacity-75"),v(e,"data-testid","sample-ids-checkbox"),v(e,"id","sample-ids-checkbox")},m(r,a){I(r,e,a),e.checked=s[9],t||(l=[fe(e,"change",s[29]),fe(e,"change",s[26])],t=!0)},p(r,a){a[0]&512&&(e.checked=r[9])},i:U,o:U,d(r){r&&p(e),t=!1,mt(l)}}}function Al(s){let e,t;return e=new Ve({props:{width:"w-4"}}),{c(){R(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){B(e,l,r),t=!0},p:U,i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function xl(s){let e,t,l,r,a,n,o;t=new Re({});const i=[yl,Cl],c=[];function d(f,u){return f[25]()?0:1}return a=d(s),n=c[a]=i[a](s),{c(){e=g("div"),R(t.$$.fragment),l=T(),r=g("section"),n.c(),this.h()},l(f){e=k(f,"DIV",{id:!0,class:!0});var u=w(e);L(t.$$.fragment,u),l=S(u),r=k(u,"SECTION",{class:!0});var _=w(r);n.l(_),_.forEach(p),u.forEach(p),this.h()},h(){v(r,"class","w-full"),v(e,"id","first-step-container"),v(e,"class","flex flex-col w-full h-full items-center")},m(f,u){I(f,e,u),B(t,e,null),h(e,l),h(e,r),c[a].m(r,null),o=!0},p(f,u){n.p(f,u)},i(f){o||(C(t.$$.fragment,f),C(n),o=!0)},o(f){E(t.$$.fragment,f),E(n),o=!1},d(f){f&&p(e),M(t),c[a].d()}}}function Nl(s){let e;return{c(){e=H("Review Cohort Details:")},l(t){e=q(t,"Review Cohort Details:")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function it(s){let e,t;return e=new $e({props:{$$slots:{header:[Rl],default:[Vl]},$$scope:{ctx:s}}}),{c(){R(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){B(e,l,r),t=!0},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Vl(s){let e,t,l,r,a=`<header class="card-header">Select <strong>additional variables</strong> you would like to be included in your final
            data export.</header> <hr/> <div class="card-body p-4">Tree Component Here</div>`,n;return t=new Re({}),{c(){e=g("section"),R(t.$$.fragment),l=T(),r=g("div"),r.innerHTML=a,this.h()},l(o){e=k(o,"SECTION",{class:!0});var i=w(e);L(t.$$.fragment,i),l=S(i),r=k(i,"DIV",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-1l9s757"&&(r.innerHTML=a),i.forEach(p),this.h()},h(){v(r,"class","w-full h-full m-2 card p-4"),v(e,"class","flex flex-col w-full h-full items-center")},m(o,i){I(o,e,i),B(t,e,null),h(e,l),h(e,r),n=!0},p:U,i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){E(t.$$.fragment,o),n=!1},d(o){o&&p(e),M(t)}}}function Rl(s){let e;return{c(){e=H("Finalize Data:")},l(t){e=q(t,"Finalize Data:")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function Ll(s){let e,t,l,r,a,n,o,i;return t=new Re({}),a=new Ze({props:{"data-testid":"csv-export-option",title:"Export as Data Frame or CSV",subtitle:"Export data as a Python or R data frame or a comma-separated values file",size:"other",class:"card variant-ringed-primary",active:s[2]==="DATAFRAME"}}),a.$on("click",s[30]),o=new Ze({props:{"data-testid":"csv-export-option",title:"Export as PFB",subtitle:"Export data in Portable Format for Biomedical Data file format",size:"other",class:"card variant-ringed-primary",active:s[2]==="DATAFRAME_PFB"}}),o.$on("click",s[31]),{c(){e=g("section"),R(t.$$.fragment),l=T(),r=g("div"),R(a.$$.fragment),n=T(),R(o.$$.fragment),this.h()},l(c){e=k(c,"SECTION",{class:!0});var d=w(e);L(t.$$.fragment,d),l=S(d),r=k(d,"DIV",{class:!0});var f=w(r);L(a.$$.fragment,f),n=S(f),L(o.$$.fragment,f),f.forEach(p),d.forEach(p),this.h()},h(){v(r,"class","grid gap-10 grid-cols-2"),v(e,"class","flex flex-col w-full h-full items-center")},m(c,d){I(c,e,d),B(t,e,null),h(e,l),h(e,r),B(a,r,null),h(r,n),B(o,r,null),i=!0},p(c,d){const f={};d[0]&4&&(f.active=c[2]==="DATAFRAME"),a.$set(f);const u={};d[0]&4&&(u.active=c[2]==="DATAFRAME_PFB"),o.$set(u)},i(c){i||(C(t.$$.fragment,c),C(a.$$.fragment,c),C(o.$$.fragment,c),i=!0)},o(c){E(t.$$.fragment,c),E(a.$$.fragment,c),E(o.$$.fragment,c),i=!1},d(c){c&&p(e),M(t),M(a),M(o)}}}function Bl(s){let e;return{c(){e=H("Review and Save Dataset:")},l(t){e=q(t,"Review and Save Dataset:")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function ct(s){let e,t,l;return t=new qe({props:{title:"Error",$$slots:{default:[Ml]},$$scope:{ctx:s}}}),{c(){e=g("div"),R(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var a=w(e);L(t.$$.fragment,a),a.forEach(p),this.h()},h(){v(e,"class","w-full h-full m-2")},m(r,a){I(r,e,a),B(t,e,null),l=!0},p(r,a){const n={};a[0]&256|a[1]&33554432&&(n.$$scope={dirty:a,ctx:r}),t.$set(n)},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){E(t.$$.fragment,r),l=!1},d(r){r&&p(e),M(t)}}}function Ml(s){let e;return{c(){e=H(s[8])},l(t){e=q(t,s[8])},m(t,l){I(t,e,l)},p(t,l){l[0]&256&&ne(e,t[8])},d(t){t&&p(e)}}}function jl(s){let e,t,l,r,a,n=`Save the information in your final data export by clicking the Save Dataset ID button.
          Navigate to the <a class="anchor" href="/dataset">Manage Datasets page</a> to view or manage
          your Dataset IDs.`,o,i,c,d,f,u,_,b,D="Dataset Name:",m,$,V,P,x,N,Z="Dataset ID:",K,Q,Y,W,ee,te;t=new Re({});let F=s[8]&&ct(s);return{c(){e=g("section"),R(t.$$.fragment),l=T(),r=g("div"),a=g("header"),a.innerHTML=n,o=T(),i=g("hr"),c=T(),F&&F.c(),d=T(),f=g("div"),u=g("div"),_=g("div"),b=g("label"),b.textContent=D,m=T(),$=g("input"),V=T(),P=g("div"),x=g("div"),N=g("label"),N.textContent=Z,K=T(),Q=g("div"),Y=H(s[14]),this.h()},l(X){e=k(X,"SECTION",{class:!0});var J=w(e);L(t.$$.fragment,J),l=S(J),r=k(J,"DIV",{class:!0});var le=w(r);a=k(le,"HEADER",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-1l8cwjc"&&(a.innerHTML=n),o=S(le),i=k(le,"HR",{}),c=S(le),F&&F.l(le),d=S(le),f=k(le,"DIV",{class:!0});var oe=w(f);u=k(oe,"DIV",{});var ie=w(u);_=k(ie,"DIV",{class:!0});var pe=w(_);b=k(pe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(b)!=="svelte-1i4hx8x"&&(b.textContent=D),m=S(pe),$=k(pe,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),pe.forEach(p),V=S(ie),P=k(ie,"DIV",{class:!0});var we=w(P);x=k(we,"DIV",{class:!0});var _e=w(x);N=k(_e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(N)!=="svelte-vytwml"&&(N.textContent=Z),K=S(_e),Q=k(_e,"DIV",{id:!0});var De=w(Q);Y=q(De,s[14]),De.forEach(p),_e.forEach(p),we.forEach(p),ie.forEach(p),oe.forEach(p),le.forEach(p),J.forEach(p),this.h()},h(){v(a,"class","card-header"),v(b,"for","dataset-name"),v(b,"class","font-bold mr-2"),v($,"type","text"),v($,"id","dataset-name"),v($,"class","w-80 svelte-1jplhoe"),v($,"placeholder","Enter a name"),$.required=!0,v(_,"class","flex items-center m-2"),v(N,"for","dataset-id"),v(N,"class","font-bold mr-2"),v(Q,"id","dataset-id"),v(x,"class","flex items-center"),v(P,"class","flex items-center m-2"),v(f,"class","card-body p-4 flex flex-col justify-center items-center"),v(r,"class","w-full h-full m-2 card p-4"),v(e,"class","flex flex-col w-full h-full items-center")},m(X,J){I(X,e,J),B(t,e,null),h(e,l),h(e,r),h(r,a),h(r,o),h(r,i),h(r,c),F&&F.m(r,null),h(r,d),h(r,f),h(f,u),h(u,_),h(_,b),h(_,m),h(_,$),Ke($,s[6]),h(u,V),h(u,P),h(P,x),h(x,N),h(x,K),h(x,Q),h(Q,Y),W=!0,ee||(te=fe($,"input",s[32]),ee=!0)},p(X,J){X[8]?F?(F.p(X,J),J[0]&256&&C(F,1)):(F=ct(X),F.c(),C(F,1),F.m(r,d)):F&&(re(),E(F,1,1,()=>{F=null}),ae()),J[0]&64&&$.value!==X[6]&&Ke($,X[6]),(!W||J[0]&16384)&&ne(Y,X[14])},i(X){W||(C(t.$$.fragment,X),C(F),W=!0)},o(X){E(t.$$.fragment,X),E(F),W=!1},d(X){X&&p(e),M(t),F&&F.d(),ee=!1,te()}}}function Ul(s){let e;return{c(){e=H("Save Dataset ID:")},l(t){e=q(t,"Save Dataset ID:")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function ft(s){let e,t,l,r={ctx:s,current:null,token:null,hasCatch:!0,pending:er,then:Hl,catch:Fl,error:55,blocks:[,,,]};return Ae(t=s[4],r),{c(){e=se(),r.block.c()},l(a){e=se(),r.block.l(a)},m(a,n){I(a,e,n),r.block.m(a,r.anchor=n),r.mount=()=>e.parentNode,r.anchor=e,l=!0},p(a,n){s=a,r.ctx=s,n[0]&16&&t!==(t=s[4])&&Ae(t,r)||Ft(r,s,n)},i(a){l||(C(r.block),l=!0)},o(a){for(let n=0;n<3;n+=1){const o=r.blocks[n];E(o)}l=!1},d(a){a&&p(e),r.block.d(a),r.token=null,r=null}}}function Fl(s){let e,t,l,r,a=s[55]+"",n,o;return t=new qe({props:{title:`An error occurred while preparing your dataset. Please try again. If this problem persists, please
                contact an administrator.`}}),{c(){e=g("div"),R(t.$$.fragment),l=T(),r=g("div"),n=H(a),this.h()},l(i){e=k(i,"DIV",{class:!0});var c=w(e);L(t.$$.fragment,c),l=S(c),r=k(c,"DIV",{class:!0});var d=w(r);n=q(d,a),d.forEach(p),c.forEach(p),this.h()},h(){v(r,"class","hidden"),v(e,"class","flex justify-center")},m(i,c){I(i,e,c),B(t,e,null),h(e,l),h(e,r),h(r,n),o=!0},p(i,c){(!o||c[0]&16)&&a!==(a=i[55]+"")&&ne(n,a)},i(i){o||(C(t.$$.fragment,i),o=!0)},o(i){E(t.$$.fragment,i),o=!1},d(i){i&&p(e),M(t)}}}function Hl(s){let e,t,l,r;const a=[Ol,ql],n=[];function o(i,c){return i[0].query.expectedResultType==="DATAFRAME"?0:i[0].query.expectedResultType==="DATAFRAME_PFB"?1:-1}return~(e=o(s))&&(t=n[e]=a[e](s)),{c(){t&&t.c(),l=se()},l(i){t&&t.l(i),l=se()},m(i,c){~e&&n[e].m(i,c),I(i,l,c),r=!0},p(i,c){let d=e;e=o(i),e===d?~e&&n[e].p(i,c):(t&&(re(),E(n[d],1,1,()=>{n[d]=null}),ae()),~e?(t=n[e],t?t.p(i,c):(t=n[e]=a[e](i),t.c()),C(t,1),t.m(l.parentNode,l)):t=null)},i(i){r||(C(t),r=!0)},o(i){E(t),r=!1},d(i){i&&p(l),~e&&n[e].d(i)}}}function ql(s){let e,t,l="Select an option below to export your selected data in PFB format.",r,a,n,o,i,c,d,f='<i class="fa-solid fa-download"></i>Download as PFB',u,_,b=ve.explorer.enableTerraExport&&zl(s);return{c(){e=g("section"),t=g("div"),t.textContent=l,r=T(),b&&b.c(),a=T(),n=g("div"),o=g("div"),i=T(),c=g("div"),d=g("button"),d.innerHTML=f,this.h()},l(D){e=k(D,"SECTION",{class:!0});var m=w(e);t=k(m,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1e8jgjm"&&(t.textContent=l),r=S(m),b&&b.l(m),a=S(m),n=k(m,"DIV",{class:!0});var $=w(n);o=k($,"DIV",{}),w(o).forEach(p),i=S($),c=k($,"DIV",{});var V=w(c);d=k(V,"BUTTON",{class:!0,"data-svelte-h":!0}),z(d)!=="svelte-1o3nllj"&&(d.innerHTML=f),V.forEach(p),$.forEach(p),m.forEach(p),this.h()},h(){v(t,"class","flex justify-center mt-4"),v(d,"class","flex-initial w-64 btn variant-filled-primary"),v(n,"class","grid grid-cols-3"),v(e,"class","flex flex-col gap-8")},m(D,m){I(D,e,m),h(e,t),h(e,r),b&&b.m(e,null),h(e,a),h(e,n),h(n,o),h(n,i),h(n,c),h(c,d),u||(_=fe(d,"click",s[38]),u=!0)},p(D,m){ve.explorer.enableTerraExport&&b.p(D,m)},i:U,o:U,d(D){D&&p(e),b&&b.d(),u=!1,_()}}}function Ol(s){let e,t,l=`To export data and start your analysis, copy and paste the following code in an
                  analysis workspace, such as BioData Catalyst Powered by Seven Bridges or BioData
                  Catalyst Powered by Terra, to connect to PIC-SURE and save the data frame or
                  download the file. Note that you will need your personal access token to complete
                  the connection to PIC-SURE with code.`,r,a,n,o,i=`Copy your personal access token and save as a text file called “token.txt” in the
                  same working directory to execute the code above.`,c,d,f,u,_,b='<a class="btn variant-ghost-primary m-2 hover:variant-filled-primary" href="https://platform.sb.biodatacatalyst.nhlbi.nih.gov/u/biodatacatalyst/data-export-from-the-pic-sure-ui" target="_blank">Go to Seven Bridges</a> <a class="btn variant-ghost-primary m-2 hover:variant-filled-primary" href="https://terra.biodatacatalyst.nhlbi.nih.gov/" target="_blank">Go to Terra</a>',D;return a=new Wt({props:{class:"card p-4",$$slots:{panel:[Zl],default:[Xl]},$$scope:{ctx:s}}}),f=new kt({}),{c(){e=g("section"),t=g("p"),t.textContent=l,r=T(),R(a.$$.fragment),n=T(),o=g("p"),o.textContent=i,c=T(),d=g("div"),R(f.$$.fragment),u=T(),_=g("div"),_.innerHTML=b,this.h()},l(m){e=k(m,"SECTION",{class:!0});var $=w(e);t=k($,"P",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-hpr0ix"&&(t.textContent=l),r=S($),L(a.$$.fragment,$),n=S($),o=k($,"P",{"data-svelte-h":!0}),z(o)!=="svelte-104z5lh"&&(o.textContent=i),c=S($),d=k($,"DIV",{class:!0});var V=w(d);L(f.$$.fragment,V),V.forEach(p),u=S($),_=k($,"DIV",{class:!0,"data-svelte-h":!0}),z(_)!=="svelte-h1oinp"&&(_.innerHTML=b),$.forEach(p),this.h()},h(){v(t,"class","mt-4"),v(d,"class","flex justify-center"),v(_,"class","flex justify-center"),v(e,"class","flex flex-col gap-8")},m(m,$){I(m,e,$),h(e,t),h(e,r),B(a,e,null),h(e,n),h(e,o),h(e,c),h(e,d),B(f,d,null),h(e,u),h(e,_),D=!0},p(m,$){const V={};$[0]&20480|$[1]&33554432&&(V.$$scope={dirty:$,ctx:m}),a.$set(V)},i(m){D||(C(a.$$.fragment,m),C(f.$$.fragment,m),D=!0)},o(m){E(a.$$.fragment,m),E(f.$$.fragment,m),D=!1},d(m){m&&p(e),M(a),M(f)}}}function zl(s){let e,t,l,r,a,n,o,i,c;return{c(){e=g("div"),t=g("div"),l=T(),r=g("div"),a=g("button"),n=g("i"),o=H("Export to Terra"),this.h()},l(d){e=k(d,"DIV",{class:!0});var f=w(e);t=k(f,"DIV",{}),w(t).forEach(p),l=S(f),r=k(f,"DIV",{});var u=w(r);a=k(u,"BUTTON",{class:!0});var _=w(a);n=k(_,"I",{class:!0}),w(n).forEach(p),o=q(_,"Export to Terra"),_.forEach(p),u.forEach(p),f.forEach(p),this.h()},h(){v(n,"class","fa-solid fa-arrow-up-right-from-square"),a.disabled=s[13],v(a,"class","flex-initial w-64 btn variant-filled-primary disabled:variant-ghost-primary"),v(e,"class","grid grid-cols-3")},m(d,f){I(d,e,f),h(e,t),h(e,l),h(e,r),h(r,a),h(a,n),h(a,o),i||(c=fe(a,"click",s[37]),i=!0)},p(d,f){f[0]&8192&&(a.disabled=d[13])},d(d){d&&p(e),i=!1,c()}}}function Gl(s){let e;return{c(){e=H("Python")},l(t){e=q(t,"Python")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function Ql(s){let e;return{c(){e=H("R")},l(t){e=q(t,"R")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function Wl(s){let e;return{c(){e=H("Download")},l(t){e=q(t,"Download")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function Xl(s){let e,t,l,r,a,n,o,i,c;function d(m){s[34](m)}let f={name:"python",value:0,$$slots:{default:[Gl]},$$scope:{ctx:s}};s[12]!==void 0&&(f.group=s[12]),e=new Fe({props:f}),Me.push(()=>Ue(e,"group",d));function u(m){s[35](m)}let _={name:"r",value:1,$$slots:{default:[Ql]},$$scope:{ctx:s}};s[12]!==void 0&&(_.group=s[12]),r=new Fe({props:_}),Me.push(()=>Ue(r,"group",u));function b(m){s[36](m)}let D={name:"download",value:2,$$slots:{default:[Wl]},$$scope:{ctx:s}};return s[12]!==void 0&&(D.group=s[12]),o=new Fe({props:D}),Me.push(()=>Ue(o,"group",b)),{c(){R(e.$$.fragment),l=T(),R(r.$$.fragment),n=T(),R(o.$$.fragment)},l(m){L(e.$$.fragment,m),l=S(m),L(r.$$.fragment,m),n=S(m),L(o.$$.fragment,m)},m(m,$){B(e,m,$),I(m,l,$),B(r,m,$),I(m,n,$),B(o,m,$),c=!0},p(m,$){const V={};$[1]&33554432&&(V.$$scope={dirty:$,ctx:m}),!t&&$[0]&4096&&(t=!0,V.group=m[12],je(()=>t=!1)),e.$set(V);const P={};$[1]&33554432&&(P.$$scope={dirty:$,ctx:m}),!a&&$[0]&4096&&(a=!0,P.group=m[12],je(()=>a=!1)),r.$set(P);const x={};$[1]&33554432&&(x.$$scope={dirty:$,ctx:m}),!i&&$[0]&4096&&(i=!0,x.group=m[12],je(()=>i=!1)),o.$set(x)},i(m){c||(C(e.$$.fragment,m),C(r.$$.fragment,m),C(o.$$.fragment,m),c=!0)},o(m){E(e.$$.fragment,m),E(r.$$.fragment,m),E(o.$$.fragment,m),c=!1},d(m){m&&(p(l),p(n)),M(e,m),M(r,m),M(o,m)}}}function Jl(s){let e,t,l='<i class="fa-solid fa-download mr-1"></i>Download as CSV',r,a;return{c(){e=g("div"),t=g("button"),t.innerHTML=l,this.h()},l(n){e=k(n,"DIV",{});var o=w(e);t=k(o,"BUTTON",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1t3f70y"&&(t.innerHTML=l),o.forEach(p),this.h()},h(){v(t,"class","btn variant-filled-primary")},m(n,o){I(n,e,o),h(e,t),r||(a=fe(t,"click",s[33]),r=!0)},p:U,i:U,o:U,d(n){n&&p(e),r=!1,a()}}}function Kl(s){var l,r;let e,t;return e=new Ct({props:{language:"r",lineNumbers:!0,code:((r=(l=Ne)==null?void 0:l.bdcRExport)==null?void 0:r.replace("{{queryId}}",s[14]))||"Code not set"}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,n){B(e,a,n),t=!0},p(a,n){var i,c;const o={};n[0]&16384&&(o.code=((c=(i=Ne)==null?void 0:i.bdcRExport)==null?void 0:c.replace("{{queryId}}",a[14]))||"Code not set"),e.$set(o)},i(a){t||(C(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){M(e,a)}}}function Yl(s){var l,r;let e,t;return e=new Ct({props:{language:"python",lineNumbers:!0,buttonCopied:"Copied!",code:((r=(l=Ne)==null?void 0:l.bdcPythonExport)==null?void 0:r.replace("{{queryId}}",s[14]))||"Code not set"}}),{c(){R(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,n){B(e,a,n),t=!0},p(a,n){var i,c;const o={};n[0]&16384&&(o.code=((c=(i=Ne)==null?void 0:i.bdcPythonExport)==null?void 0:c.replace("{{queryId}}",a[14]))||"Code not set"),e.$set(o)},i(a){t||(C(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){M(e,a)}}}function Zl(s){let e,t,l,r;const a=[Yl,Kl,Jl],n=[];function o(i,c){return i[12]===0?0:i[12]===1?1:i[12]===2?2:-1}return~(e=o(s))&&(t=n[e]=a[e](s)),{c(){t&&t.c(),l=se()},l(i){t&&t.l(i),l=se()},m(i,c){~e&&n[e].m(i,c),I(i,l,c),r=!0},p(i,c){let d=e;e=o(i),e===d?~e&&n[e].p(i,c):(t&&(re(),E(n[d],1,1,()=>{n[d]=null}),ae()),~e?(t=n[e],t?t.p(i,c):(t=n[e]=a[e](i),t.c()),C(t,1),t.m(l.parentNode,l)):t=null)},i(i){r||(C(t),r=!0)},o(i){E(t),r=!1},d(i){i&&p(l),~e&&n[e].d(i)}}}function er(s){let e,t,l,r,a="Preparing your dataset...",n;return t=new Ve({props:{width:"w-4"}}),{c(){e=g("div"),R(t.$$.fragment),l=T(),r=g("div"),r.textContent=a,this.h()},l(o){e=k(o,"DIV",{class:!0});var i=w(e);L(t.$$.fragment,i),l=S(i),r=k(i,"DIV",{"data-svelte-h":!0}),z(r)!=="svelte-1m53t1h"&&(r.textContent=a),i.forEach(p),this.h()},h(){v(e,"class","flex justify-center items-center")},m(o,i){I(o,e,i),B(t,e,null),h(e,l),h(e,r),n=!0},p:U,i(o){n||(C(t.$$.fragment,o),n=!0)},o(o){E(t.$$.fragment,o),n=!1},d(o){o&&p(e),M(t)}}}function ut(s){let e,t,l=`Use your personal access token and the dataset ID to export your participant-level
            cohort data using the PIC-SURE API.`,r,a,n,o,i,c,d="Dataset ID:",f,u,_,b,D,m,$,V=`Navigate to the <a class="anchor" href="/api">API page</a> to view examples and learn more
            about the PIC-SURE API.`,P;return a=new kt({}),D=new Gt({props:{itemToCopy:s[14]}}),{c(){e=g("div"),t=g("div"),t.textContent=l,r=T(),R(a.$$.fragment),n=T(),o=g("div"),i=g("div"),c=g("label"),c.textContent=d,f=T(),u=g("div"),_=H(s[14]),b=T(),R(D.$$.fragment),m=T(),$=g("p"),$.innerHTML=V,this.h()},l(x){e=k(x,"DIV",{class:!0});var N=w(e);t=k(N,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1d55zu0"&&(t.textContent=l),r=S(N),L(a.$$.fragment,N),n=S(N),o=k(N,"DIV",{class:!0});var Z=w(o);i=k(Z,"DIV",{class:!0});var K=w(i);c=k(K,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(c)!=="svelte-10o6xpf"&&(c.textContent=d),f=S(K),u=k(K,"DIV",{id:!0,class:!0});var Q=w(u);_=q(Q,s[14]),Q.forEach(p),b=S(K),L(D.$$.fragment,K),K.forEach(p),Z.forEach(p),m=S(N),$=k(N,"P",{"data-svelte-h":!0}),z($)!=="svelte-188gcj5"&&($.innerHTML=V),N.forEach(p),this.h()},h(){v(t,"class","flex justify-center"),v(c,"for","dataset-id"),v(c,"class","font-bold ml-4 mr-2"),v(u,"id","dataset-id"),v(u,"class","mr-4"),v(i,"class","flex items-center"),v(o,"class","flex items-center m-4"),v(e,"class","flex flex-col justify-center items-center")},m(x,N){I(x,e,N),h(e,t),h(e,r),B(a,e,null),h(e,n),h(e,o),h(o,i),h(i,c),h(i,f),h(i,u),h(u,_),h(i,b),B(D,i,null),h(e,m),h(e,$),P=!0},p(x,N){(!P||N[0]&16384)&&ne(_,x[14]);const Z={};N[0]&16384&&(Z.itemToCopy=x[14]),D.$set(Z)},i(x){P||(C(a.$$.fragment,x),C(D.$$.fragment,x),P=!0)},o(x){E(a.$$.fragment,x),E(D.$$.fragment,x),P=!1},d(x){x&&p(e),M(a),M(D)}}}function tr(s){let e,t,l,r,a=s[16]&&ft(s),n=s[15]&&ut(s);return{c(){e=g("section"),t=g("div"),a&&a.c(),l=T(),n&&n.c(),this.h()},l(o){e=k(o,"SECTION",{class:!0});var i=w(e);t=k(i,"DIV",{class:!0});var c=w(t);a&&a.l(c),c.forEach(p),l=S(i),n&&n.l(i),i.forEach(p),this.h()},h(){v(t,"class","flex justify-center"),v(e,"class","flex flex-col w-full h-full items-center")},m(o,i){I(o,e,i),h(e,t),a&&a.m(t,null),h(e,l),n&&n.m(e,null),r=!0},p(o,i){o[16]?a?(a.p(o,i),i[0]&65536&&C(a,1)):(a=ft(o),a.c(),C(a,1),a.m(t,null)):a&&(re(),E(a,1,1,()=>{a=null}),ae()),o[15]?n?(n.p(o,i),i[0]&32768&&C(n,1)):(n=ut(o),n.c(),C(n,1),n.m(e,null)):n&&(re(),E(n,1,1,()=>{n=null}),ae())},i(o){r||(C(a),C(n),r=!0)},o(o){E(a),E(n),r=!1},d(o){o&&p(e),a&&a.d(),n&&n.d()}}}function lr(s){let e;return{c(){e=H("Start Analysis:")},l(t){e=q(t,"Start Analysis:")},m(t,l){I(t,e,l)},d(t){t&&p(e)}}}function rr(s){let e,t,l,r,a,n,o,i,c;e=new $e({props:{locked:s[25](),$$slots:{header:[Nl],default:[xl]},$$scope:{ctx:s}}});let d=s[3]&&it(s);return r=new $e({props:{locked:s[2]===void 0,$$slots:{header:[Bl],default:[Ll]},$$scope:{ctx:s}}}),n=new $e({props:{locked:!s[6]||s[6].length<2,$$slots:{header:[Ul],default:[jl]},$$scope:{ctx:s}}}),i=new $e({props:{locked:s[7],$$slots:{header:[lr],default:[tr]},$$scope:{ctx:s}}}),{c(){R(e.$$.fragment),t=T(),d&&d.c(),l=T(),R(r.$$.fragment),a=T(),R(n.$$.fragment),o=T(),R(i.$$.fragment)},l(f){L(e.$$.fragment,f),t=S(f),d&&d.l(f),l=S(f),L(r.$$.fragment,f),a=S(f),L(n.$$.fragment,f),o=S(f),L(i.$$.fragment,f)},m(f,u){B(e,f,u),I(f,t,u),d&&d.m(f,u),I(f,l,u),B(r,f,u),I(f,a,u),B(n,f,u),I(f,o,u),B(i,f,u),c=!0},p(f,u){const _={};u[0]&3618|u[1]&33554432&&(_.$$scope={dirty:u,ctx:f}),e.$set(_),f[3]?d?u[0]&8&&C(d,1):(d=it(f),d.c(),C(d,1),d.m(l.parentNode,l)):d&&(re(),E(d,1,1,()=>{d=null}),ae());const b={};u[0]&4&&(b.locked=f[2]===void 0),u[0]&4|u[1]&33554432&&(b.$$scope={dirty:u,ctx:f}),r.$set(b);const D={};u[0]&64&&(D.locked=!f[6]||f[6].length<2),u[0]&16704|u[1]&33554432&&(D.$$scope={dirty:u,ctx:f}),n.$set(D);const m={};u[0]&128&&(m.locked=f[7]),u[0]&126993|u[1]&33554432&&(m.$$scope={dirty:u,ctx:f}),i.$set(m)},i(f){c||(C(e.$$.fragment,f),C(d),C(r.$$.fragment,f),C(n.$$.fragment,f),C(i.$$.fragment,f),c=!0)},o(f){E(e.$$.fragment,f),E(d),E(r.$$.fragment,f),E(n.$$.fragment,f),E(i.$$.fragment,f),c=!1},d(f){f&&(p(t),p(l),p(a),p(o)),M(e,f),d&&d.d(f),M(r,f),M(n,f),M(i,f)}}}function ar(s){let e,t;return e=new ll({props:{class:"w-full h-full m-8",buttonCompleteLabel:"Done",$$slots:{default:[rr]},$$scope:{ctx:s}}}),e.$on("complete",s[24]),e.$on("next",s[21]),e.$on("step",nr),e.$on("back",s[22]),{c(){R(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){B(e,l,r),t=!0},p(l,r){const a={};r[0]&131071|r[1]&33554432&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function nr(s){console.log("event:next",s)}function sr(s,e,t){let l,r,a,n,o,i,c,d;ce(s,vt,y=>t(42,i=y)),ce(s,gt,y=>t(43,c=y)),ce(s,me,y=>t(44,d=y));let{exports:f,addExports:u,removeExports:_}=bt;ce(s,f,y=>t(41,o=y));let{query:b}=e,{showTreeStep:D=!1}=e,{rows:m=[]}=e;const $=$t(),V=Qt();let P,x,N="",Z="",K=!0,Q="",Y=!1,W=[],ee=!1,te=!1;const F=[{dataElement:"variableName",label:"Variable Name",sort:!0},{dataElement:"description",label:"Variable Description",sort:!0},{dataElement:"type",label:"Type",sort:!0}];pt(async()=>{const y=o.filter(j=>j.conceptPath.includes("SAMPLE_ID"));if(y.length>0){t(11,te=!0);const j=await ze();if(j.length>0){const O=y.filter(A=>j.some(G=>G.conceptPath===A.conceptPath));t(9,Y=O.length===j.length),t(11,te=!1),Y&&(W=O.map(A=>{var G,de;return{ref:A,variableId:A.conceptPath,variableName:A.display,description:(G=A.searchResult)==null?void 0:G.description,type:(de=A.searchResult)==null?void 0:de.type,selected:!0}}))}else t(9,Y=!1),t(11,te=!1)}else t(9,Y=!1)});const X=Kt.maxDataPointsForExport||1e6;function J(){const y=async()=>{await le(),$.close()},j=()=>{$.close()},O={type:"component",title:et.explorePage.confirmDownloadTitle||"Are you sure you want to download data?",component:"modalWrapper",modalClasses:"bg-surface-100-800-token p-4 block",meta:{component:$l,message:et.explorePage.confirmDownloadMessage||"This action will download the data to your local machine. Are you sure you want to proceed?",onConfirm:y,onCancel:j,confirmText:"Download"},response:A=>{console.log(A)}};$.trigger(O)}async function le(){try{const y=await he(`picsure/query/${l}/result`,{}),j=URL.createObjectURL(new Blob([y],{type:"octet/stream"}));if(Ht){const O=document.createElement("a");O.href=j,b.query.expectedResultType==="DATAFRAME"?O.download="pic-sure-data.csv":b.query.expectedResultType==="DATAFRAME_PFB"&&(O.download="pic-sure-data.avro"),document.body.appendChild(O),O.click(),document.body.removeChild(O)}}catch(y){console.error("Error in onCompleteHandler",y)}}function oe(y){y.detail.step===0&&!D||(y.detail.step===1&&D||(y.detail.step===1&&!D||D&&y.detail.step===2?t(5,x=pe()):(y.detail.step===2&&!D||D&&y.detail.step===3)&&we()),y.detail.state.total-1===y.detail.step+1&&t(4,P=new Promise((j,O)=>{const A=setInterval(async()=>{const G=await _e(Z);G==="ERROR"?(t(7,K=!0),clearInterval(A),O(G)):["PENDING","RUNNING","QUEUED"].includes(G)||(t(7,K=!1),clearInterval(A),j(G))},2e3)})))}function ie(y){t(8,Q=""),console.log("event:next",y)}async function pe(){try{t(0,b.query.fields=o.map(j=>j.conceptPath),b);const y=await he("picsure/query",b);t(14,l=y.picsureResultId)}catch(y){throw be(me,d.current--,d),console.error("Error in handleFirstStep",y),y}}async function we(){var y;try{await vl(l,N)}catch(j){if(j instanceof Object){const O=j;t(8,Q=((y=O==null?void 0:O.message)==null?void 0:y.message)||"Error Creating Named Dataset")}else t(8,Q=String(j)||"Error Creating Named Dataset");be(me,d.current--,d),console.error("Error in createNamedDataset",j)}}async function _e(y){const O="picsure/query/"+(y||l)+"/status";try{const A=await he(O,b);return Z=A.picsureResultId,A.status}catch(A){console.error("Error in checkExportStatus",A)}return"ERROR"}async function De(){const y="picsure/query/"+l+"/signed-url";try{return(await he(y,b)).signedUrl}catch(j){console.error("Error in getSignedUrl",j)}}let{activeType:Le}=e;function Be(y){t(0,b.query.expectedResultType=y,b),t(2,Le=y)}function Oe(){Ot("/explorer")}let ue=0;function yt(){return(typeof c=="number"?c:X+1)+i.length+o.length>X}async function ze(){const y=await Yt("",[{name:"data_source_genomic",category:"data_source",display:"Genomic",description:"Associated with genomic data",count:0}],{pageNumber:0,pageSize:1e4});if(y.content.length===0)return[];const j=new Xt(structuredClone(b.query));j.expectedResultType="CROSS_COUNT";const O=y.content.map(G=>G.conceptPath);j.setCrossCountFields(O);const A=await he("picsure/query/sync",{query:j,resourceUUID:Jt.hpds});return y.content.filter(G=>A[G.conceptPath]>0)}async function Et(){try{if(t(10,ee=!0),!Y){const A=W==null?void 0:W.map(G=>G.ref);_(A||[]),t(1,m=m.filter(G=>!W.some(de=>de.variableId===G.variableId)));return}const j=(await ze()).map(A=>({id:Zt(),searchResult:A,display:(A==null?void 0:A.display)||"",conceptPath:(A==null?void 0:A.conceptPath)||""}));u(j);const O=j.map(A=>{var G,de,Qe;return{ref:A,variableId:(G=A==null?void 0:A.searchResult)==null?void 0:G.conceptPath,variableName:A==null?void 0:A.display,description:(de=A==null?void 0:A.searchResult)==null?void 0:de.description,type:(Qe=A==null?void 0:A.searchResult)==null?void 0:Qe.type,selected:!0}});t(1,m=Array.from([...m,...O].reduce((A,G)=>A.set(G.variableId,G),new Map).values())),W=O}catch(y){console.error("Error in toggleSampleIds",y),V.trigger({message:"We were unable to fetch the sample IDs for your selected data. Please try again later.",background:"variant-ghost-error"}),t(9,Y=!1)}finally{t(10,ee=!1)}}async function Ge(){t(13,n=!0);let y=await De();window.open("https://terra.biodatacatalyst.nhlbi.nih.gov/#import-data?format=pfb&url="+encodeURIComponent(y)),t(13,n=!1)}const wt=()=>Oe();function Dt(){Y=this.checked,t(9,Y)}const It=()=>Be("DATAFRAME"),Tt=()=>Be("DATAFRAME_PFB");function St(){N=this.value,t(6,N)}const Pt=()=>ve.confirmDownload?J():le();function At(y){ue=y,t(12,ue)}function xt(y){ue=y,t(12,ue)}function Nt(y){ue=y,t(12,ue)}const Vt=()=>Ge(),Rt=()=>ve.confirmDownload?J():le();return s.$$set=y=>{"query"in y&&t(0,b=y.query),"showTreeStep"in y&&t(3,D=y.showTreeStep),"rows"in y&&t(1,m=y.rows),"activeType"in y&&t(2,Le=y.activeType)},t(14,l=""),t(16,r=!0),t(15,a=!1),t(13,n=!1),[b,m,Le,D,P,x,N,K,Q,Y,ee,te,ue,n,l,a,r,f,F,J,le,oe,ie,Be,Oe,yt,Et,Ge,wt,Dt,It,Tt,St,Pt,At,xt,Nt,Vt,Rt]}class xr extends ye{constructor(e){super(),Ee(this,e,sr,ar,Ce,{query:0,showTreeStep:3,rows:1,activeType:2},null,[-1,-1])}}export{xr as E,me as s};
