import{f as L,a as S}from"./DKNWTM-D.js";import{p as Oe,e as ee,u as Ve,b as _,g as r,h as g,d as T,c as p,s as v,r as f,t as U,a as ke}from"./KPVYLOSR.js";import{d as Fe,s as te,e as ae}from"./NtGCh5xy.js";import{i as A}from"./CDCmQmr-.js";import{e as ie,i as Ue}from"./B5lqQSsR.js";import{r as M,s as ne,d as re}from"./Be_LeCLl.js";import{b as Ae}from"./BlQKM0Gb.js";import{b as oe}from"./3gfQC4Jj.js";import{p as y}from"./CfrH0FQi.js";import{L as le}from"./BW_ShK1N.js";var Ce=(e=>(e.None="none",e.Genomic="genomic",e.SNP="snp",e))(Ce||{}),ze=(e=>(e.Heterozygous="0/1",e.Homozygous="1/1",e.HeterozygousOrHomozygous="1/1,0/1",e.Neither="0/0",e))(ze||{});const Ne={"0/1":"Heterozygous","1/1":"Homozygous","1/1,0/1":"Heterozygous or Homozygous","0/1,1/1":"Heterozygous or Homozygous"};var c=[];for(var B=0;B<256;++B)c.push((B+256).toString(16).slice(1));function qe(e,t=0){return(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase()}var C,Pe=new Uint8Array(16);function De(){if(!C&&(C=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!C))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return C(Pe)}var Ie=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ce={randomUUID:Ie};function h(e,t,n){if(ce.randomUUID&&!e)return ce.randomUUID();e=e||{};var i=e.random||(e.rng||De)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,qe(i)}function nt(e,t){return{uuid:h(),id:e.conceptPath,filterType:"Categorical",displayType:t&&(t==null?void 0:t.length)>0?"restrict":"anyRecordOf",searchResult:e,categoryValues:t||[],variableName:e.display||e.name,description:e.description,allowFiltering:e.allowFiltering,dataset:e.dataset}}function rt(e){return{uuid:h(),id:e.conceptPath,filterType:"Categorical",displayType:"any",searchResult:e,variableName:e.display||e.name,description:e.description,categoryValues:[],allowFiltering:e.allowFiltering,dataset:e.dataset}}function de(e){return e.flatMap(t=>[t.conceptPath,...(t.children||[]).flatMap(n=>de([n]))])}function ot(e,t){const n=de((t==null?void 0:t.children)||[]);return{uuid:h(),id:e.conceptPath,concepts:n,filterType:"AnyRecordOf",displayType:"anyRecordOf",searchResult:e,variableName:e.name||e.display||e.conceptPath,description:e.description,allowFiltering:e.allowFiltering,dataset:e.dataset}}function lt(e,t,n){return{uuid:h(),id:e.conceptPath,filterType:"numeric",displayType:t!==void 0&&n!==void 0?"between":t!==void 0?"greaterThan":n!==void 0?"lessThan":"any",searchResult:e,min:t!==void 0?t.toLocaleString():void 0,max:n!==void 0?n.toLocaleString():void 0,variableName:e.display||e.name,description:e.description,allowFiltering:e.allowFiltering,dataset:e.dataset}}function ct(e){const t=(l,s)=>s&&s.length>0?`${l}: ${s.join(", ")}`:void 0,n=[t("Gene with variant",e.Gene_with_variant),t("Variant frequency",e.Variant_frequency_as_text),t("Consequence Group by severity",e.Variant_consequence_calculated)].filter(l=>l).join("; ");return{uuid:h(),id:"genomic",filterType:"genomic",displayType:"any",variableName:"Genomic Filter",description:n,Gene_with_variant:e.Gene_with_variant,Variant_consequence_calculated:e.Variant_consequence_calculated,Variant_frequency_as_text:e.Variant_frequency_as_text,allowFiltering:!0,dataset:""}}function dt(e){const t=e.map(i=>`${i.search}: ${i.constraint.split(",").map(l=>Ne[l]).join(", ")}`).join("; ");return{uuid:h(),id:"snp-variant",filterType:"snp",displayType:"any",snpValues:e,variableName:"Variant Filter",description:t,allowFiltering:!0,dataset:""}}function Ge(e,t,n,i){t()(r(n)),r(i).scrollTop=0}function je(e,t,n,i){t([...t(),...n()].sort()),n([]),i(20)}function Me(e,t,n,i,l){var s;t()&&((s=t())==null?void 0:s.length)!==0?(n(t()),i([]),l(20)):(n([...n(),...i()]),i([]),l(20))}var Be=L('<button id="select-all" class="btn preset-outlined-surface-500 hover:preset-filled-primary-500 ml-2 text-sm">Select All</button>'),Ee=L('<label class="p-1 m-1 block cursor-pointer hover:preset-tonal-surface hover:rounded-md" role="listitem"><input type="checkbox" class="mr-1 float-left"/> </label>'),Je=L('<button id="clear" class="btn preset-outlined-surface-500 hover:preset-filled-primary-500 ml-2 text-sm">Clear</button>'),Ke=L('<label class="p-1 m-1 block hover:preset-tonal-surface hover:rounded-md cursor-pointer" role="listitem"><input type="checkbox" class="mr-1" checked/> </label>'),Qe=L('<div data-testid="optional-selection-list" class="flex w-full"><div class="flex flex-1 flex-col h-full p-3 m-1 card bg-surface-100 rounded-xl"><header class="flex pb-1"><input class="input text-sm" type="search" name="search" placeholder="Search..."/> <!></header> <section class="card-body"><div id="options-container" class="overflow-scroll scrollbar-color h-25vh svelte-klmedf"><!> <!></div></section></div> <div class="flex flex-1 flex-col h-full p-3 m-1 card bg-surface-100 rounded-xl"><header class="flex justify-between pb-1"><div class="py-2">Selected:</div> <!></header> <section class="card-body"><div id="selected-options-container" class="overflow-scroll scrollbar-color h-25vh svelte-klmedf"><!> <!></div></section></div></div>');function st(e,t){Oe(t,!0);let n=T(""),i=y(t,"unselectedOptions",31,()=>ee([])),l=y(t,"selectedOptions",31,()=>ee([])),s=y(t,"selectedOptionEndLocation",15,20),E=y(t,"currentlyLoading",11,!1),se=y(t,"showClearAll",3,!0),ue=y(t,"showSelectAll",3,!0),pe=y(t,"allOptionsLoaded",3,!1),z=y(t,"allOptions",3,void 0),J=y(t,"onscroll",3,()=>{}),N=T(!1),b=T(void 0),H=T(void 0),q=T(!1);function K(a,o){const d=a.scrollTop,u=a.clientHeight,x=a.scrollHeight;return!o&&x-(d+u)<=30}function fe(){r(b)&&!E()&&K(r(b),r(ge))&&J()(r(n))}function ve(){r(H)&&(_(N,!0),K(r(H),r(q))&&s(s()+20),_(N,!1))}function ye(a){return o=>{o.preventDefault(),i(i().filter(d=>d!==a)),l([...l(),a].sort())}}function me(a){return o=>{o.preventDefault(),l(l().filter(d=>d!==a)),i([a,...i()])}}function Q(a){return a.replaceAll(" ","-").toLowerCase()}let P=g(()=>z()===void 0),_e=g(()=>{var a;return r(P)?1/0:(((a=z())==null?void 0:a.length)||0)-l().length}),ge=g(()=>r(P)?pe():i().length>=r(_e)),W=g(()=>l().slice(0,s()));Ve(()=>{_(q,r(P)?r(q):r(W).length>=l().length,!0)});var D=Qe(),I=p(D),G=p(I),O=p(G);M(O),O.__input=[Ge,J,n,b];var he=v(O,2);{var be=a=>{var o=Be();o.__click=[Me,z,l,i,s],U(()=>o.disabled=i().length===0),S(a,o)};A(he,a=>{ue()&&a(be)})}f(G);var X=v(G,2),V=p(X),Y=p(V);ie(Y,17,i,Ue,(a,o)=>{var d=Ee(),u=p(d);M(u);var x=g(()=>ye(r(o)));u.__click=function(...m){var w;(w=r(x))==null||w.apply(this,m)};var F=v(u);f(d),U(m=>{ne(d,"id",`option-${m??""}`),re(u,r(o)),te(F,` ${r(o)??""}`)},[()=>Q(r(o))]),S(a,d)});var xe=v(Y,2);{var we=a=>{le(a,{ring:!0,size:"small"})};A(xe,a=>{E()&&a(we)})}f(V),oe(V,a=>_(b,a),()=>r(b)),f(X),f(I);var Z=v(I,2),j=p(Z),Se=v(p(j),2);{var Te=a=>{var o=Je();o.__click=[je,i,l,s],U(()=>o.disabled=l().length===0),S(a,o)};A(Se,a=>{se()&&a(Te)})}f(j);var $=v(j,2),k=p($),R=p(k);ie(R,16,()=>r(W),a=>a,(a,o)=>{var d=Ke(),u=p(d);M(u);var x=g(()=>me(o));u.__click=function(...m){var w;(w=r(x))==null||w.apply(this,m)};var F=v(u);f(d),U(m=>{ne(d,"id",`option-${m??""}`),re(u,o),te(F,` ${o??""}`)},[()=>Q(o)]),S(a,d)});var Le=v(R,2);{var He=a=>{le(a,{})};A(Le,a=>{r(N)&&a(He)})}f(k),oe(k,a=>_(H,a),()=>r(H)),f($),f(Z),f(D),Ae(O,()=>r(n),a=>_(n,a)),ae("scroll",V,fe),ae("scroll",k,ve),S(e,D),ke()}Fe(["input","click"]);export{ze as G,st as O,dt as a,ot as b,ct as c,rt as d,nt as e,lt as f,Ce as g,Ne as h,h as v};
