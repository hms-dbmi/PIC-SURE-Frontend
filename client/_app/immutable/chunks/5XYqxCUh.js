var ut=Object.defineProperty;var et=r=>{throw TypeError(r)};var dt=(r,e,t)=>e in r?ut(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var h=(r,e,t)=>dt(r,typeof e!="symbol"?e+"":e,t),ft=(r,e,t)=>e.has(r)||et("Cannot "+t);var c=(r,e,t)=>(ft(r,e,"read from private field"),t?t.call(r):e.get(r)),w=(r,e,t)=>e.has(r)?et("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);import"./Bzak7iHL.js";import{h as A,k as n,l as _,i as ne,u as x,S as gt,p as re,f as p,a as U,d as m,r as f,t as N,b as g,s as I,c as ie,e as ae,j as rt,B as it,o as vt,n as bt}from"./DhSNEPDw.js";import{d as he,s as Z}from"./DVtHS8ol.js";import{s as at}from"./C8tG8t5X.js";import{i as T}from"./BG76zvuN.js";import{e as ve,i as be}from"./ByI6iVq5.js";import{c as we,s as J,a as G,r as lt,f as wt}from"./CJ66PCUx.js";import{p as P,a as Ze,s as mt}from"./DpjY2ypC.js";import{a as _t,b as Pt,s as kt,c as pt,d as yt}from"./bSQqM1I_.js";import{E as Ht,V as Rt,T as xt,q as St}from"./CD4Ar3Xi.js";import{c as tt}from"./CpcxNR6b.js";import{t as Ct,s as At}from"./BbooiKwf.js";import{b as nt}from"./DPXw0ygh.js";import{L as Nt}from"./bwStxD3u.js";const ce=r=>r==null||r==="",ct=r=>!ce(r),ge=(r=null)=>String(r).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),jt=r=>typeof r!="object"?!1:r!==null,me={isLike:(r,e)=>ge(r).includes(ge(e)),isEqualTo:(r,e)=>ge(r)===ge(e),whereIn:(r,e=[])=>{if(e.length===0)return!1;for(const{value:t,check:s}of e){if(t!=null&&t.key)return Et(r,t,s);if(s(r,t))return!0}return!1},match:(r,e)=>{const t=e.match(/^([\/~@;%#'])(.*?)\1([gimsuy]*)$/),s=t?new RegExp(t[2],t[3].split("").filter((i,a,l)=>l.indexOf(i)===a).join("")):new RegExp(e);return!!ge(r).match(s)}},Et=(r,e,t)=>{if(!(e!=null&&e.key))return!1;const{key:s,value:i}=e;return!!(Array.isArray(r)===!1&&typeof r=="object"&&Object.keys(r).includes(s)&&t(r[s],i))},oe=(r,e,t)=>(t.check=t.check??me.isLike,ce(e)?!0:jt(r)?Object.keys(r).some(s=>oe(r[s],e,t)):t.check(r,e)),$e=(r,e,t)=>(Array.isArray(r)&&(r=r.filter(s=>{const i=t.isRecursive===!0?oe(s,e,t):!0;if(typeof s=="object"&&i===!0)for(const a of Object.keys(s))s[a]=$e(s[a],e,t);return i})),t.highlight&&(typeof r=="string"||typeof r=="number")&&typeof e=="string"&&oe(r,e,t)?ot(r,e):r),ot=(r,e)=>{const t=e.replace(/a/g,"[aàâáä]").replace(/e/g,"[eèêéë]").replace(/i/g,"[iìîíï]").replace(/o/g,"[oòôо́ö]").replace(/u/g,"[uùûúü]").replace(/y/g,"[yỳŷýÿ]"),s=new RegExp(`${t}`,"gi");return String(r).replace(s,'<u class="highlight">$&</u>')},st=(r,e,t)=>{const s=t.toString().split("=>")[1].replace(/\(\)/g,"").replace(/\?/g,"").split(".").splice(1).join(".").trim();return s.indexOf(" ")>-1?r:qt(r,s,e)},qt=(r,e,t)=>{const s=r,i=e.replace(/\[/g,".[").split(".");try{for(let a=0;a<i.length;a++){let l=i[a],o=i[a+1];l.includes("[")&&(l=String(parseInt(l.substring(1,l.length-1)))),o&&o.includes("[")&&(o=String(parseInt(o.substring(1,o.length-1)))),o!==void 0?r[l]=r[l]?r[l]:isNaN(Number(o))?{}:[]:r[l]=ot(r[l],t),r=r[l]}return s}catch{return s}},se=(r,e)=>{if(typeof r=="string")return{callback:t=>t[r],id:e,key:r};if(typeof r=="function")return{callback:r,id:e,key:void 0};throw new Error(`Invalid field argument: ${String(r)}`)},Xe={search:(r,{scope:e,isRecursive:t,value:s,check:i},a=!1)=>r.filter(l=>{const u=(e??Object.keys(l)).map(v=>se(v));for(const{key:v,callback:d}of u)v?l[v]=$e(l[v],s,{highlight:a,isRecursive:t===!0}):a&&(l=st(l,s,d));return u.some(({callback:v})=>oe(v(l),s,{check:i}))}),filter:(r,{callback:e,value:t,check:s,key:i},a=!1)=>r.filter(l=>{const o=oe(e(l),t,{check:s});return i?l[i]=$e(l[i],t,{highlight:a,check:s,isRecursive:!0}):a&&o&&t&&typeof t=="string"&&(l=st(l,t,e)),o}),query:(r,{path:e,value:t,check:s})=>r.filter(i=>{if(e.length===0)return s(i,t);let a=i,l=1,o=!1;for(const u of e){if(l===1&&l<e.length){a=a[u];for(const v of a[u]);}l===e.length&&(console.log(u,a),a[u]=Xe.query(a[u],{path:[],value:t,check:s}),a[u].length>0&&(o=!0)),a=a[u],l++}return o})},Ye={asc:(r,e,t,s)=>r===e?0:ce(r)?1:ce(e)?-1:typeof r=="boolean"?r===!1?1:-1:typeof r=="string"?r.localeCompare(e,t,s):typeof r=="number"?r-e:typeof r=="object"?JSON.stringify(r).localeCompare(JSON.stringify(e),t,s):String(r).localeCompare(String(e),t,s),desc:(r,e,t,s)=>r===e?0:ce(r)?1:ce(e)?-1:typeof e=="boolean"?e===!1?1:-1:typeof e=="string"?e.localeCompare(r,t,s):typeof e=="number"?e-r:typeof e=="object"?JSON.stringify(e).localeCompare(JSON.stringify(r),t,s):String(e).localeCompare(String(r),t,s)};var _e,Pe,ke,pe,ye,He,Re,xe,Se,Ce,Ae,Ne,je,Ee,qe,Be,Fe,Oe,Te;class Bt{constructor(e,t){h(this,"selectBy");w(this,_e,A("currentPage"));h(this,"highlight");h(this,"event",new Ht);w(this,Pe,A([]));w(this,ke,A(ne({value:null})));w(this,pe,A(ne({})));w(this,ye,A(ne([])));w(this,He,A(ne([])));w(this,Re,A(10));w(this,xe,A(1));w(this,Se,A(void 0));w(this,Ce,A(1e3));w(this,Ae,x(()=>this.filters.length));w(this,Ne,x(()=>this.createAllRows()));w(this,je,x(()=>this.createRows()));w(this,Ee,x(()=>this.createRowCount()));w(this,qe,x(()=>this.createPages()));w(this,Be,x(()=>this.pages.length));w(this,Fe,x(()=>this.createPagesWithEllipsis()));w(this,Oe,A(ne([])));w(this,Te,x(()=>this.createIsAllSelected()));this.rawRows=e,this.rowsPerPage=t.rowsPerPage??null,this.highlight=t.highlight??!1,this.selectBy=t.selectBy}get selectScope(){return n(c(this,_e))}set selectScope(e){_(c(this,_e),e,!0)}get rawRows(){return n(c(this,Pe))}set rawRows(e){_(c(this,Pe),e)}get search(){return n(c(this,ke))}set search(e){_(c(this,ke),e,!0)}get sort(){return n(c(this,pe))}set sort(e){_(c(this,pe),e,!0)}get filters(){return n(c(this,ye))}set filters(e){_(c(this,ye),e,!0)}get queries(){return n(c(this,He))}set queries(e){_(c(this,He),e,!0)}get rowsPerPage(){return n(c(this,Re))}set rowsPerPage(e){_(c(this,Re),e,!0)}get currentPage(){return n(c(this,xe))}set currentPage(e){_(c(this,xe),e,!0)}get element(){return n(c(this,Se))}set element(e){_(c(this,Se),e,!0)}get clientWidth(){return n(c(this,Ce))}set clientWidth(e){_(c(this,Ce),e,!0)}get filterCount(){return n(c(this,Ae))}set filterCount(e){_(c(this,Ae),e)}get allRows(){return n(c(this,Ne))}set allRows(e){_(c(this,Ne),e)}get rows(){return n(c(this,je))}set rows(e){_(c(this,je),e)}get rowCount(){return n(c(this,Ee))}set rowCount(e){_(c(this,Ee),e)}get pages(){return n(c(this,qe))}set pages(e){_(c(this,qe),e)}get pageCount(){return n(c(this,Be))}set pageCount(e){_(c(this,Be),e)}get pagesWithEllipsis(){return n(c(this,Fe))}set pagesWithEllipsis(e){_(c(this,Fe),e)}get selected(){return n(c(this,Oe))}set selected(e){_(c(this,Oe),e,!0)}get isAllSelected(){return n(c(this,Te))}set isAllSelected(e){_(c(this,Te),e)}createAllRows(){let e=_t(this.rawRows);if(this.search.value)e=Xe.search(e,this.search,this.highlight),this.event.dispatch("change");else if(this.filters.length>0){for(const t of this.filters)e=Xe.filter(e,t,this.highlight);this.event.dispatch("change")}else if(this.queries.length>0){for(const t of this.queries)e=Xe.query(e,t);this.event.dispatch("change")}return e}createRows(){return this.rowsPerPage?this.allRows.slice((this.currentPage-1)*this.rowsPerPage,this.currentPage*this.rowsPerPage):this.allRows}createRowCount(){const e=this.allRows.length;return this.rowsPerPage?{total:e,start:this.currentPage*this.rowsPerPage-this.rowsPerPage+1,end:Math.min(this.currentPage*this.rowsPerPage,e),selected:this.selected.length}:{total:e,start:1,end:e,selected:this.selected.length}}createPages(){return this.rowsPerPage?Array.from(Array(Math.ceil(this.allRows.length/this.rowsPerPage))).map((t,s)=>s+1):[1]}createPagesWithEllipsis(){if(this.pageCount<=7)return this.pages;const e=null,t=1,s=this.pageCount;return this.currentPage<=4?[...this.pages.slice(0,5),e,s]:this.currentPage<s-3?[t,e,...this.pages.slice(this.currentPage-2,this.currentPage+1),e,s]:[t,e,...this.pages.slice(s-5,s)]}createIsAllSelected(){if(this.rowCount.total===0||!this.selectBy)return!1;const{callback:e}=se(this.selectBy);return this.selectScope==="all"?this.allRows.map(e).every(i=>this.selected.includes(i)):this.rows.map(e).every(s=>this.selected.includes(s))}}_e=new WeakMap,Pe=new WeakMap,ke=new WeakMap,pe=new WeakMap,ye=new WeakMap,He=new WeakMap,Re=new WeakMap,xe=new WeakMap,Se=new WeakMap,Ce=new WeakMap,Ae=new WeakMap,Ne=new WeakMap,je=new WeakMap,Ee=new WeakMap,qe=new WeakMap,Be=new WeakMap,Fe=new WeakMap,Oe=new WeakMap,Te=new WeakMap;class Ft{constructor(e){h(this,"backup");h(this,"table");this.table=e,this.backup=[]}set(e,t,s={}){this.table.sort.id!==t&&(this.table.sort.direction=null),this.table.sort.direction===null||this.table.sort.direction==="desc"?this.asc(e,t,s):this.table.sort.direction==="asc"&&this.desc(e,t,s)}asc(e,t,{locales:s,options:i}={}){if(!e)return;const{callback:a,key:l}=se(e,t);this.table.sort={id:t,callback:a,direction:"asc",key:l},this.table.rawRows=[...this.table.rawRows].sort((o,u)=>{const[v,d]=[a(o),a(u)];return Ye.asc(v,d,s,i)}),this.save({id:t,callback:a,direction:"asc"}),this.table.setPage(1)}desc(e,t,{locales:s,options:i}={}){if(!e)return;const{callback:a,key:l}=se(e,t);this.table.sort={id:t,callback:a,direction:"desc",key:l},this.table.rawRows=[...this.table.rawRows].sort((o,u)=>{const[v,d]=[a(o),a(u)];return Ye.desc(v,d,s,i)}),this.save({id:t,callback:a,direction:"desc"}),this.table.setPage(1)}clear(){this.backup=[],this.table.sort={}}restore(){for(const{key:e,callback:t,direction:s,id:i}of this.backup){const a=e??t;this[s](a,i)}}save(e){if(this.backup=this.backup.filter(t=>t.id!==e.id),this.backup.length>=3){const[t,s,i]=this.backup;this.backup=[s,i,e]}else this.backup=[...this.backup,e]}}class Ot{constructor(e){h(this,"table");this.table=e}set(e,t,s=null,i){this.table.setPage(1);const{callback:a,key:l}=se(t,i),o={value:e,id:i,callback:a,check:s,key:l};this.table.filters=this.table.filters.filter(u=>u.id!==i),ct(e)&&this.table.filters.push(o)}unset(e){this.table.setPage(1),this.table.filters=this.table.filters.filter(t=>t.id!==e)}}class Tt{constructor(e){h(this,"table");this.table=e}set(e,t,s,i){this.table.setPage(1),this.table.queries=this.table.queries.filter(a=>a.id!==i),this.table.queries.push({path:e,value:t,check:s,id:i})}unset(e){this.table.setPage(1),this.table.queries=this.table.queries.filter(t=>t.id!==e)}}class Wt{constructor(e){h(this,"table");this.table=e}set(e){this.table.selected.includes(e)?this.table.selected=this.table.selected.filter(t=>t!==e):this.table.selected=[e,...this.table.selected]}all(e){const t=e==="currentPage"?this.table.rows:this.table.allRows,{callback:s}=se(this.table.selectBy),i=t.map(s);e==="currentPage"?this.table.isAllSelected?this.table.selected=this.table.selected.filter(a=>i.includes(a)===!1):this.table.selected=[...new Set([...i,...this.table.selected])]:this.table.isAllSelected?this.clear():this.table.selected=i}clear(){this.table.selected=[]}getRows(){const{callback:e}=se(this.table.selectBy);return this.table.rawRows.filter(t=>this.table.selected.includes(e(t)))}}class It{constructor(e){h(this,"table");this.table=e}goto(e){this.table.rowsPerPage&&e>=1&&e<=this.table.pageCount&&(this.table.currentPage=e,this.table.event.dispatch("change"))}previous(){this.goto(this.table.currentPage-1)}next(){this.goto(this.table.currentPage+1)}last(){this.goto(this.table.pageCount)}}class Mt{constructor(e){h(this,"table");this.table=e}set(e,t){this.table.setPage(1),this.table.search={value:e,scope:t}}recursive(e,t){this.table.setPage(1),this.table.search={value:e,scope:t,isRecursive:!0}}regex(e,t){this.table.setPage(1),this.table.search={value:e,scope:t,check:me.match}}clear(){this.table.setPage(1),this.table.search={value:""}}}var We;class Lt{constructor(e,t){w(this,We,A(""));h(this,"scope");h(this,"searchHandler");this.searchHandler=e,this.scope=t,this.cleanup()}get value(){return n(c(this,We))}set value(e){_(c(this,We),e,!0)}set(){this.searchHandler.set(this.value,this.scope)}init(e){return this.value=e,this.set(),this}recursive(){this.searchHandler.recursive(this.value,this.scope)}regex(){this.searchHandler.regex(this.value,this.scope)}clear(){this.value="",this.searchHandler.clear()}cleanup(){this.searchHandler.table.on("clearSearch",()=>this.clear())}}We=new WeakMap;var Ie;class Vt{constructor(e,t,s){w(this,Ie,A(""));h(this,"id",Math.random().toString(36).substring(2,15));h(this,"filterHandler");h(this,"field");h(this,"check");this.filterHandler=e,this.field=t,this.check=s??me.isLike,this.cleanup()}get value(){return n(c(this,Ie))}set value(e){_(c(this,Ie),e,!0)}set(e){this.filterHandler.set(this.value,this.field,e??this.check,this.id)}init(e){return this.value=e,this.set(),this}clear(){this.value="",this.filterHandler.unset(this.id)}cleanup(){this.filterHandler.table.on("clearFilters",()=>this.clear())}}Ie=new WeakMap;var Me;class Dt{constructor(e){w(this,Me,A(""));h(this,"id",Math.random().toString(36).substring(2,15));h(this,"queryHandler");h(this,"path",[]);h(this,"check");this.queryHandler=e,this.cleanup()}get value(){return n(c(this,Me))}set value(e){_(c(this,Me),e,!0)}from(e){return this.path=e,this}where(e){return this.check=e,this}set(e){e&&(this.value=e),this.queryHandler.set(this.path,this.value,this.check,this.id)}clear(){this.value="",this.queryHandler.unset(this.id)}cleanup(){this.queryHandler.table.on("clearFilters",()=>this.clear())}}Me=new WeakMap;var Le;class zt{constructor(e,t,s){w(this,Le,A(ne([])));h(this,"id",Math.random().toString(36).substring(2,15));h(this,"filterHandler");h(this,"collection");h(this,"field");h(this,"check");this.filterHandler=e,this.field=t,this.collection=[],this.check=s??me.isEqualTo,this.cleanup()}get criteria(){return n(c(this,Le))}set criteria(e){_(c(this,Le),e,!0)}set(e,t){if(this.collection.find(s=>s.value===e)?this.collection=this.collection.filter(s=>s.value!==e):this.collection=[{value:e,check:t??this.check},...this.collection],this.collection.length===0)return this.clear();this.filterHandler.set(this.collection,this.field,me.whereIn,this.id),this.criteria=this.collection.map(s=>s.value)}clear(){this.collection=[],this.criteria=[],this.filterHandler.unset(this.id)}cleanup(){this.filterHandler.table.on("clearFilters",()=>this.clear())}}Le=new WeakMap;class Jt{constructor(e,t){h(this,"callback");h(this,"precision");h(this,"table");this.table=e,this.callback=se(t).callback}distinct(e){const s=this.table.allRows.map(a=>this.callback(a)).reduce((a,l)=>{if(Array.isArray(l)){for(const o of l)a[o]=(a[o]??0)+1;return a}return a[l]=(a[l]??0)+1,a},{}),i=Object.entries(s).map(([a,l])=>({value:a,count:l}));if(e!=null&&e.sort){const[a,l]=e.sort;a==="count"&&i.sort((o,u)=>Ye.asc(o.value,u.value)),i.sort((o,u)=>Ye[l](o[a],u[a]))}return i}avg(e){if(this.precision=(e==null?void 0:e.precision)??2,this.table.allRows.length===0)return 0;const t=this.table.allRows.map(s=>this.callback(s)).filter(Boolean);return this.round(t.reduce((s,i)=>s+i,0)/t.length)}sum(e){this.precision=(e==null?void 0:e.precision)??2;const t=this.table.allRows.map(s=>this.callback(s));return this.round(t.reduce((s,i)=>s+i,0))}median(e){this.precision=(e==null?void 0:e.precision)??2;const t=[...this.table.allRows.map(i=>this.callback(i))].sort((i,a)=>i-a).filter(Boolean);if(t.length===0)return null;const s=Math.floor(t.length/2);return t.length%2?t[s]:this.round((t[s-1]+t[s])/2)}bounds(){const t=this.table.allRows.map(s=>this.callback(s)).filter(Boolean);return t.length===0?[null,null]:[Math.min(...t),Math.max(...t)]}round(e){return console.log(e,typeof e),Number(e.toFixed(this.precision))}}var Ve,De;class Qt{constructor(e,t,s){w(this,Ve,x(()=>this.createDirection()));w(this,De,x(()=>this.createIsActive()));h(this,"id",Math.random().toString(36).substring(2,15));h(this,"sortHandler");h(this,"field");h(this,"params");this.sortHandler=e,this.field=t,this.params=s??{}}get direction(){return n(c(this,Ve))}set direction(e){_(c(this,Ve),e)}get isActive(){return n(c(this,De))}set isActive(e){_(c(this,De),e)}set(){this.sortHandler.set(this.field,this.id,this.params)}init(e){return e?(this[e](),this):this}asc(){this.sortHandler.asc(this.field,this.id,this.params)}desc(){this.sortHandler.desc(this.field,this.id,this.params)}clear(){this.sortHandler.clear()}createIsActive(){var e;return this.id===((e=this.sortHandler.table.sort)==null?void 0:e.id)}createDirection(){var e;return this.isActive===!1?null:(e=this.sortHandler.table.sort)==null?void 0:e.direction}}Ve=new WeakMap,De=new WeakMap;class Kt{constructor(e){h(this,"table");this.table=e}download(e){const t=this.get(),s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}get(){const e=this.getRows();return e.unshift(this.getHeader().join(",")),e.join(`\r
`)}getRows(){return this.table.allRows.map(e=>Object.entries(e).map(([s,i])=>i===null?"":typeof i=="number"?i:`"${i}"`).join(","))}getHeader(){const[e]=this.table.allRows;return Object.entries(e).map(([t,s])=>`"${t}"`)}}var ze,Je,Qe,Ke;class Ut{constructor(e){w(this,ze,A(""));w(this,Je,x(()=>this.createRecords()));w(this,Qe,A([]));w(this,Ke,A(""));this.rawRecords=e}get value(){return n(c(this,ze))}set value(e){_(c(this,ze),e,!0)}get records(){return n(c(this,Je))}set records(e){_(c(this,Je),e)}get rawRecords(){return n(c(this,Qe))}set rawRecords(e){_(c(this,Qe),e)}get filter(){return n(c(this,Ke))}set filter(e){_(c(this,Ke),e,!0)}set(){this.filter=this.value}createRecords(){return ct(this.filter)?this.rawRecords.filter(e=>oe(e,this.filter)):this.rawRecords}}ze=new WeakMap,Je=new WeakMap,Qe=new WeakMap,Ke=new WeakMap;class Gt extends Bt{constructor(t=[],s={rowsPerPage:null}){super(t,s);h(this,"i18n");h(this,"view");h(this,"sortHandler");h(this,"filterHandler");h(this,"queryHandler");h(this,"selectHandler");h(this,"pageHandler");h(this,"searchHandler");this.translate(s.i18n),this.sortHandler=new Ft(this),this.filterHandler=new Ot(this),this.queryHandler=new Tt(this),this.selectHandler=new Wt(this),this.pageHandler=new It(this),this.searchHandler=new Mt(this)}setRows(t){var i;const s=((i=this.element)==null?void 0:i.scrollTop)??0;this.rawRows=t,gt(()=>{this.event.dispatch("change"),this.sortHandler.restore(),this.element&&setTimeout(()=>this.element.scrollTop=s,2)})}setRowsPerPage(t){this.rowsPerPage=t,this.setPage(1)}setPage(t){switch(t){case"previous":return this.pageHandler.previous();case"next":return this.pageHandler.next();case"last":return this.pageHandler.last();default:return this.pageHandler.goto(t)}}createSearch(t){return new Lt(this.searchHandler,t)}clearSearch(){this.searchHandler.clear(),this.event.dispatch("clearSearch"),this.setPage(1)}createRecordFilter(t){return new Ut(t)}createSort(t,s){return new Qt(this.sortHandler,t,s)}clearSort(){this.sortHandler.clear()}clearFilters(){this.filters=[],this.event.dispatch("clearFilters"),this.setPage(1)}createAdvancedFilter(t,s){return new zt(this.filterHandler,t,s)}createFilter(t,s){return new Vt(this.filterHandler,t,s)}createQuery(){return new Dt(this.queryHandler)}select(t){this.selectHandler.set(t)}selectAll(t={}){this.selectScope=t.scope==="all"?"all":"currentPage",this.selectHandler.all(this.selectScope)}getSelectedRows(){return this.selectHandler.getRows()}clearSelection(){this.selectHandler.clear()}on(t,s){this.event.add(t,s)}createCalculation(t){return new Jt(this,t)}createCSV(){return new Kt(this)}createView(t){return this.view=new Rt(this,t),this.view}getView(){return this.view}translate(t){this.i18n={search:"Search...",show:"Show",entries:"entries",filter:"Filter",rowCount:"Showing {start} to {end} of {total} entries",noRows:"No entries found",previous:"Previous",next:"Next",...t}}}var Xt=(r,e,t)=>e(t()),Yt=p("<td><!></td>"),Zt=p('<tr class="expandable-row"><td><div><!></div></td></tr>'),$t=p("<tr></tr> <!>",1);function es(r,e){re(e,!0);const t=()=>Ze(pt,"$activeTable",a),s=()=>Ze(Pt,"$activeRow",a),i=()=>Ze(yt,"$activeComponent",a),[a,l]=mt();let o=P(e,"cellOverides",19,()=>({})),u=P(e,"columns",19,()=>[]),v=P(e,"index",19,()=>-2),d=P(e,"row",19,()=>({})),R=P(e,"tableName",3,""),y=P(e,"isClickable",3,!1),H=P(e,"expandable",3,!1),K=P(e,"rowClickHandler",3,()=>{});function E(S){kt({row:S.conceptPath||S.dataset_id,table:R()}),K()(S)}let q=x(()=>{var S;return t()===R()&&(s()===((S=d())==null?void 0:S.conceptPath)||s()===d().dataset_id)});var $=$t(),X=U($);X.__click=[Xt,E,d],ve(X,21,u,be,(S,B,te)=>{var V=Yt(),ue=m(V);{var de=F=>{const W=x(()=>o()[n(B).dataElement]);var k=ae(),b=U(k);{let C=x(()=>({tableName:R(),index:v(),row:d(),cell:d()[n(B).dataElement]}));tt(b,()=>n(W),(M,L)=>{L(M,{get data(){return n(C)}})})}g(F,k)},Y=F=>{var W=rt();N(()=>Z(W,d()[n(B).dataElement]?d()[n(B).dataElement]:"")),g(F,W)};T(ue,F=>{o()[n(B).dataElement]?F(de):F(Y,!1)})}f(V),N((F,W,k)=>{J(V,"id",`row-${F??""}-col-${W??""}`),G(V,1,k)},[()=>v().toString(),()=>te.toString(),()=>{var F,W;return we((W=(F=n(B))==null?void 0:F.class)!=null&&W.includes("text-center")?"text-center":"")}]),g(S,V)}),f(X);var ee=I(X,2);{var Ue=S=>{var B=Zt(),te=m(B),V=m(te),ue=m(V);{var de=Y=>{const F=x(i);var W=ae(),k=U(W);tt(k,()=>n(F),(b,C)=>{C(b,{get data(){return d()}})}),g(Y,W)};T(ue,Y=>{i()&&Y(de)})}f(V),f(te),f(B),N(Y=>{J(B,"id",`active-row-${Y??""}`),J(te,"colspan",u().length)},[()=>v().toString()]),Ct(3,V,()=>At,()=>({axis:"y"})),g(S,B)};T(ee,S=>{H()&&n(q)&&s()&&S(Ue)})}N(S=>{J(X,"id",`row-${S??""}`),G(X,1,we(y()?"cursor-pointer":"")),J(X,"tabindex",y()?0:-1)},[()=>v().toString()]),g(r,$),ie(),l()}he(["click"]);var ts=p('<th><input type="text" class="input text-sm w-full" placeholder="Filter"/></th>');function ss(r,e){re(e,!0);let t=P(e,"class",3,"");const s=e.handler.createFilter(e.filterBy);let i;const a=()=>{s.set(),e.handler instanceof xt&&(clearTimeout(i),i=setTimeout(()=>{e.handler.invalidate()},400))};var l=ts(),o=m(l);lt(o),o.__input=a,f(l),N(()=>G(l,1,we(t()))),nt(o,()=>s.value,u=>s.value=u),g(r,l),ie()}he(["input"]);var rs=(r,e)=>e.set(),is=p('<i class="fa-solid fa-sort-up"></i>'),as=p('<i class="fa-solid fa-sort-down"></i>'),ls=p('<i class="fa-solid fa-sort"></i>'),ns=p("<th><!> <!></th>");function cs(r,e){re(e,!0);let t=P(e,"class",3,"");const s=e.handler.createSort(e.orderBy);var i=ns();let a;i.__click=[rs,s];var l=m(i);at(l,()=>e.children??it);var o=I(l,2);{var u=d=>{var R=ae(),y=U(R);{var H=E=>{var q=is();g(E,q)},K=E=>{var q=as();g(E,q)};T(y,E=>{s.direction==="asc"?E(H):E(K,!1)})}g(d,R)},v=d=>{var R=ls();g(d,R)};T(o,d=>{s.isActive?d(u):d(v,!1)})}f(i),N(d=>a=G(i,1,`cursor-pointer select-none align-bottom ${t()??""}`,null,a,d),[()=>({active:s.isActive})]),g(r,i),ie()}he(["click"]);const os=(r,e,t)=>{St(e.tableName,t().rowsPerPage),t().setPage(1)};var hs=p("<option> </option>"),us=p('<aside><label class="flex place-items-center">Show <select id="row-count-select" class="ml-2 rounded-xl" aria-label="Rows per page"></select></label></aside>');function ds(r,e){re(e,!0);let t=P(e,"handler",7),s=P(e,"options",19,()=>[5,10,20,50]),i=P(e,"class",3,"");var a=us(),l=m(a),o=I(m(l));o.__change=[os,e,t],ve(o,21,s,be,(u,v)=>{var d=hs(),R=m(d,!0);f(d);var y={};N(()=>{Z(R,n(v)),y!==(y=n(v))&&(d.value=(d.__value=n(v))??"")}),g(u,d)}),f(o),f(l),f(a),N(()=>G(a,1,we(i()))),wt(o,()=>t().rowsPerPage,u=>t().rowsPerPage=u),g(r,a),ie()}he(["change"]);var fs=p("<b> </b> - <b> </b> / <b> </b>",1),gs=p('<aside class="text-sm leading-8 mr-6"><!></aside>');function vs(r,e){re(e,!0);let t=x(()=>e.handler.rowCount),s=x(()=>n(t).start),i=x(()=>n(t).end),a=x(()=>n(t).total);var l=gs(),o=m(l);{var u=v=>{var d=fs(),R=U(d),y=m(R,!0);f(R);var H=I(R,2),K=m(H,!0);f(H);var E=I(H,2),q=m(E,!0);f(E),N(()=>{Z(y,n(s)),Z(K,n(i)),Z(q,n(a))}),g(v,d)};T(o,v=>{n(a)>0&&v(u)})}f(l),g(r,l),ie()}var bs=(r,e)=>e("previous"),ws=p('<button type="button"> </button>'),ms=(r,e)=>e("next"),_s=p('<button type="button" aria-label="Previous" title="Previous"><i class="fa-solid fa-arrow-left"></i></button> <!> <button type="button" aria-label="Next" title="Next"><i class="fa-solid fa-arrow-right"></i></button>',1),Ps=p('<section class="pagination flex gap-0" aria-label="pagination"><!></section>');function ks(r,e){re(e,!0);const t=l=>{e.handler.setPage(l)};var s=Ps(),i=m(s);{var a=l=>{var o=_s(),u=U(o);u.__click=[bs,t];var v=I(u,2);ve(v,17,()=>e.handler.pagesWithEllipsis,be,(R,y)=>{var H=ws();H.__click=function(...q){var $;($=n(y)?()=>t(n(y)):()=>{})==null||$.apply(this,q)};let K;var E=m(H,!0);f(H),N(q=>{J(H,"aria-label",n(y)?"Page "+n(y):"Ellipses"),J(H,"title",n(y)?"Page "+n(y):"Ellipses"),H.disabled=n(y)===null,J(H,"aria-current",e.handler.currentPage===n(y)?"page":!1),K=G(H,1,"",null,K,q),Z(E,n(y)??"...")},[()=>({active:e.handler.currentPage===n(y)})]),g(R,H)});var d=I(v,2);d.__click=[ms,t],N(()=>{u.disabled=e.handler.currentPage===1,d.disabled=e.handler.currentPage===e.handler.pages.length}),g(l,o)};T(i,l=>{(e.handler.pagesWithEllipsis!==void 0||e.handler.pages!==void 0)&&l(a)})}f(s),g(r,s),ie()}he(["click"]);var ps=p('<input class="input text-sm sm:w-64 w-36" type="search" placeholder="Search..."/>');function ys(r,e){re(e,!0);const t=e.handler.createSearch();var s=ps();lt(s),s.__input=()=>t.set(),nt(s,()=>t.value,i=>t.value=i),g(r,s),ie()}he(["input"]);var Hs=p('<div class="flex-auto"><h2 class="my-2"> </h2></div>'),Rs=p('<div class="flex-none"><!></div>'),xs=p("<header><!> <!> <!></header>"),Ss=p("<th> </th>"),Cs=p('<tr><td class="text-center py-8"><div class="flex justify-center items-center"><!></div></td></tr>'),As=p("<tr><td>No entries found.</td></tr>"),Ns=p('<footer class="flex justify-between mt-1"><!> <div class="flex justify-end gap-4"><!> <!></div></footer>'),js=p('<div class="table-wrap space-y-1"><!> <table><thead class="svelte-buj8sd"><tr></tr></thead><tbody><!></tbody></table> <!></div>');function Ks(r,e){re(e,!0);let t=P(e,"isLoading",11,!1),s=P(e,"searchable",3,!1),i=P(e,"title",3,""),a=P(e,"fullWidth",3,!1),l=P(e,"options",19,()=>[5,10,20,50,100]),o=P(e,"columns",19,()=>[]),u=P(e,"cellOverides",19,()=>({})),v=P(e,"tableAuto",3,!0),d=P(e,"stickyHeader",3,!1),R=P(e,"showPagination",3,!0),y=P(e,"class",3,""),H=P(e,"isClickable",3,!1),K=P(e,"expandable",3,!1),E=P(e,"rowClickHandler",3,()=>{});vt(()=>{R()||(e.handler instanceof Gt?e.handler.setRowsPerPage(e.handler.allRows.length):e.handler.setRowsPerPage(e.handler.totalRows))});var q=js(),$=m(q);{var X=k=>{var b=xs(),C=m(b);{var M=j=>{var z=Hs(),Q=m(z),fe=m(Q,!0);f(Q),f(z),N(()=>Z(fe,i())),g(j,z)};T(C,j=>{i()&&j(M)})}var L=I(C,2);at(L,()=>e.tableActions??it);var D=I(L,2);{var O=j=>{var z=Rs(),Q=m(z);ys(Q,{get handler(){return e.handler}}),f(z),g(j,z)};T(D,j=>{s()&&j(O)})}f(b),N(()=>G(b,1,`flex items-center ${i()||e.tableActions?"justify-between":"justify-end"} gap-4`)),g(k,b)};T($,k=>{(i()||s()||e.tableActions)&&k(X)})}var ee=I($,2);let Ue;var S=m(ee),B=m(S);let te;ve(B,21,o,be,(k,b)=>{var C=ae(),M=U(C);{var L=O=>{cs(O,{get handler(){return e.handler},get orderBy(){return n(b).dataElement},get class(){return n(b).class},children:(j,z)=>{bt();var Q=rt();N(()=>Z(Q,n(b).label)),g(j,Q)},$$slots:{default:!0}})},D=O=>{var j=ae(),z=U(j);{var Q=le=>{ss(le,{get handler(){return e.handler},get class(){return n(b).class},get filterBy(){return n(b).dataElement}})},fe=le=>{var Ge=Ss(),ht=m(Ge,!0);f(Ge),N(()=>{G(Ge,1,we(n(b).class),"svelte-buj8sd"),Z(ht,n(b).label)}),g(le,Ge)};T(z,le=>{n(b).filter?le(Q):le(fe,!1)},!0)}g(O,j)};T(M,O=>{n(b).sort?O(L):O(D,!1)})}g(k,C)}),f(B),f(S);var V=I(S),ue=m(V);{var de=k=>{var b=Cs(),C=m(b),M=m(C),L=m(M);Nt(L,{ring:!0,size:"small",color:"primary"}),f(M),f(C),f(b),N(()=>J(C,"colspan",o().length)),g(k,b)},Y=k=>{var b=ae(),C=U(b);{var M=D=>{var O=ae(),j=U(O);ve(j,17,()=>e.handler.rows,be,(z,Q,fe)=>{es(z,{get tableName(){return e.tableName},get cellOverides(){return u()},get columns(){return o()},index:fe,get row(){return n(Q)},get rowClickHandler(){return E()},get isClickable(){return H()},get expandable(){return K()}})}),g(D,O)},L=D=>{var O=As(),j=m(O);f(O),N(()=>J(j,"colspan",o().length)),g(D,O)};T(C,D=>{e.handler.rows.length>0?D(M):D(L,!1)},!0)}g(k,b)};T(ue,k=>{t()?k(de):k(Y,!1)})}f(V),f(ee);var F=I(ee,2);{var W=k=>{var b=Ns(),C=m(b);vs(C,{get handler(){return e.handler}});var M=I(C,2),L=m(M);ds(L,{get tableName(){return e.tableName},get handler(){return e.handler},get options(){return l()}});var D=I(L,2);ks(D,{get handler(){return e.handler}}),f(M),f(b),g(k,b)};T(F,k=>{R()&&k(W)})}f(q),N((k,b)=>{J(ee,"id",`${e.tableName??""}-table`),J(ee,"data-testid",`${e.tableName??""}-table`),Ue=G(ee,1,`table table-${v()?"auto":"fixed"} ${y()??""}`,"svelte-buj8sd",Ue,k),te=G(B,1,"",null,te,b)},[()=>({"w-max":a(),clickable:H()}),()=>({"sticky-header":d()})]),g(r,q),ie()}export{Ks as R,Gt as T};
