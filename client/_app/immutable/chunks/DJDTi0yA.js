import{s as Ce,S as Ie,e as g,a as x,c as v,b as C,g as A,f as m,m as b,i as w,h,T as Te,U as Pe,V as xe,k as fe,E as ke,W as It,Q as Oe,R as ze,X as at,x as Le,t as j,d as U,N as We,j as ae,C as he,q as ee,O as Tt,D as $e,a8 as Pt,n as N,a9 as xt,v as de,y as st,o as ot,l as Q,u as Qe,A as Ne,B as Re}from"./CJ6ziB5E.js";import{h as pe,u as Be}from"./B1UO4OkM.js";import{e as Ee}from"./B9MtYE6U.js";import{S as ye,i as De,t as $,g as se,a as E,b as oe,j as it,c as ct,d as R,e as V,m as M,f as L,h as Ve}from"./CVe-HNkC.js";import{g as ft}from"./VC8iF-cC.js";import{g as At}from"./DlmMpHpA.js";import"./DXVbyi0u.js";import{P as ve}from"./jzPdkqxf.js";import{T as St,a as Me,C as ut}from"./PiK8duxU.js";import{w as Nt,g as Rt}from"./D9QhBFw8.js";import{b as Vt}from"./Bt-Xh7oU.js";import{p as be}from"./Ct076jVC.js";import{f as ue,a as Mt,b as K,s as Lt}from"./Do7xJ0Gi.js";import{Q as Bt}from"./Cz7E3h2M.js";import{E as jt,e as Ut,r as Ft,a as qt}from"./B4gHSpaC.js";import{f as dt,t as pt}from"./ui9bFG3V.js";import{s as Ht}from"./qLd7hq4-.js";import{a as Ae}from"./DZ_zdl5z.js";import{A as je}from"./CAK_SYwa.js";import{T as Ot}from"./KKCWsigZ.js";import{U as zt}from"./CQe9oifM.js";import{E as Ue}from"./DoUlG3mf.js";import{C as Ge}from"./DBbPAz1P.js";import{v as Wt}from"./DvF23Exx.js";const ge=Nt({current:0,total:0,stepMap:[]});async function Qt(s,e){if(e===""&&e.trim()==="")throw"Please input a Dataset ID name";const t=/^[\w \-\\/?+=[\].():"']+$/g;if(!e.match(t))throw`Name can only contain letters, numbers, and these special symbols - ? + = [ ] . ( ) : ' "`;return await be("picsure/dataset/named",{queryId:s,name:e})}function Xe(s,e,t){const l=s.slice();return l[10]=e[t],l}function Ye(s){let e,t,l,r,a=Ee(Array.from(Array(s[0].total).keys())),n=[];for(let o=0;o<a.length;o+=1)n[o]=Je(Xe(s,a,o));return{c(){e=g("header");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=v(o,"HEADER",{class:!0});var i=C(e);for(let c=0;c<n.length;c+=1)n[c].l(i);i.forEach(m),this.h()},h(){b(e,"class","stepper-header flex items-center border-t mt-[15px] mb-7 border-surface-400-500-token gap-4")},m(o,i){w(o,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);r=!0},p(o,i){if(i&3){a=Ee(Array.from(Array(o[0].total).keys()));let c;for(c=0;c<a.length;c+=1){const u=Xe(o,a,c);n[c]?n[c].p(u,i):(n[c]=Je(u),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=a.length}},i(o){r||(o&&at(()=>{r&&(l&&l.end(1),t=it(e,Ae,{duration:100}),t.start())}),r=!0)},o(o){t&&t.invalidate(),o&&(l=ct(e,Ae,{duration:100})),r=!1},d(o){o&&m(e),Le(n,o),o&&l&&l.end()}}}function Je(s){let e,t,l=(s[1](s[10])?`Step ${s[10]+1}`:s[10]+1)+"",r,a,n,o;return{c(){e=g("div"),t=g("span"),r=j(l),o=x(),this.h()},l(i){e=v(i,"DIV",{class:!0});var c=C(e);t=v(c,"SPAN",{"data-testid":!0,class:!0});var u=C(t);r=U(u,l),u.forEach(m),o=A(c),c.forEach(m),this.h()},h(){b(t,"data-testid",a="step-"+s[0].stepMap[s[10]]),b(t,"class",n="badge text-sm "+(s[1](s[10])?"variant-filled-primary":"variant-filled-surface")),b(e,"class","stepper-header-step -mt-[15px] transition-all duration-300"),We(e,"flex-1",s[1](s[10]))},m(i,c){w(i,e,c),h(e,t),h(t,r),h(e,o)},p(i,c){c&3&&l!==(l=(i[1](i[10])?`Step ${i[10]+1}`:i[10]+1)+"")&&ae(r,l),c&1&&a!==(a="step-"+i[0].stepMap[i[10]])&&b(t,"data-testid",a),c&3&&n!==(n="badge text-sm "+(i[1](i[10])?"variant-filled-primary":"variant-filled-surface"))&&b(t,"class",n),c&3&&We(e,"flex-1",i[1](i[10]))},d(i){i&&m(e)}}}function Gt(s){let e,t,l,r,a,n=s[0].total&&Ye(s);const o=s[5].default,i=Ie(o,s,s[4],null);return{c(){e=g("div"),n&&n.c(),t=x(),l=g("div"),i&&i.c(),this.h()},l(c){e=v(c,"DIV",{class:!0,"data-testid":!0});var u=C(e);n&&n.l(u),t=A(u),l=v(u,"DIV",{class:!0});var d=C(l);i&&i.l(d),d.forEach(m),u.forEach(m),this.h()},h(){b(l,"class","stepper-content"),b(e,"class",r="stepper space-y-4 "+(s[2].class??"")),b(e,"data-testid","stepper")},m(c,u){w(c,e,u),n&&n.m(e,null),h(e,t),h(e,l),i&&i.m(l,null),a=!0},p(c,[u]){c[0].total?n?(n.p(c,u),u&1&&$(n,1)):(n=Ye(c),n.c(),$(n,1),n.m(e,t)):n&&(se(),E(n,1,1,()=>{n=null}),oe()),i&&i.p&&(!a||u&16)&&Te(i,o,c,c[4],a?xe(o,c[4],u,null):Pe(c[4]),null),(!a||u&4&&r!==(r="stepper space-y-4 "+(c[2].class??"")))&&b(e,"class",r)},i(c){a||($(n),$(i,c),a=!0)},o(c){E(n),E(i,c),a=!1},d(c){c&&m(e),n&&n.d(),i&&i.d(c)}}}function Xt(s,e,t){let l,r;fe(s,ge,f=>t(0,r=f));let{$$slots:a={},$$scope:n}=e,{buttonCompleteLabel:o=""}=e;ke("buttonCompleteLabel",o),ke("state",ge);const i=It();async function c(f){if(await new Promise(D=>setTimeout(D)),f)return;const p=r.current+1,_=r.stepMap[p];i("next",{step:p,name:_,state:r}),he(ge,r.current=p,r)}function u(){const f=r.current===0?0:r.current-1,p=r.stepMap[f];i("back",{step:f,name:p,state:r}),he(ge,r.current=f,r)}function d(f,p){p||i("complete",{step:f,name:r.stepMap[f],state:r})}return ke("onBack",u),ke("onNext",c),ke("onComplete",d),s.$$set=f=>{t(2,e=Oe(Oe({},e),ze(f))),"buttonCompleteLabel"in f&&t(3,o=f.buttonCompleteLabel),"$$scope"in f&&t(4,n=f.$$scope)},s.$$.update=()=>{s.$$.dirty&1&&t(1,l=f=>f===r.current)},e=ze(e),[r,l,e,o,n,a]}class Yt extends ye{constructor(e){super(),De(this,e,Xt,Gt,Ce,{buttonCompleteLabel:3})}}const Jt=s=>({}),Ke=s=>({}),Kt=s=>({}),Ze=s=>({});function et(s){let e,t,l,r,a,n;const o=s[10].header,i=Ie(o,s,s[14],Ze),c=s[10].default,u=Ie(c,s,s[14],null),d=u||Zt(s);let f=s[6].total>1&&tt(s);return{c(){e=g("div"),t=g("header"),i&&i.c(),l=x(),r=g("div"),d&&d.c(),a=x(),f&&f.c(),this.h()},l(p){e=v(p,"DIV",{class:!0,"data-testid":!0});var _=C(e);t=v(_,"HEADER",{class:!0});var D=C(t);i&&i.l(D),D.forEach(m),l=A(_),r=v(_,"DIV",{class:!0});var k=C(r);d&&d.l(k),k.forEach(m),a=A(_),f&&f.l(_),_.forEach(m),this.h()},h(){b(t,"class","step-header text-2xl font-bold"),b(r,"class","step-content space-y-4 px-2"),b(e,"class","step space-y-4"),b(e,"data-testid","step-"+(s[7]+1))},m(p,_){w(p,e,_),h(e,t),i&&i.m(t,null),h(e,l),h(e,r),d&&d.m(r,null),h(e,a),f&&f.m(e,null),n=!0},p(p,_){i&&i.p&&(!n||_&16384)&&Te(i,o,p,p[14],n?xe(o,p[14],_,Kt):Pe(p[14]),Ze),u&&u.p&&(!n||_&16384)&&Te(u,c,p,p[14],n?xe(c,p[14],_,null):Pe(p[14]),null),p[6].total>1?f?(f.p(p,_),_&64&&$(f,1)):(f=tt(p),f.c(),$(f,1),f.m(e,null)):f&&(se(),E(f,1,1,()=>{f=null}),oe())},i(p){n||($(i,p),$(d,p),$(f),n=!0)},o(p){E(i,p),E(d,p),E(f),n=!1},d(p){p&&m(e),i&&i.d(p),d&&d.d(p),f&&f.d()}}}function Zt(s){let e,t=s[7]+1+"",l,r;return{c(){e=j("(Step "),l=j(t),r=j(" Content)")},l(a){e=U(a,"(Step "),l=U(a,t),r=U(a," Content)")},m(a,n){w(a,e,n),w(a,l,n),w(a,r,n)},p:N,d(a){a&&(m(e),m(l),m(r))}}}function tt(s){let e,t,l,r,a,n,o,i,c;const u=[ll,tl,el],d=[];function f(k,y){return k[8].navigation?0:k[7]!==0?1:2}t=f(s),l=d[t]=u[t](s);const p=[al,nl],_=[];function D(k,y){return k[7]<k[6].total-1?0:1}return a=D(s),n=_[a]=p[a](s),{c(){e=g("div"),l.c(),r=x(),n.c(),this.h()},l(k){e=v(k,"DIV",{class:!0});var y=C(e);l.l(y),r=A(y),n.l(y),y.forEach(m),this.h()},h(){b(e,"class","step-navigation flex justify-between gap-4")},m(k,y){w(k,e,y),d[t].m(e,null),h(e,r),_[a].m(e,null),c=!0},p(k,y){let S=t;t=f(k),t===S?d[t].p(k,y):(se(),E(d[S],1,1,()=>{d[S]=null}),oe(),l=d[t],l?l.p(k,y):(l=d[t]=u[t](k),l.c()),$(l,1),l.m(e,r));let B=a;a=D(k),a===B?_[a].p(k,y):(se(),E(_[B],1,1,()=>{_[B]=null}),oe(),n=_[a],n?n.p(k,y):(n=_[a]=p[a](k),n.c()),$(n,1),n.m(e,null))},i(k){c||($(l),$(n),k&&at(()=>{c&&(i&&i.end(1),o=it(e,Ae,{duration:100}),o.start())}),c=!0)},o(k){E(l),E(n),o&&o.invalidate(),k&&(i=ct(e,Ae,{duration:100})),c=!1},d(k){k&&m(e),d[t].d(),_[a].d(),k&&i&&i.end()}}}function el(s){let e;return{c(){e=g("div")},l(t){e=v(t,"DIV",{}),C(e).forEach(m)},m(t,l){w(t,e,l)},p:N,i:N,o:N,d(t){t&&m(e)}}}function tl(s){let e,t;return e=new je({props:{disabled:s[6].current===0,$$slots:{default:[rl]},$$scope:{ctx:s}}}),e.$on("click",s[11]),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,r){M(e,l,r),t=!0},p(l,r){const a={};r&64&&(a.disabled=l[6].current===0),r&16384&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function ll(s){let e,t;const l=s[10].navigation,r=Ie(l,s,s[14],Ke);return{c(){e=g("div"),r&&r.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=C(e);r&&r.l(n),n.forEach(m),this.h()},h(){b(e,"class","step-navigation-slot")},m(a,n){w(a,e,n),r&&r.m(e,null),t=!0},p(a,n){r&&r.p&&(!t||n&16384)&&Te(r,l,a,a[14],t?xe(l,a[14],n,Jt):Pe(a[14]),Ke)},i(a){t||($(r,a),t=!0)},o(a){E(r,a),t=!1},d(a){a&&m(e),r&&r.d(a)}}}function rl(s){let e;return{c(){e=j("Back")},l(t){e=U(t,"Back")},m(t,l){w(t,e,l)},d(t){t&&m(e)}}}function nl(s){let e,t;return e=new je({props:{name:s[1]||"complete",angle:"right",variant:"filled",disabled:s[0],$$slots:{default:[sl]},$$scope:{ctx:s}}}),e.$on("click",s[13]),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,r){M(e,l,r),t=!0},p(l,r){const a={};r&2&&(a.name=l[1]||"complete"),r&1&&(a.disabled=l[0]),r&16386&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function al(s){let e,t;return e=new je({props:{name:"next",angle:"right",variant:"filled",disabled:s[0],$$slots:{default:[ol]},$$scope:{ctx:s}}}),e.$on("click",s[12]),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,r){M(e,l,r),t=!0},p(l,r){const a={};r&1&&(a.disabled=l[0]),r&16384&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function sl(s){let e=(s[1]||"Complete")+"",t;return{c(){t=j(e)},l(l){t=U(l,e)},m(l,r){w(l,t,r)},p(l,r){r&2&&e!==(e=(l[1]||"Complete")+"")&&ae(t,e)},d(l){l&&m(t)}}}function ol(s){let e;return{c(){e=j("Next")},l(t){e=U(t,"Next")},m(t,l){w(t,e,l)},d(t){t&&m(e)}}}function il(s){let e,t,l=s[7]===s[6].current&&et(s);return{c(){l&&l.c(),e=ee()},l(r){l&&l.l(r),e=ee()},m(r,a){l&&l.m(r,a),w(r,e,a),t=!0},p(r,[a]){r[7]===r[6].current?l?(l.p(r,a),a&64&&$(l,1)):(l=et(r),l.c(),$(l,1),l.m(e.parentNode,e)):l&&(se(),E(l,1,1,()=>{l=null}),oe())},i(r){t||($(l),t=!0)},o(r){E(l),t=!1},d(r){r&&m(e),l&&l.d(r)}}}function cl(s,e,t){let l,r=N,a=()=>(r(),r=xt(f,P=>t(6,l=P)),f);s.$$.on_destroy.push(()=>r());let{$$slots:n={},$$scope:o}=e;const i=Tt(n);let{name:c}=e,{locked:u=!1}=e,{buttonCompleteLabel:d=$e("buttonCompleteLabel")}=e,{state:f=$e("state")}=e;a();let{onNext:p=$e("onNext")}=e,{onBack:_=$e("onBack")}=e,{onComplete:D=$e("onComplete")}=e;const k=l.total;he(f,l.stepMap=[...l.stepMap,c],l),he(f,l.total++,l),Pt(()=>{he(f,l.total--,l),he(f,l.stepMap=l.stepMap.filter(P=>P!==c),l)});const y=()=>_(),S=()=>p(u),B=()=>D(k,u);return s.$$set=P=>{"name"in P&&t(9,c=P.name),"locked"in P&&t(0,u=P.locked),"buttonCompleteLabel"in P&&t(1,d=P.buttonCompleteLabel),"state"in P&&a(t(2,f=P.state)),"onNext"in P&&t(3,p=P.onNext),"onBack"in P&&t(4,_=P.onBack),"onComplete"in P&&t(5,D=P.onComplete),"$$scope"in P&&t(14,o=P.$$scope)},[u,d,f,p,_,D,l,k,i,c,n,y,S,B,o]}class we extends ye{constructor(e){super(),De(this,e,cl,il,Ce,{name:9,locked:0,buttonCompleteLabel:1,state:2,onNext:3,onBack:4,onComplete:5})}}function fl(s){let e,t,l,r,a,n,o,i,c,u,d,f;return{c(){e=g("div"),t=g("p"),l=j(s[0]),r=x(),a=g("div"),n=g("button"),o=j(s[3]),i=x(),c=g("button"),u=j(s[4]),this.h()},l(p){e=v(p,"DIV",{class:!0});var _=C(e);t=v(_,"P",{});var D=C(t);l=U(D,s[0]),D.forEach(m),r=A(_),a=v(_,"DIV",{class:!0});var k=C(a);n=v(k,"BUTTON",{class:!0});var y=C(n);o=U(y,s[3]),y.forEach(m),i=A(k),c=v(k,"BUTTON",{class:!0});var S=C(c);u=U(S,s[4]),S.forEach(m),k.forEach(m),_.forEach(m),this.h()},h(){b(n,"class","btn variant-ghost-surface hover:variant-filled-surface mt-6"),b(c,"class","btn variant-filled hover:variant-filled-primary mt-6"),b(a,"class","flex justify-end gap-4"),b(e,"class","flex flex-col gap-4")},m(p,_){w(p,e,_),h(e,t),h(t,l),h(e,r),h(e,a),h(a,n),h(n,o),h(a,i),h(a,c),h(c,u),d||(f=[de(n,"click",s[6]),de(c,"click",s[7])],d=!0)},p(p,[_]){_&1&&ae(l,p[0]),_&8&&ae(o,p[3]),_&16&&ae(u,p[4])},i:N,o:N,d(p){p&&m(e),d=!1,st(f)}}}function ul(s,e,t){let l;const r=ft();fe(s,r,f=>t(8,l=f));let{message:a}=e,{onCancel:n=()=>r.close()}=e,{onConfirm:o}=e,{cancelText:i="Cancel"}=e,{confirmText:c="Accept"}=e;ot(()=>{var f,p,_,D,k,y,S,B,P,G;(f=l[0])!=null&&f.meta.onCancel&&t(1,n=(p=l[0])==null?void 0:p.meta.onCancel),(_=l[0])!=null&&_.meta.onConfirm&&t(2,o=(D=l[0])==null?void 0:D.meta.onConfirm),(k=l[0])!=null&&k.meta.confirmText&&t(4,c=(y=l[0])==null?void 0:y.meta.confirmText),(S=l[0])!=null&&S.meta.cancelText&&t(3,i=(B=l[0])==null?void 0:B.meta.cancelText),(P=l[0])!=null&&P.meta.message&&t(0,a=(G=l[0])==null?void 0:G.meta.message)});const u=()=>n(),d=()=>o();return s.$$set=f=>{"message"in f&&t(0,a=f.message),"onCancel"in f&&t(1,n=f.onCancel),"onConfirm"in f&&t(2,o=f.onConfirm),"cancelText"in f&&t(3,i=f.cancelText),"confirmText"in f&&t(4,c=f.confirmText)},[a,n,o,i,c,r,u,d]}class dl extends ye{constructor(e){super(),De(this,e,ul,fl,Ce,{message:0,onCancel:1,onConfirm:2,cancelText:3,confirmText:4})}}function pl(s){let e,t,l,r='<label for="summary" class="mr-8 font-bold">Summary:</label>',a,n,o,i,c,u,d="Participants",f,p,_,D,k,y,S="Variables",B,P,G,te,re,Y,J="Data Points";return{c(){e=g("div"),t=g("div"),l=g("div"),l.innerHTML=r,a=x(),n=g("div"),o=g("span"),i=j(s[1]),c=x(),u=g("label"),u.textContent=d,f=x(),p=g("div"),_=g("span"),D=j(s[0]),k=x(),y=g("label"),y.textContent=S,B=x(),P=g("div"),G=g("span"),te=j(s[2]),re=x(),Y=g("label"),Y.textContent=J,this.h()},l(X){e=v(X,"DIV",{id:!0,class:!0});var F=C(e);t=v(F,"DIV",{id:!0,class:!0});var z=C(t);l=v(z,"DIV",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-1vd72fa"&&(l.innerHTML=r),a=A(z),n=v(z,"DIV",{class:!0});var O=C(n);o=v(O,"SPAN",{id:!0,class:!0});var Z=C(o);i=U(Z,s[1]),Z.forEach(m),c=A(O),u=v(O,"LABEL",{for:!0,"data-svelte-h":!0}),Q(u)!=="svelte-1te5h4m"&&(u.textContent=d),O.forEach(m),f=A(z),p=v(z,"DIV",{class:!0});var le=C(p);_=v(le,"SPAN",{id:!0,class:!0});var ie=C(_);D=U(ie,s[0]),ie.forEach(m),k=A(le),y=v(le,"LABEL",{for:!0,"data-svelte-h":!0}),Q(y)!=="svelte-j0nyhs"&&(y.textContent=S),le.forEach(m),B=A(z),P=v(z,"DIV",{class:!0});var ne=C(P);G=v(ne,"SPAN",{id:!0,class:!0});var me=C(G);te=U(me,s[2]),me.forEach(m),re=A(ne),Y=v(ne,"LABEL",{for:!0,"data-svelte-h":!0}),Q(Y)!=="svelte-kgfncs"&&(Y.textContent=J),ne.forEach(m),z.forEach(m),F.forEach(m),this.h()},h(){b(l,"class","text-xl"),b(o,"id","participants"),b(o,"class","mr-2"),b(u,"for","participants"),b(n,"class","flex justify-left text-xl font-light"),b(_,"id","variables"),b(_,"class","mr-2"),b(y,"for","variables"),b(p,"class","flex justify-left text-xl font-light"),b(G,"id","dataPoints"),b(G,"class","mr-2"),b(Y,"for","dataPoints"),b(P,"class","flex justify-left text-xl font-light"),b(t,"id","summary"),b(t,"class","w-full grid grid-flow-col auto-cols-auto"),b(e,"id","stats"),b(e,"class","w-full flex justify-evenly mb-5 pb-2 svelte-11yjabd")},m(X,F){w(X,e,F),h(e,t),h(t,l),h(t,a),h(t,n),h(n,o),h(o,i),h(n,c),h(n,u),h(t,f),h(t,p),h(p,_),h(_,D),h(p,k),h(p,y),h(t,B),h(t,P),h(P,G),h(G,te),h(P,re),h(P,Y)},p(X,[F]){F&2&&ae(i,X[1]),F&1&&ae(D,X[0]),F&4&&ae(te,X[2])},i:N,o:N,d(X){X&&m(e)}}}function ml(s,e,t){let l,r,a,n,o,i;fe(s,dt,u=>t(5,o=u)),fe(s,pt,u=>t(6,i=u));let{exports:c}=jt;return fe(s,c,u=>t(4,n=u)),s.$$.update=()=>{s.$$.dirty&64&&t(1,l=i),s.$$.dirty&48&&t(0,r=o.length+n.length),s.$$.dirty&3&&t(2,a=typeof l=="number"?l*r:0)},[r,l,a,c,n,o,i]}class Se extends ye{constructor(e){super(),De(this,e,ml,pl,Ce,{})}}function lt(s,e,t){const l=s.slice();return l[51]=e[t],l}function _l(s,e,t){const l=s.slice();return l[48]=e[t],l}function hl(s){let e,t,l,r,a,n,o={ctx:s,current:null,token:null,hasCatch:!0,pending:kl,then:vl,catch:gl,blocks:[,,,]};pe(e=s[5],o);const i=[wl,$l],c=[];function u(d,f){return d[11]?1:0}return l=u(s),r=c[l]=i[l](s),{c(){o.block.c(),t=x(),r.c(),a=ee()},l(d){o.block.l(d),t=A(d),r.l(d),a=ee()},m(d,f){o.block.m(d,o.anchor=f),o.mount=()=>t.parentNode,o.anchor=t,w(d,t,f),c[l].m(d,f),w(d,a,f),n=!0},p(d,f){s=d,o.ctx=s,f[0]&32&&e!==(e=s[5])&&pe(e,o);let p=l;l=u(s),l===p?c[l].p(s,f):(se(),E(c[p],1,1,()=>{c[p]=null}),oe(),r=c[l],r?r.p(s,f):(r=c[l]=i[l](s),r.c()),$(r,1),r.m(a.parentNode,a))},i(d){n||($(o.block),$(r),n=!0)},o(d){for(let f=0;f<3;f+=1){const p=o.blocks[f];E(p)}E(r),n=!1},d(d){d&&(m(t),m(a)),o.block.d(d),o.token=null,o=null,c[l].d(d)}}}function bl(s){let e,t,l='<i class="fa-solid fa-triangle-exclamation text-4xl"></i>',r,a,n=`<h3 class="h3">Warning</h3> <p>Warning: Your selected data exceeds 1,000,000 estimated data points, which is too
                large to export. Please reduce the data selection or the number of selected
                participants.</p>`,o,i,c,u="Back",d,f;return{c(){e=g("aside"),t=g("div"),t.innerHTML=l,r=x(),a=g("div"),a.innerHTML=n,o=x(),i=g("div"),c=g("button"),c.textContent=u,this.h()},l(p){e=v(p,"ASIDE",{class:!0});var _=C(e);t=v(_,"DIV",{"data-svelte-h":!0}),Q(t)!=="svelte-1dz1fc7"&&(t.innerHTML=l),r=A(_),a=v(_,"DIV",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-e8x9nn"&&(a.innerHTML=n),o=A(_),i=v(_,"DIV",{class:!0});var D=C(i);c=v(D,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(c)!=="svelte-1datm77"&&(c.textContent=u),D.forEach(m),_.forEach(m),this.h()},h(){b(a,"class","alert-message"),b(c,"class","btn variant-filled"),b(i,"class","alert-actions dark"),b(e,"class","alert variant-filled-error")},m(p,_){w(p,e,_),h(e,t),h(e,r),h(e,a),h(e,o),h(e,i),h(i,c),d||(f=de(c,"click",s[25]),d=!0)},p:N,i:N,o:N,d(p){p&&m(e),d=!1,f()}}}function gl(s){let e,t,l;return t=new Ue({props:{title:`An error occurred while preparing your dataset. Please try again. If this problem persists, please
                  contact an administrator.`}}),{c(){e=g("div"),R(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=C(e);V(t.$$.fragment,a),a.forEach(m),this.h()},h(){b(e,"class","flex justify-center mb-4")},m(r,a){w(r,e,a),M(t,e,null),l=!0},i(r){l||($(t.$$.fragment,r),l=!0)},o(r){E(t.$$.fragment,r),l=!1},d(r){r&&m(e),L(t)}}}function vl(s){return{c:N,l:N,m:N,i:N,o:N,d:N}}function kl(s){let e,t,l,r="Preparing your dataset...",a;return e=new ve({props:{width:"w-4"}}),{c(){R(e.$$.fragment),t=x(),l=g("div"),l.textContent=r},l(n){V(e.$$.fragment,n),t=A(n),l=v(n,"DIV",{"data-svelte-h":!0}),Q(l)!=="svelte-1m53t1h"&&(l.textContent=r)},m(n,o){M(e,n,o),w(n,t,o),w(n,l,o),a=!0},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){E(e.$$.fragment,n),a=!1},d(n){n&&(m(t),m(l)),L(e,n)}}}function $l(s){let e,t,l,r,a="Loading sample IDs...",n;return t=new ve({props:{width:"w-4"}}),{c(){e=g("div"),R(t.$$.fragment),l=x(),r=g("div"),r.textContent=a,this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);V(t.$$.fragment,i),l=A(i),r=v(i,"DIV",{"data-svelte-h":!0}),Q(r)!=="svelte-jeedzs"&&(r.textContent=a),i.forEach(m),this.h()},h(){b(e,"class","flex justify-center items-center")},m(o,i){w(o,e,i),M(t,e,null),h(e,l),h(e,r),n=!0},p:N,i(o){n||($(t.$$.fragment,o),n=!0)},o(o){E(t.$$.fragment,o),n=!1},d(o){o&&m(e),L(t)}}}function wl(s){let e,t,l,r;e=new Ot({props:{tableName:"ExportSummary",data:s[1],columns:s[17]}});let a=El(s);return{c(){R(e.$$.fragment),t=x(),a&&a.c(),l=ee()},l(n){V(e.$$.fragment,n),t=A(n),a&&a.l(n),l=ee()},m(n,o){M(e,n,o),w(n,t,o),a&&a.m(n,o),w(n,l,o),r=!0},p(n,o){const i={};o[0]&2&&(i.data=n[1]),e.$set(i),a.p(n,o)},i(n){r||($(e.$$.fragment,n),$(a),r=!0)},o(n){E(e.$$.fragment,n),E(a),r=!1},d(n){n&&(m(t),m(l)),L(e,n),a&&a.d(n)}}}function El(s){let e,t,l,r,a,n,o="Include sample identifiers",i;const c=[yl,Cl],u=[];function d(f,p){return f[12]?0:1}return l=d(s),r=u[l]=c[l](s),{c(){e=g("div"),t=g("label"),r.c(),a=x(),n=g("span"),n.textContent=o,this.h()},l(f){e=v(f,"DIV",{});var p=C(e);t=v(p,"LABEL",{for:!0,class:!0,"data-testid":!0});var _=C(t);r.l(_),a=A(_),n=v(_,"SPAN",{"data-svelte-h":!0}),Q(n)!=="svelte-julkv0"&&(n.textContent=o),_.forEach(m),p.forEach(m),this.h()},h(){b(t,"for","sample-ids-checkbox"),b(t,"class","flex items-center"),b(t,"data-testid","sample-ids-label")},m(f,p){w(f,e,p),h(e,t),u[l].m(t,null),h(t,a),h(t,n),i=!0},p(f,p){let _=l;l=d(f),l===_?u[l].p(f,p):(se(),E(u[_],1,1,()=>{u[_]=null}),oe(),r=u[l],r?r.p(f,p):(r=u[l]=c[l](f),r.c()),$(r,1),r.m(t,a))},i(f){i||($(r),i=!0)},o(f){E(r),i=!1},d(f){f&&m(e),u[l].d()}}}function Cl(s){let e,t,l;return{c(){e=g("input"),this.h()},l(r){e=v(r,"INPUT",{type:!0,class:!0,"data-testid":!0,id:!0}),this.h()},h(){b(e,"type","checkbox"),b(e,"class","input mr-1 &[aria-disabled=“true”]:opacity-75"),b(e,"data-testid","sample-ids-checkbox"),b(e,"id","sample-ids-checkbox")},m(r,a){w(r,e,a),e.checked=s[10],t||(l=[de(e,"change",s[26]),de(e,"change",s[23])],t=!0)},p(r,a){a[0]&1024&&(e.checked=r[10])},i:N,o:N,d(r){r&&m(e),t=!1,st(l)}}}function yl(s){let e,t;return e=new ve({props:{width:"w-4"}}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,r){M(e,l,r),t=!0},p:N,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Dl(s){let e,t,l,r,a,n,o;t=new Se({});const i=[bl,hl],c=[];function u(d,f){return d[22]()?0:1}return a=u(s),n=c[a]=i[a](s),{c(){e=g("div"),R(t.$$.fragment),l=x(),r=g("section"),n.c(),this.h()},l(d){e=v(d,"DIV",{id:!0,class:!0});var f=C(e);V(t.$$.fragment,f),l=A(f),r=v(f,"SECTION",{class:!0});var p=C(r);n.l(p),p.forEach(m),f.forEach(m),this.h()},h(){b(r,"class","w-full"),b(e,"id","first-step-container"),b(e,"class","flex flex-col w-full h-full items-center")},m(d,f){w(d,e,f),M(t,e,null),h(e,l),h(e,r),c[a].m(r,null),o=!0},p(d,f){n.p(d,f)},i(d){o||($(t.$$.fragment,d),$(n),o=!0)},o(d){E(t.$$.fragment,d),E(n),o=!1},d(d){d&&m(e),L(t),c[a].d()}}}function Il(s){let e;return{c(){e=j("Review Cohort Details:")},l(t){e=U(t,"Review Cohort Details:")},m(t,l){w(t,e,l)},d(t){t&&m(e)}}}function rt(s){let e,t;return e=new we({props:{name:"select-variables",$$slots:{header:[Pl],default:[Tl]},$$scope:{ctx:s}}}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,r){M(e,l,r),t=!0},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Tl(s){let e,t,l,r,a=`<header class="card-header">Select <strong>additional variables</strong> you would like to be included in your final
            data export.</header> <hr/> <div class="card-body p-4">Tree Component Here</div>`,n;return t=new Se({}),{c(){e=g("section"),R(t.$$.fragment),l=x(),r=g("div"),r.innerHTML=a,this.h()},l(o){e=v(o,"SECTION",{class:!0});var i=C(e);V(t.$$.fragment,i),l=A(i),r=v(i,"DIV",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-1l9s757"&&(r.innerHTML=a),i.forEach(m),this.h()},h(){b(r,"class","w-full h-full m-2 card p-4"),b(e,"class","flex flex-col w-full h-full items-center")},m(o,i){w(o,e,i),M(t,e,null),h(e,l),h(e,r),n=!0},p:N,i(o){n||($(t.$$.fragment,o),n=!0)},o(o){E(t.$$.fragment,o),n=!1},d(o){o&&m(e),L(t)}}}function Pl(s){let e;return{c(){e=j("Finalize Data:")},l(t){e=U(t,"Finalize Data:")},m(t,l){w(t,e,l)},d(t){t&&m(e)}}}function xl(s){let e,t;return e=new we({props:{name:"select-type",locked:s[3]===void 0,$$slots:{header:[Sl],default:[Al]},$$scope:{ctx:s}}}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,r){M(e,l,r),t=!0},p(l,r){const a={};r[0]&8&&(a.locked=l[3]===void 0),r[0]&8|r[1]&16777216&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Al(s){let e,t,l,r,a,n,o,i;return t=new Se({}),a=new Ge({props:{"data-testid":"csv-export-option",title:"Export as Data Frame or CSV",subtitle:"Export data as a Python or R data frame or a comma-separated values file",size:"other",class:"card variant-ringed-primary",active:s[3]==="DATAFRAME"}}),a.$on("click",s[27]),o=new Ge({props:{"data-testid":"pfb-export-option",title:"Export as PFB",subtitle:"Export data in Portable Format for Biomedical Data file format",size:"other",class:"card variant-ringed-primary",active:s[3]==="DATAFRAME_PFB"}}),o.$on("click",s[28]),{c(){e=g("section"),R(t.$$.fragment),l=x(),r=g("div"),R(a.$$.fragment),n=x(),R(o.$$.fragment),this.h()},l(c){e=v(c,"SECTION",{class:!0});var u=C(e);V(t.$$.fragment,u),l=A(u),r=v(u,"DIV",{class:!0});var d=C(r);V(a.$$.fragment,d),n=A(d),V(o.$$.fragment,d),d.forEach(m),u.forEach(m),this.h()},h(){b(r,"class","grid gap-10 grid-cols-2"),b(e,"class","flex flex-col w-full h-full items-center")},m(c,u){w(c,e,u),M(t,e,null),h(e,l),h(e,r),M(a,r,null),h(r,n),M(o,r,null),i=!0},p(c,u){const d={};u[0]&8&&(d.active=c[3]==="DATAFRAME"),a.$set(d);const f={};u[0]&8&&(f.active=c[3]==="DATAFRAME_PFB"),o.$set(f)},i(c){i||($(t.$$.fragment,c),$(a.$$.fragment,c),$(o.$$.fragment,c),i=!0)},o(c){E(t.$$.fragment,c),E(a.$$.fragment,c),E(o.$$.fragment,c),i=!1},d(c){c&&m(e),L(t),L(a),L(o)}}}function Sl(s){let e;return{c(){e=j("Review and Save Dataset:")},l(t){e=U(t,"Review and Save Dataset:")},m(t,l){w(t,e,l)},d(t){t&&m(e)}}}function Nl(s){let e,t="An error occurred while getting the dataset ID. Please try again later.";return{c(){e=g("div"),e.textContent=t},l(l){e=v(l,"DIV",{"data-svelte-h":!0}),Q(e)!=="svelte-y6jc0k"&&(e.textContent=t)},m(l,r){w(l,e,r)},p:N,i:N,o:N,d(l){l&&m(e)}}}function Rl(s){let e,t;return{c(){e=g("div"),t=j(s[15]),this.h()},l(l){e=v(l,"DIV",{id:!0,class:!0});var r=C(e);t=U(r,s[15]),r.forEach(m),this.h()},h(){b(e,"id","dataset-id"),b(e,"class","mr-4")},m(l,r){w(l,e,r),h(e,t)},p(l,r){r[0]&32768&&ae(t,l[15])},i:N,o:N,d(l){l&&m(e)}}}function Vl(s){let e,t,l,r,a;return e=new ve({props:{width:"w-4"}}),{c(){R(e.$$.fragment),t=x(),l=g("div"),r=j(s[16])},l(n){V(e.$$.fragment,n),t=A(n),l=v(n,"DIV",{});var o=C(l);r=U(o,s[16]),o.forEach(m)},m(n,o){M(e,n,o),w(n,t,o),w(n,l,o),h(l,r),a=!0},p(n,o){(!a||o[0]&65536)&&ae(r,n[16])},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){E(e.$$.fragment,n),a=!1},d(n){n&&(m(t),m(l)),L(e,n)}}}function Ml(s){let e,t,l,r,a,n=`Save the information in your final data export by clicking the Save Dataset ID button.
          Navigate to the <a class="anchor" href="/dataset">Manage Datasets page</a> to view or manage
          your Dataset IDs.`,o,i,c,u,d,f,p,_="Dataset Name:",D,k,y,S,B,P,G="Dataset ID:",te,re,Y,J,X;t=new Se({});let F={ctx:s,current:null,token:null,hasCatch:!0,pending:Vl,then:Rl,catch:Nl,blocks:[,,,]};return pe(re=s[6],F),{c(){e=g("section"),R(t.$$.fragment),l=x(),r=g("div"),a=g("header"),a.innerHTML=n,o=x(),i=g("hr"),c=x(),u=g("div"),d=g("div"),f=g("div"),p=g("label"),p.textContent=_,D=x(),k=g("input"),y=x(),S=g("div"),B=g("div"),P=g("label"),P.textContent=G,te=x(),F.block.c(),this.h()},l(z){e=v(z,"SECTION",{class:!0});var O=C(e);V(t.$$.fragment,O),l=A(O),r=v(O,"DIV",{class:!0});var Z=C(r);a=v(Z,"HEADER",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-1l8cwjc"&&(a.innerHTML=n),o=A(Z),i=v(Z,"HR",{}),c=A(Z),u=v(Z,"DIV",{class:!0});var le=C(u);d=v(le,"DIV",{});var ie=C(d);f=v(ie,"DIV",{class:!0});var ne=C(f);p=v(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-1i4hx8x"&&(p.textContent=_),D=A(ne),k=v(ne,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),ne.forEach(m),y=A(ie),S=v(ie,"DIV",{class:!0});var me=C(S);B=v(me,"DIV",{class:!0});var _e=C(B);P=v(_e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Q(P)!=="svelte-vytwml"&&(P.textContent=G),te=A(_e),F.block.l(_e),_e.forEach(m),me.forEach(m),ie.forEach(m),le.forEach(m),Z.forEach(m),O.forEach(m),this.h()},h(){b(a,"class","card-header"),b(p,"for","dataset-name"),b(p,"class","font-bold mr-2"),b(k,"type","text"),b(k,"id","dataset-name"),b(k,"class","input w-80"),b(k,"placeholder","Enter a name"),k.required=!0,b(f,"class","flex items-center m-2"),b(P,"for","dataset-id"),b(P,"class","font-bold mr-2"),b(B,"class","flex items-center"),b(S,"class","flex items-center m-2"),b(u,"class","card-body p-4 flex flex-col justify-center items-center"),b(r,"class","w-full h-full m-2 card p-4"),b(e,"class","flex flex-col w-full h-full items-center")},m(z,O){w(z,e,O),M(t,e,null),h(e,l),h(e,r),h(r,a),h(r,o),h(r,i),h(r,c),h(r,u),h(u,d),h(d,f),h(f,p),h(f,D),h(f,k),Qe(k,s[8]),h(d,y),h(d,S),h(S,B),h(B,P),h(B,te),F.block.m(B,F.anchor=null),F.mount=()=>B,F.anchor=null,Y=!0,J||(X=de(k,"input",s[29]),J=!0)},p(z,O){s=z,O[0]&256&&k.value!==s[8]&&Qe(k,s[8]),F.ctx=s,O[0]&64&&re!==(re=s[6])&&pe(re,F)||Be(F,s,O)},i(z){Y||($(t.$$.fragment,z),$(F.block),Y=!0)},o(z){E(t.$$.fragment,z);for(let O=0;O<3;O+=1){const Z=F.blocks[O];E(Z)}Y=!1},d(z){z&&m(e),L(t),F.block.d(),F.token=null,F=null,J=!1,X()}}}function Ll(s){let e;return{c(){e=j("Save Dataset ID:")},l(t){e=U(t,"Save Dataset ID:")},m(t,l){w(t,e,l)},d(t){t&&m(e)}}}function Bl(s){let e,t,l;return t=new Ue({props:{title:`An error occurred while saving your dataset. Please try again. If this problem persists, please
            contact an administrator.`}}),{c(){e=g("div"),R(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=C(e);V(t.$$.fragment,a),a.forEach(m),this.h()},h(){b(e,"class","flex justify-center")},m(r,a){w(r,e,a),M(t,e,null),l=!0},p:N,i(r){l||($(t.$$.fragment,r),l=!0)},o(r){E(t.$$.fragment,r),l=!1},d(r){r&&m(e),L(t)}}}function jl(s){let e,t,l,r={ctx:s,current:null,token:null,hasCatch:!0,pending:lr,then:Fl,catch:Ul,error:54,blocks:[,,,]};return pe(t=s[4],r),{c(){e=g("div"),r.block.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=C(e);r.block.l(n),n.forEach(m),this.h()},h(){b(e,"class","flex justify-center")},m(a,n){w(a,e,n),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null,l=!0},p(a,n){s=a,r.ctx=s,n[0]&16&&t!==(t=s[4])&&pe(t,r)||Be(r,s,n)},i(a){l||($(r.block),l=!0)},o(a){for(let n=0;n<3;n+=1){const o=r.blocks[n];E(o)}l=!1},d(a){a&&m(e),r.block.d(),r.token=null,r=null}}}function Ul(s){let e,t,l,r,a=s[54]+"",n,o;return t=new Ue({props:{title:`An error occurred while preparing your dataset. Please try again. If this problem persists, please
                contact an administrator.`}}),{c(){e=g("div"),R(t.$$.fragment),l=x(),r=g("div"),n=j(a),this.h()},l(i){e=v(i,"DIV",{class:!0});var c=C(e);V(t.$$.fragment,c),l=A(c),r=v(c,"DIV",{class:!0});var u=C(r);n=U(u,a),u.forEach(m),c.forEach(m),this.h()},h(){b(r,"class","hidden"),b(e,"class","flex justify-center")},m(i,c){w(i,e,c),M(t,e,null),h(e,l),h(e,r),h(r,n),o=!0},p(i,c){(!o||c[0]&16)&&a!==(a=i[54]+"")&&ae(n,a)},i(i){o||($(t.$$.fragment,i),o=!0)},o(i){E(t.$$.fragment,i),o=!1},d(i){i&&m(e),L(t)}}}function Fl(s){let e,t,l,r;const a=[Hl,ql],n=[];function o(i,c){return i[0].query.expectedResultType==="DATAFRAME"?0:i[0].query.expectedResultType==="DATAFRAME_PFB"&&ue.explorer.enablePfbExport?1:-1}return~(e=o(s))&&(t=n[e]=a[e](s)),{c(){t&&t.c(),l=ee()},l(i){t&&t.l(i),l=ee()},m(i,c){~e&&n[e].m(i,c),w(i,l,c),r=!0},p(i,c){let u=e;e=o(i),e===u?~e&&n[e].p(i,c):(t&&(se(),E(n[u],1,1,()=>{n[u]=null}),oe()),~e?(t=n[e],t?t.p(i,c):(t=n[e]=a[e](i),t.c()),$(t,1),t.m(l.parentNode,l)):t=null)},i(i){r||($(t),r=!0)},o(i){E(t),r=!1},d(i){i&&m(l),~e&&n[e].d(i)}}}function ql(s){var d;let e,t,l="Select an option below to export your selected data in PFB format.",r,a,n,o='<i class="fa-solid fa-download"></i>Download as PFB',i,c,u=((d=K.explorePage)==null?void 0:d.pfbExportUrls)&&K.explorePage.pfbExportUrls.length>0&&Ol(s);return{c(){e=g("section"),t=g("div"),t.textContent=l,r=x(),u&&u.c(),a=x(),n=g("button"),n.innerHTML=o,this.h()},l(f){e=v(f,"SECTION",{class:!0});var p=C(e);t=v(p,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1e8jgjm"&&(t.textContent=l),r=A(p),u&&u.l(p),a=A(p),n=v(p,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-1aopsz6"&&(n.innerHTML=o),p.forEach(m),this.h()},h(){b(t,"class","flex justify-center mt-4"),b(n,"class","flex-initial w-64 btn variant-filled-primary"),b(e,"class","flex flex-col gap-8 place-items-center")},m(f,p){w(f,e,p),h(e,t),h(e,r),u&&u.m(e,null),h(e,a),h(e,n),i||(c=de(n,"click",s[35]),i=!0)},p(f,p){var _;(_=K.explorePage)!=null&&_.pfbExportUrls&&K.explorePage.pfbExportUrls.length>0&&u.p(f,p)},i:N,o:N,d(f){f&&m(e),u&&u.d(),i=!1,c()}}}function Hl(s){let e,t,l=K.explorePage.analysisExportText+"",r,a,n,o,i,c=K.explorePage.goTo.instructions+"",u,d,f,p,_,D;n=new St({props:{class:"card p-4",$$slots:{panel:[Zl],default:[Xl]},$$scope:{ctx:s}}}),p=new zt({});let k=K.explorePage.goTo.links.length>0&&er(s);return{c(){e=g("section"),t=g("p"),r=j(l),a=x(),R(n.$$.fragment),o=x(),i=g("p"),u=j(c),d=x(),f=g("div"),R(p.$$.fragment),_=x(),k&&k.c(),this.h()},l(y){e=v(y,"SECTION",{class:!0});var S=C(e);t=v(S,"P",{class:!0});var B=C(t);r=U(B,l),B.forEach(m),a=A(S),V(n.$$.fragment,S),o=A(S),i=v(S,"P",{});var P=C(i);u=U(P,c),P.forEach(m),d=A(S),f=v(S,"DIV",{class:!0});var G=C(f);V(p.$$.fragment,G),G.forEach(m),_=A(S),k&&k.l(S),S.forEach(m),this.h()},h(){b(t,"class","mt-4"),b(f,"class","flex justify-center"),b(e,"class","flex flex-col gap-8")},m(y,S){w(y,e,S),h(e,t),h(t,r),h(e,a),M(n,e,null),h(e,o),h(e,i),h(i,u),h(e,d),h(e,f),M(p,f,null),h(e,_),k&&k.m(e,null),D=!0},p(y,S){const B={};S[0]&40960|S[1]&16777216&&(B.$$scope={dirty:S,ctx:y}),n.$set(B)},i(y){D||($(n.$$.fragment,y),$(p.$$.fragment,y),D=!0)},o(y){E(n.$$.fragment,y),E(p.$$.fragment,y),D=!1},d(y){y&&m(e),L(n),L(p),k&&k.d()}}}function Ol(s){let e,t=Ee(K.explorePage.pfbExportUrls),l=[];for(let r=0;r<t.length;r+=1)l[r]=nt(lt(s,t,r));return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=ee()},l(r){for(let a=0;a<l.length;a+=1)l[a].l(r);e=ee()},m(r,a){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(r,a);w(r,e,a)},p(r,a){if(a[0]&16793600){t=Ee(K.explorePage.pfbExportUrls);let n;for(n=0;n<t.length;n+=1){const o=lt(r,t,n);l[n]?l[n].p(o,a):(l[n]=nt(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(r){r&&m(e),Le(l,r)}}}function nt(s){let e,t,l,r=s[51].title+"",a,n,o;function i(){return s[34](s[51])}return{c(){e=g("button"),t=g("i"),l=j("Export to "),a=j(r),this.h()},l(c){e=v(c,"BUTTON",{class:!0});var u=C(e);t=v(u,"I",{class:!0}),C(t).forEach(m),l=U(u,"Export to "),a=U(u,r),u.forEach(m),this.h()},h(){b(t,"class","fa-solid fa-arrow-up-right-from-square"),e.disabled=s[14],b(e,"class","flex-initial w-64 btn variant-filled-primary disabled:variant-ghost-primary")},m(c,u){w(c,e,u),h(e,t),h(e,l),h(e,a),n||(o=de(e,"click",i),n=!0)},p(c,u){s=c,u[0]&16384&&(e.disabled=s[14])},d(c){c&&m(e),n=!1,o()}}}function zl(s){let e;return{c(){e=j("Python")},l(t){e=U(t,"Python")},m(t,l){w(t,e,l)},d(t){t&&m(e)}}}function Wl(s){let e;return{c(){e=j("R")},l(t){e=U(t,"R")},m(t,l){w(t,e,l)},d(t){t&&m(e)}}}function Ql(s){let e,t,l;function r(n){s[33](n)}let a={name:"download",value:2,$$slots:{default:[Gl]},$$scope:{ctx:s}};return s[13]!==void 0&&(a.group=s[13]),e=new Me({props:a}),Ne.push(()=>Ve(e,"group",r)),{c(){R(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,o){M(e,n,o),l=!0},p(n,o){const i={};o[1]&16777216&&(i.$$scope={dirty:o,ctx:n}),!t&&o[0]&8192&&(t=!0,i.group=n[13],Re(()=>t=!1)),e.$set(i)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){E(e.$$.fragment,n),l=!1},d(n){L(e,n)}}}function Gl(s){let e;return{c(){e=j("Download")},l(t){e=U(t,"Download")},m(t,l){w(t,e,l)},d(t){t&&m(e)}}}function Xl(s){let e,t,l,r,a,n,o,i;function c(_){s[31](_)}let u={name:"python",value:0,$$slots:{default:[zl]},$$scope:{ctx:s}};s[13]!==void 0&&(u.group=s[13]),e=new Me({props:u}),Ne.push(()=>Ve(e,"group",c));function d(_){s[32](_)}let f={name:"r",value:1,$$slots:{default:[Wl]},$$scope:{ctx:s}};s[13]!==void 0&&(f.group=s[13]),r=new Me({props:f}),Ne.push(()=>Ve(r,"group",d));let p=ue.explorer.allowDownload&&Ql(s);return{c(){R(e.$$.fragment),l=x(),R(r.$$.fragment),n=x(),p&&p.c(),o=ee()},l(_){V(e.$$.fragment,_),l=A(_),V(r.$$.fragment,_),n=A(_),p&&p.l(_),o=ee()},m(_,D){M(e,_,D),w(_,l,D),M(r,_,D),w(_,n,D),p&&p.m(_,D),w(_,o,D),i=!0},p(_,D){const k={};D[1]&16777216&&(k.$$scope={dirty:D,ctx:_}),!t&&D[0]&8192&&(t=!0,k.group=_[13],Re(()=>t=!1)),e.$set(k);const y={};D[1]&16777216&&(y.$$scope={dirty:D,ctx:_}),!a&&D[0]&8192&&(a=!0,y.group=_[13],Re(()=>a=!1)),r.$set(y),ue.explorer.allowDownload&&p.p(_,D)},i(_){i||($(e.$$.fragment,_),$(r.$$.fragment,_),$(p),i=!0)},o(_){E(e.$$.fragment,_),E(r.$$.fragment,_),E(p),i=!1},d(_){_&&(m(l),m(n),m(o)),L(e,_),L(r,_),p&&p.d(_)}}}function Yl(s){let e,t='<i class="fa-solid fa-download mr-1"></i>Download as CSV',l,r;return{c(){e=g("button"),e.innerHTML=t,this.h()},l(a){e=v(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1hl85ea"&&(e.innerHTML=t),this.h()},h(){b(e,"class","btn variant-filled-primary")},m(a,n){w(a,e,n),l||(r=de(e,"click",s[30]),l=!0)},p:N,i:N,o:N,d(a){a&&m(e),l=!1,r()}}}function Jl(s){let e,t;return e=new ut({props:{language:"r",lineNumbers:!0,buttonCopied:"Copied!",code:K.explorePage.codeBlocks.RExport.replace("{{queryId}}",s[15])||"Code not set"}}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,r){M(e,l,r),t=!0},p(l,r){const a={};r[0]&32768&&(a.code=K.explorePage.codeBlocks.RExport.replace("{{queryId}}",l[15])||"Code not set"),e.$set(a)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Kl(s){let e,t;return e=new ut({props:{language:"python",lineNumbers:!0,buttonCopied:"Copied!",code:K.explorePage.codeBlocks.PythonExport.replace("{{queryId}}",s[15])||"Code not set"}}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,r){M(e,l,r),t=!0},p(l,r){const a={};r[0]&32768&&(a.code=K.explorePage.codeBlocks.PythonExport.replace("{{queryId}}",l[15])||"Code not set"),e.$set(a)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Zl(s){let e,t,l,r;const a=[Kl,Jl,Yl],n=[];function o(i,c){return i[13]===0?0:i[13]===1?1:ue.explorer.allowDownload&&i[13]===2?2:-1}return~(e=o(s))&&(t=n[e]=a[e](s)),{c(){t&&t.c(),l=ee()},l(i){t&&t.l(i),l=ee()},m(i,c){~e&&n[e].m(i,c),w(i,l,c),r=!0},p(i,c){let u=e;e=o(i),e===u?~e&&n[e].p(i,c):(t&&(se(),E(n[u],1,1,()=>{n[u]=null}),oe()),~e?(t=n[e],t?t.p(i,c):(t=n[e]=a[e](i),t.c()),$(t,1),t.m(l.parentNode,l)):t=null)},i(i){r||($(t),r=!0)},o(i){E(t),r=!1},d(i){i&&m(l),~e&&n[e].d(i)}}}function er(s){let e,t=Ee(K.explorePage.goTo.links),l=[];for(let r=0;r<t.length;r+=1)l[r]=tr(_l(s,t,r));return{c(){e=g("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=v(r,"DIV",{class:!0});var a=C(e);for(let n=0;n<l.length;n+=1)l[n].l(a);a.forEach(m),this.h()},h(){b(e,"class","flex justify-center")},m(r,a){w(r,e,a);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},d(r){r&&m(e),Le(l,r)}}}function tr(s){let e,t=s[48].title+"",l;return{c(){e=g("a"),l=j(t),this.h()},l(r){e=v(r,"A",{class:!0,href:!0,target:!0});var a=C(e);l=U(a,t),a.forEach(m),this.h()},h(){b(e,"class","btn variant-ghost-primary m-2 hover:variant-filled-primary"),b(e,"href",s[48].url),b(e,"target",s[48].newTab?"_blank":"_self")},m(r,a){w(r,e,a),h(e,l)},p:N,d(r){r&&m(e)}}}function lr(s){let e,t,l,r,a="Preparing your dataset...",n;return t=new ve({props:{width:"w-4"}}),{c(){e=g("div"),R(t.$$.fragment),l=x(),r=g("div"),r.textContent=a,this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);V(t.$$.fragment,i),l=A(i),r=v(i,"DIV",{"data-svelte-h":!0}),Q(r)!=="svelte-1m53t1h"&&(r.textContent=a),i.forEach(m),this.h()},h(){b(e,"class","flex justify-center items-center")},m(o,i){w(o,e,i),M(t,e,null),h(e,l),h(e,r),n=!0},p:N,i(o){n||($(t.$$.fragment,o),n=!0)},o(o){E(t.$$.fragment,o),n=!1},d(o){o&&m(e),L(t)}}}function rr(s){let e,t,l,r,a="Saving your dataset...",n;return t=new ve({props:{width:"w-4"}}),{c(){e=g("div"),R(t.$$.fragment),l=x(),r=g("div"),r.textContent=a,this.h()},l(o){e=v(o,"DIV",{class:!0});var i=C(e);V(t.$$.fragment,i),l=A(i),r=v(i,"DIV",{"data-svelte-h":!0}),Q(r)!=="svelte-76jx2r"&&(r.textContent=a),i.forEach(m),this.h()},h(){b(e,"class","flex justify-center items-center")},m(o,i){w(o,e,i),M(t,e,null),h(e,l),h(e,r),n=!0},p:N,i(o){n||($(t.$$.fragment,o),n=!0)},o(o){E(t.$$.fragment,o),n=!1},d(o){o&&m(e),L(t)}}}function nr(s){let e,t,l,r={ctx:s,current:null,token:null,hasCatch:!0,pending:rr,then:jl,catch:Bl,blocks:[,,,]};return pe(t=s[7],r),{c(){e=g("section"),r.block.c(),this.h()},l(a){e=v(a,"SECTION",{class:!0});var n=C(e);r.block.l(n),n.forEach(m),this.h()},h(){b(e,"class","flex flex-col w-full h-full items-center")},m(a,n){w(a,e,n),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null,l=!0},p(a,n){s=a,r.ctx=s,n[0]&128&&t!==(t=s[7])&&pe(t,r)||Be(r,s,n)},i(a){l||($(r.block),l=!0)},o(a){for(let n=0;n<3;n+=1){const o=r.blocks[n];E(o)}l=!1},d(a){a&&m(e),r.block.d(),r.token=null,r=null}}}function ar(s){let e;return{c(){e=j("Start Analysis:")},l(t){e=U(t,"Start Analysis:")},m(t,l){w(t,e,l)},d(t){t&&m(e)}}}function sr(s){let e,t,l,r,a,n,o,i;e=new we({props:{name:"review",locked:s[22](),$$slots:{header:[Il],default:[Dl]},$$scope:{ctx:s}}});let c=s[2]&&rt(s),u=ue.explorer.enablePfbExport&&xl(s);return a=new we({props:{name:"save-dataset",locked:!s[8]||s[8].length<2||!s[15],$$slots:{header:[Ll],default:[Ml]},$$scope:{ctx:s}}}),o=new we({props:{name:"start",locked:s[9],$$slots:{header:[ar],default:[nr]},$$scope:{ctx:s}}}),{c(){R(e.$$.fragment),t=x(),c&&c.c(),l=x(),u&&u.c(),r=x(),R(a.$$.fragment),n=x(),R(o.$$.fragment)},l(d){V(e.$$.fragment,d),t=A(d),c&&c.l(d),l=A(d),u&&u.l(d),r=A(d),V(a.$$.fragment,d),n=A(d),V(o.$$.fragment,d)},m(d,f){M(e,d,f),w(d,t,f),c&&c.m(d,f),w(d,l,f),u&&u.m(d,f),w(d,r,f),M(a,d,f),w(d,n,f),M(o,d,f),i=!0},p(d,f){const p={};f[0]&7202|f[1]&16777216&&(p.$$scope={dirty:f,ctx:d}),e.$set(p),d[2]?c?f[0]&4&&$(c,1):(c=rt(d),c.c(),$(c,1),c.m(l.parentNode,l)):c&&(se(),E(c,1,1,()=>{c=null}),oe()),ue.explorer.enablePfbExport&&u.p(d,f);const _={};f[0]&33024&&(_.locked=!d[8]||d[8].length<2||!d[15]),f[0]&98624|f[1]&16777216&&(_.$$scope={dirty:f,ctx:d}),a.$set(_);const D={};f[0]&512&&(D.locked=d[9]),f[0]&57489|f[1]&16777216&&(D.$$scope={dirty:f,ctx:d}),o.$set(D)},i(d){i||($(e.$$.fragment,d),$(c),$(u),$(a.$$.fragment,d),$(o.$$.fragment,d),i=!0)},o(d){E(e.$$.fragment,d),E(c),E(u),E(a.$$.fragment,d),E(o.$$.fragment,d),i=!1},d(d){d&&(m(t),m(l),m(r),m(n)),L(e,d),c&&c.d(d),u&&u.d(d),L(a,d),L(o,d)}}}function or(s){let e,t;return e=new Yt({props:{class:"w-full h-full m-8",buttonCompleteLabel:"Done",$$slots:{default:[sr]},$$scope:{ctx:s}}}),e.$on("complete",s[21]),e.$on("next",s[20]),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,r){M(e,l,r),t=!0},p(l,r){const a={};r[0]&131071|r[1]&16777216&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){E(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}const ir=7;function cr(s,e,t){let l,r,a,n,o,i,c;fe(s,Ut,I=>t(38,n=I)),fe(s,dt,I=>t(39,o=I)),fe(s,pt,I=>t(40,i=I)),fe(s,ge,I=>t(41,c=I));let{query:u}=e,{showTreeStep:d=!1}=e,{rows:f=[]}=e;const p=Lt.maxDataPointsForExport||1e6,_=ft(),D=At(),k=[{dataElement:"variableName",label:"Variable Name",sort:!0},{dataElement:"description",label:"Variable Description",sort:!0},{dataElement:"type",label:"Type",sort:!0,class:"text-center"}];let y,S,B,P,G,te="",re="",Y=!0,J=!1,X=[],F=!1,z=!1,O=0;ot(async()=>{const I=n.filter(q=>q.conceptPath.includes("SAMPLE_ID"));if(I.length>0){t(12,z=!0);const q=await Fe();if(q.length>0){const H=I.filter(T=>q.some(W=>W.conceptPath===T.conceptPath));t(10,J=H.length===q.length),t(12,z=!1),J&&(X=H.map(T=>{var W,ce;return{ref:T,variableId:T.conceptPath,variableName:T.display,description:(W=T.searchResult)==null?void 0:W.description,type:(ce=T.searchResult)==null?void 0:ce.type,selected:!0}}))}else t(10,J=!1),t(12,z=!1)}else t(10,J=!1);ue.explorer.enablePfbExport||t(3,y="DATAFRAME")});function Z(){const I=async()=>{await le(),_.close()},q=()=>{_.close()},H={type:"component",title:K.explorePage.confirmDownloadTitle||"Are you sure you want to download data?",component:"modalWrapper",modalClasses:"bg-surface-100-800-token p-4 block",meta:{component:dl,message:K.explorePage.confirmDownloadMessage||"This action will download the data to your local machine. Are you sure you want to proceed?",onConfirm:I,onCancel:q,confirmText:"Download"},response:T=>{console.log(T)}};_.trigger(H)}async function le(){try{const I=await be(`picsure/query/${l}/result`,{}),q=URL.createObjectURL(new Blob([I],{type:"octet/stream"}));if(Vt){const H=document.createElement("a");H.href=q,u.query.expectedResultType==="DATAFRAME"?H.download="pic-sure-data.csv":u.query.expectedResultType==="DATAFRAME_PFB"&&(H.download="pic-sure-data.avro"),document.body.appendChild(H),H.click(),document.body.removeChild(H)}}catch(I){console.error("Error in onCompleteHandler",I)}}async function ie(I){const q=I.detail.name;q!=="review"&&(q==="save-dataset"&&t(5,B=ne()),q==="start"&&t(7,G=Qt(l,te).then(H=>(t(4,S=me(re)),H))))}async function ne(){let I;const q={initial:"Creating dataset ID...",waiting:"Hang tight. We are still working on it...",retry:"Something's taking longer than usual. We are still working on it..."};function H(T,W=!0){t(16,r=W?q.initial:q.retry),W&&(I=setInterval(()=>{t(16,r=q.waiting)},ir*1e3)),t(6,P=T().finally(()=>clearInterval(I)).catch(ce=>{if(W)H(T,!1);else throw ce}))}try{t(0,u.query.fields=n.map(T=>T.conceptPath),u),t(0,u.query.expectedResultType=y,u),t(15,l=""),H(()=>be("picsure/query",u).then(T=>{t(15,l=T.picsureResultId||"Error")})),await P}catch(T){throw he(ge,c.current--,c),console.error("Error in submitQuery",T),T}}function me(I){return be("picsure/query/"+(I||l)+"/status",u).then(H=>{if(H.status==="ERROR")return t(9,Y=!0),Promise.reject(H.status);re=H.picsureResultId,t(9,Y=!1)})}function _e(){Rt("/explorer")}function mt(){return(typeof i=="number"?i:p+1)+o.length+n.length>p}async function Fe(){const I=await Ht("",[{name:"data_source_genomic",category:"data_source",display:"Genomic",description:"Associated with genomic data",count:0}],{pageNumber:0,pageSize:1e4});if(I.content.length===0)return[];const q=new Bt(structuredClone(u.query));q.expectedResultType="CROSS_COUNT";const H=I.content.map(W=>W.conceptPath);q.setCrossCountFields(H);const T=await be("picsure/query/sync",{query:q,resourceUUID:Mt.hpds});return I.content.filter(W=>T[W.conceptPath]>0)}async function _t(){try{if(t(11,F=!0),!J){const T=X==null?void 0:X.map(W=>W.ref);Ft(T||[]),t(1,f=f.filter(W=>!X.some(ce=>ce.variableId===W.variableId)));return}const q=(await Fe()).map(T=>({id:Wt(),searchResult:T,display:(T==null?void 0:T.display)||"",conceptPath:(T==null?void 0:T.conceptPath)||""}));qt(q);const H=q.map(T=>{var W,ce,He;return{ref:T,variableId:(W=T==null?void 0:T.searchResult)==null?void 0:W.conceptPath,variableName:T==null?void 0:T.display,description:(ce=T==null?void 0:T.searchResult)==null?void 0:ce.description,type:(He=T==null?void 0:T.searchResult)==null?void 0:He.type,selected:!0}});t(1,f=Array.from([...f,...H].reduce((T,W)=>T.set(W.variableId,W),new Map).values())),X=H}catch(I){console.error("Error in toggleSampleIds",I),D.trigger({message:"We were unable to fetch the sample IDs for your selected data. Please try again later.",background:"variant-ghost-error"}),t(10,J=!1)}finally{t(11,F=!1)}}async function qe(I){async function q(){const T="picsure/query/"+l+"/signed-url";try{return(await be(T,u)).signedUrl}catch(W){console.error("Error in getSignedUrl",W)}}if(!I)return;t(14,a=!0);let H=await q();H&&window.open(I+encodeURIComponent(H)),t(14,a=!1)}const ht=()=>_e();function bt(){J=this.checked,t(10,J)}const gt=()=>t(3,y="DATAFRAME"),vt=()=>t(3,y="DATAFRAME_PFB");function kt(){te=this.value,t(8,te)}const $t=()=>ue.confirmDownload?Z():le();function wt(I){O=I,t(13,O)}function Et(I){O=I,t(13,O)}function Ct(I){O=I,t(13,O)}const yt=I=>qe(I.url),Dt=()=>ue.confirmDownload?Z():le();return s.$$set=I=>{"query"in I&&t(0,u=I.query),"showTreeStep"in I&&t(2,d=I.showTreeStep),"rows"in I&&t(1,f=I.rows)},t(15,l=""),t(16,r=""),t(14,a=!1),[u,f,d,y,S,B,P,G,te,Y,J,F,z,O,a,l,r,k,Z,le,ie,_e,mt,_t,qe,ht,bt,gt,vt,kt,$t,wt,Et,Ct,yt,Dt]}class Rr extends ye{constructor(e){super(),De(this,e,cr,or,Ce,{query:0,showTreeStep:2,rows:1},null,[-1,-1])}}export{Rr as E,ge as s};
