import{s as se,e as d,a as y,c as f,l as w,g as L,b as P,f as C,m as s,i as R,h as a,r as I,u as O,v as ie,n as ae,w as re,t as ue,d as oe,j as de}from"./DfqJWsAP.js";import{S as fe,i as ce}from"./B9sU1H0B.js";import{g as pe}from"./DA0IzwqI.js";import{g as he}from"./D4yaORjf.js";import"./8fc_wYz-.js";import{u as ve,a as me}from"./CjRA7bPa.js";function le(c){let t,i,_="UUID:",e,r,n;return{c(){t=d("label"),i=d("span"),i.textContent=_,e=y(),r=d("input"),this.h()},l(l){t=f(l,"LABEL",{class:!0});var h=P(t);i=f(h,"SPAN",{"data-svelte-h":!0}),w(i)!=="svelte-xruxbf"&&(i.textContent=_),e=L(h),r=f(h,"INPUT",{type:!0,class:!0}),h.forEach(C),this.h()},h(){var l;s(r,"type","text"),s(r,"class","input"),r.value=n=(l=c[0])==null?void 0:l.uuid,r.disabled=!0,s(t,"class","label")},m(l,h){R(l,t,h),a(t,i),a(t,e),a(t,r)},p(l,h){var E;h&1&&n!==(n=(E=l[0])==null?void 0:E.uuid)&&r.value!==n&&(r.value=n)},d(l){l&&C(t)}}}function ne(c){let t,i,_,e,r,n,l,h='<i class="fa-solid fa-xmark"></i> <span class="sr-only">Close</span>',E,m;return{c(){t=d("aside"),i=d("div"),_=d("p"),e=ue(c[5]),r=y(),n=d("div"),l=d("button"),l.innerHTML=h,this.h()},l(x){t=f(x,"ASIDE",{"data-testid":!0,class:!0});var v=P(t);i=f(v,"DIV",{class:!0});var T=P(i);_=f(T,"P",{});var U=P(_);e=oe(U,c[5]),U.forEach(C),T.forEach(C),r=L(v),n=f(v,"DIV",{class:!0});var A=P(n);l=f(A,"BUTTON",{"data-svelte-h":!0}),w(l)!=="svelte-14sn3fl"&&(l.innerHTML=h),A.forEach(C),v.forEach(C),this.h()},h(){s(i,"class","alert-message"),s(n,"class","alert-actions"),s(t,"data-testid","validation-error"),s(t,"class","alert variant-ghost-error")},m(x,v){R(x,t,v),a(t,i),a(i,_),a(_,e),a(t,r),a(t,n),a(n,l),E||(m=O(l,"click",c[11]),E=!0)},p(x,v){v&32&&de(e,x[5])},d(x){x&&C(t),E=!1,m()}}}function _e(c){var te;let t,i=`For details on how to set up a Connection, please refer to the
  <a href="https://pic-sure.gitbook.io/pic-sure-developer-guide/configuring-pic-sure/all-in-one-authentication-configuration#additional-authentication-configuration-option-s" target="_blank" class="anchor">PIC-SURE developer guide</a>.`,_,e,r,n,l,h="Label:",E,m,x,v,T,U="ID:",A,p,B,k,D,Y="Sub Prefix:",X,S,G,N,F,Z="Required Fields:",K,q,Q,V,H,$='<button type="submit" class="btn variant-ghost-primary hover:variant-filled-primary">Save</button> <a href="/admin/configuration" class="btn variant-ghost-secondary hover:variant-filled-secondary">Cancel</a>',W,ee,b=((te=c[0])==null?void 0:te.uuid)&&le(c),g=c[5]&&ne(c);return{c(){t=d("p"),t.innerHTML=i,_=y(),e=d("form"),b&&b.c(),r=y(),n=d("label"),l=d("span"),l.textContent=h,E=y(),m=d("input"),x=y(),v=d("label"),T=d("span"),T.textContent=U,A=y(),p=d("input"),B=y(),k=d("label"),D=d("span"),D.textContent=Y,X=y(),S=d("input"),G=y(),N=d("label"),F=d("span"),F.textContent=Z,K=y(),q=d("textarea"),Q=y(),g&&g.c(),V=y(),H=d("div"),H.innerHTML=$,this.h()},l(o){t=f(o,"P",{class:!0,"data-svelte-h":!0}),w(t)!=="svelte-kaypeb"&&(t.innerHTML=i),_=L(o),e=f(o,"FORM",{class:!0});var u=P(e);b&&b.l(u),r=L(u),n=f(u,"LABEL",{class:!0});var M=P(n);l=f(M,"SPAN",{"data-svelte-h":!0}),w(l)!=="svelte-3s99bi"&&(l.textContent=h),E=L(M),m=f(M,"INPUT",{type:!0,class:!0,minlength:!0,maxlength:!0}),M.forEach(C),x=L(u),v=f(u,"LABEL",{class:!0});var z=P(v);T=f(z,"SPAN",{"data-svelte-h":!0}),w(T)!=="svelte-1dt9zf9"&&(T.textContent=U),A=L(z),p=f(z,"INPUT",{type:!0,class:!0,minlength:!0,maxlength:!0}),z.forEach(C),B=L(u),k=f(u,"LABEL",{class:!0});var J=P(k);D=f(J,"SPAN",{"data-svelte-h":!0}),w(D)!=="svelte-hkdo9q"&&(D.textContent=Y),X=L(J),S=f(J,"INPUT",{type:!0,class:!0,minlength:!0,maxlength:!0}),J.forEach(C),G=L(u),N=f(u,"LABEL",{class:!0});var j=P(N);F=f(j,"SPAN",{"data-svelte-h":!0}),w(F)!=="svelte-1cilozi"&&(F.textContent=Z),K=L(j),q=f(j,"TEXTAREA",{class:!0}),P(q).forEach(C),j.forEach(C),Q=L(u),g&&g.l(u),V=L(u),H=f(u,"DIV",{"data-svelte-h":!0}),w(H)!=="svelte-1u8xx9t"&&(H.innerHTML=$),u.forEach(C),this.h()},h(){s(t,"class","mb-3 text-center"),s(m,"type","text"),s(m,"class","input"),m.required=!0,s(m,"minlength","1"),s(m,"maxlength","255"),s(n,"class","label required"),s(p,"type","text"),s(p,"class","input"),p.required=!0,s(p,"minlength","1"),s(p,"maxlength","255"),s(v,"class","label required"),s(S,"type","text"),s(S,"class","input"),S.required=!0,s(S,"minlength","1"),s(S,"maxlength","255"),s(k,"class","label required"),s(q,"class","w-full input input-border"),s(N,"class","label"),s(e,"class","grid gap-4 my-3")},m(o,u){R(o,t,u),R(o,_,u),R(o,e,u),b&&b.m(e,null),a(e,r),a(e,n),a(n,l),a(n,E),a(n,m),I(m,c[1]),a(e,x),a(e,v),a(v,T),a(v,A),a(v,p),I(p,c[2]),a(e,B),a(e,k),a(k,D),a(k,X),a(k,S),I(S,c[3]),a(e,G),a(e,N),a(N,F),a(N,K),a(N,q),I(q,c[4]),a(e,Q),g&&g.m(e,null),a(e,V),a(e,H),W||(ee=[O(m,"input",c[7]),O(p,"input",c[8]),O(S,"input",c[9]),O(q,"input",c[10]),O(e,"submit",ie(c[6]))],W=!0)},p(o,[u]){var M;(M=o[0])!=null&&M.uuid?b?b.p(o,u):(b=le(o),b.c(),b.m(e,r)):b&&(b.d(1),b=null),u&2&&m.value!==o[1]&&I(m,o[1]),u&4&&p.value!==o[2]&&I(p,o[2]),u&8&&S.value!==o[3]&&I(S,o[3]),u&16&&I(q,o[4]),o[5]?g?g.p(o,u):(g=ne(o),g.c(),g.m(e,V)):g&&(g.d(1),g=null)},i:ae,o:ae,d(o){o&&(C(t),C(_),C(e)),b&&b.d(),g&&g.d(),W=!1,re(ee)}}}function be(c,t,i){const _=he();let{connection:e=void 0}=t,r=(e==null?void 0:e.label)||"",n=(e==null?void 0:e.id)||"",l=(e==null?void 0:e.subPrefix)||"",h=(e==null?void 0:e.requiredFields)||"",E="";async function m(){try{h!==""&&JSON.parse(h),i(5,E="")}catch{i(5,E="The provided JSON has a syntax error.");return}let p={id:n,label:r,requiredFields:h,subPrefix:l};try{e?(p={...p,uuid:e.uuid},await ve(p)):await me(p),_.trigger({message:`Successfully saved ${p&&"new "}connection '${r}'`,background:"variant-filled-success"}),pe("/admin/configuration")}catch(B){console.error(B),_.trigger({message:`An error occured while saving ${p&&"new "}connection '${r}'`,background:"variant-filled-error"})}}function x(){r=this.value,i(1,r)}function v(){n=this.value,i(2,n)}function T(){l=this.value,i(3,l)}function U(){h=this.value,i(4,h)}const A=()=>i(5,E="");return c.$$set=p=>{"connection"in p&&i(0,e=p.connection)},[e,r,n,l,h,E,m,x,v,T,U,A]}class Se extends fe{constructor(t){super(),ce(this,t,be,_e,se,{connection:0})}}export{Se as C};
