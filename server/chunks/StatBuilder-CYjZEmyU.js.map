{"version":3,"file":"StatBuilder-CYjZEmyU.js","sources":["../../../.svelte-kit/adapter-node/chunks/StatBuilder.js"],"sourcesContent":["import { f as features, b as branding } from \"./configuration.js\";\nimport \"@sveltejs/kit\";\nimport \"./User.js\";\nimport \"./client.js\";\nimport \"./Dictionary.js\";\nimport \"./Filter.js\";\nimport \"./Export.js\";\nconst PLUS_MINUS = \"Â±\";\nfunction parseCount(count) {\n  let value;\n  let suffix;\n  if (String(count).startsWith(\"<\")) {\n    suffix = 3;\n    value = 0;\n  } else {\n    const [rawValue, rawSuffix] = String(count).split(PLUS_MINUS);\n    value = parseInt(rawValue.replaceAll(\",\", \"\")) || 0;\n    suffix = parseInt(rawSuffix ?? \"\") || 0;\n  }\n  return { value, suffix };\n}\nfunction normalizeCounts(countInput) {\n  return countInput.flatMap((x) => typeof x === \"object\" ? Object.values(x) : x);\n}\nfunction countResult(results, asString = true) {\n  const counts = normalizeCounts(results);\n  if (counts.length === 0) return !features.federated ? void 0 : asString ? \"0\" : 0;\n  if (counts.length === 1 && counts[0]?.toString().startsWith(\"<\")) return counts[0];\n  const parsed = counts.map(parseCount);\n  const total = parsed.reduce((sum, { value }) => value > 0 ? sum + value : sum, 0);\n  const maxSuffix = Math.max(...parsed.map(({ suffix }) => suffix), 0);\n  if (!asString) return total;\n  return maxSuffix > 0 ? `${total.toLocaleString()}${PLUS_MINUS}${maxSuffix}` : total.toLocaleString();\n}\nconst StatPromise = {\n  list: (stat) => Object.entries(stat.result).map(([resourceName, promise]) => ({\n    promise,\n    resourceName\n  })),\n  rejected: (result) => result.status === \"rejected\",\n  fullfiled: (result) => result.status === \"fulfilled\",\n  valueOrZero: (result) => result.status === \"fulfilled\" ? result.value : 0\n};\nfunction getStatFields(key) {\n  const statKeys = branding?.statFields ? Object.keys(branding?.statFields) : [];\n  return statKeys.includes(key) ? branding?.statFields[key] : [];\n}\nexport {\n  StatPromise as S,\n  countResult as c,\n  getStatFields as g\n};\n"],"names":[],"mappings":"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"}