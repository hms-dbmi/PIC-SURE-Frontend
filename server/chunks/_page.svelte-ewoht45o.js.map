{"version":3,"file":"_page.svelte-ewoht45o.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(picsure)/(authorized)/explorer/variant/_page.svelte.js"],"sourcesContent":["import { W as head, K as store_get, E as attr, F as escape_html, S as await_block, M as unsubscribe_stores, C as pop, A as push } from \"../../../../../../chunks/index.js\";\nimport { o as onDestroy } from \"../../../../../../chunks/machine.svelte.js\";\nimport \"../../../../../../chunks/client.js\";\nimport { E as ExportType, s as settings, b as branding } from \"../../../../../../chunks/configuration.js\";\nimport \"../../../../../../chunks/toaster.js\";\nimport { C as Content } from \"../../../../../../chunks/Content.js\";\nimport { E as ErrorAlert } from \"../../../../../../chunks/ErrorAlert.js\";\nimport { S as StaticTable } from \"../../../../../../chunks/StaticTable.js\";\nimport { w as writable } from \"../../../../../../chunks/exports.js\";\nimport \"../../../../../../chunks/index2.js\";\nimport \"../../../../../../chunks/User.js\";\nimport \"clsx\";\nimport \"../../../../../../chunks/Filter.js\";\nimport \"../../../../../../chunks/Export.js\";\nimport { L as Loading } from \"../../../../../../chunks/Loading.js\";\nconst count = writable(0);\nconst columns = writable([]);\nconst data = writable([]);\nconst downloadUrl = writable(\"\");\nwritable(ExportType.Aggregate);\nfunction _page($$payload, $$props) {\n  push();\n  var $$store_subs;\n  let loading = Promise.resolve();\n  let aggregateCheckbox = settings.variantExplorer.type === ExportType.Full;\n  onDestroy(() => {\n  });\n  head($$payload, ($$payload2) => {\n    $$payload2.title = `<title>${escape_html(branding.applicationName)} | Variant Explorer</title>`;\n  });\n  if (store_get($$store_subs ??= {}, \"$downloadUrl\", downloadUrl)) {\n    $$payload.out += \"<!--[-->\";\n    $$payload.out += `<div><a data-testid=\"variant-download-btn\" class=\"btn preset-tonal-primary border border-primary-500 mt-8 mr-6 float-right\"${attr(\"href\", store_get($$store_subs ??= {}, \"$downloadUrl\", downloadUrl))} download=\"variantData.tsv\">Download Variant${escape_html(aggregateCheckbox ? \" (Aggregate)\" : \"\")} Data</a></div>`;\n  } else {\n    $$payload.out += \"<!--[!-->\";\n  }\n  $$payload.out += `<!--]--> `;\n  Content($$payload, {\n    full: true,\n    backUrl: \"/explorer\",\n    backTitle: \"Back to Explore\",\n    children: ($$payload2) => {\n      {\n        $$payload2.out += \"<!--[-->\";\n        $$payload2.out += `<h2 class=\"text-center clear-both\">Variant Explorer</h2> `;\n        await_block(\n          $$payload2,\n          loading,\n          () => {\n            if (store_get($$store_subs ??= {}, \"$count\", count) > 0) {\n              $$payload2.out += \"<!--[-->\";\n              $$payload2.out += `<div data-testid=\"variant-count\" class=\"flex-none w-full\">${escape_html(store_get($$store_subs ??= {}, \"$count\", count))} variants found</div>`;\n            } else {\n              $$payload2.out += \"<!--[!-->\";\n            }\n            $$payload2.out += `<!--]--> `;\n            Loading($$payload2, {});\n            $$payload2.out += `<!---->`;\n          },\n          () => {\n            if (store_get($$store_subs ??= {}, \"$count\", count) > settings.variantExplorer.maxCount) {\n              $$payload2.out += \"<!--[-->\";\n              ErrorAlert($$payload2, {\n                color: \"warning\",\n                children: ($$payload3) => {\n                  $$payload3.out += `<!---->Too many variants! Found ${escape_html(store_get($$store_subs ??= {}, \"$count\", count))}, but cannot display more than\n          ${escape_html(settings.variantExplorer.maxCount)} variants.`;\n                }\n              });\n            } else if (store_get($$store_subs ??= {}, \"$count\", count) > 0 && store_get($$store_subs ??= {}, \"$data\", data).length > 0) {\n              $$payload2.out += \"<!--[1-->\";\n              {\n                let tableActions = function($$payload3) {\n                  $$payload3.out += `<div class=\"flex-auto flex items-end justify-between\">`;\n                  if (store_get($$store_subs ??= {}, \"$count\", count) > 0) {\n                    $$payload3.out += \"<!--[-->\";\n                    $$payload3.out += `<div data-testid=\"variant-count\"><p>${escape_html(store_get($$store_subs ??= {}, \"$count\", count))} variants found</p></div>`;\n                  } else {\n                    $$payload3.out += \"<!--[!-->\";\n                  }\n                  $$payload3.out += `<!--]--> `;\n                  if (settings.variantExplorer.type === ExportType.Full) {\n                    $$payload3.out += \"<!--[-->\";\n                    $$payload3.out += `<div><label class=\"flex items-center space-x-2\"><input class=\"checkbox\" type=\"checkbox\"${attr(\"checked\", aggregateCheckbox, true)}/> <p>Aggregate data</p></label></div>`;\n                  } else {\n                    $$payload3.out += \"<!--[!-->\";\n                  }\n                  $$payload3.out += `<!--]--></div>`;\n                };\n                StaticTable($$payload2, {\n                  tableName: \"variant-explorer\",\n                  data: store_get($$store_subs ??= {}, \"$data\", data),\n                  columns: store_get($$store_subs ??= {}, \"$columns\", columns),\n                  fullWidth: true,\n                  searchable: true,\n                  tableActions,\n                  $$slots: { tableActions: true }\n                });\n              }\n            } else {\n              $$payload2.out += \"<!--[!-->\";\n              $$payload2.out += `<div data-testid=\"variant-count\" class=\"flex-none w-full\">${escape_html(store_get($$store_subs ??= {}, \"$count\", count))} variants found</div>`;\n            }\n            $$payload2.out += `<!--]-->`;\n          }\n        );\n        $$payload2.out += `<!--]-->`;\n      }\n      $$payload2.out += `<!--]-->`;\n    }\n  });\n  $$payload.out += `<!---->`;\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  pop();\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}