{"version":3,"file":"_page.svelte-CEdqMPHz.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(authentication)/login/_page.svelte.js"],"sourcesContent":["import { A as push, C as pop, E as attr, I as attr_class, J as clsx, F as escape_html, K as store_get, S as await_block, M as unsubscribe_stores, P as ensure_array_like } from \"../../../../chunks/index.js\";\nimport { p as page } from \"../../../../chunks/stores.js\";\nimport { b as branding } from \"../../../../chunks/configuration.js\";\nimport \"../../../../chunks/toaster.js\";\nimport \"../../../../chunks/Dictionary.js\";\nimport { h as html } from \"../../../../chunks/html.js\";\nimport { L as Logo } from \"../../../../chunks/Logo.js\";\nimport { E as ErrorAlert } from \"../../../../chunks/ErrorAlert.js\";\nimport { L as Loading } from \"../../../../chunks/Loading.js\";\nfunction LoginButton($$payload, $$props) {\n  push();\n  const {\n    provider,\n    helpText,\n    buttonText = \"Log In\",\n    redirectTo = \"/\",\n    class: className = \"\"\n  } = $$props;\n  const testId = `login-button-${provider?.name?.toLowerCase()}`;\n  let imageSrc = void 0;\n  if (provider?.imagesrc) {\n    imageSrc = \"./\" + provider.imagesrc;\n  }\n  if (provider) {\n    $$payload.out += \"<!--[-->\";\n    $$payload.out += `<button type=\"button\"${attr(\"data-testid\", testId)}${attr_class(clsx(className ?? \"btn preset-filled-primary-500 m-1\"), \"svelte-1gvr6jh\")}>`;\n    if (imageSrc) {\n      $$payload.out += \"<!--[-->\";\n      $$payload.out += `<img${attr(\"src\", imageSrc)}${attr(\"alt\", provider.imageAlt)} class=\"mr-2 h-8\"/>`;\n    } else {\n      $$payload.out += \"<!--[!-->\";\n    }\n    $$payload.out += `<!--]--> <span>${escape_html(buttonText)}</span></button> `;\n    if (helpText && !provider?.alt) {\n      $$payload.out += \"<!--[-->\";\n      $$payload.out += `<div class=\"help-text svelte-1gvr6jh\">${html(helpText)}</div>`;\n    } else {\n      $$payload.out += \"<!--[!-->\";\n    }\n    $$payload.out += `<!--]-->`;\n  } else {\n    $$payload.out += \"<!--[!-->\";\n    $$payload.out += `<button type=\"button\" disabled class=\"btn preset-filled-primary-500 m-1 w-full\" title=\"No provider selected\" aria-label=\"No provider selected. Please select a provider from the dropdown menu above.\"><span>Login</span></button>`;\n  }\n  $$payload.out += `<!--]-->`;\n  pop();\n}\nfunction _page($$payload, $$props) {\n  push();\n  var $$store_subs;\n  const redirectTo = store_get($$store_subs ??= {}, \"$page\", page).url.searchParams.get(\"redirectTo\") || \"/\";\n  const siteName = branding?.applicationName;\n  const description = branding?.login.description;\n  const openPicsureLinkText = branding?.login.openPicsureLinkText;\n  let selectedProvider = void 0;\n  $$payload.out += `<section id=\"logins\" class=\"flex flex-col items-center h-screen w-full text-center place-content-center text-lg\"><div id=\"title-box\" class=\"flex flex-col items-center text-center mb-8 max-w-3/4\"><h1 data-testid=\"login-title\" class=\"mb-6 w-full flex gap-2 items-center justify-center\">`;\n  Logo($$payload, { class: \"flex-none\", height: 7.5 });\n  $$payload.out += `<!----></h1> <p data-testid=\"login-description\" class=\"text-2xl\">${escape_html(description)}</p></div> `;\n  await_block(\n    $$payload,\n    store_get($$store_subs ??= {}, \"$page\", page).data?.providers,\n    () => {\n      Loading($$payload, { ring: true, size: \"medium\" });\n    },\n    (providers) => {\n      $$payload.out += `<div id=\"login-box\" class=\"w-max mt-2\"><header class=\"flex flex-col items-center\">`;\n      if (branding?.login?.showSiteName) {\n        $$payload.out += \"<!--[-->\";\n        $$payload.out += `<div>${escape_html(siteName)}</div>`;\n      } else {\n        $$payload.out += \"<!--[!-->\";\n      }\n      $$payload.out += `<!--]--></header> <div class=\"flex flex-col items-center justify-center\"><div id=\"main-logins\" class=\"grid grid-cols-1 gap-4 mb-4 w-full\">`;\n      if (providers?.length === 0) {\n        $$payload.out += \"<!--[-->\";\n        ErrorAlert($$payload, {\n          children: ($$payload2) => {\n            $$payload2.out += `<!---->No main authentication providers are registered. Please add them to your\n              configuration. Click <a class=\"anchor\" href=\"https://pic-sure.gitbook.io/pic-sure-developer-guide/configuring-pic-sure\" target=\"_blank\">Here</a> to learn how.`;\n          }\n        });\n      } else {\n        $$payload.out += \"<!--[!-->\";\n      }\n      $$payload.out += `<!--]--> `;\n      if (providers.length > 3) {\n        $$payload.out += \"<!--[-->\";\n        const each_array = ensure_array_like(providers);\n        $$payload.out += `<select id=\"login-select\" class=\"select !w-fit svelte-8v8woc\" required><option value=\"\" disabled selected class=\"svelte-8v8woc\">Select a provider</option><!--[-->`;\n        for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n          let provider = each_array[$$index];\n          $$payload.out += `<option class=\"capitalize svelte-8v8woc\"${attr(\"value\", provider.name)}>${escape_html(provider.description || provider.name)}</option>`;\n        }\n        $$payload.out += `<!--]--></select> `;\n        LoginButton($$payload, {\n          buttonText: \"Log In\",\n          provider: selectedProvider,\n          redirectTo,\n          helpText: selectedProvider?.helptext,\n          class: \"btn preset-filled-primary-500 w-full\"\n        });\n        $$payload.out += `<!---->`;\n      } else {\n        $$payload.out += \"<!--[!-->\";\n        const each_array_1 = ensure_array_like(providers);\n        $$payload.out += `<!--[-->`;\n        for (let $$index_1 = 0, $$length = each_array_1.length; $$index_1 < $$length; $$index_1++) {\n          let provider = each_array_1[$$index_1];\n          LoginButton($$payload, {\n            buttonText: provider.description || provider.name,\n            provider,\n            redirectTo,\n            helpText: provider.helptext,\n            class: \"btn preset-filled-primary-500 w-full\"\n          });\n        }\n        $$payload.out += `<!--]-->`;\n      }\n      $$payload.out += `<!--]--></div> `;\n      {\n        $$payload.out += \"<!--[-->\";\n        $$payload.out += `<a${attr(\"href\", branding?.login?.openPicsureLink || \"/\")} class=\"btn preset-outlined-primary-500 text-primary-500 hover:preset-filled-primary-5 mb-4 w-full\">${escape_html(openPicsureLinkText)}</a>`;\n      }\n      $$payload.out += `<!--]--> `;\n      await_block(\n        $$payload,\n        store_get($$store_subs ??= {}, \"$page\", page).data?.altProviders,\n        () => {\n          Loading($$payload, { ring: true });\n        },\n        (altProviders) => {\n          const each_array_2 = ensure_array_like(altProviders);\n          $$payload.out += `<div id=\"alt-logins\" class=\"grid grid-cols-1 gap-4 mb-4 w-full\"><!--[-->`;\n          for (let $$index_2 = 0, $$length = each_array_2.length; $$index_2 < $$length; $$index_2++) {\n            let provider = each_array_2[$$index_2];\n            LoginButton($$payload, {\n              buttonText: provider.description || provider.name,\n              provider,\n              redirectTo,\n              helpText: provider.helptext,\n              class: \"btn-sm preset-outlined-secondary-500 text-secondary-500 hover:preset-filled-secondary-500 hover:text-primary-500 w-full\"\n            });\n          }\n          $$payload.out += `<!--]--></div>`;\n        }\n      );\n      $$payload.out += `<!--]--></div></div>`;\n    }\n  );\n  $$payload.out += `<!--]--></section>`;\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  pop();\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}