{"version":3,"file":"Privileges-BTeK4lJj.js","sources":["../../../.svelte-kit/adapter-node/chunks/Privileges.js"],"sourcesContent":["import { i as derived, w as writable, j as get } from \"./exports.js\";\nimport { m as mapPrivilege } from \"./configuration.js\";\nimport { g as get$1, d as del } from \"./User.js\";\nconst PRIV_PATH = \"psama/privilege\";\nconst loaded = writable(false);\nconst privileges = writable([]);\nconst privilegeList = derived(privileges, ($p) => $p.map((p) => [p.name, p.uuid || \"\"]), []);\nasync function loadPrivileges() {\n  if (get(loaded)) return;\n  const res = await get$1(PRIV_PATH);\n  privileges.set(res.map(mapPrivilege));\n  loaded.set(true);\n}\nasync function getPrivilege(uuid) {\n  const store = get(privileges);\n  const privilege = store.find((p) => p.uuid === uuid);\n  if (privilege) {\n    return privilege;\n  }\n  const res = await get$1(`${PRIV_PATH}/${uuid}`);\n  return mapPrivilege(res);\n}\nasync function deletePrivilege(uuid) {\n  await del(`${PRIV_PATH}/${uuid}`);\n  const store = get(privileges);\n  const privIndex = store.findIndex((p) => p.uuid === uuid);\n  if (privIndex > -1) {\n    store.splice(privIndex, 1);\n    privileges.set(store);\n  }\n}\nconst PrivilegesStore = {\n  subscribe: privileges.subscribe,\n  privilegeList,\n  loadPrivileges\n};\nexport {\n  PrivilegesStore as P,\n  privilegeList as a,\n  deletePrivilege as d,\n  getPrivilege as g,\n  loadPrivileges as l,\n  privileges as p\n};\n"],"names":[],"mappings":";;;;AAGA,MAAM,SAAS,GAAG,iBAAiB;AACnC,MAAM,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC;AACzB,MAAC,UAAU,GAAG,QAAQ,CAAC,EAAE;AACzB,MAAC,aAAa,GAAG,OAAO,CAAC,UAAU,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE;AAC3F,eAAe,cAAc,GAAG;AAChC,EAAE,IAAI,GAAG,CAAC,MAAM,CAAC,EAAE;AACnB,EAAE,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,SAAS,CAAC;AACpC,EAAE,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AACvC,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC;AAClB;AACA,eAAe,YAAY,CAAC,IAAI,EAAE;AAClC,EAAE,MAAM,KAAK,GAAG,GAAG,CAAC,UAAU,CAAC;AAC/B,EAAE,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC;AACtD,EAAE,IAAI,SAAS,EAAE;AACjB,IAAI,OAAO,SAAS;AACpB;AACA,EAAE,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;AACjD,EAAE,OAAO,YAAY,CAAC,GAAG,CAAC;AAC1B;AACA,eAAe,eAAe,CAAC,IAAI,EAAE;AACrC,EAAE,MAAM,GAAG,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;AACnC,EAAE,MAAM,KAAK,GAAG,GAAG,CAAC,UAAU,CAAC;AAC/B,EAAE,MAAM,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC;AAC3D,EAAE,IAAI,SAAS,GAAG,EAAE,EAAE;AACtB,IAAI,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC;AAC9B,IAAI,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC;AACzB;AACA;AACK,MAAC,eAAe,GAAG;AACxB,EAAE,SAAS,EAAE,UAAU,CAAC,SAAS;AACjC,EAAE,aAAa;AACf,EAAE;AACF;;;;"}