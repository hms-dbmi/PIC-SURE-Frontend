{"version":3,"file":"PrivilegeForm-D0GdOF0l.js","sources":["../../../.svelte-kit/adapter-node/chunks/PrivilegeForm.js"],"sourcesContent":["import { a as subscribe } from \"./lifecycle.js\";\nimport { c as create_ssr_component, a as add_attribute, f as each, e as escape } from \"./ssr.js\";\nimport \"./client.js\";\nimport { g as getToastStore } from \"./stores2.js\";\nimport \"./ProgressBar.svelte_svelte_type_style_lang.js\";\nimport \"./Privileges.js\";\nimport { b as isTopAdmin } from \"./User.js\";\nconst css = {\n  code: \"label.svelte-1pdeqr{margin:0.5em 0}\",\n  map: '{\"version\":3,\"file\":\"PrivilegeForm.svelte\",\"sources\":[\"PrivilegeForm.svelte\"],\"sourcesContent\":[\"<script lang=\\\\\"ts\\\\\">import { goto } from \\\\\"$app/navigation\\\\\";\\\\nimport { getToastStore } from \\\\\"@skeletonlabs/skeleton\\\\\";\\\\nconst toastStore = getToastStore();\\\\nimport { addPrivilege, updatePrivilege } from \\\\\"$lib/stores/Privileges\\\\\";\\\\nimport { isTopAdmin } from \\\\\"$lib/stores/User\\\\\";\\\\nexport let privilege = void 0;\\\\nexport let applicationList;\\\\nlet name = privilege ? privilege.name : \\\\\"\\\\\";\\\\nlet description = privilege ? privilege.description : \\\\\"\\\\\";\\\\nlet application = privilege ? privilege.application : \\\\\"\\\\\";\\\\nasync function savePrivilege() {\\\\n  let newPrivilege = {\\\\n    name,\\\\n    description,\\\\n    application\\\\n  };\\\\n  try {\\\\n    if (privilege) {\\\\n      newPrivilege = { ...newPrivilege, uuid: privilege.uuid };\\\\n      await updatePrivilege(newPrivilege);\\\\n    } else {\\\\n      await addPrivilege(newPrivilege);\\\\n    }\\\\n    toastStore.trigger({\\\\n      message: `Successfully saved ${newPrivilege && \\\\\"new \\\\\"}privilege \\'${name}\\'`,\\\\n      background: \\\\\"variant-filled-success\\\\\"\\\\n    });\\\\n    goto(\\\\\"/admin/configuration\\\\\");\\\\n  } catch (error) {\\\\n    console.error(error);\\\\n    toastStore.trigger({\\\\n      message: `An error occured while saving ${newPrivilege && \\\\\"new \\\\\"}privilege \\'${name}\\'`,\\\\n      background: \\\\\"variant-filled-error\\\\\"\\\\n    });\\\\n  }\\\\n}\\\\n<\\/script>\\\\n\\\\n<form on:submit|preventDefault={savePrivilege} class=\\\\\"grid gap-4 my-3\\\\\">\\\\n  <fieldset data-testid=\\\\\"privilege-form\\\\\" disabled={!$isTopAdmin}>\\\\n    {#if privilege?.uuid}\\\\n      <label class=\\\\\"label\\\\\">\\\\n        <span>UUID:</span>\\\\n        <input type=\\\\\"text\\\\\" class=\\\\\"input\\\\\" value={privilege?.uuid} readonly={true} />\\\\n      </label>\\\\n    {/if}\\\\n\\\\n    <label class=\\\\\"label required\\\\\">\\\\n      <span>Name:</span>\\\\n      <input type=\\\\\"text\\\\\" bind:value={name} class=\\\\\"input\\\\\" required minlength=\\\\\"1\\\\\" maxlength=\\\\\"255\\\\\" />\\\\n    </label>\\\\n\\\\n    <label class=\\\\\"label required\\\\\">\\\\n      <span>Description:</span>\\\\n      <input\\\\n        type=\\\\\"text\\\\\"\\\\n        bind:value={description}\\\\n        class=\\\\\"input\\\\\"\\\\n        required\\\\n        minlength=\\\\\"1\\\\\"\\\\n        maxlength=\\\\\"255\\\\\"\\\\n      />\\\\n    </label>\\\\n\\\\n    <label class=\\\\\"label required\\\\\">\\\\n      <span>Application:</span>\\\\n      <select class=\\\\\"select\\\\\" bind:value={application} required>\\\\n        <option value=\\\\\"\\\\\" disabled>Select an application</option>\\\\n        {#each applicationList as [name, uuid]}\\\\n          <option value={uuid}>{name}</option>\\\\n        {/each}\\\\n      </select>\\\\n    </label>\\\\n\\\\n    <div>\\\\n      <button\\\\n        type=\\\\\"submit\\\\\"\\\\n        data-testid=\\\\\"privilege-save-btn\\\\\"\\\\n        class=\\\\\"btn variant-ghost-primary hover:variant-filled-primary\\\\\"\\\\n      >\\\\n        Save\\\\n      </button>\\\\n      <a\\\\n        href=\\\\\"/admin/configuration\\\\\"\\\\n        data-testid=\\\\\"privilege-cancel-btn\\\\\"\\\\n        class=\\\\\"btn variant-ghost-secondary hover:variant-filled-secondary\\\\\"\\\\n      >\\\\n        Cancel\\\\n      </a>\\\\n    </div>\\\\n  </fieldset>\\\\n</form>\\\\n\\\\n<style>\\\\n  label {\\\\n    margin: 0.5em 0;\\\\n  }</style>\\\\n\"],\"names\":[],\"mappings\":\"AA8FE,mBAAM,CACJ,MAAM,CAAE,KAAK,CAAC,CAChB\"}'\n};\nconst PrivilegeForm = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $isTopAdmin, $$unsubscribe_isTopAdmin;\n  $$unsubscribe_isTopAdmin = subscribe(isTopAdmin, (value) => $isTopAdmin = value);\n  getToastStore();\n  let { privilege = void 0 } = $$props;\n  let { applicationList } = $$props;\n  let name = privilege ? privilege.name : \"\";\n  let description = privilege ? privilege.description : \"\";\n  privilege ? privilege.application : \"\";\n  if ($$props.privilege === void 0 && $$bindings.privilege && privilege !== void 0) $$bindings.privilege(privilege);\n  if ($$props.applicationList === void 0 && $$bindings.applicationList && applicationList !== void 0) $$bindings.applicationList(applicationList);\n  $$result.css.add(css);\n  $$unsubscribe_isTopAdmin();\n  return `<form class=\"grid gap-4 my-3\"><fieldset data-testid=\"privilege-form\" ${!$isTopAdmin ? \"disabled\" : \"\"}>${privilege?.uuid ? `<label class=\"label svelte-1pdeqr\"><span data-svelte-h=\"svelte-xruxbf\">UUID:</span> <input type=\"text\" class=\"input\"${add_attribute(\"value\", privilege?.uuid, 0)} ${\"readonly\"}></label>` : ``} <label class=\"label required svelte-1pdeqr\"><span data-svelte-h=\"svelte-m2peuz\">Name:</span> <input type=\"text\" class=\"input\" required minlength=\"1\" maxlength=\"255\"${add_attribute(\"value\", name, 0)}></label> <label class=\"label required svelte-1pdeqr\"><span data-svelte-h=\"svelte-n5lbfe\">Description:</span> <input type=\"text\" class=\"input\" required minlength=\"1\" maxlength=\"255\"${add_attribute(\"value\", description, 0)}></label> <label class=\"label required svelte-1pdeqr\"><span data-svelte-h=\"svelte-u1sl8e\">Application:</span> <select class=\"select\" required><option value=\"\" disabled data-svelte-h=\"svelte-e5qj4t\">Select an application</option>${each(applicationList, ([name2, uuid]) => {\n    return `<option${add_attribute(\"value\", uuid, 0)}>${escape(name2)}</option>`;\n  })}</select></label> <div data-svelte-h=\"svelte-eo2lt8\"><button type=\"submit\" data-testid=\"privilege-save-btn\" class=\"btn variant-ghost-primary hover:variant-filled-primary\">Save</button> <a href=\"/admin/configuration\" data-testid=\"privilege-cancel-btn\" class=\"btn variant-ghost-secondary hover:variant-filled-secondary\">Cancel</a></div></fieldset> </form>`;\n});\nexport {\n  PrivilegeForm as P\n};\n"],"names":[],"mappings":";;;;;;;;AAOA,MAAM,GAAG,GAAG;AACZ,EAAE,IAAI,EAAE,qCAAqC;AAC7C,EAAE,GAAG,EAAE;AACP,CAAC;AACI,MAAC,aAAa,GAAG,oBAAoB,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK,KAAK;AACrF,EAAE,IAAI,WAAW,EAAE,wBAAwB;AAC3C,EAAE,wBAAwB,GAAG,SAAS,CAAC,UAAU,EAAE,CAAC,KAAK,KAAK,WAAW,GAAG,KAAK,CAAC;AAClF,EAAE,aAAa,EAAE;AACjB,EAAE,IAAI,EAAE,SAAS,GAAG,KAAK,CAAC,EAAE,GAAG,OAAO;AACtC,EAAE,IAAI,EAAE,eAAe,EAAE,GAAG,OAAO;AACnC,EAAE,IAAI,IAAI,GAAG,SAAS,GAAG,SAAS,CAAC,IAAI,GAAG,EAAE;AAC5C,EAAE,IAAI,WAAW,GAAG,SAAS,GAAG,SAAS,CAAC,WAAW,GAAG,EAAE;AAC1D,EAAE,SAAS,GAAG,SAAS,CAAC,WAAW,GAAG,EAAE;AACxC,EAAE,IAAI,OAAO,CAAC,SAAS,KAAK,KAAK,CAAC,IAAI,UAAU,CAAC,SAAS,IAAI,SAAS,KAAK,KAAK,CAAC,EAAE,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC;AACnH,EAAE,IAAI,OAAO,CAAC,eAAe,KAAK,KAAK,CAAC,IAAI,UAAU,CAAC,eAAe,IAAI,eAAe,KAAK,KAAK,CAAC,EAAE,UAAU,CAAC,eAAe,CAAC,eAAe,CAAC;AACjJ,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;AACvB,EAAE,wBAAwB,EAAE;AAC5B,EAAE,OAAO,CAAC,qEAAqE,EAAE,CAAC,WAAW,GAAG,UAAU,GAAG,EAAE,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,GAAG,CAAC,oHAAoH,EAAE,aAAa,CAAC,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,qKAAqK,EAAE,aAAa,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,qLAAqL,EAAE,aAAa,CAAC,OAAO,EAAE,WAAW,EAAE,CAAC,CAAC,CAAC,oOAAoO,EAAE,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK;AACz/B,IAAI,OAAO,CAAC,OAAO,EAAE,aAAa,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC;AAChF,GAAG,CAAC,CAAC,iWAAiW,CAAC;AACvW,CAAC;;;;"}