{"version":3,"file":"Search-D-FrJ9_r.js","sources":["../../../.svelte-kit/adapter-node/chunks/Search.js"],"sourcesContent":["import { w as writable } from \"./index2.js\";\nimport { s as searchDictionary } from \"./dictionary.js\";\nimport { g as get_store_value } from \"./utils.js\";\nconst loading = writable(\n  Promise.resolve(void 0)\n);\nconst searchTerm = writable(\"\");\nconst selectedFacets = writable([]);\nconst error = writable(\"\");\nasync function search(searchTerm2, facets, state) {\n  if (!searchTerm2 && (!facets || !facets.length)) {\n    state?.setTotalRows(0);\n    return [];\n  }\n  try {\n    const search2 = searchDictionary(searchTerm2.trim(), facets, {\n      pageNumber: state?.pageNumber ? state?.pageNumber - 1 : 0,\n      pageSize: state?.rowsPerPage\n    });\n    loading.set(search2);\n    const response = await search2;\n    state?.setTotalRows(response.totalElements);\n    return response.content;\n  } catch (e) {\n    console.error(e);\n    error.set(\n      \"An error occurred while searching. If the problem persists, please contact an administrator.\"\n    );\n    state?.setTotalRows(0);\n    return [];\n  }\n}\nasync function updateFacet(newFacet, facetCategory) {\n  if (facetCategory) {\n    newFacet.categoryRef = {\n      display: facetCategory.display,\n      name: facetCategory.name,\n      description: facetCategory.description\n    };\n  }\n  try {\n    selectedFacets.update((facets) => {\n      const index = facets.findIndex((facet) => facet.name === newFacet.name);\n      if (index === -1) {\n        facets.push(newFacet);\n      } else {\n        facets.splice(index, 1);\n      }\n      selectedFacets.set(get_store_value(selectedFacets).sort((a, b) => b.count - a.count));\n      return facets;\n    });\n  } catch (e) {\n    console.error(e);\n    return;\n  }\n}\nfunction resetSearch() {\n  searchTerm.set(\"\");\n  selectedFacets.set([]);\n  error.set(\"\");\n}\nconst SearchStore = {\n  selectedFacets,\n  searchTerm,\n  error,\n  search,\n  updateFacet,\n  resetSearch\n};\nexport {\n  SearchStore as S,\n  searchTerm as a,\n  loading as l,\n  selectedFacets as s\n};\n"],"names":[],"mappings":"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"}